<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="马浩珍在 Github 上的个人博客">
    <meta name="keyword" content="null">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-person-128.png">
    <link rel="alternate" type="application/atom+xml" title="Haojen" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        greasemonkey script｜Haojen&#39;s blog
        
    </title>

    <link rel="canonical" href="http://agehua.github.io/2015/06/24/2015-06-24-greasemonkey-script/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
</head>

<style>

    header.intro-header {
        background-image: url('//o7bkkhiex.bkt.clouddn.com/lion-blur-bg.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    Haojen
                </span>
                's Blog
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="">


<style>
    
    header.intro-header {
        background-image: url('')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>greasemonkey script</h1>
                    
                    <span class="meta">
                         作者 Haojen Ma
                        <span>
                          日期 2015-06-24
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            greasemonkey script
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-1 col-sm-9 post-container">
                <p>没什么内容，慎看。</p>
<h2 id="how-to-write-a-Greasemonkey-script"><a href="#how-to-write-a-Greasemonkey-script" class="headerlink" title="how to write a Greasemonkey script"></a>how to write a Greasemonkey script</h2><p>Greasemonkey是火狐下面的一个扩展应用，通过它安装一些用户自定义的脚本，这脚本可以在浏览器运行的时候，对网页进行实时的改变。在chrome上也有一个对应的插件Tampermonkey。<br>这个工具很强大，我们可以添加自己脚本，来年完成一些我们自己想要完成的功能。</p>
<p>下面用给一个例子来介绍写这个脚本相关的知识。</p>
<a id="more"></a>
<h2 id="Metadata-Block"><a href="#Metadata-Block" class="headerlink" title="Metadata Block"></a>Metadata Block</h2><p>我在chrome上使用的是Tampermonkey的插件。先创建一个新的脚本。新脚本的内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// ==UserScript==</span></div><div class="line"><span class="comment">// @name         My Fancy New Userscript</span></div><div class="line"><span class="comment">// @namespace    http://your.homepage/</span></div><div class="line"><span class="comment">// @version      0.1</span></div><div class="line"><span class="comment">// @description  enter something useful</span></div><div class="line"><span class="comment">// @author       You</span></div><div class="line"><span class="comment">// @match        http://www.webmonkey.com/2010/02/get_started_with_greasemonkey/</span></div><div class="line"><span class="comment">// @grant        none</span></div><div class="line"><span class="comment">// ==/UserScript==</span></div></pre></td></tr></table></figure>
<p>这个部分就是脚本的metadata部分，关于各个字段的定义，可以参考这里<br><a href="http://wiki.greasespot.net/Metadata_Block" target="_blank" rel="external">http://wiki.greasespot.net/Metadata_Block</a></p>
<p>下面是一些比较重要的字段的介绍</p>
<ul>
<li>@include和@exclude，这两个字段用于匹配脚本作用的url，如果没有定义@include，那么将会匹配所有的url。参考：<a href="http://wiki.greasespot.net/Include_and_exclude_rules。同时这两个字段还支持正则表达式的匹配。" target="_blank" rel="external">http://wiki.greasespot.net/Include_and_exclude_rules。同时这两个字段还支持正则表达式的匹配。</a></li>
<li>@match字段与@include字段类似的。在匹配<code>*</code>但它更为安全，对于匹配更加细致的规则，chrome先实现的是@match。参考<a href="https://developer.chrome.com/extensions/match_patterns" target="_blank" rel="external">https://developer.chrome.com/extensions/match_patterns</a></li>
<li>@namespace和@name字段，可保证相同@namespace和@name下的不同版本的脚本，只有一个被安装。</li>
<li>@run-at，用于控制脚本运行的时机，有两个可选值： document-end and document-start.</li>
<li>@updateURL， 用于脚本的升级，如果版本更新，脚本会提示用户是否升级。</li>
<li>@require，下载需要的脚本，在安装greasescript的时候，一起下载和安装。所以只会下载一次</li>
</ul>
<h2 id="implement-your-code"><a href="#implement-your-code" class="headerlink" title="implement your code"></a>implement your code</h2><p>在实现你的脚本的功能的时候，可以使用原生的js，也可以使用jquery等工具。使用@require关键字。参考<a href="http://stackoverflow.com/questions/859024/how-can-i-use-jquery-in-greasemonkey" target="_blank" rel="external">How can I use jQuery in Greasemonkey?</a></p>
<p>可以参考以下的一些资料。<br>例如：<br><a href="http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Pitfall_.231:_Auto-eval_Strings" target="_blank" rel="external">Avoid Common Pitfalls in Greasemonkey</a><br>中提到的使用addEventListener。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> elmLink = <span class="built_in">document</span>.getElementById(<span class="string">'somelink'</span>);</div><div class="line">elmLink.addEventListener(<span class="string">"click"</span>, my_func, <span class="literal">true</span>);</div></pre></td></tr></table></figure>
<p><a href="http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Avoid_Common_Pitfalls" target="_blank" rel="external">Common Pitfalls</a></p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p><a href="http://userscripts-mirror.org/scripts/review/292083" target="_blank" rel="external">highlight text</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// ==UserScript==</span></div><div class="line"><span class="comment">// @name          Text Highlighter</span></div><div class="line"><span class="comment">// @namespace     erosman</span></div><div class="line"><span class="comment">// @description   Highlights User-defined Text</span></div><div class="line"><span class="comment">// @updateURL     https://userscripts.org/scripts/source/292083.meta.js</span></div><div class="line"><span class="comment">// @downloadURL   https://userscripts.org/scripts/source/292083.user.js</span></div><div class="line"><span class="comment">// @exclude       *</span></div><div class="line"><span class="comment">// @grant         GM_registerMenuCommand</span></div><div class="line"><span class="comment">// @grant         GM_setValue</span></div><div class="line"><span class="comment">// @grant         GM_getValue</span></div><div class="line"><span class="comment">// @author        erosman</span></div><div class="line"><span class="comment">// @version       1.7</span></div><div class="line"><span class="comment">// ==/UserScript==</span></div><div class="line"></div><div class="line"><span class="comment">/* --------- Note ---------</span></div><div class="line">  This script highlights User-defined case-insensitive Text on a page.</div><div class="line"></div><div class="line">  It can run on any page but that adds unnecessary load to your computer.</div><div class="line">  I have set it not to run on any page for now</div><div class="line"></div><div class="line">  Go to Add-ons - User Scripts ('Ctrl+ Shift + a' on Firefox)</div><div class="line">  Click on the Script's Option</div><div class="line">  Under User Settings Tab, Add Included/Excluded Pages that you want the script to run on</div><div class="line">  Click OK</div><div class="line"></div><div class="line">  Setting Keywords &amp; Highlight Style:</div><div class="line">  Click on GreaseMonkey Icon</div><div class="line">  User Scripts Commands...</div><div class="line"></div><div class="line">      Set Keywords</div><div class="line">      Input keywords separated by comma</div><div class="line">      Example: word 1,word 2,word 3</div><div class="line"></div><div class="line">      Set Highlight Style</div><div class="line">      Input the Highlight Style (use proper CSS)</div><div class="line">      Example: color: #f00; font-weight: bold; background-color: #ffe4b5;</div><div class="line"></div><div class="line">  <span class="doctag">Note:</span> If you find that another script clashes with this script, set Text Highlighter to Execute first.</div><div class="line">  Go to Add-ons - User Scripts ('Ctrl+ Shift + a' on Firefox)</div><div class="line">  Right Click on the Script</div><div class="line">  On the context menu click: Execute first</div><div class="line"></div><div class="line">  On Add-ons - User Scripts, you can also Click on the Execution Order (top Right) and</div><div class="line">  change the execution order so that Text Highlighter runs before those scripts that clashes with it.</div><div class="line"></div><div class="line"></div><div class="line">  --------- History ---------</div><div class="line"></div><div class="line">  1.7 Changed script from matching whole words to do partial word match </div><div class="line">      similar to browser's FIND + escaped RegEx Quantifiers in keywords</div><div class="line">  1.6 Code Improvement, using test()</div><div class="line">  1.5 Code Improvement</div><div class="line">  1.4 Code Improvement + Added support for non-English Words</div><div class="line">  1.3 Code Improvement, 10x speed increase</div><div class="line">  1.2 Added User Script Commands, script can now be auto-updated without losing User Data</div><div class="line">  1.1 Total Code rewrite, Xpath pattern</div><div class="line">  1.0 Initial release</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// anonymous function wrapper, used for error checking &amp; limiting scope</span></div><div class="line"><span class="meta">    'use strict'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.self !== <span class="built_in">window</span>.top) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125; <span class="comment">// end execution if in a frame</span></div><div class="line"></div><div class="line">    <span class="comment">// setting User Preferences</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setUserPref</span>(<span class="params">varName, defaultVal, menuText, promtText, sep</span>) </span>&#123;</div><div class="line"></div><div class="line">        GM_registerMenuCommand(menuText, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">var</span> val = prompt(promtText, GM_getValue(varName, defaultVal));</div><div class="line">            <span class="keyword">if</span> (val === <span class="literal">null</span>) &#123;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125; <span class="comment">// end execution if clicked CANCEL</span></div><div class="line"></div><div class="line">            <span class="comment">// prepare string of variables separated by the separator</span></div><div class="line">            <span class="keyword">if</span> (sep &amp;&amp; val) &#123;</div><div class="line">                <span class="keyword">var</span> pat1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\\s*'</span> + sep + <span class="string">'+\\s*'</span>, <span class="string">'g'</span>); <span class="comment">// trim space/s around separator &amp; trim repeated separator</span></div><div class="line">                <span class="keyword">var</span> pat2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(?:^'</span> + sep + <span class="string">'+|'</span> + sep + <span class="string">'+$)'</span>, <span class="string">'g'</span>); <span class="comment">// trim starting &amp; trailing separator</span></div><div class="line"></div><div class="line">                val = val.replace(pat1, sep).replace(pat2, <span class="string">''</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            val = val.replace(<span class="regexp">/\s&#123;2,&#125;/g</span>, <span class="string">' '</span>).trim(); <span class="comment">// remove multiple spaces and trim</span></div><div class="line">            GM_setValue(varName, val);</div><div class="line">            location.reload(); <span class="comment">// reload the page with the new changes</span></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// prepare UserPrefs</span></div><div class="line">    setUserPref(</div><div class="line">        <span class="string">'keywords'</span>,</div><div class="line">        <span class="string">'word 1,word 2,word 3'</span>,</div><div class="line">        <span class="string">'Set Keywords'</span>,</div><div class="line">        <span class="string">'Set keywords separated by comma\t\t\t\t\t\t\t\r\n\r\nExample:\r\nword 1,word 2,word 3'</span>,</div><div class="line">        <span class="string">','</span></div><div class="line">    );</div><div class="line"></div><div class="line"></div><div class="line">    setUserPref(</div><div class="line">        <span class="string">'highlightStyle'</span>,</div><div class="line">        <span class="string">'color: #f00; background-color: #ffebcd;'</span>,</div><div class="line">        <span class="string">'Set Highlight Style'</span>,</div><div class="line">        <span class="string">'Set the Highlight Style (use proper CSS)\r\n\r\nExample:\r\ncolor: #f00; font-weight: bold; background-color: #ffe4b5;'</span></div><div class="line">    );</div><div class="line"></div><div class="line">    <span class="keyword">var</span> highlightStyle = GM_getValue(<span class="string">'highlightStyle'</span>);</div><div class="line">    <span class="keyword">var</span> keywords = GM_getValue(<span class="string">'keywords'</span>);</div><div class="line">    <span class="keyword">if</span> (!keywords || !highlightStyle) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125; <span class="comment">// end execution if not found</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> rQuantifiers = <span class="regexp">/[-\/\\^$*+?.()|[\]&#123;&#125;]/g</span>;</div><div class="line">    <span class="keyword">var</span> keywords = keywords.replace(rQuantifiers, <span class="string">'\\$&amp;'</span>).split(<span class="string">','</span>).join(<span class="string">'|'</span>);</div><div class="line">    <span class="keyword">var</span> pat = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'('</span> + keywords + <span class="string">')'</span>, <span class="string">'gi'</span>);</div><div class="line">    <span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// getting all text nodes with a few exceptions</span></div><div class="line">    <span class="keyword">var</span> snapElements = <span class="built_in">document</span>.evaluate(</div><div class="line">        <span class="string">'.//text()[normalize-space() != "" '</span> +</div><div class="line">        <span class="string">'and not(ancestor::style) '</span> +</div><div class="line">        <span class="string">'and not(ancestor::script) '</span> +</div><div class="line">        <span class="string">'and not(ancestor::textarea) '</span> +</div><div class="line">        <span class="string">'and not(ancestor::code) '</span> +</div><div class="line">        <span class="string">'and not(ancestor::pre)]'</span>,</div><div class="line">        <span class="built_in">document</span>.body, <span class="literal">null</span>, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, <span class="literal">null</span>);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!snapElements.snapshotItem(<span class="number">0</span>)) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125; <span class="comment">// end execution if not found</span></div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = snapElements.snapshotLength; i &lt; len; i++) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">var</span> node = snapElements.snapshotItem(i);</div><div class="line"></div><div class="line">        <span class="comment">// check if it contains the keywords</span></div><div class="line">        <span class="keyword">if</span> (pat.test(node.nodeValue)) &#123;</div><div class="line"></div><div class="line">            <span class="comment">// create an element, replace the text node with an element</span></div><div class="line">            <span class="keyword">var</span> sp = span.cloneNode(<span class="literal">true</span>);</div><div class="line">            sp.innerHTML = node.nodeValue.replace(pat, <span class="string">'&lt;span style="'</span> + highlightStyle + <span class="string">'"&gt;$1&lt;/span&gt;'</span>);</div><div class="line">            node.parentNode.replaceChild(sp, node);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>highlight of a given text</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">Well, you can definitely <span class="keyword">do</span> <span class="keyword">this</span> <span class="keyword">in</span> Greasemonkey. As far <span class="keyword">as</span> I know, Stylish is just a CSS manager, and can not <span class="keyword">do</span> <span class="keyword">this</span>. I made a Greasemonkey user script does a general highlight <span class="keyword">of</span> a given text. The version below runs on YA, and highlights instances <span class="keyword">of</span> <span class="string">""</span> <span class="keyword">in</span> blue. :) You can obviously configure it to suit your needs. </div><div class="line"></div><div class="line">Also note there may be bugs. </div><div class="line"></div><div class="line"><span class="comment">/* Copyright (C) 2007 Matthew Flaschen &lt;matthew DOT flaschen AT gatech DOT edu&gt; </span></div><div class="line"></div><div class="line">This program is free software; you can redistribute it and/or modify </div><div class="line">it under the terms of the GNU General Public License as published by </div><div class="line">the Free Software Foundation; either version 2 of the License, or </div><div class="line">(at your option) any later version. </div><div class="line"></div><div class="line">This program is distributed in the hope that it will be useful, </div><div class="line">but WITHOUT ANY WARRANTY; without even the implied warranty of </div><div class="line">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the </div><div class="line">GNU General Public License for more details. </div><div class="line"></div><div class="line">You should have received a copy of the GNU General Public License along </div><div class="line">with this program; if not, write to the Free Software Foundation, Inc., </div><div class="line">51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA. </div><div class="line"></div><div class="line">The GPL is also available at http://www.gnu.org/copyleft/gpl.html </div><div class="line">*/ </div><div class="line"></div><div class="line"><span class="keyword">var</span> TEXT = <span class="string">""</span>; </div><div class="line"><span class="keyword">var</span> COLOR = <span class="string">"blue"</span>; </div><div class="line"></div><div class="line"><span class="keyword">var</span> allText = <span class="built_in">document</span>.evaluate( <span class="string">"//text()[contains(., '"</span> + TEXT + <span class="string">"' )]"</span>, <span class="built_in">document</span>, <span class="literal">null</span>, XPathResult. ORDERED_NODE_SNAPSHOT_TYPE , <span class="literal">null</span>); </div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; allText.snapshotLength; i++) &#123;</div><div class="line">    <span class="keyword">var</span> cur = allText.snapshotItem(i);</div><div class="line">    <span class="keyword">var</span> par = cur.parentNode;</div><div class="line">    <span class="keyword">var</span> textInd;</div><div class="line">    <span class="keyword">var</span> curName = cur.nodeName;</div><div class="line">    <span class="keyword">do</span> &#123;</div><div class="line">        <span class="keyword">var</span> curText = cur.nodeValue;</div><div class="line">        GM_log(<span class="string">"curText: "</span> + curText);</div><div class="line">        textInd = curText.indexOf(TEXT);</div><div class="line">        <span class="keyword">if</span> (textInd != <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">var</span> before = <span class="built_in">document</span>.createTextNode(curText.substring(<span class="number">0</span>, textInd));</div><div class="line">            <span class="keyword">var</span> highlight = <span class="built_in">document</span>.createElement(<span class="string">"span"</span>);</div><div class="line">            highlight.class = <span class="string">"highlight"</span>;</div><div class="line">            highlight.textContent = TEXT;</div><div class="line">            highlight.style.color = COLOR;</div><div class="line">            <span class="keyword">var</span> after = <span class="built_in">document</span>.createTextNode(curText.substring(textInd + TEXT.length));</div><div class="line">            par.insertBefore(before, cur);</div><div class="line">            par.insertBefore(highlight, cur);</div><div class="line">            par.insertBefore(after, cur);</div><div class="line">            par.removeChild(cur);</div><div class="line">            cur = after;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">while</span> (textInd != <span class="number">-1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="http://userscripts-mirror.org/scripts/review/2254" target="_blank" rel="external">linkify ting</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// This script looks for any thing of the form</span></div><div class="line"><span class="comment">// [something not blank][a dot][something not blank], </span></div><div class="line"><span class="comment">// then matches that which comes after the dot - and possibly before a slash - </span></div><div class="line"><span class="comment">// with a list of know extensions, such as com, us, net etc. </span></div><div class="line"><span class="comment">// If it has such an extension, it is turned into a link. </span></div><div class="line"><span class="comment">// This way the script attempts to catch links like</span></div><div class="line"><span class="comment">// google.com and userscripts.org/tag/link.</span></div><div class="line"><span class="comment">// Because the script looks up extensions in a list, </span></div><div class="line"><span class="comment">// you might want to alter the list (lovligeEndelser) to fit your needs. </span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// The script is borrows a bit from the ÂLinkify PlusÂ script </span></div><div class="line"><span class="comment">// (especially the parent not a | head | etc -  thing). And therefore the following </span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//- - - </span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Loosely based on the Linkify script located at:</span></div><div class="line"><span class="comment">//   http://downloads.mozdev.org/greasemonkey/linkify.user.js</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Originally written by Anthony Lieuallen of http://www.arantius.com/</span></div><div class="line"><span class="comment">// Licensed for unlimited modification and redistribution as long as</span></div><div class="line"><span class="comment">// this notice is kept intact.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// If possible, please contact me regarding new features, bugfixes</span></div><div class="line"><span class="comment">// or changes that I could integrate into the existing code instead of</span></div><div class="line"><span class="comment">// creating a different script.  Thank you</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">//- - -</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// for my sake you may do what you want with the script, </span></div><div class="line"><span class="comment">// but you should keep the notice by Anthony Lieuallen</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// adam</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// ==UserScript==</span></div><div class="line"><span class="comment">// @name          Linkify ting</span></div><div class="line"><span class="comment">// @namespace     http://ergosum.frac.dk/user/</span></div><div class="line"><span class="comment">// @description   Turn plain text links into real clikable links. Attempts to catch links like google.com</span></div><div class="line"><span class="comment">// @include       *</span></div><div class="line"><span class="comment">// @exclude       http://*.google.*/*</span></div><div class="line"><span class="comment">// ==/UserScript==</span></div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    <span class="comment">//dk|com|net|org|se|no|nl|us|uk|de|it|nu|edu|info</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> regex = <span class="regexp">/\b(http:\/\/|shttp:\/\/)&#123;0,1&#125;(\w(\w|-)+\.)+(dk|com|net|org|se|no|nl|us|uk|de|it|nu|edu|info)(\/\w*)*(\.\w&#123;2,4&#125;)&#123;0,1&#125;(\?\w*|#\w*|&amp;\w*)*\b/gi</span>;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> altText, tekst, muligtLink;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> ikkeTilladteTags = [<span class="string">'a'</span>, <span class="string">'head'</span>, <span class="string">'script'</span>, <span class="string">'style'</span>, <span class="string">'textarea'</span>, <span class="string">'title'</span>, <span class="string">'option'</span>, <span class="string">'pre'</span>, <span class="string">'code'</span>]; <span class="comment">//tags, hvor det der stÃ¥r inden i ikke skal vÃ¦re links</span></div><div class="line">    <span class="keyword">var</span> path = <span class="string">"//text()[not(parent::"</span> + ikkeTilladteTags.join(<span class="string">" or parent::"</span>) + <span class="string">")]"</span>;</div><div class="line"></div><div class="line">    altText = <span class="built_in">document</span>.evaluate(path, <span class="built_in">document</span>, <span class="literal">null</span>, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, <span class="literal">null</span>);</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; altText.snapshotLength; i++) &#123;</div><div class="line"></div><div class="line">        tekst = altText.snapshotItem(i);</div><div class="line">        muligtLink = tekst.nodeValue;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (regex.test(muligtLink)) &#123;</div><div class="line"></div><div class="line">            <span class="comment">//til at holde det nye link, og teksten omkring det</span></div><div class="line">            <span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</div><div class="line">            <span class="comment">//tekst.parentNode.replaceChild(span, tekst);</span></div><div class="line">            <span class="comment">//alert("parent:" + span.parentNode);</span></div><div class="line"></div><div class="line">            <span class="keyword">var</span> lastLastIndex = <span class="number">0</span>;</div><div class="line">            regex.lastIndex = <span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span> (myArray = <span class="literal">null</span>; myArray = regex.exec(muligtLink);) &#123;</div><div class="line">                <span class="comment">//vores match gemmes</span></div><div class="line">                <span class="keyword">var</span> link = myArray[<span class="number">0</span>];</div><div class="line"></div><div class="line">                <span class="comment">//alert("har fundet dette link: " + link);</span></div><div class="line"></div><div class="line">                span.appendChild(<span class="built_in">document</span>.createTextNode(muligtLink.substring(lastLastIndex, myArray.index))); <span class="comment">//indsæt det der kommer før dette hit</span></div><div class="line"></div><div class="line">                <span class="keyword">var</span> href = link;</div><div class="line"></div><div class="line">                <span class="comment">//sætter http:// foran href, hvis der ikke er det</span></div><div class="line">                <span class="keyword">var</span> prefix = <span class="string">''</span>;</div><div class="line">                <span class="keyword">if</span> (href.length &gt; <span class="number">7</span>) &#123;</div><div class="line">                    prefix = href.substring(<span class="number">0</span>, <span class="number">7</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (prefix.toLowerCase() != <span class="string">'http://'</span>) &#123;</div><div class="line">                    href = <span class="string">'http://'</span> + href;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">//skab vores link:</span></div><div class="line">                <span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</div><div class="line">                a.setAttribute(<span class="string">'href'</span>, href); <span class="comment">//giv det en href</span></div><div class="line">                a.appendChild(<span class="built_in">document</span>.createTextNode(link)); <span class="comment">//linkteksten</span></div><div class="line">                span.appendChild(a); <span class="comment">//sætter ind i span</span></div><div class="line"></div><div class="line">                lastLastIndex = regex.lastIndex;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            span.appendChild(<span class="built_in">document</span>.createTextNode(muligtLink.substring(lastLastIndex))); <span class="comment">//insæt det der kommer efter sidste hit</span></div><div class="line">            tekst.parentNode.replaceChild(span, tekst);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">    alert(e);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="https://greasyfork.org/en/scripts/2709-linkify-plus/code" target="_blank" rel="external">linkify-plus</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">// ==UserScript==</span></div><div class="line"><span class="comment">// @name        Linkify Plus</span></div><div class="line"><span class="comment">// @version     2.1.4</span></div><div class="line"><span class="comment">// @namespace   http://arantius.com/misc/greasemonkey/</span></div><div class="line"><span class="comment">// @description Turn plain text URLs into links.  Supports http, https, ftp, email addresses.</span></div><div class="line"><span class="comment">// @include     http*</span></div><div class="line"><span class="comment">// @exclude     http://www.google.tld/search*</span></div><div class="line"><span class="comment">// @exclude     https://www.google.tld/search*</span></div><div class="line"><span class="comment">// @exclude     http://music.google.com/*</span></div><div class="line"><span class="comment">// @exclude     https://music.google.com/*</span></div><div class="line"><span class="comment">// @exclude     http://mail.google.com/*</span></div><div class="line"><span class="comment">// @exclude     https://mail.google.com/*</span></div><div class="line"><span class="comment">// @exclude     http://docs.google.com/*</span></div><div class="line"><span class="comment">// @exclude     https://docs.google.com/*</span></div><div class="line"><span class="comment">// @exclude     http://mxr.mozilla.org/*</span></div><div class="line"><span class="comment">// ==/UserScript==</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Copyright (c) 2011, Anthony Lieuallen</span></div><div class="line"><span class="comment">// All rights reserved.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Redistribution and use in source and binary forms, with or without</span></div><div class="line"><span class="comment">// modification, are permitted provided that the following conditions are met:</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// * Redistributions of source code must retain the above copyright notice, </span></div><div class="line"><span class="comment">//   this list of conditions and the following disclaimer.</span></div><div class="line"><span class="comment">// * Redistributions in binary form must reproduce the above copyright notice, </span></div><div class="line"><span class="comment">//   this list of conditions and the following disclaimer in the documentation </span></div><div class="line"><span class="comment">//   and/or other materials provided with the distribution.</span></div><div class="line"><span class="comment">// * Neither the name of Anthony Lieuallen nor the names of its contributors </span></div><div class="line"><span class="comment">//   may be used to endorse or promote products derived from this software </span></div><div class="line"><span class="comment">//   without specific prior written permission.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" </span></div><div class="line"><span class="comment">// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE </span></div><div class="line"><span class="comment">// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE </span></div><div class="line"><span class="comment">// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE </span></div><div class="line"><span class="comment">// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR </span></div><div class="line"><span class="comment">// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF </span></div><div class="line"><span class="comment">// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS </span></div><div class="line"><span class="comment">// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div><div class="line"><span class="comment">// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) </span></div><div class="line"><span class="comment">// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE </span></div><div class="line"><span class="comment">// POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><span class="comment">//</span></div><div class="line"></div><div class="line"><span class="comment">/*******************************************************************************</span></div><div class="line">Loosely based on the Linkify script located at:</div><div class="line">  http://downloads.mozdev.org/greasemonkey/linkify.user.js</div><div class="line"></div><div class="line">Version history:</div><div class="line"> Version 2.1.4 (Aug 12, 2012):</div><div class="line">  - Bug fix for when (only some) nodes have been removed from the document.</div><div class="line"> Version 2.1.3 (Oct 24, 2011):</div><div class="line">  - More excludes.</div><div class="line"> Version 2.1.2:</div><div class="line">  - Some bug fixes.</div><div class="line"> Version 2.1.1:</div><div class="line">  - Ignore certain "highlighter" script containers.</div><div class="line"> Version 2.1:</div><div class="line">  - Rewrite the regular expression to be more readable.</div><div class="line">  - Fix trailing "." characters.</div><div class="line"> Version 2.0.3:</div><div class="line">  - Fix infinite recursion on X(HT)ML pages.</div><div class="line"> Version 2.0.2:</div><div class="line">  - Limit @include, for greater site/plugin compatibility.</div><div class="line"> Version 2.0.1:</div><div class="line">  - Fix aberrant 'mailto:' where it does not belong.</div><div class="line"> Version 2.0:</div><div class="line">  - Apply incrementally, so the browser does not hang on large pages.</div><div class="line">  - Continually apply to new content added to the page (i.e. AJAX).</div><div class="line"> Version 1.1.4:</div><div class="line">  - Basic "don't screw up xml pretty printing" exception case</div><div class="line"> Version 1.1.3:</div><div class="line">  - Include "+" in the username of email addresses.</div><div class="line"> Version 1.1.2:</div><div class="line">  - Include "." in the username of email addresses.</div><div class="line"> Version 1.1:</div><div class="line">  - Fixed a big that caused the first link in a piece of text to</div><div class="line">    be skipped (i.e. not linkified).</div><div class="line">*******************************************************************************/</div><div class="line"></div><div class="line"><span class="keyword">var</span> notInTags = [</div><div class="line">    <span class="string">'a'</span>, <span class="string">'code'</span>, <span class="string">'head'</span>, <span class="string">'noscript'</span>, <span class="string">'option'</span>, <span class="string">'script'</span>, <span class="string">'style'</span>,</div><div class="line">    <span class="string">'title'</span>, <span class="string">'textarea'</span></div><div class="line">];</div><div class="line"><span class="keyword">var</span> textNodeXpath =</div><div class="line">    <span class="string">".//text()[not(ancestor::"</span> + notInTags.join(<span class="string">') and not(ancestor::'</span>) + <span class="string">")]"</span>;</div><div class="line"><span class="comment">// Built based on:</span></div><div class="line"><span class="comment">//  - http://en.wikipedia.org/wiki/URI_scheme</span></div><div class="line"><span class="comment">//  - http://www.regular-expressions.info/regexbuddy/email.html</span></div><div class="line"><span class="keyword">var</span> urlRE = <span class="keyword">new</span> <span class="built_in">RegExp</span>(</div><div class="line">    <span class="string">'('</span></div><div class="line">    <span class="comment">// leading scheme:// or "www."</span></div><div class="line">    + <span class="string">'\\b([a-z][-a-z0-9+.]+://|www\\.)'</span></div><div class="line">    <span class="comment">// everything until non-URL character</span></div><div class="line">    + <span class="string">'[^\\s\'"&lt;&gt;()]+'</span> + <span class="string">'|'</span></div><div class="line">    <span class="comment">// email</span></div><div class="line">    + <span class="string">'\\b[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]&#123;2,4&#125;\\b'</span> + <span class="string">')'</span>, <span class="string">'gi'</span>);</div><div class="line"><span class="keyword">var</span> queue = [];</div><div class="line"></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"></div><div class="line">linkifyContainer(<span class="built_in">document</span>.body);</div><div class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'DOMNodeInserted'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    linkifyContainer(event.target);</div><div class="line">&#125;, <span class="literal">false</span>);</div><div class="line"></div><div class="line"><span class="comment">/******************************************************************************/</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">linkifyContainer</span>(<span class="params">container</span>) </span>&#123;</div><div class="line">    <span class="comment">// Prevent infinite recursion, in case X(HT)ML documents with namespaces</span></div><div class="line">    <span class="comment">// break the XPath's attempt to do so.  (Don't evaluate spans we put our</span></div><div class="line">    <span class="comment">// classname into.)</span></div><div class="line">    <span class="keyword">if</span> (container.className &amp;&amp; container.className.match(<span class="regexp">/\blinkifyplus\b/</span>)) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> xpathResult = <span class="built_in">document</span>.evaluate(</div><div class="line">        textNodeXpath, container, <span class="literal">null</span>,</div><div class="line">        XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, <span class="literal">null</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">continuation</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> node = <span class="literal">null</span>,</div><div class="line">            counter = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (node = xpathResult.snapshotItem(i++)) &#123;</div><div class="line">            <span class="keyword">var</span> parent = node.parentNode;</div><div class="line">            <span class="keyword">if</span> (!parent) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">            <span class="comment">// Skip styled &lt;pre&gt; -- often highlighted by script.</span></div><div class="line">            <span class="keyword">if</span> (<span class="string">'PRE'</span> == parent.tagName &amp;&amp; parent.className) <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">            linkifyTextNode(node);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (++counter &gt; <span class="number">50</span>) &#123;</div><div class="line">                <span class="keyword">return</span> setTimeout(continuation, <span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    setTimeout(continuation, <span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">linkifyTextNode</span>(<span class="params">node</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i, l, m;</div><div class="line">    <span class="keyword">var</span> txt = node.textContent;</div><div class="line">    <span class="keyword">var</span> span = <span class="literal">null</span>;</div><div class="line">    <span class="keyword">var</span> p = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (m = urlRE.exec(txt)) &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == span) &#123;</div><div class="line">            <span class="comment">// Create a span to hold the new text with links in it.</span></div><div class="line">            span = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</div><div class="line">            span.className = <span class="string">'linkifyplus'</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//get the link without trailing dots</span></div><div class="line">        l = m[<span class="number">0</span>].replace(<span class="regexp">/\.*$/</span>, <span class="string">''</span>);</div><div class="line">        <span class="keyword">var</span> lLen = l.length;</div><div class="line">        <span class="comment">//put in text up to the link</span></div><div class="line">        span.appendChild(<span class="built_in">document</span>.createTextNode(txt.substring(p, m.index)));</div><div class="line">        <span class="comment">//create a link and put it in the span</span></div><div class="line">        a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</div><div class="line">        a.className = <span class="string">'linkifyplus'</span>;</div><div class="line">        a.appendChild(<span class="built_in">document</span>.createTextNode(l));</div><div class="line">        <span class="keyword">if</span> (l.indexOf(<span class="string">":/"</span>) &lt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (l.indexOf(<span class="string">"@"</span>) &gt; <span class="number">0</span>) &#123;</div><div class="line">                l = <span class="string">"mailto:"</span> + l;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                l = <span class="string">"http://"</span> + l;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        a.setAttribute(<span class="string">'href'</span>, l);</div><div class="line">        span.appendChild(a);</div><div class="line">        <span class="comment">//track insertion point</span></div><div class="line">        p = m.index + lLen;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (span) &#123;</div><div class="line">        <span class="comment">//take the text after the last link</span></div><div class="line">        span.appendChild(<span class="built_in">document</span>.createTextNode(txt.substring(p, txt.length)));</div><div class="line">        <span class="comment">//replace the original text with the new span</span></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            node.parentNode.replaceChild(span, node);</div><div class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">            <span class="built_in">console</span>.error(e);</div><div class="line">            <span class="built_in">console</span>.log(node);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

                <hr>
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/06/26/2015-06-26-apache-vedio-streaming/" data-toggle="tooltip" data-placement="top"
                           title="apache vedio streaming">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2015/06/05/2015-06-05-git-crlf/" data-toggle="tooltip" data-placement="top"
                           title="git crlf">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                

                

            </div>

            <div class="hidden-xs col-sm-3 toc-col">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#how-to-write-a-Greasemonkey-script"><span class="toc-text">how to write a Greasemonkey script</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Metadata-Block"><span class="toc-text">Metadata Block</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#implement-your-code"><span class="toc-text">implement your code</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#例子"><span class="toc-text">例子</span></a></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>






<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/agehua">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/agehua">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/agehua">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Haojen 2016
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                    <br>
                    Theme by <a href="https://haojen.github.io/">Haojen Ma</a>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/blog.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://agehua.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>

<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','null','2.0.0');
</script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="null">
</body>

</html>
