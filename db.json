{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/avatar.png","path":"images/avatar.png","modified":1,"renderable":0},{"_id":"themes/icarus/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/icarus/source/images/avatar.png","path":"images/avatar.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/insight.js","path":"js/insight.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"source/images/blogimages/2016/androidart_broadcastreceiver1.png","path":"images/blogimages/2016/androidart_broadcastreceiver1.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/avg_warning.PNG","path":"images/blogimages/2016/avg_warning.PNG","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/google_servcie_ads.PNG","path":"images/blogimages/2016/google_servcie_ads.PNG","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/gradle_structure1.png","path":"images/blogimages/2016/gradle_structure1.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/gradle_structure2.png","path":"images/blogimages/2016/gradle_structure2.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/jni_structure.png","path":"images/blogimages/2016/jni_structure.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/gradle_task.png","path":"images/blogimages/2016/gradle_task.png","modified":1,"renderable":0},{"_id":"themes/icarus/source/css/images/avatar.png","path":"css/images/avatar.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/images/avatar0.png","path":"css/images/avatar0.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/images/logo.png","path":"css/images/logo.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/images/avatar1.png","path":"css/images/avatar1.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/css/images/thumb-default-small.png","path":"css/images/thumb-default-small.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/justified-gallery/jquery.justifiedGallery.min.js","path":"libs/justified-gallery/jquery.justifiedGallery.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/justified-gallery/justifiedGallery.min.css","path":"libs/justified-gallery/justifiedGallery.min.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/styles.css","path":"libs/open-sans/styles.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/source-code-pro/styles.css","path":"libs/source-code-pro/styles.css","modified":1,"renderable":1},{"_id":"source/images/blogimages/2016/androidart_broadcastreceiver2.png","path":"images/blogimages/2016/androidart_broadcastreceiver2.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/androidart_service1.png","path":"images/blogimages/2016/androidart_service1.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/androidart_activity.png","path":"images/blogimages/2016/androidart_activity.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/androidart_contentprovider.png","path":"images/blogimages/2016/androidart_contentprovider.png","modified":1,"renderable":0},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.css","path":"libs/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.min.css","path":"libs/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css","path":"libs/lightgallery/css/lg-fb-comment-box.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css.map","path":"libs/lightgallery/css/lg-fb-comment-box.css.map","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.min.css","path":"libs/lightgallery/css/lg-fb-comment-box.min.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css","path":"libs/lightgallery/css/lg-transitions.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css.map","path":"libs/lightgallery/css/lg-transitions.css.map","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.min.css","path":"libs/lightgallery/css/lg-transitions.min.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css","path":"libs/lightgallery/css/lightgallery.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css.map","path":"libs/lightgallery/css/lightgallery.css.map","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.min.css","path":"libs/lightgallery/css/lightgallery.min.css","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.eot","path":"libs/lightgallery/fonts/lg.eot","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.svg","path":"libs/lightgallery/fonts/lg.svg","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.ttf","path":"libs/lightgallery/fonts/lg.ttf","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.woff","path":"libs/lightgallery/fonts/lg.woff","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/loading.gif","path":"libs/lightgallery/img/loading.gif","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/video-play.png","path":"libs/lightgallery/img/video-play.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/vimeo-play.png","path":"libs/lightgallery/img/vimeo-play.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/youtube-play.png","path":"libs/lightgallery/img/youtube-play.png","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.js","path":"libs/lightgallery/js/lg-autoplay.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.min.js","path":"libs/lightgallery/js/lg-autoplay.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.js","path":"libs/lightgallery/js/lg-fullscreen.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.min.js","path":"libs/lightgallery/js/lg-fullscreen.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.js","path":"libs/lightgallery/js/lg-hash.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.min.js","path":"libs/lightgallery/js/lg-hash.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.js","path":"libs/lightgallery/js/lg-pager.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.min.js","path":"libs/lightgallery/js/lg-pager.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.js","path":"libs/lightgallery/js/lg-share.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.min.js","path":"libs/lightgallery/js/lg-share.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.js","path":"libs/lightgallery/js/lg-thumbnail.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.min.js","path":"libs/lightgallery/js/lg-thumbnail.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.js","path":"libs/lightgallery/js/lg-video.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.min.js","path":"libs/lightgallery/js/lg-video.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.js","path":"libs/lightgallery/js/lg-zoom.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.min.js","path":"libs/lightgallery/js/lg-zoom.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.min.js","path":"libs/lightgallery/js/lightgallery.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.js","path":"libs/lightgallery/js/lightgallery.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","path":"libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","modified":1,"renderable":1},{"_id":"source/images/blogimages/2016/androidart_ipc.png","path":"images/blogimages/2016/androidart_ipc.png","modified":1,"renderable":0},{"_id":"source/images/blogimages/2016/androidart_service2.png","path":"images/blogimages/2016/androidart_service2.png","modified":1,"renderable":0},{"_id":"themes/icarus/source/libs/font-awesome/fonts/FontAwesome.otf","path":"libs/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.eot","path":"libs/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/jquery/2.1.3/jquery.min.js","path":"libs/jquery/2.1.3/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","path":"libs/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff","path":"libs/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","path":"libs/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.svg","path":"libs/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"93a8a2453fe941ffa7e5edf46a656657160bc78d","modified":1482902484000},{"_id":"themes/icarus/LICENSE","hash":"df00918fa95de563927fd92b26f14c7affdc3052","modified":1480496898000},{"_id":"themes/icarus/README.md","hash":"25c75503f044b817297995a96621c92ce037a098","modified":1480496898000},{"_id":"themes/icarus/_config.yml","hash":"6492899ea7aaed43766aae6fcdbc8de7fd8ff4e0","modified":1481251538000},{"_id":"themes/icarus/package.json","hash":"1bc52ef10a33df23e56bd73c927f605019c87d41","modified":1480496898000},{"_id":"source/_posts/2014-12-23-hello-world.md","hash":"14e73ec4f51204aecf89a403e295e519364da0da","modified":1482748875000},{"_id":"source/_posts/2015-03-16-java-multithreading-concurrent.md","hash":"3ff5b5cd0ff8d9d991f79e4159aff514a0dd7c38","modified":1482748875000},{"_id":"source/_posts/2015-11-06-book-list-of-2015.md","hash":"8197f40fe16803ebd29ce8213f63b58103256706","modified":1482748875000},{"_id":"source/_posts/2016-03-01-android-googlemap-summary.md","hash":"4097f39ed30a4dd02a71b56afbe16c3ff8a63a42","modified":1482748875000},{"_id":"source/_posts/2016-03-15-facebook-google+signin.md","hash":"bcd1f441eae56af97d9266b5c12e1cb976e74297","modified":1482748875000},{"_id":"source/_posts/2016-03-20-android-new-knowledge-summary.md","hash":"1268ebe726043ce7e17712404ceccc6b36ae49eb","modified":1482748875000},{"_id":"source/_posts/2016-03-20-android-books-reading-.md","hash":"b573f4c3ec8e881e89d94e999b3a892e1fdd1ece","modified":1482748875000},{"_id":"source/_posts/2016-05-12-GCM-Azure_summary.md","hash":"bfc816e17c5cecd84c286d7026bccd378c7cc8e6","modified":1482748875000},{"_id":"source/_posts/2016-05-18-javaString-and-bytes.md","hash":"c4836163e8d719d91e76b8e90e89d6c60e652c25","modified":1482748875000},{"_id":"source/_posts/2016-05-24-JNI-Learning.md","hash":"dc894650e5307bb5cc9faa671401f00216acb714","modified":1482748875000},{"_id":"source/_posts/2016-05-24-JNI-Learning0.md","hash":"7161734ef221c30e124abd749126e45b4f48f8f5","modified":1482748875000},{"_id":"source/_posts/2016-05-28-qiniu-android-summary.md","hash":"787d164c97b87f7352f913af76b186118a95a1bc","modified":1482748875000},{"_id":"source/_posts/2016-06-08-gson-summary.md","hash":"e497d1049dd01fadb664a052816b22b7627af84b","modified":1482748875000},{"_id":"source/_posts/2016-07-25-android-webview-summary.md","hash":"ec74bde691db77f42f4f696f0f3ca4d70f6cd91d","modified":1482748875000},{"_id":"source/_posts/2016-08-03-android-LocationListener.md","hash":"0f86fb2d917ec1de83a9995a9c302c388b72f1b0","modified":1482748875000},{"_id":"source/_posts/2016-08-16-RxAndroid-Learning.md","hash":"66d2cd257bb0bf61ba90407450edd85db1d81ec9","modified":1482748875000},{"_id":"source/_posts/2016-09-05-ThreadLocal-HandlerThread-Lopper.md","hash":"224c4785e02e74fd5412d084ada1b879b0e8f058","modified":1482748875000},{"_id":"source/_posts/2016-09-20-AVG-unwanted-software.md","hash":"90b8bbc941dd651eb1de031c2ac67d96c210fb1f","modified":1482748875000},{"_id":"source/_posts/2016-09-20-android-design-pattern-singleton.md","hash":"ef8aee864a0d9cac7ea47acd6ed0013f01d8baa2","modified":1482748875000},{"_id":"source/_posts/2016-09-22-JNI-get-publickey.md","hash":"96248dc16a30318006e11131d84170d43a4024a5","modified":1482748875000},{"_id":"source/_posts/2016-09-22-quit-whole-application.md","hash":"b75d86c3031cf9cb37552fb4639c70e73235c5a5","modified":1482748875000},{"_id":"source/_posts/2016-09-28-Android-interview-questions.md","hash":"21ed041a16060f1eef2344364b34b11778c15ded","modified":1482748875000},{"_id":"source/_posts/2016-10-12-gradle-learning.md","hash":"e40dd7449678ba4c9809803ad4623f36e56347b0","modified":1482748875000},{"_id":"source/_posts/2016-10-13-gradle-learning2.md","hash":"a96c217e9abd2d430b35469670063422fa589566","modified":1482748875000},{"_id":"source/_posts/2016-11-03-hexo-mac-module-not-found.md","hash":"92855ffda65b1ad2056d8d740b16ab30015367f6","modified":1482894843000},{"_id":"source/_posts/2016-12-06-hexo-learning1.md","hash":"d36fb9657067d8b64cb5e322039d9c0d8fac7931","modified":1482894910000},{"_id":"source/_posts/2016-12-04-hexo-learning0.md","hash":"704f5ad794363361cffc7acc0553785fb1074d78","modified":1482894506000},{"_id":"source/_posts/2016-12-20-Android-patch-update.md","hash":"8e45f4ad974224815d3c0ecf9ee25947b4fdb305","modified":1482906501000},{"_id":"source/about/index.md","hash":"5ad7719fd53c52ae9a9e96afc5a8932f3152fd5b","modified":1482748875000},{"_id":"source/categories/index.md","hash":"55bee2cb88da438a2e8b1f29b1d7e954c07a9e60","modified":1482748875000},{"_id":"source/images/avatar.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1482748875000},{"_id":"source/tags/index.md","hash":"e999413d6392c34156b5c6e9273f9069f9e6d92d","modified":1482748875000},{"_id":"themes/icarus/_source/.DS_Store","hash":"7c14450e2464624999afc5b65240575c1b443fae","modified":1482902584000},{"_id":"themes/icarus/gallery/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1480595851000},{"_id":"themes/icarus/languages/es.yml","hash":"d7432219be5bee4cb569331378ade61b749688e0","modified":1480496898000},{"_id":"themes/icarus/languages/en.yml","hash":"ade241498b85503a8953a1deca963222f47067a7","modified":1480496898000},{"_id":"themes/icarus/languages/fr.yml","hash":"cb3e597cbec7e8f458858c457bafd1f3a225083d","modified":1480496898000},{"_id":"themes/icarus/languages/id.yml","hash":"70ec9ab2ac04cf882e81377ca5ad15bf8adceca8","modified":1480496898000},{"_id":"themes/icarus/languages/ja.yml","hash":"ff972961e5f468a695d80d21b62c3e9032cdf561","modified":1480496898000},{"_id":"themes/icarus/languages/ko.yml","hash":"7c4ad4577dc0577ad2ca1c0410507f5e5fadf530","modified":1480496898000},{"_id":"themes/icarus/languages/pt-BR.yml","hash":"3c5d5293575593705b9a2dfa9d97b017eb4bc8c3","modified":1480496898000},{"_id":"themes/icarus/languages/ru.yml","hash":"d1aab2b0c939d0c6020f881d664b660a01ee7327","modified":1480496898000},{"_id":"themes/icarus/languages/tr.yml","hash":"8b7eb6aec264db50dbabea89f680acca256f4cd1","modified":1480496898000},{"_id":"themes/icarus/languages/zh-CN.yml","hash":"3dc8ec524805afd090438be717908750da439204","modified":1480496898000},{"_id":"themes/icarus/languages/zh-TW.yml","hash":"d8d96a0a17c20af11919ce036e87379a6b163db9","modified":1480496898000},{"_id":"themes/icarus/layout/.DS_Store","hash":"05a9e5dcee6b45cca2d8467dbd41c8ab0eb6fb44","modified":1482902609000},{"_id":"themes/icarus/layout/archive.ejs","hash":"c1ecf667f40f34d61ab33eed46bab143eb1af36d","modified":1480496898000},{"_id":"themes/icarus/layout/categories.ejs","hash":"aa95629b770cff8cca9d663aeb6b17928f070de5","modified":1480496898000},{"_id":"themes/icarus/layout/category.ejs","hash":"1d407f9176db84e83062c52ad4755aaea9e74401","modified":1480496898000},{"_id":"themes/icarus/layout/index.ejs","hash":"43e971ebc35657b18e08a049559790348a16666f","modified":1480496898000},{"_id":"themes/icarus/layout/layout.ejs","hash":"88186b8e3ab6ffdd1808b59132b4062ac6a7442b","modified":1481013080000},{"_id":"themes/icarus/layout/page.ejs","hash":"50170783bac99946ae8af483920568de9b2d9801","modified":1480496898000},{"_id":"themes/icarus/layout/post.ejs","hash":"50170783bac99946ae8af483920568de9b2d9801","modified":1480496898000},{"_id":"themes/icarus/layout/tag.ejs","hash":"f6c220d4e5c231028bc71ddc11aec97d7b5a9943","modified":1480496898000},{"_id":"themes/icarus/layout/tags.ejs","hash":"b0fcea68d7c11e5899bf0375d80997685111653f","modified":1480496898000},{"_id":"themes/icarus/scripts/meta.js","hash":"1993754a2f3dffa283fa0538eb8f056385b69ad4","modified":1480496898000},{"_id":"themes/icarus/scripts/thumbnail.js","hash":"e667a611f9baac270281b765832020d50bf8fb7f","modified":1480496898000},{"_id":"themes/icarus/source/.DS_Store","hash":"14293605e17d49aaf5f85225f1b4fc759688b948","modified":1482902630000},{"_id":"source/_posts/2016-12-03-nodejs-learning-getting-started.md","hash":"406f6c4896c3ccb5213f4e45d9028bc6e8ffcf6c","modified":1482894442000},{"_id":"themes/icarus/_source/about/index.md","hash":"2847759c65295fdc47685cc32e10ae30b2f022ae","modified":1480496898000},{"_id":"themes/icarus/_source/categories/index.md","hash":"55bee2cb88da438a2e8b1f29b1d7e954c07a9e60","modified":1480496898000},{"_id":"themes/icarus/_source/tags/index.md","hash":"e999413d6392c34156b5c6e9273f9069f9e6d92d","modified":1480496898000},{"_id":"themes/icarus/layout/comment/counter.ejs","hash":"e109d3256b004b027d029bd5bd67feeb72dc5388","modified":1480496898000},{"_id":"themes/icarus/layout/comment/disqus.ejs","hash":"1b32a90f400dc580f4b8298de75b94429ca6de68","modified":1480496898000},{"_id":"themes/icarus/layout/comment/duoshuo.ejs","hash":"ce46d7410a99b57704da32e9d09071cef6c9fa93","modified":1480496898000},{"_id":"themes/icarus/layout/comment/index.ejs","hash":"d45635e78a3fc40e424a401e983f2c8eef6ebcfd","modified":1480496898000},{"_id":"themes/icarus/layout/comment/scripts.ejs","hash":"8a9a20f72ba0923afa776396fb67d8c5d446a666","modified":1480496898000},{"_id":"themes/icarus/layout/comment/youyan.ejs","hash":"6fe807992832939caf6c3e7651d052df9520d88e","modified":1480496898000},{"_id":"themes/icarus/layout/common/.DS_Store","hash":"fe3a1b2077d038bf1c41e6251a1ecc40f9440fd1","modified":1482902599000},{"_id":"themes/icarus/layout/common/article.ejs","hash":"7aad35baff09a0444e699f81f4c4939b01a2c913","modified":1482903471000},{"_id":"themes/icarus/layout/common/footer.ejs","hash":"cbfe560fcab445d42ceeb5d1beba5957d5be5eaa","modified":1480496898000},{"_id":"themes/icarus/layout/common/head.ejs","hash":"44f30945882afd27c89da2173da501fb1b531488","modified":1480496898000},{"_id":"themes/icarus/layout/common/header.ejs","hash":"738c6a923b2a6de6a81c4892c8a47e03d8b34f88","modified":1480496898000},{"_id":"themes/icarus/layout/common/profile.ejs","hash":"0d5a9622d490652599e3ba3e4077a7d6bb2eb38e","modified":1481252238000},{"_id":"themes/icarus/layout/common/scripts.ejs","hash":"c0a1a9e53f89440c42c325d5bd8c7234652c8937","modified":1480496898000},{"_id":"themes/icarus/layout/common/sidebar.ejs","hash":"6e80fa52d23c9c39bfa357a1e00c26fc8b851b82","modified":1480496898000},{"_id":"themes/icarus/layout/common/thumbnail.ejs","hash":"1b70f8a98cd8650b159bda858dbee38dbdb7f0c5","modified":1480496898000},{"_id":"themes/icarus/layout/common/timeline.ejs","hash":"6420e34e0332c9b6670011519f341340db989343","modified":1480496898000},{"_id":"themes/icarus/layout/plugin/baidu-analytics.ejs","hash":"6a7bee18e666e627e62541a5e30906f87ba1bfe8","modified":1480496898000},{"_id":"themes/icarus/layout/plugin/google-analytics.ejs","hash":"349f08b6521a16e79046b1f94f04317ac74f556e","modified":1480496898000},{"_id":"themes/icarus/layout/plugin/scripts.ejs","hash":"4fdb85e6730530f2d262041b41d1ead1b87dfd88","modified":1480496898000},{"_id":"themes/icarus/layout/search/baidu.ejs","hash":"3e603a702d20c53fd3bcbeb570a16a86d54781ce","modified":1480496898000},{"_id":"themes/icarus/layout/search/index-mobile.ejs","hash":"50a727ac1dfe3073eb6fa6699ba01e66f4ac41c0","modified":1480496898000},{"_id":"themes/icarus/layout/search/index.ejs","hash":"24935e32e61d4706454b174ea3bed0726ae7fb34","modified":1480496898000},{"_id":"themes/icarus/layout/search/insight.ejs","hash":"130fe3d33ac71da0b50f7fee6a87979f30938a1b","modified":1480496898000},{"_id":"themes/icarus/layout/search/swiftype.ejs","hash":"379e66d2c13526e72e4120c443f95fccf4edef71","modified":1480496898000},{"_id":"themes/icarus/layout/share/addtoany.ejs","hash":"ac180c4c84b73a04d61b17e7dc18c257e20bf59f","modified":1480496898000},{"_id":"themes/icarus/layout/share/bdshare.ejs","hash":"a1e772c5a6f174d585b0c1e574058f75dc8e2898","modified":1480496898000},{"_id":"themes/icarus/layout/share/default.ejs","hash":"ebfb919dc525b3ed61a6a5ee05ee71410eedc541","modified":1480496898000},{"_id":"themes/icarus/layout/share/index.ejs","hash":"2a2c0095b95b11e5692bd8ad6a2337aa644189a2","modified":1480496898000},{"_id":"themes/icarus/layout/share/jiathis.ejs","hash":"21ebaa51e828cba2cefbeeaccb01514643565755","modified":1480496898000},{"_id":"themes/icarus/layout/widget/archive.ejs","hash":"d9ebbb7f6ce2f25df5ae25e4a1fef3c08f7054b9","modified":1480496898000},{"_id":"themes/icarus/layout/widget/category.ejs","hash":"583bda80cf15b3ef11fefbd1b502897dfff40100","modified":1480496898000},{"_id":"themes/icarus/layout/widget/links.ejs","hash":"aad118699718b62c0d3f3cfd6f17a181139a76af","modified":1480496898000},{"_id":"themes/icarus/layout/widget/recent_posts.ejs","hash":"2ca923465275fb38a7ac7d67211d6e94a977e957","modified":1480496898000},{"_id":"themes/icarus/layout/widget/tag.ejs","hash":"3b8ae5953990436893da9d68f910ebe592005659","modified":1480496898000},{"_id":"themes/icarus/layout/widget/tagcloud.ejs","hash":"ca8c7bf555fb6ce4904f2c59160548405c2c8a82","modified":1480496898000},{"_id":"themes/icarus/source/css/.DS_Store","hash":"3399f1cc05511d38c954f9357ab3d0a99ece2147","modified":1482902640000},{"_id":"themes/icarus/source/css/_extend.styl","hash":"9a5c72663c0da1b32ecb6a75773a5ccfb8c467ca","modified":1480496898000},{"_id":"themes/icarus/source/css/_variables.styl","hash":"d62af931be6612ec8c3a917836379a8cd92fbce1","modified":1480496898000},{"_id":"themes/icarus/source/css/style.styl","hash":"82aa42f9826dc14e9e0d6443af6e253029e7fee6","modified":1480496898000},{"_id":"themes/icarus/source/images/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1482718102000},{"_id":"themes/icarus/source/images/avatar.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1480497902000},{"_id":"themes/icarus/source/images/favicon.ico","hash":"e64542caa1b7a07484925304cd99c93129dfce8e","modified":1482718701000},{"_id":"themes/icarus/source/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1480496898000},{"_id":"themes/icarus/source/js/main.js","hash":"1faffdc7aa7f0d28e85edbf49c99de3ad0b65753","modified":1480496898000},{"_id":"themes/icarus/source/libs/.DS_Store","hash":"236986aa277e10799780787fa3f9cbbb3796cd0d","modified":1482902630000},{"_id":"source/images/blogimages/2016/androidart_broadcastreceiver1.png","hash":"dc4a97d2b8ef1f6592717204788d9f716117fdee","modified":1482748875000},{"_id":"source/images/blogimages/2016/avg_warning.PNG","hash":"1b8817b076f48cf8217439e0265cb4216abb3d17","modified":1482748875000},{"_id":"source/images/blogimages/2016/google_servcie_ads.PNG","hash":"10c107e578bcfb28ee9f38c247f62cb99f14ea1a","modified":1482748875000},{"_id":"source/images/blogimages/2016/gradle_structure1.png","hash":"0b8c1f213bb88852ecb0fd8a50b60f310d6a23e8","modified":1482748875000},{"_id":"source/images/blogimages/2016/gradle_structure2.png","hash":"6a8aefb3577950beeba2900f507e749dd518345e","modified":1482748875000},{"_id":"source/images/blogimages/2016/jni_structure.png","hash":"312696c9a056a734ff63d9457ff0bb83f356f057","modified":1482748875000},{"_id":"source/images/blogimages/2016/gradle_task.png","hash":"6890da207d5772a6f141024267547db56e9bec38","modified":1482748875000},{"_id":"themes/icarus/layout/common/post/banner.ejs","hash":"47ced3f03525698c79c6b1c07b48383fb6c496b2","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/category.ejs","hash":"75c9dda2e7ec041943855ca163a6b1c4c8b4f260","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/date.ejs","hash":"45cb0bcad461036cdd1fe2e3fbb5f2f19940025c","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/gallery.ejs","hash":"659f019761116313169148ec61773e7b84abb739","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/nav.ejs","hash":"d7cd611e642327f33dff3963ef869c2b46824a11","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/tag.ejs","hash":"2e966216256321aa0c76fe1b9be689601c76ef31","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/title.ejs","hash":"669ddb46fefa100856588351a7a2d30ad996b755","modified":1480496898000},{"_id":"themes/icarus/layout/common/post/toc.ejs","hash":"29d6f391553b26e1d7c89525d9e8dbd1b278e2bd","modified":1481011928000},{"_id":"themes/icarus/source/css/_partial/archive.styl","hash":"d35088c83ddd7a197d6d94e16a2ce3a7e29fa1dc","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/article.styl","hash":"5dda40a3767646502722bcf810e289f89f1fd998","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/comment.styl","hash":"784646796184d4f27918c22395288a2fafbf9554","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/footer.styl","hash":"484776654e4c1691dc844e6e93786a08855c1c99","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/header.styl","hash":"1e351f741144135871a3373fe7e969dc961b65e7","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/insight.styl","hash":"19833cd127f26ad90b06c115f8a96a30e0c0e53b","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/profile.styl","hash":"fb0170075dc2a41e01dd11bbfdbccbed544c479a","modified":1481252309000},{"_id":"themes/icarus/source/css/_partial/sidebar.styl","hash":"f528ca7064d9fcecd737b9b71c9c54601365d7d3","modified":1480496898000},{"_id":"themes/icarus/source/css/_partial/timeline.styl","hash":"c813b98f4fc45b64d2e07e5d944745a654c8c943","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/agate.styl","hash":"601eb70448a16b918df132f6fc41e891ae053653","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/androidstudio.styl","hash":"65d09f1b0e81c6a182f549fd3de51e59823c97ae","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/arta.styl","hash":"1a5accc115f41d1b669ed708ac6a29abac876599","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-cave-dark.styl","hash":"bc647b2c1d971d7cc947aa1ed66e9fd115261921","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-dune-dark.styl","hash":"df50a85a4b14c7ca6e825d665594b91229d0e460","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-estuary-dark.styl","hash":"d84382bc8298f96730757391d3e761b7e640f406","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-forest-dark.styl","hash":"57c154c6045a038dc7df0a25927853e10bf48c4a","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-heath-dark.styl","hash":"b0cf13b2233e7bc38342032d2d7296591a4c2bcf","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-lakeside-dark.styl","hash":"bb0a8c4ad0dd8e3e7de7122ddf268fc42aa94acb","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-plateau-dark.styl","hash":"09c64f1a7052aec9070c36c0431df25216afaea1","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-savanna-dark.styl","hash":"a16c919a1ccf2f845488078fb341381bec46b1f3","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-seaside-dark.styl","hash":"ce233a101daea7124cbfcd34add43ccfe2e1e1c7","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"414b0cfc142f70afe359c16450b651e28bf7325a","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/brown-paper.styl","hash":"c2326ba20a5020a66ca7895258d18833327d4334","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/codepen-embed.styl","hash":"f4dcc84d8e39f9831a5efe80e51923fc3054feb0","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/dark.styl","hash":"71ce56d311cc2f3a605f6e2c495ccd7236878404","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/darkula.styl","hash":"ad0d5728d21645039c9f199e7a56814170ed3bab","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/far.styl","hash":"d9928010ffe71e80b97a5afcba1a4975efdd7372","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/highlightjs.styl","hash":"0e198b7a59191c7a39b641a4ddd22c948edb9358","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/hopscotch.styl","hash":"b374c6550b89b4751aedc8fbc3cf98d95bd70ead","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/hybrid.styl","hash":"ea8d7ddc258b073308746385f5cb85aabb8bfb83","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/index.styl","hash":"002d5596f6379cc87dbd43d9145bc764aa666be1","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/ir-black.styl","hash":"693078bbd72a2091ed30f506cc55949600b717af","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/monokai-sublime.styl","hash":"25aa2fc1dbe38593e7c7ebe525438a39574d9935","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/monokai.styl","hash":"5a4fe9f957fd7a368c21b62a818403db4270452f","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/obsidian.styl","hash":"55572bbcfee1de6c31ac54681bb00336f5ae826d","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/pojoaque.styl","hash":"77dae9dc41945359d17fe84dbd317f1b40b2ee33","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/railscasts.styl","hash":"acd620f8bb7ff0e3fe5f9a22b4433ceef93a05e6","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/rainbow.styl","hash":"ce73b858fc0aba0e57ef9fb136c083082746bc1d","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/school-book.styl","hash":"d43560fe519a931ce6da7d57416d7aa148441b83","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/solarized-dark.styl","hash":"702b9299a48c90124e3ac1d45f1591042f2beccc","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/sunburst.styl","hash":"a0b5b5129547a23865d400cfa562ea0ac1ee3958","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-blue.styl","hash":"8b3087d4422be6eb800935a22eb11e035341c4ba","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-bright.styl","hash":"0ac6af6ecb446b5b60d6226748e4a6532db34f57","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-eighties.styl","hash":"fa57b3bb7857a160fc856dbe319b31e30cc5d771","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night.styl","hash":"19b3080d4b066b40d50d7e7f297472482b5801fd","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1480496898000},{"_id":"themes/icarus/source/css/_highlight/zenburn.styl","hash":"fc5ec840435dad80964d04519d3f882ddc03746a","modified":1480496898000},{"_id":"themes/icarus/source/css/_util/grid.styl","hash":"93fb6f1e2f40cd7d88ad0d56dd73d3f9a7bc853e","modified":1480496898000},{"_id":"themes/icarus/source/css/_util/mixin.styl","hash":"c8e1ddfc0fe9108bab592c7a73b73ce9344991fd","modified":1480496898000},{"_id":"themes/icarus/source/css/images/avatar.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1480497902000},{"_id":"themes/icarus/source/css/images/avatar0.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1480504864000},{"_id":"themes/icarus/source/css/images/logo.png","hash":"e606a0584f98268b2fe92303f3254520862ef659","modified":1480496898000},{"_id":"themes/icarus/source/css/images/avatar1.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1480504872000},{"_id":"themes/icarus/source/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/.DS_Store","hash":"71de49345b332e02516e8cd5f553d3a97c7c0bf7","modified":1482902630000},{"_id":"themes/icarus/source/libs/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1480496898000},{"_id":"themes/icarus/source/libs/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/styles.css","hash":"5ca6e111046232bde112d33201a60532aee7d3c4","modified":1480496898000},{"_id":"themes/icarus/source/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1480496898000},{"_id":"source/images/blogimages/2016/androidart_broadcastreceiver2.png","hash":"173269356b75bfe4213c28374a19e3a4938fd36b","modified":1482748875000},{"_id":"source/images/blogimages/2016/androidart_service1.png","hash":"30b35c17a3e468fcbbaab25990439bad304acfa1","modified":1482748875000},{"_id":"source/images/blogimages/2016/androidart_activity.png","hash":"9d8bda879c62adc0b71cd26262603850ca16ab05","modified":1482748875000},{"_id":"source/images/blogimages/2016/androidart_contentprovider.png","hash":"9dbe7f17e629d0f36218b5dd3c3941cd8aa320f0","modified":1482748875000},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","hash":"c4248ea800bd5608344ce163f5658b57e7ef9410","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","hash":"2c5b039b57f62625e88226a938679ec937431ad1","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","hash":"22413bb8bfb78608c1e25aa1ed5c1f38557df79f","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","hash":"e0350190d720a8fec0557ab47b318ec4e4486448","modified":1480496898000},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","hash":"63eb74ef040aade256f2274a7f31a914edddb0ea","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","hash":"328a22fe3eec71ad9e5ece4d67dd62e79dab6b7f","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","hash":"4dc6d7174ea6d89f4c45e43e1bfc3e03d8ffebaf","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","hash":"415eee05976ab8b2471602a5ddb78a6c58fc21aa","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","hash":"a0b0c389cf46d63c850e61fed572485ff0b68183","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","hash":"c5f29fed6632efe0aa83318369f0d8c4061b775b","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","hash":"be201d32a9aa5d186723ebb3c538be691aa8c53a","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","hash":"afc44700053c9a28f9ab26f6aec4862ac1d0795d","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","hash":"113978181dcac77baecef6115a9121d8f6e4fc3a","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","hash":"5067c81462c15422853c94d21a1726865a61634f","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","hash":"b366f2fda2e524eb5ef50058eefff249a3b96e6c","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","hash":"d22904914469be735490e3c8cb093c7862896dd5","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","hash":"ae80fb3cd16339aa7b5da280ab53975523dcaac2","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","hash":"b85efde42fa3a03c32b1d31c6cd74c622fc7916c","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","hash":"e75607ba1417181397c700775b84303d5a2957b9","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","hash":"d0b40a7848703556c6631f24e961a98ca5829255","modified":1480496898000},{"_id":"themes/icarus/source/libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","hash":"be365eca44760ce3fc9b377c43d4634958479c69","modified":1480496898000},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1480496898000},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1480496898000},{"_id":"source/images/blogimages/2016/androidart_ipc.png","hash":"3f3a0ead6d747386983ab5618f46a2f0c33bd84e","modified":1482748875000},{"_id":"source/images/blogimages/2016/androidart_service2.png","hash":"afdf0ded0d671ec79a03fddbd253de15eb5248ea","modified":1482748875000},{"_id":"themes/icarus/source/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1480496898000},{"_id":"themes/icarus/source/libs/jquery/2.1.3/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1480496898000},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1480496898000},{"_id":"themes/icarus/gallery/two_children_2.jpg","hash":"8044dafd28feb4c6aca2f5d48719385684ae9270","modified":1389073946000},{"_id":"public/about/index.html","hash":"6228413bc1569a20a4982d1785e33bc010ec926e","modified":1482906585587},{"_id":"public/categories/index.html","hash":"49a3253da1ef3b4ce9b0ef2ef6042e0b4208d456","modified":1482906585839},{"_id":"public/tags/index.html","hash":"b92a0ba7abb09e5b53422849ac4f500885f9eb44","modified":1482906585851},{"_id":"public/2016/12/20/Android-patch-update/index.html","hash":"9233859be33357189e9cb53692d800edb8fdea14","modified":1482906585851},{"_id":"public/2016/12/06/hexo-learning1/index.html","hash":"016d43342f17184787d88447019b3e2fa4917bc4","modified":1482906585851},{"_id":"public/2016/12/04/hexo-learning0/index.html","hash":"42e68d66be1f320098f6a6ced24e3d81dfedae22","modified":1482906585852},{"_id":"public/2016/12/03/nodejs-learning-getting-started/index.html","hash":"3a54e43dda86927518f1b0431bc3157c12198eac","modified":1482906585852},{"_id":"public/2016/11/03/hexo-mac-module-not-found/index.html","hash":"60ea3960fdbad1e4d195ffcff5c79f1792139761","modified":1482906585852},{"_id":"public/2016/10/13/gradle-learning2/index.html","hash":"886817ded49b13b33e1f19256de619c25b6bd8cb","modified":1482906585852},{"_id":"public/2016/10/12/gradle-learning/index.html","hash":"81ea3a38d819fa4e6c5ce1ef8b90228b4fd67eea","modified":1482906585852},{"_id":"public/2016/09/28/Android-interview-questions/index.html","hash":"b29301f2aa3ddee4c7cc8a287779e9dcfbbad919","modified":1482906585852},{"_id":"public/2016/09/22/quit-whole-application/index.html","hash":"1884ddd778f148b58ce8fda070c6be17df165e6f","modified":1482906585852},{"_id":"public/2016/09/22/JNI-get-publickey/index.html","hash":"ee7a297a236a748cd0fb5c541647c4db0757670b","modified":1482906585852},{"_id":"public/2016/09/20/android-design-pattern-singleton/index.html","hash":"476caaefd7b3ff7a1d22f4a43b751965ba7a510a","modified":1482906585852},{"_id":"public/2016/09/20/AVG-unwanted-software/index.html","hash":"e8838be1d982f5ab5a41e8320da82d227a12d4df","modified":1482906585852},{"_id":"public/2016/09/05/ThreadLocal-HandlerThread-Lopper/index.html","hash":"014adb741c4203047ce69d6c4b415f8ba9c1349f","modified":1482906585852},{"_id":"public/2016/08/16/RxAndroid-Learning/index.html","hash":"4a4ddd2bb43e445ce54e52a1426f59733adb28de","modified":1482906585852},{"_id":"public/2016/08/03/android-LocationListener/index.html","hash":"f641ab1982a64dd5b2f8b0a2aae9de90ea412583","modified":1482906585852},{"_id":"public/2016/07/25/android-webview-summary/index.html","hash":"9289aca59d9f2a32c5c9ccb35c7a2526a1c301c2","modified":1482906585852},{"_id":"public/2016/06/08/gson-summary/index.html","hash":"860905d5ec1ad01626ef9f0db7aa756da4de836f","modified":1482906585852},{"_id":"public/2016/05/28/qiniu-android-summary/index.html","hash":"2d19a6d81e3669968a654f0ce4516162b8b2f080","modified":1482906585852},{"_id":"public/2016/05/24/JNI-Learning0/index.html","hash":"87b1b1f0e745b3eec5d887722db02eddb6428cb2","modified":1482906585852},{"_id":"public/2016/05/24/JNI-Learning/index.html","hash":"05da9eba64b5b431bdad8c9b0625c2a66bc4cae2","modified":1482906585852},{"_id":"public/2016/05/18/javaString-and-bytes/index.html","hash":"c2ded02905b97dc647055a8d30980607e721c181","modified":1482906585852},{"_id":"public/2016/05/12/GCM-Azure_summary/index.html","hash":"985408351087ff3b05eda31e5a78af72c3214846","modified":1482906585852},{"_id":"public/2016/03/20/android-books-reading-/index.html","hash":"b3a5c0be1d5582117c098d8aed30e20f189ff9fa","modified":1482906585852},{"_id":"public/2016/03/20/android-new-knowledge-summary/index.html","hash":"763e63d6995b9d24ee6c0c8e22bcfeeaff1766fd","modified":1482906585852},{"_id":"public/2016/03/15/facebook-google+signin/index.html","hash":"2baf0aa245b9d6ea8d007342c1f4d1613387b006","modified":1482906585853},{"_id":"public/2016/03/01/android-googlemap-summary/index.html","hash":"2ba6dc9f0bd4781bbdaea059ec3f306f2ee0a7de","modified":1482906585853},{"_id":"public/2015/11/06/book-list-of-2015/index.html","hash":"e017b6f478f2dd442566d7c8afe9ae7cb75f564f","modified":1482906585853},{"_id":"public/2015/03/16/java-multithreading-concurrent/index.html","hash":"67c3e1f94c959360cccab3f6e9f22bc76e6c6a7d","modified":1482906585853},{"_id":"public/2014/12/23/hello-world/index.html","hash":"94c07f98c0c8fcd78755553c613b3278f54ef882","modified":1482906585853},{"_id":"public/archives/index.html","hash":"a27e55b629b0d967b5409d6e4d36477439e7dfc6","modified":1482906585853},{"_id":"public/archives/page/2/index.html","hash":"f493ddae20cbac85283fdaeb40b3d2af19312455","modified":1482906585853},{"_id":"public/archives/page/3/index.html","hash":"06a90030891380a2c6d62af3f3f9c5681be3362d","modified":1482906585853},{"_id":"public/archives/page/4/index.html","hash":"455a4b994a468fe582b415104000c2ff3704a0de","modified":1482906585853},{"_id":"public/archives/2014/index.html","hash":"a850989df90afafcb954d38ca96cb2469a659727","modified":1482906585853},{"_id":"public/archives/2014/12/index.html","hash":"3a3c72eda135b4b4e1b626eea1c708bda079ec2c","modified":1482906585867},{"_id":"public/archives/2015/index.html","hash":"fe650721a8832f5f274b4e8e7ff08070b4a26529","modified":1482906585867},{"_id":"public/archives/2015/03/index.html","hash":"520e6719972d85efd349d50a6b4f270a34a090ef","modified":1482906585867},{"_id":"public/archives/2015/11/index.html","hash":"ebf71b8807fd8240bb3e889fb4426f8ce796e92e","modified":1482906585867},{"_id":"public/archives/2016/index.html","hash":"02a82361d1a88ec31a5639b61d9e69eb9cf04898","modified":1482906585867},{"_id":"public/archives/2016/page/2/index.html","hash":"3f7c0cff04d687165d602bec9471d4d10b66cd69","modified":1482906585867},{"_id":"public/archives/2016/page/3/index.html","hash":"a1e185e269e026147070fa0c415c1c2a1a43d0a4","modified":1482906585867},{"_id":"public/archives/2016/page/4/index.html","hash":"f470d50eb1f603b99230041f61370f4c534fe64e","modified":1482906585867},{"_id":"public/archives/2016/03/index.html","hash":"320c6514861052563c61c1e736d3c555ad13784b","modified":1482906585867},{"_id":"public/archives/2016/05/index.html","hash":"1a2d57a0420bd84d01730d07fa00a7b44e452202","modified":1482906585867},{"_id":"public/archives/2016/06/index.html","hash":"b695f03ff8faf7d62d1bc9e084d8da6f9a974ea1","modified":1482906585867},{"_id":"public/archives/2016/07/index.html","hash":"ebd7ec555becbe4869f561ac9cc229a76238afbf","modified":1482906585867},{"_id":"public/archives/2016/08/index.html","hash":"d1d4ef5c6e5d1e5dfbc846346a3c04f1361a8eaa","modified":1482906585867},{"_id":"public/archives/2016/09/index.html","hash":"449c25b933e6e6c22f2330472ea6490a53652823","modified":1482906585867},{"_id":"public/archives/2016/10/index.html","hash":"8728e711c3433fcb1b9d0f646a3ef5d0d08d3ee4","modified":1482906585867},{"_id":"public/archives/2016/11/index.html","hash":"26e177a32210172997b723ed0003c155fc98b05e","modified":1482906585867},{"_id":"public/archives/2016/12/index.html","hash":"7abce31960a0238e0cc9042a6c730340914270cd","modified":1482906585867},{"_id":"public/categories/read/index.html","hash":"32134df839ddbda8f52c4de825eeda087a2a4e0f","modified":1482906585867},{"_id":"public/categories/technology/index.html","hash":"d7c9e617982da83f319574143c52a69bdf97ede8","modified":1482906585867},{"_id":"public/categories/accumulation/index.html","hash":"36f6d46e3a571af55d1d58b482276182aab90d5a","modified":1482906585867},{"_id":"public/categories/accumulation/page/2/index.html","hash":"63ee0d77e24f7d6c004eacec5712ab23b330f1ae","modified":1482906585868},{"_id":"public/categories/accumulation/page/3/index.html","hash":"fe07889c8c41fc70ed6b5e0241e118fb52f2af86","modified":1482906585868},{"_id":"public/index.html","hash":"fad5d55c11f37cf80b9e49dad66990c0681f92f7","modified":1482906585868},{"_id":"public/page/2/index.html","hash":"3a8c470d40309b647b8dac313f69788300c8d0e1","modified":1482906585868},{"_id":"public/page/3/index.html","hash":"5f17765873e6b1f0e0c6c67733391c163bd42cf9","modified":1482906585868},{"_id":"public/page/4/index.html","hash":"5ad168b7a38f558e01fb014e960004553ab05805","modified":1482906585868},{"_id":"public/tags/read/index.html","hash":"ba0f5789e9a16c86079ec1d0621299f7e652774f","modified":1482906585868},{"_id":"public/tags/accumulation/index.html","hash":"221db863bbe37981f464102c9679577fe47a311b","modified":1482906585868},{"_id":"public/tags/accumulation/page/2/index.html","hash":"a6c8322108e3c93227acffd83ad2801bb70e64fa","modified":1482906585868},{"_id":"public/tags/android-jni/index.html","hash":"7904e378df23c40387067356ff5e929f2ac41c14","modified":1482906585868},{"_id":"public/tags/technology/index.html","hash":"701e39e5fa61b62449cda05453a521d9cc3a7d81","modified":1482906585868},{"_id":"public/tags/rxjava/index.html","hash":"1ac69ace198c7ab1da2223a48368919793f25933","modified":1482906585868},{"_id":"public/tags/android-design-pattern/index.html","hash":"378a63d3a6962514e2ec30fec0803bfcd4c48ff4","modified":1482906585868},{"_id":"public/tags/gradle/index.html","hash":"98760bf4e7e2d0b04e4516b1515ec8ca49d5dd07","modified":1482906585868},{"_id":"public/tags/hexo/index.html","hash":"7a70456488c5ef455bab879d3992b0ef6f503a24","modified":1482906585868},{"_id":"public/tags/ejs/index.html","hash":"aa42e935bb60c4453a5ed0b155ac611e48b253ed","modified":1482906585868},{"_id":"public/tags/android-patch-update/index.html","hash":"0be8a9a83b825aebeac31c7fc2ed145cd8eb90bc","modified":1482906585868},{"_id":"public/tags/nodejs/index.html","hash":"1f979df5d71de67c51f89502681fa0fd9c50bc93","modified":1482906585869},{"_id":"public/images/avatar.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1482906585869},{"_id":"public/images/favicon.ico","hash":"e64542caa1b7a07484925304cd99c93129dfce8e","modified":1482906585869},{"_id":"public/images/blogimages/2016/androidart_broadcastreceiver1.png","hash":"dc4a97d2b8ef1f6592717204788d9f716117fdee","modified":1482906585869},{"_id":"public/images/blogimages/2016/avg_warning.PNG","hash":"1b8817b076f48cf8217439e0265cb4216abb3d17","modified":1482906585869},{"_id":"public/images/blogimages/2016/google_servcie_ads.PNG","hash":"10c107e578bcfb28ee9f38c247f62cb99f14ea1a","modified":1482906585869},{"_id":"public/images/blogimages/2016/gradle_structure1.png","hash":"0b8c1f213bb88852ecb0fd8a50b60f310d6a23e8","modified":1482906585869},{"_id":"public/images/blogimages/2016/gradle_structure2.png","hash":"6a8aefb3577950beeba2900f507e749dd518345e","modified":1482906585869},{"_id":"public/images/blogimages/2016/jni_structure.png","hash":"312696c9a056a734ff63d9457ff0bb83f356f057","modified":1482906585869},{"_id":"public/images/blogimages/2016/gradle_task.png","hash":"6890da207d5772a6f141024267547db56e9bec38","modified":1482906585869},{"_id":"public/css/images/avatar.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1482906585869},{"_id":"public/css/images/avatar0.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1482906585869},{"_id":"public/css/images/logo.png","hash":"e606a0584f98268b2fe92303f3254520862ef659","modified":1482906585869},{"_id":"public/css/images/avatar1.png","hash":"2daa0d02ee54bee9a6968e098013fb37a7fab7bc","modified":1482906585870},{"_id":"public/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1482906585870},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1482906585870},{"_id":"public/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1482906585870},{"_id":"public/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1482906585870},{"_id":"public/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1482906585870},{"_id":"public/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1482906585870},{"_id":"public/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1482906585870},{"_id":"public/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1482906585870},{"_id":"public/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1482906585870},{"_id":"public/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1482906585870},{"_id":"public/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1482906585870},{"_id":"public/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","hash":"c4248ea800bd5608344ce163f5658b57e7ef9410","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","hash":"2c5b039b57f62625e88226a938679ec937431ad1","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","hash":"22413bb8bfb78608c1e25aa1ed5c1f38557df79f","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","hash":"e0350190d720a8fec0557ab47b318ec4e4486448","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","hash":"63eb74ef040aade256f2274a7f31a914edddb0ea","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","hash":"328a22fe3eec71ad9e5ece4d67dd62e79dab6b7f","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","hash":"415eee05976ab8b2471602a5ddb78a6c58fc21aa","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","hash":"4dc6d7174ea6d89f4c45e43e1bfc3e03d8ffebaf","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","hash":"c5f29fed6632efe0aa83318369f0d8c4061b775b","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","hash":"a0b0c389cf46d63c850e61fed572485ff0b68183","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","hash":"be201d32a9aa5d186723ebb3c538be691aa8c53a","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","hash":"afc44700053c9a28f9ab26f6aec4862ac1d0795d","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","hash":"113978181dcac77baecef6115a9121d8f6e4fc3a","modified":1482906585870},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","hash":"5067c81462c15422853c94d21a1726865a61634f","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","hash":"b366f2fda2e524eb5ef50058eefff249a3b96e6c","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","hash":"d22904914469be735490e3c8cb093c7862896dd5","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","hash":"ae80fb3cd16339aa7b5da280ab53975523dcaac2","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","hash":"b85efde42fa3a03c32b1d31c6cd74c622fc7916c","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","hash":"e75607ba1417181397c700775b84303d5a2957b9","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","hash":"d0b40a7848703556c6631f24e961a98ca5829255","modified":1482906585871},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1482906585871},{"_id":"public/libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","hash":"be365eca44760ce3fc9b377c43d4634958479c69","modified":1482906585871},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1482906585871},{"_id":"public/images/blogimages/2016/androidart_broadcastreceiver2.png","hash":"173269356b75bfe4213c28374a19e3a4938fd36b","modified":1482906586456},{"_id":"public/images/blogimages/2016/androidart_service1.png","hash":"30b35c17a3e468fcbbaab25990439bad304acfa1","modified":1482906586460},{"_id":"public/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1482906586466},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1482906586466},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1482906586466},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1482906586466},{"_id":"public/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1482906586474},{"_id":"public/js/main.js","hash":"1faffdc7aa7f0d28e85edbf49c99de3ad0b65753","modified":1482906586474},{"_id":"public/libs/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1482906586474},{"_id":"public/libs/open-sans/styles.css","hash":"5ca6e111046232bde112d33201a60532aee7d3c4","modified":1482906586474},{"_id":"public/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1482906586475},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1482906586475},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1482906586476},{"_id":"public/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1482906586476},{"_id":"public/css/style.css","hash":"d0b8ae1ae0c8485fd0a830e3939e2d531e948f6c","modified":1482906586476},{"_id":"public/libs/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1482906586476},{"_id":"public/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1482906586476},{"_id":"public/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1482906586476},{"_id":"public/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1482906586476},{"_id":"public/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1482906586476},{"_id":"public/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1482906586476},{"_id":"public/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1482906586477},{"_id":"public/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1482906586477},{"_id":"public/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1482906586477},{"_id":"public/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1482906586477},{"_id":"public/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1482906586477},{"_id":"public/libs/jquery/2.1.3/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1482906586477},{"_id":"public/images/blogimages/2016/androidart_activity.png","hash":"9d8bda879c62adc0b71cd26262603850ca16ab05","modified":1482906586477},{"_id":"public/images/blogimages/2016/androidart_contentprovider.png","hash":"9dbe7f17e629d0f36218b5dd3c3941cd8aa320f0","modified":1482906586477},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1482906586477},{"_id":"public/images/blogimages/2016/androidart_ipc.png","hash":"3f3a0ead6d747386983ab5618f46a2f0c33bd84e","modified":1482906586492},{"_id":"public/images/blogimages/2016/androidart_service2.png","hash":"afdf0ded0d671ec79a03fddbd253de15eb5248ea","modified":1482906586492},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1482906586505}],"Category":[{"name":"read","_id":"cix8kaj3w0006bxs6bzk63kra"},{"name":"technology","_id":"cix8kaj48000bbxs6hw928tpv"},{"name":"accumulation","_id":"cix8kaj4r000obxs63x5xzzwk"}],"Data":[],"Page":[{"title":"","layout":"about","_content":"\n<!--markdownabout-->\n#### \n","source":"about/index.md","raw":"title: \"\"\nlayout: \"about\"\n---\n\n<!--markdownabout-->\n#### \n","date":"2016-12-26T10:41:15.000Z","updated":"2016-12-26T10:41:15.000Z","path":"about/index.html","comments":1,"_id":"cix8kaj3g0001bxs6zhx41787","content":"<!--markdownabout-->\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>","excerpt":"","more":"<!--markdownabout-->\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4>"},{"title":"Categories","layout":"categories","_content":"","source":"categories/index.md","raw":"title: \"Categories\"\nlayout: \"categories\"\n---\n","date":"2016-12-26T10:41:15.000Z","updated":"2016-12-26T10:41:15.000Z","path":"categories/index.html","comments":1,"_id":"cix8kaj3j0003bxs625n9g8ll","content":"","excerpt":"","more":""},{"title":"Tags","layout":"tags","_content":"","source":"tags/index.md","raw":"title: \"Tags\"\nlayout: \"tags\"\n---\n","date":"2016-12-26T10:41:15.000Z","updated":"2016-12-26T10:41:15.000Z","path":"tags/index.html","comments":1,"_id":"cix8kaj3m0005bxs6wmxf79vk","content":"","excerpt":"","more":""}],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\n<!--more-->\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/2014-12-23-hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\n<!--more-->\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2014-12-22T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cix8kaj3b0000bxs613vlftu9","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"external\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"external\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"external\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"external\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"external\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"external\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"external\">Deployment</a></p>\n","excerpt":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>","more":"<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>"},{"layout":"book","title":"2015","keywords":",,2015","books":[{"title":"2 The Sicilian","status":"","author":"","publisher":"","language":"","link":"https://book.douban.com/subject/25762007/","cover":"https://img3.doubanio.com/mpic/s27244215.jpg","description":""},{"title":" The Godfather's Revenge","status":"","author":"","publisher":"","language":"","link":"http://book.douban.com/subject/4020110/","cover":"http://img3.douban.com/mpic/s4014854.jpg","description":null},{"title":" The Godfather Returns","status":"","author":"","publisher":"","language":"","link":"http://book.douban.com/subject/1959055/","cover":"http://img3.doubanio.com/mpic/s5848649.jpg","description":null},{"title":" The Godfather","status":"","author":"","publisher":"","language":"","link":"http://book.douban.com/subject/25762009/","cover":"http://img3.douban.com/mpic/s27227804.jpg","description":"ing"},{"title":" The Kite Runner","status":"","author":"","publisher":"","language":"","link":"http://book.douban.com/subject/1770782/","cover":"http://img3.douban.com/mpic/s1727290.jpg","description":""}],"_content":"","source":"_posts/2015-11-06-book-list-of-2015.md","raw":"---\nlayout: book\ntitle: 2015\ncategory: read\ntags: read\nkeywords: ,,2015\nbooks:\n    - title: 2 The Sicilian\n      status: \n      author: \n      publisher: \n      language: \n      link: https://book.douban.com/subject/25762007/\n      cover: https://img3.doubanio.com/mpic/s27244215.jpg\n      description: \n    - title:  The Godfather's Revenge\n      status: \n      author: \n      publisher: \n      language: \n      link: http://book.douban.com/subject/4020110/\n      cover: http://img3.douban.com/mpic/s4014854.jpg\n      description:\n    - title:  The Godfather Returns\n      status: \n      author: \n      publisher: \n      language: \n      link: http://book.douban.com/subject/1959055/\n      cover: http://img3.doubanio.com/mpic/s5848649.jpg\n      description:\n    - title:  The Godfather\n      status: \n      author: \n      publisher: \n      language: \n      link: http://book.douban.com/subject/25762009/\n      cover: http://img3.douban.com/mpic/s27227804.jpg\n      description: ing\n    - title:  The Kite Runner\n      status: \n      author: \n      publisher: \n      language: \n      link: http://book.douban.com/subject/1770782/\n      cover: http://img3.douban.com/mpic/s1727290.jpg\n      description: \n---\n","slug":"book-list-of-2015","published":1,"date":"2015-11-05T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj3h0002bxs6dxgppuzo","content":"","excerpt":"","more":""},{"layout":"post","title":"java","keywords":"java, , ","description":null,"banner":"http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%203.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%203.jpg","_content":"\n**java**[](http://www.kuqin.com/shuoit/20140708/341091.html)\n\n------\n\n\n\nJavaJava\n\n<!--more-->\n\n# Java\n\n### 1. \nCPU\n\n,\n\n### 2. \n(self contained)\n\n- ,,\n- \n- \n- \n- \n\n> \nfrom [JacobK](https://www.zhihu.com/question/21535820/answer/19120563)\n\n\n### 3. \n- \n- ,\n\nCPU(heap memory)ServletsCGIServletsCGI\n\n### 4. \nJavaJVMJVM****emailJVM\n\n### 5. \nRunnableThreadThreadThread[Read more...](http://www.journaldev.com/1016/java-thread-example-extending-thread-class-and-implementing-runnable-interface)\n\n### 6. \nJavaNewstart()RunnableRunnableCPURunningWaitingBlockedDead[Read more...](http://www.journaldev.com/1044/life-cycle-of-thread-understanding-thread-states-in-java)\n\n- **new Thread**Thread`Thread  t1=new Thread()`;\n- **runnable**CPUCPU`t1.start()`;\n- **running**CPUrun()CPU\n- **dead**\n- ****run()\n- ****stop()\n- **blocked**CPU\n- ****sleep(long t) \n- ****wait()motify()\n- ****suspend()resume()\n\n### 7. Threadrun()\nThreadrun()Threadstart()\n\n### 8. \nThreadSleep()Runnable\n\n### 9. \nCPU**CPU**32031 ****OS****Class SetThreadPriority\n\n### 10. (Thread Scheduler)(Time Slicing)\nRunnableCPUCPURunnableCPUJava\n\n### 11. (context-switching)\nCPU\n\n### 12. main()Java\nThreadjoint()main()[Read more...](http://www.journaldev.com/1024/java-thread-join-example-with-explanation)\n> join()join()join()join()sleepjoin()join()\n\n### 13.\n\n\na. violate\n\nb. WindowsUIsendMessage,postMessage\n\n```\n1)#define WM_THREAD_SENDMSG=WM_USER+20;  \n2)afx_msg int OnTSendmsg();\n3)ON_MESSAGE(WM_THREAD_SENDMSG,OnTSM)\n4)OnTSM()\n5)PostMessagePost\n```\n\nc. CEventEvent\n\n```\n1)CEventCEvent threadStart;\n2)threadStart.SetEvent();\n3)WaitForSingleObject()CEvent\n```\n\nObjectwait()notify()notifyAll()[Read more](http://www.journaldev.com/1037/java-thread-wait-notify-and-notifyall-example)\n\n### 14. \n()/windowsLinux\n\n****\n\n**FIFO**[^14] [Read Read Read...](http://blog.csdn.net/chenhuajie123/article/details/9315477)\n\n\n### 15. wait(), notify()notifyAll()Object\nJava(monitor) wait()notify()JavaObjectJava\n\n### 16. wait(), notify()notifyAll()\nwait()notify()notify()\n\n### 17. Threadsleep()yield()\nThreadsleep()yield()\n\n### 18. \nJava(atomic concurrent classes)volatile[Read more](http://www.journaldev.com/1061/java-synchronization-and-thread-safety-tutorial-with-examples)\n\n### 19. volatileJava\nvolatile\n\n### 20. \n\n\n### 21. \nThreadsetDaemon(true)start()IllegalThreadStateException\n\n### 22. ThreadLocal?\nThreadLocalThreadLocal\n\nThreadget()set()ThreadLocalprivate static[Read more](http://www.journaldev.com/1076/java-threadlocal-example-to-create-thread-local-variables)\n\n### 23. (Deadlock)\n\n- **Mutual exclusion**\n- **Hold and wait**\n- **No preemption**\n- **Circular wait**\n\n[](http://blog.csdn.net/joejames/article/details/37960873)\n\n### 24. Java\n\n\njava.util.concurrent.Executorsjava.util.concurrent.Executor[](http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor)\n\n# Java\n\n### 1. Java Concurrency API(atomic classes)\n\n\nint++1\n\nJDK1.5JDK1.5java.util.concurrent.atomicintlong[Read more](http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor)\n\n### 2. Java Concurrency APILock(Lock interface)\nLock\n- \n- \n- \n- \n\n### 3. Executors\nExecutorjava.util.concurrent.Executor Java5Executor\n\nExecutors[Read more](http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor)\n\n### 4. -\njava.util.concurrent.BlockingQueue\n\nNullPointerException\n\n\n\nBlockingQueuejava collections-[-](http://www.journaldev.com/1034/java-blockingqueue-example-implementing-producer-consumer-problem)\n\n### 5. \nJavanext()ConcurrentModificationException\n\n\n\nConcurrentHashMap, CopyOnWriteArrayList CopyOnWriteArraySet\n\n### 6. Executors\nExecutorsExecutorExecutorServiceScheduledExecutorServiceThreadFactoryCallable\n\nExecutors\n\n# \n\n### [](http://blog.csdn.net/column/details/killthreadseries.html)\n\n### [](http://blog.csdn.net/chenhuajie123/article/details/9315477)\n\n-----\n\n[^1-3]: [](http://blog.chinaunix.net/uid-21411227-id-1826748.html)\n[^14]: [](http://blog.csdn.net/chenhuajie123/article/details/9315477)\n","source":"_posts/2015-03-16-java-multithreading-concurrent.md","raw":"---\nlayout: post\ntitle: java\ncategory: technology\ntags: accumulation\nkeywords: java, , \ndescription:\nbanner: http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%203.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%203.jpg\n---\n\n**java**[](http://www.kuqin.com/shuoit/20140708/341091.html)\n\n------\n\n\n\nJavaJava\n\n<!--more-->\n\n# Java\n\n### 1. \nCPU\n\n,\n\n### 2. \n(self contained)\n\n- ,,\n- \n- \n- \n- \n\n> \nfrom [JacobK](https://www.zhihu.com/question/21535820/answer/19120563)\n\n\n### 3. \n- \n- ,\n\nCPU(heap memory)ServletsCGIServletsCGI\n\n### 4. \nJavaJVMJVM****emailJVM\n\n### 5. \nRunnableThreadThreadThread[Read more...](http://www.journaldev.com/1016/java-thread-example-extending-thread-class-and-implementing-runnable-interface)\n\n### 6. \nJavaNewstart()RunnableRunnableCPURunningWaitingBlockedDead[Read more...](http://www.journaldev.com/1044/life-cycle-of-thread-understanding-thread-states-in-java)\n\n- **new Thread**Thread`Thread  t1=new Thread()`;\n- **runnable**CPUCPU`t1.start()`;\n- **running**CPUrun()CPU\n- **dead**\n- ****run()\n- ****stop()\n- **blocked**CPU\n- ****sleep(long t) \n- ****wait()motify()\n- ****suspend()resume()\n\n### 7. Threadrun()\nThreadrun()Threadstart()\n\n### 8. \nThreadSleep()Runnable\n\n### 9. \nCPU**CPU**32031 ****OS****Class SetThreadPriority\n\n### 10. (Thread Scheduler)(Time Slicing)\nRunnableCPUCPURunnableCPUJava\n\n### 11. (context-switching)\nCPU\n\n### 12. main()Java\nThreadjoint()main()[Read more...](http://www.journaldev.com/1024/java-thread-join-example-with-explanation)\n> join()join()join()join()sleepjoin()join()\n\n### 13.\n\n\na. violate\n\nb. WindowsUIsendMessage,postMessage\n\n```\n1)#define WM_THREAD_SENDMSG=WM_USER+20;  \n2)afx_msg int OnTSendmsg();\n3)ON_MESSAGE(WM_THREAD_SENDMSG,OnTSM)\n4)OnTSM()\n5)PostMessagePost\n```\n\nc. CEventEvent\n\n```\n1)CEventCEvent threadStart;\n2)threadStart.SetEvent();\n3)WaitForSingleObject()CEvent\n```\n\nObjectwait()notify()notifyAll()[Read more](http://www.journaldev.com/1037/java-thread-wait-notify-and-notifyall-example)\n\n### 14. \n()/windowsLinux\n\n****\n\n**FIFO**[^14] [Read Read Read...](http://blog.csdn.net/chenhuajie123/article/details/9315477)\n\n\n### 15. wait(), notify()notifyAll()Object\nJava(monitor) wait()notify()JavaObjectJava\n\n### 16. wait(), notify()notifyAll()\nwait()notify()notify()\n\n### 17. Threadsleep()yield()\nThreadsleep()yield()\n\n### 18. \nJava(atomic concurrent classes)volatile[Read more](http://www.journaldev.com/1061/java-synchronization-and-thread-safety-tutorial-with-examples)\n\n### 19. volatileJava\nvolatile\n\n### 20. \n\n\n### 21. \nThreadsetDaemon(true)start()IllegalThreadStateException\n\n### 22. ThreadLocal?\nThreadLocalThreadLocal\n\nThreadget()set()ThreadLocalprivate static[Read more](http://www.journaldev.com/1076/java-threadlocal-example-to-create-thread-local-variables)\n\n### 23. (Deadlock)\n\n- **Mutual exclusion**\n- **Hold and wait**\n- **No preemption**\n- **Circular wait**\n\n[](http://blog.csdn.net/joejames/article/details/37960873)\n\n### 24. Java\n\n\njava.util.concurrent.Executorsjava.util.concurrent.Executor[](http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor)\n\n# Java\n\n### 1. Java Concurrency API(atomic classes)\n\n\nint++1\n\nJDK1.5JDK1.5java.util.concurrent.atomicintlong[Read more](http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor)\n\n### 2. Java Concurrency APILock(Lock interface)\nLock\n- \n- \n- \n- \n\n### 3. Executors\nExecutorjava.util.concurrent.Executor Java5Executor\n\nExecutors[Read more](http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor)\n\n### 4. -\njava.util.concurrent.BlockingQueue\n\nNullPointerException\n\n\n\nBlockingQueuejava collections-[-](http://www.journaldev.com/1034/java-blockingqueue-example-implementing-producer-consumer-problem)\n\n### 5. \nJavanext()ConcurrentModificationException\n\n\n\nConcurrentHashMap, CopyOnWriteArrayList CopyOnWriteArraySet\n\n### 6. Executors\nExecutorsExecutorExecutorServiceScheduledExecutorServiceThreadFactoryCallable\n\nExecutors\n\n# \n\n### [](http://blog.csdn.net/column/details/killthreadseries.html)\n\n### [](http://blog.csdn.net/chenhuajie123/article/details/9315477)\n\n-----\n\n[^1-3]: [](http://blog.chinaunix.net/uid-21411227-id-1826748.html)\n[^14]: [](http://blog.csdn.net/chenhuajie123/article/details/9315477)\n","slug":"java-multithreading-concurrent","published":1,"date":"2015-03-15T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj3l0004bxs6wizadlw9","content":"<p><strong>java</strong><a href=\"http://www.kuqin.com/shuoit/20140708/341091.html\" target=\"_blank\" rel=\"external\"></a></p>\n<hr>\n<p></p>\n<p>JavaJava</p>\n<a id=\"more\"></a>\n<h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>CPU</p>\n<p>,</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>(self contained)</p>\n<ul>\n<li>,,</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<blockquote>\n<p><br>from <a href=\"https://www.zhihu.com/question/21535820/answer/19120563\" target=\"_blank\" rel=\"external\">JacobK</a></p>\n</blockquote>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ul>\n<li></li>\n<li>,</li>\n</ul>\n<p>CPU(heap memory)ServletsCGIServletsCGI</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p>JavaJVMJVM<strong></strong>emailJVM</p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>RunnableThreadThreadThread<a href=\"http://www.journaldev.com/1016/java-thread-example-extending-thread-class-and-implementing-runnable-interface\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h3><p>JavaNewstart()RunnableRunnableCPURunningWaitingBlockedDead<a href=\"http://www.journaldev.com/1044/life-cycle-of-thread-understanding-thread-states-in-java\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<ul>\n<li><strong>new Thread</strong>Thread<code>Thread  t1=new Thread()</code>;</li>\n<li><strong>runnable</strong>CPUCPU<code>t1.start()</code>;</li>\n<li><strong>running</strong>CPUrun()CPU</li>\n<li><strong>dead</strong></li>\n<li><strong></strong>run()</li>\n<li><strong></strong>stop()</li>\n<li><strong>blocked</strong>CPU</li>\n<li><strong></strong>sleep(long t) </li>\n<li><strong></strong>wait()motify()</li>\n<li><strong></strong>suspend()resume()</li>\n</ul>\n<h3 id=\"7-Threadrun-\"><a href=\"#7-Threadrun-\" class=\"headerlink\" title=\"7. Threadrun()\"></a>7. Threadrun()</h3><p>Threadrun()Threadstart()</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><p>ThreadSleep()Runnable</p>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><p>CPU<strong>CPU</strong>32031 <strong></strong>OS<strong></strong>Class SetThreadPriority</p>\n<h3 id=\"10--Thread-Scheduler--Time-Slicing-\"><a href=\"#10--Thread-Scheduler--Time-Slicing-\" class=\"headerlink\" title=\"10. (Thread Scheduler)(Time Slicing)\"></a>10. (Thread Scheduler)(Time Slicing)</h3><p>RunnableCPUCPURunnableCPUJava</p>\n<h3 id=\"11--context-switching-\"><a href=\"#11--context-switching-\" class=\"headerlink\" title=\"11. (context-switching)\"></a>11. (context-switching)</h3><p>CPU</p>\n<h3 id=\"12-main-Java\"><a href=\"#12-main-Java\" class=\"headerlink\" title=\"12. main()Java\"></a>12. main()Java</h3><p>Threadjoint()main()<a href=\"http://www.journaldev.com/1024/java-thread-join-example-with-explanation\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<blockquote>\n<p>join()join()join()join()sleepjoin()join()</p>\n</blockquote>\n<h3 id=\"13-\"><a href=\"#13-\" class=\"headerlink\" title=\"13.\"></a>13.</h3><p></p>\n<p>a. violate</p>\n<p>b. WindowsUIsendMessage,postMessage</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">1)#define WM_THREAD_SENDMSG=WM_USER+20;  </div><div class=\"line\">2)afx_msg int OnTSendmsg();</div><div class=\"line\">3)ON_MESSAGE(WM_THREAD_SENDMSG,OnTSM)</div><div class=\"line\">4)OnTSM()</div><div class=\"line\">5)PostMessagePost</div></pre></td></tr></table></figure>\n<p>c. CEventEvent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">1)CEventCEvent threadStart;</div><div class=\"line\">2)threadStart.SetEvent();</div><div class=\"line\">3)WaitForSingleObject()CEvent</div></pre></td></tr></table></figure>\n<p>Objectwait()notify()notifyAll()<a href=\"http://www.journaldev.com/1037/java-thread-wait-notify-and-notifyall-example\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<h3 id=\"14-\"><a href=\"#14-\" class=\"headerlink\" title=\"14. \"></a>14. </h3><p>()/windowsLinux</p>\n<p><strong></strong></p>\n<p><strong>FIFO</strong>[^14] <a href=\"http://blog.csdn.net/chenhuajie123/article/details/9315477\" target=\"_blank\" rel=\"external\">Read Read Read</a></p>\n<h3 id=\"15-wait-notify-notifyAll-Object\"><a href=\"#15-wait-notify-notifyAll-Object\" class=\"headerlink\" title=\"15. wait(), notify()notifyAll()Object\"></a>15. wait(), notify()notifyAll()Object</h3><p>Java(monitor) wait()notify()JavaObjectJava</p>\n<h3 id=\"16-wait-notify-notifyAll-\"><a href=\"#16-wait-notify-notifyAll-\" class=\"headerlink\" title=\"16. wait(), notify()notifyAll()\"></a>16. wait(), notify()notifyAll()</h3><p>wait()notify()notify()</p>\n<h3 id=\"17-Threadsleep-yield-\"><a href=\"#17-Threadsleep-yield-\" class=\"headerlink\" title=\"17. Threadsleep()yield()\"></a>17. Threadsleep()yield()</h3><p>Threadsleep()yield()</p>\n<h3 id=\"18-\"><a href=\"#18-\" class=\"headerlink\" title=\"18. \"></a>18. </h3><p>Java(atomic concurrent classes)volatile<a href=\"http://www.journaldev.com/1061/java-synchronization-and-thread-safety-tutorial-with-examples\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<h3 id=\"19-volatileJava\"><a href=\"#19-volatileJava\" class=\"headerlink\" title=\"19. volatileJava\"></a>19. volatileJava</h3><p>volatile</p>\n<h3 id=\"20-\"><a href=\"#20-\" class=\"headerlink\" title=\"20. \"></a>20. </h3><p></p>\n<h3 id=\"21-\"><a href=\"#21-\" class=\"headerlink\" title=\"21. \"></a>21. </h3><p>ThreadsetDaemon(true)start()IllegalThreadStateException</p>\n<h3 id=\"22-ThreadLocal\"><a href=\"#22-ThreadLocal\" class=\"headerlink\" title=\"22. ThreadLocal?\"></a>22. ThreadLocal?</h3><p>ThreadLocalThreadLocal</p>\n<p>Threadget()set()ThreadLocalprivate static<a href=\"http://www.journaldev.com/1076/java-threadlocal-example-to-create-thread-local-variables\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<h3 id=\"23--Deadlock-\"><a href=\"#23--Deadlock-\" class=\"headerlink\" title=\"23. (Deadlock)\"></a>23. (Deadlock)</h3><p></p>\n<ul>\n<li><strong>Mutual exclusion</strong></li>\n<li><strong>Hold and wait</strong></li>\n<li><strong>No preemption</strong></li>\n<li><strong>Circular wait</strong></li>\n</ul>\n<p><a href=\"http://blog.csdn.net/joejames/article/details/37960873\" target=\"_blank\" rel=\"external\"></a></p>\n<h3 id=\"24-Java\"><a href=\"#24-Java\" class=\"headerlink\" title=\"24. Java\"></a>24. Java</h3><p></p>\n<p>java.util.concurrent.Executorsjava.util.concurrent.Executor<a href=\"http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor\" target=\"_blank\" rel=\"external\"></a></p>\n<h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><h3 id=\"1-Java-Concurrency-API-atomic-classes-\"><a href=\"#1-Java-Concurrency-API-atomic-classes-\" class=\"headerlink\" title=\"1. Java Concurrency API(atomic classes)\"></a>1. Java Concurrency API(atomic classes)</h3><p></p>\n<p>int++1</p>\n<p>JDK1.5JDK1.5java.util.concurrent.atomicintlong<a href=\"http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<h3 id=\"2-Java-Concurrency-APILock-Lock-interface-\"><a href=\"#2-Java-Concurrency-APILock-Lock-interface-\" class=\"headerlink\" title=\"2. Java Concurrency APILock(Lock interface)\"></a>2. Java Concurrency APILock(Lock interface)</h3><p>Lock</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"3-Executors\"><a href=\"#3-Executors\" class=\"headerlink\" title=\"3. Executors\"></a>3. Executors</h3><p>Executorjava.util.concurrent.Executor Java5Executor</p>\n<p>Executors<a href=\"http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor\" target=\"_blank\" rel=\"external\">Read more</a></p>\n<h3 id=\"4--\"><a href=\"#4--\" class=\"headerlink\" title=\"4. -\"></a>4. -</h3><p>java.util.concurrent.BlockingQueue</p>\n<p>NullPointerException</p>\n<p></p>\n<p>BlockingQueuejava collections-<a href=\"http://www.journaldev.com/1034/java-blockingqueue-example-implementing-producer-consumer-problem\" target=\"_blank\" rel=\"external\">-</a></p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>Javanext()ConcurrentModificationException</p>\n<p></p>\n<p>ConcurrentHashMap, CopyOnWriteArrayList CopyOnWriteArraySet</p>\n<h3 id=\"6-Executors\"><a href=\"#6-Executors\" class=\"headerlink\" title=\"6. Executors\"></a>6. Executors</h3><p>ExecutorsExecutorExecutorServiceScheduledExecutorServiceThreadFactoryCallable</p>\n<p>Executors</p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://blog.csdn.net/column/details/killthreadseries.html\" target=\"_blank\" rel=\"external\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://blog.csdn.net/chenhuajie123/article/details/9315477\" target=\"_blank\" rel=\"external\"></a></h3><hr>\n","excerpt":"<p><strong>java</strong><a href=\"http://www.kuqin.com/shuoit/20140708/341091.html\"></a></p>\n<hr>\n<p></p>\n<p>JavaJava</p>","more":"<h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><p>CPU</p>\n<p>,</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><p>(self contained)</p>\n<ul>\n<li>,,</li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<blockquote>\n<p><br>from <a href=\"https://www.zhihu.com/question/21535820/answer/19120563\">JacobK</a></p>\n</blockquote>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ul>\n<li></li>\n<li>,</li>\n</ul>\n<p>CPU(heap memory)ServletsCGIServletsCGI</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4. \"></a>4. </h3><p>JavaJVMJVM<strong></strong>emailJVM</p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>RunnableThreadThreadThread<a href=\"http://www.journaldev.com/1016/java-thread-example-extending-thread-class-and-implementing-runnable-interface\">Read more</a></p>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h3><p>JavaNewstart()RunnableRunnableCPURunningWaitingBlockedDead<a href=\"http://www.journaldev.com/1044/life-cycle-of-thread-understanding-thread-states-in-java\">Read more</a></p>\n<ul>\n<li><strong>new Thread</strong>Thread<code>Thread  t1=new Thread()</code>;</li>\n<li><strong>runnable</strong>CPUCPU<code>t1.start()</code>;</li>\n<li><strong>running</strong>CPUrun()CPU</li>\n<li><strong>dead</strong></li>\n<li><strong></strong>run()</li>\n<li><strong></strong>stop()</li>\n<li><strong>blocked</strong>CPU</li>\n<li><strong></strong>sleep(long t) </li>\n<li><strong></strong>wait()motify()</li>\n<li><strong></strong>suspend()resume()</li>\n</ul>\n<h3 id=\"7-Threadrun-\"><a href=\"#7-Threadrun-\" class=\"headerlink\" title=\"7. Threadrun()\"></a>7. Threadrun()</h3><p>Threadrun()Threadstart()</p>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><p>ThreadSleep()Runnable</p>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><p>CPU<strong>CPU</strong>32031 <strong></strong>OS<strong></strong>Class SetThreadPriority</p>\n<h3 id=\"10--Thread-Scheduler--Time-Slicing-\"><a href=\"#10--Thread-Scheduler--Time-Slicing-\" class=\"headerlink\" title=\"10. (Thread Scheduler)(Time Slicing)\"></a>10. (Thread Scheduler)(Time Slicing)</h3><p>RunnableCPUCPURunnableCPUJava</p>\n<h3 id=\"11--context-switching-\"><a href=\"#11--context-switching-\" class=\"headerlink\" title=\"11. (context-switching)\"></a>11. (context-switching)</h3><p>CPU</p>\n<h3 id=\"12-main-Java\"><a href=\"#12-main-Java\" class=\"headerlink\" title=\"12. main()Java\"></a>12. main()Java</h3><p>Threadjoint()main()<a href=\"http://www.journaldev.com/1024/java-thread-join-example-with-explanation\">Read more</a></p>\n<blockquote>\n<p>join()join()join()join()sleepjoin()join()</p>\n</blockquote>\n<h3 id=\"13-\"><a href=\"#13-\" class=\"headerlink\" title=\"13.\"></a>13.</h3><p></p>\n<p>a. violate</p>\n<p>b. WindowsUIsendMessage,postMessage</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">1)#define WM_THREAD_SENDMSG=WM_USER+20;  </div><div class=\"line\">2)afx_msg int OnTSendmsg();</div><div class=\"line\">3)ON_MESSAGE(WM_THREAD_SENDMSG,OnTSM)</div><div class=\"line\">4)OnTSM()</div><div class=\"line\">5)PostMessagePost</div></pre></td></tr></table></figure>\n<p>c. CEventEvent</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">1)CEventCEvent threadStart;</div><div class=\"line\">2)threadStart.SetEvent();</div><div class=\"line\">3)WaitForSingleObject()CEvent</div></pre></td></tr></table></figure>\n<p>Objectwait()notify()notifyAll()<a href=\"http://www.journaldev.com/1037/java-thread-wait-notify-and-notifyall-example\">Read more</a></p>\n<h3 id=\"14-\"><a href=\"#14-\" class=\"headerlink\" title=\"14. \"></a>14. </h3><p>()/windowsLinux</p>\n<p><strong></strong></p>\n<p><strong>FIFO</strong>[^14] <a href=\"http://blog.csdn.net/chenhuajie123/article/details/9315477\">Read Read Read</a></p>\n<h3 id=\"15-wait-notify-notifyAll-Object\"><a href=\"#15-wait-notify-notifyAll-Object\" class=\"headerlink\" title=\"15. wait(), notify()notifyAll()Object\"></a>15. wait(), notify()notifyAll()Object</h3><p>Java(monitor) wait()notify()JavaObjectJava</p>\n<h3 id=\"16-wait-notify-notifyAll-\"><a href=\"#16-wait-notify-notifyAll-\" class=\"headerlink\" title=\"16. wait(), notify()notifyAll()\"></a>16. wait(), notify()notifyAll()</h3><p>wait()notify()notify()</p>\n<h3 id=\"17-Threadsleep-yield-\"><a href=\"#17-Threadsleep-yield-\" class=\"headerlink\" title=\"17. Threadsleep()yield()\"></a>17. Threadsleep()yield()</h3><p>Threadsleep()yield()</p>\n<h3 id=\"18-\"><a href=\"#18-\" class=\"headerlink\" title=\"18. \"></a>18. </h3><p>Java(atomic concurrent classes)volatile<a href=\"http://www.journaldev.com/1061/java-synchronization-and-thread-safety-tutorial-with-examples\">Read more</a></p>\n<h3 id=\"19-volatileJava\"><a href=\"#19-volatileJava\" class=\"headerlink\" title=\"19. volatileJava\"></a>19. volatileJava</h3><p>volatile</p>\n<h3 id=\"20-\"><a href=\"#20-\" class=\"headerlink\" title=\"20. \"></a>20. </h3><p></p>\n<h3 id=\"21-\"><a href=\"#21-\" class=\"headerlink\" title=\"21. \"></a>21. </h3><p>ThreadsetDaemon(true)start()IllegalThreadStateException</p>\n<h3 id=\"22-ThreadLocal\"><a href=\"#22-ThreadLocal\" class=\"headerlink\" title=\"22. ThreadLocal?\"></a>22. ThreadLocal?</h3><p>ThreadLocalThreadLocal</p>\n<p>Threadget()set()ThreadLocalprivate static<a href=\"http://www.journaldev.com/1076/java-threadlocal-example-to-create-thread-local-variables\">Read more</a></p>\n<h3 id=\"23--Deadlock-\"><a href=\"#23--Deadlock-\" class=\"headerlink\" title=\"23. (Deadlock)\"></a>23. (Deadlock)</h3><p></p>\n<ul>\n<li><strong>Mutual exclusion</strong></li>\n<li><strong>Hold and wait</strong></li>\n<li><strong>No preemption</strong></li>\n<li><strong>Circular wait</strong></li>\n</ul>\n<p><a href=\"http://blog.csdn.net/joejames/article/details/37960873\"></a></p>\n<h3 id=\"24-Java\"><a href=\"#24-Java\" class=\"headerlink\" title=\"24. Java\"></a>24. Java</h3><p></p>\n<p>java.util.concurrent.Executorsjava.util.concurrent.Executor<a href=\"http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor\"></a></p>\n<h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><h3 id=\"1-Java-Concurrency-API-atomic-classes-\"><a href=\"#1-Java-Concurrency-API-atomic-classes-\" class=\"headerlink\" title=\"1. Java Concurrency API(atomic classes)\"></a>1. Java Concurrency API(atomic classes)</h3><p></p>\n<p>int++1</p>\n<p>JDK1.5JDK1.5java.util.concurrent.atomicintlong<a href=\"http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor\">Read more</a></p>\n<h3 id=\"2-Java-Concurrency-APILock-Lock-interface-\"><a href=\"#2-Java-Concurrency-APILock-Lock-interface-\" class=\"headerlink\" title=\"2. Java Concurrency APILock(Lock interface)\"></a>2. Java Concurrency APILock(Lock interface)</h3><p>Lock</p>\n<ul>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n<h3 id=\"3-Executors\"><a href=\"#3-Executors\" class=\"headerlink\" title=\"3. Executors\"></a>3. Executors</h3><p>Executorjava.util.concurrent.Executor Java5Executor</p>\n<p>Executors<a href=\"http://www.journaldev.com/1069/java-thread-pool-example-using-executors-and-threadpoolexecutor\">Read more</a></p>\n<h3 id=\"4--\"><a href=\"#4--\" class=\"headerlink\" title=\"4. -\"></a>4. -</h3><p>java.util.concurrent.BlockingQueue</p>\n<p>NullPointerException</p>\n<p></p>\n<p>BlockingQueuejava collections-<a href=\"http://www.journaldev.com/1034/java-blockingqueue-example-implementing-producer-consumer-problem\">-</a></p>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><p>Javanext()ConcurrentModificationException</p>\n<p></p>\n<p>ConcurrentHashMap, CopyOnWriteArrayList CopyOnWriteArraySet</p>\n<h3 id=\"6-Executors\"><a href=\"#6-Executors\" class=\"headerlink\" title=\"6. Executors\"></a>6. Executors</h3><p>ExecutorsExecutorExecutorServiceScheduledExecutorServiceThreadFactoryCallable</p>\n<p>Executors</p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://blog.csdn.net/column/details/killthreadseries.html\"></a></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://blog.csdn.net/chenhuajie123/article/details/9315477\"></a></h3><hr>"},{"layout":"post","title":"android Google map","keywords":"android, google map","description":"google map2.0","banner":"http://obxk8w81b.bkt.clouddn.com/Chestnut%20Tree%20in%20Blossom.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Chestnut%20Tree%20in%20Blossom.jpg","_content":"\n\n### 1.google map\ngoogle mapGoogle map apigoogle-play-services_libSDK Managerandroid apiExtrasGoogle Play Service\n\nmap2.0com.google.android.gms\n\nGoogle Maps Android API OpenGL ES2OpenGL ES2 AndroidManifest.xml <uses-feature><manifest>\n\n~~~ Java\n<uses-feature\n        android:glEsVersion=\"0x00020000\"\n        android:required=\"true\"/>\n~~~\n\n<!--more-->\n\n### 2.\n1.OnCameraChangeListener\n\n~~~ Java\n@Override\npublic void onCameraChange(CameraPosition arg0) {\n\t// TODO Auto-generated method stub\n\tzoom = arg0.zoom;\n}\n~~~\n\n2. Activity  Fragment  Activity  <fragment> \n\n3. OnMapReadyCallback onMapReady(GoogleMap)GoogleMapGoogleMapUiSettings\n\n4.FragmentgetMapAsync()\n\n5.map\n\n~~~ Java\nMarkerOptions markerOpt = new MarkerOptions();  \nmarkerOpt.position(new LatLng(geoLat, geoLng));  \nmarkerOpt.draggable(false);  \nmarkerOpt.visible(true);  \nmarkerOpt.anchor(0.5f, 0.5f);//  \nmarkerOpt.icon(BitmapDescriptorFactory  \n\t.fromResource(R.drawable.sos_location_38x53));  \nmMap.addMarker(markerOpt);  \n//  \ncameraPosition = new CameraPosition.Builder()  \n.target(new LatLng(geoLat, geoLng))              // Sets the center of the map to ZINTUN  \n\t.zoom(zoom)                  //   \n\t.bearing(0)                // Sets the orientation of the camera to east  \n\t.build();                  // Creates a CameraPosition from the builder  \nmMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n~~~   \n\n6..9<br>\n[Is there a way to implement rounded corners to a Mapfragment?](http://stackoverflow.com/questions/14469208/is-there-a-way-to-implement-rounded-corners-to-a-mapfragment)\n\n7.google\nGoogleMap.setMyLocationEnabled(false);\n\n8.mapviewscrollview\ngetParent().requestDisallowInterceptTouchEvent(true);touch\n\n~~~ Java\npublic class MyMapView extends MapView {\n    private ViewParent mViewParent;\n\n    public MyMapView(Context context) {\n        super(context);\n    }\n\n    public MyMapView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MyMapView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    public MyMapView(Context context, GoogleMapOptions options) {\n        super(context, options);\n    }\n\n\n    public void setViewParent(@Nullable final ViewParent viewParent) { //any ViewGroup\n        mViewParent = viewParent;\n    }\n\n    @Override\n    public boolean onInterceptTouchEvent(final MotionEvent event) {\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                if (null == mViewParent) {\n                    //touchviewtouch\n                    getParent().requestDisallowInterceptTouchEvent(true);\n                } else {\n                    mViewParent.requestDisallowInterceptTouchEvent(true);\n                }\n                break;\n            case MotionEvent.ACTION_UP:\n                if (null == mViewParent) {\n                    //touch\n                    getParent().requestDisallowInterceptTouchEvent(false);\n                } else {\n                    mViewParent.requestDisallowInterceptTouchEvent(false);\n                }\n                break;\n            default:\n                break;\n        }\n\n        return super.onInterceptTouchEvent(event);\n    }\n}\n~~~\n\n9.LocationListeneronProviderDisabled\n\n\n\n~~~ Java\n@Override\npublic void onProviderDisabled(String provider) {\n    isLocatedSuccess = false;\n    if (provider.equals(\"network\")) //\n        startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));\n}\n~~~\n\n### 3.\ncom.android.vending.apkGoogle play storecom.google.android.gms.apkGoogle play services\n\n\nhttp://pan.baidu.com/s/1i5q8jo5 solm\n\n\n","source":"_posts/2016-03-01-android-googlemap-summary.md","raw":"---\nlayout: post\ntitle: android Google map\ncategory: technology\ntags: accumulation\nkeywords: android, google map\ndescription: google map2.0\nbanner: http://obxk8w81b.bkt.clouddn.com/Chestnut%20Tree%20in%20Blossom.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Chestnut%20Tree%20in%20Blossom.jpg\n---\n\n\n### 1.google map\ngoogle mapGoogle map apigoogle-play-services_libSDK Managerandroid apiExtrasGoogle Play Service\n\nmap2.0com.google.android.gms\n\nGoogle Maps Android API OpenGL ES2OpenGL ES2 AndroidManifest.xml <uses-feature><manifest>\n\n~~~ Java\n<uses-feature\n        android:glEsVersion=\"0x00020000\"\n        android:required=\"true\"/>\n~~~\n\n<!--more-->\n\n### 2.\n1.OnCameraChangeListener\n\n~~~ Java\n@Override\npublic void onCameraChange(CameraPosition arg0) {\n\t// TODO Auto-generated method stub\n\tzoom = arg0.zoom;\n}\n~~~\n\n2. Activity  Fragment  Activity  <fragment> \n\n3. OnMapReadyCallback onMapReady(GoogleMap)GoogleMapGoogleMapUiSettings\n\n4.FragmentgetMapAsync()\n\n5.map\n\n~~~ Java\nMarkerOptions markerOpt = new MarkerOptions();  \nmarkerOpt.position(new LatLng(geoLat, geoLng));  \nmarkerOpt.draggable(false);  \nmarkerOpt.visible(true);  \nmarkerOpt.anchor(0.5f, 0.5f);//  \nmarkerOpt.icon(BitmapDescriptorFactory  \n\t.fromResource(R.drawable.sos_location_38x53));  \nmMap.addMarker(markerOpt);  \n//  \ncameraPosition = new CameraPosition.Builder()  \n.target(new LatLng(geoLat, geoLng))              // Sets the center of the map to ZINTUN  \n\t.zoom(zoom)                  //   \n\t.bearing(0)                // Sets the orientation of the camera to east  \n\t.build();                  // Creates a CameraPosition from the builder  \nmMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n~~~   \n\n6..9<br>\n[Is there a way to implement rounded corners to a Mapfragment?](http://stackoverflow.com/questions/14469208/is-there-a-way-to-implement-rounded-corners-to-a-mapfragment)\n\n7.google\nGoogleMap.setMyLocationEnabled(false);\n\n8.mapviewscrollview\ngetParent().requestDisallowInterceptTouchEvent(true);touch\n\n~~~ Java\npublic class MyMapView extends MapView {\n    private ViewParent mViewParent;\n\n    public MyMapView(Context context) {\n        super(context);\n    }\n\n    public MyMapView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MyMapView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    public MyMapView(Context context, GoogleMapOptions options) {\n        super(context, options);\n    }\n\n\n    public void setViewParent(@Nullable final ViewParent viewParent) { //any ViewGroup\n        mViewParent = viewParent;\n    }\n\n    @Override\n    public boolean onInterceptTouchEvent(final MotionEvent event) {\n        switch (event.getAction()) {\n            case MotionEvent.ACTION_DOWN:\n                if (null == mViewParent) {\n                    //touchviewtouch\n                    getParent().requestDisallowInterceptTouchEvent(true);\n                } else {\n                    mViewParent.requestDisallowInterceptTouchEvent(true);\n                }\n                break;\n            case MotionEvent.ACTION_UP:\n                if (null == mViewParent) {\n                    //touch\n                    getParent().requestDisallowInterceptTouchEvent(false);\n                } else {\n                    mViewParent.requestDisallowInterceptTouchEvent(false);\n                }\n                break;\n            default:\n                break;\n        }\n\n        return super.onInterceptTouchEvent(event);\n    }\n}\n~~~\n\n9.LocationListeneronProviderDisabled\n\n\n\n~~~ Java\n@Override\npublic void onProviderDisabled(String provider) {\n    isLocatedSuccess = false;\n    if (provider.equals(\"network\")) //\n        startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));\n}\n~~~\n\n### 3.\ncom.android.vending.apkGoogle play storecom.google.android.gms.apkGoogle play services\n\n\nhttp://pan.baidu.com/s/1i5q8jo5 solm\n\n\n","slug":"android-googlemap-summary","published":1,"date":"2016-02-29T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj410008bxs6j8x0dglc","content":"<h3 id=\"1-google-map\"><a href=\"#1-google-map\" class=\"headerlink\" title=\"1.google map\"></a>1.google map</h3><p>google mapGoogle map apigoogle-play-services_libSDK Managerandroid apiExtrasGoogle Play Service</p>\n<p>map2.0com.google.android.gms</p>\n<p>Google Maps Android API OpenGL ES2OpenGL ES2 AndroidManifest.xml <uses-feature><manifest></manifest></uses-feature></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;uses-feature</div><div class=\"line\">        android:glEsVersion=<span class=\"string\">\"0x00020000\"</span></div><div class=\"line\">        android:required=<span class=\"string\">\"true\"</span>/&gt;</div></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><p>1.OnCameraChangeListener</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCameraChange</span><span class=\"params\">(CameraPosition arg0)</span> </span>&#123;</div><div class=\"line\">\t<span class=\"comment\">// TODO Auto-generated method stub</span></div><div class=\"line\">\tzoom = arg0.zoom;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>2. Activity  Fragment  Activity  <fragment> </fragment></p>\n<p>3. OnMapReadyCallback onMapReady(GoogleMap)GoogleMapGoogleMapUiSettings</p>\n<p>4.FragmentgetMapAsync()</p>\n<p>5.map</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">MarkerOptions markerOpt = <span class=\"keyword\">new</span> MarkerOptions();  </div><div class=\"line\">markerOpt.position(<span class=\"keyword\">new</span> LatLng(geoLat, geoLng));  </div><div class=\"line\">markerOpt.draggable(<span class=\"keyword\">false</span>);  </div><div class=\"line\">markerOpt.visible(<span class=\"keyword\">true</span>);  </div><div class=\"line\">markerOpt.anchor(<span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>);<span class=\"comment\">//  </span></div><div class=\"line\">markerOpt.icon(BitmapDescriptorFactory  </div><div class=\"line\">\t.fromResource(R.drawable.sos_location_38x53));  </div><div class=\"line\">mMap.addMarker(markerOpt);  </div><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\">cameraPosition = <span class=\"keyword\">new</span> CameraPosition.Builder()  </div><div class=\"line\">.target(<span class=\"keyword\">new</span> LatLng(geoLat, geoLng))              <span class=\"comment\">// Sets the center of the map to ZINTUN  </span></div><div class=\"line\">\t.zoom(zoom)                  <span class=\"comment\">//   </span></div><div class=\"line\">\t.bearing(<span class=\"number\">0</span>)                <span class=\"comment\">// Sets the orientation of the camera to east  </span></div><div class=\"line\">\t.build();                  <span class=\"comment\">// Creates a CameraPosition from the builder  </span></div><div class=\"line\">mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));</div><div class=\"line\">~~~   </div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">6</span>..<span class=\"number\">9</span>&lt;br&gt;</div><div class=\"line\">[Is there a way to implement rounded corners to a Mapfragment?](http:<span class=\"comment\">//stackoverflow.com/questions/14469208/is-there-a-way-to-implement-rounded-corners-to-a-mapfragment)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">7</span>.google</div><div class=\"line\">GoogleMap.setMyLocationEnabled(<span class=\"keyword\">false</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">8</span>.mapviewscrollview</div><div class=\"line\">getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);touch</div><div class=\"line\"></div><div class=\"line\">~~~ Java</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMapView</span> <span class=\"keyword\">extends</span> <span class=\"title\">MapView</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> ViewParent mViewParent;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context, GoogleMapOptions options)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, options);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setViewParent</span><span class=\"params\">(@Nullable <span class=\"keyword\">final</span> ViewParent viewParent)</span> </span>&#123; <span class=\"comment\">//any ViewGroup</span></div><div class=\"line\">        mViewParent = viewParent;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onInterceptTouchEvent</span><span class=\"params\">(<span class=\"keyword\">final</span> MotionEvent event)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">switch</span> (event.getAction()) &#123;</div><div class=\"line\">            <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</div><div class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mViewParent) &#123;</div><div class=\"line\">                    <span class=\"comment\">//touchviewtouch</span></div><div class=\"line\">                    getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                    mViewParent.requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</div><div class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mViewParent) &#123;</div><div class=\"line\">                    <span class=\"comment\">//touch</span></div><div class=\"line\">                    getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                    mViewParent.requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">default</span>:</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onInterceptTouchEvent(event);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>9.LocationListeneronProviderDisabled</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProviderDisabled</span><span class=\"params\">(String provider)</span> </span>&#123;</div><div class=\"line\">    isLocatedSuccess = <span class=\"keyword\">false</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (provider.equals(<span class=\"string\">\"network\"</span>)) <span class=\"comment\">//</span></div><div class=\"line\">        startActivity(<span class=\"keyword\">new</span> Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>com.android.vending.apkGoogle play storecom.google.android.gms.apkGoogle play services<br></p>\n<p><a href=\"http://pan.baidu.com/s/1i5q8jo5\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1i5q8jo5</a> solm</p>\n<p></p>\n","excerpt":"<h3 id=\"1-google-map\"><a href=\"#1-google-map\" class=\"headerlink\" title=\"1.google map\"></a>1.google map</h3><p>google mapGoogle map apigoogle-play-services_libSDK Managerandroid apiExtrasGoogle Play Service</p>\n<p>map2.0com.google.android.gms</p>\n<p>Google Maps Android API OpenGL ES2OpenGL ES2 AndroidManifest.xml <uses-feature><manifest></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;uses-feature</div><div class=\"line\">        android:glEsVersion=<span class=\"string\">\"0x00020000\"</span></div><div class=\"line\">        android:required=<span class=\"string\">\"true\"</span>/&gt;</div></pre></td></tr></table></figure>","more":"<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><p>1.OnCameraChangeListener</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCameraChange</span><span class=\"params\">(CameraPosition arg0)</span> </span>&#123;</div><div class=\"line\">\t<span class=\"comment\">// TODO Auto-generated method stub</span></div><div class=\"line\">\tzoom = arg0.zoom;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>2. Activity  Fragment  Activity  <fragment> </p>\n<p>3. OnMapReadyCallback onMapReady(GoogleMap)GoogleMapGoogleMapUiSettings</p>\n<p>4.FragmentgetMapAsync()</p>\n<p>5.map</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">MarkerOptions markerOpt = <span class=\"keyword\">new</span> MarkerOptions();  </div><div class=\"line\">markerOpt.position(<span class=\"keyword\">new</span> LatLng(geoLat, geoLng));  </div><div class=\"line\">markerOpt.draggable(<span class=\"keyword\">false</span>);  </div><div class=\"line\">markerOpt.visible(<span class=\"keyword\">true</span>);  </div><div class=\"line\">markerOpt.anchor(<span class=\"number\">0.5f</span>, <span class=\"number\">0.5f</span>);<span class=\"comment\">//  </span></div><div class=\"line\">markerOpt.icon(BitmapDescriptorFactory  </div><div class=\"line\">\t.fromResource(R.drawable.sos_location_38x53));  </div><div class=\"line\">mMap.addMarker(markerOpt);  </div><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\">cameraPosition = <span class=\"keyword\">new</span> CameraPosition.Builder()  </div><div class=\"line\">.target(<span class=\"keyword\">new</span> LatLng(geoLat, geoLng))              <span class=\"comment\">// Sets the center of the map to ZINTUN  </span></div><div class=\"line\">\t.zoom(zoom)                  <span class=\"comment\">//   </span></div><div class=\"line\">\t.bearing(<span class=\"number\">0</span>)                <span class=\"comment\">// Sets the orientation of the camera to east  </span></div><div class=\"line\">\t.build();                  <span class=\"comment\">// Creates a CameraPosition from the builder  </span></div><div class=\"line\">mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));</div><div class=\"line\">~~~   </div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">6</span>..<span class=\"number\">9</span>&lt;br&gt;</div><div class=\"line\">[Is there a way to implement rounded corners to a Mapfragment?](http:<span class=\"comment\">//stackoverflow.com/questions/14469208/is-there-a-way-to-implement-rounded-corners-to-a-mapfragment)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">7</span>.google</div><div class=\"line\">GoogleMap.setMyLocationEnabled(<span class=\"keyword\">false</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">8</span>.mapviewscrollview</div><div class=\"line\">getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);touch</div><div class=\"line\"></div><div class=\"line\">~~~ Java</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMapView</span> <span class=\"keyword\">extends</span> <span class=\"title\">MapView</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> ViewParent mViewParent;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyMapView</span><span class=\"params\">(Context context, GoogleMapOptions options)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, options);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setViewParent</span><span class=\"params\">(@Nullable <span class=\"keyword\">final</span> ViewParent viewParent)</span> </span>&#123; <span class=\"comment\">//any ViewGroup</span></div><div class=\"line\">        mViewParent = viewParent;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onInterceptTouchEvent</span><span class=\"params\">(<span class=\"keyword\">final</span> MotionEvent event)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">switch</span> (event.getAction()) &#123;</div><div class=\"line\">            <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</div><div class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mViewParent) &#123;</div><div class=\"line\">                    <span class=\"comment\">//touchviewtouch</span></div><div class=\"line\">                    getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                    mViewParent.requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</div><div class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span> == mViewParent) &#123;</div><div class=\"line\">                    <span class=\"comment\">//touch</span></div><div class=\"line\">                    getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">                    mViewParent.requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">            <span class=\"keyword\">default</span>:</div><div class=\"line\">                <span class=\"keyword\">break</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onInterceptTouchEvent(event);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>9.LocationListeneronProviderDisabled</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProviderDisabled</span><span class=\"params\">(String provider)</span> </span>&#123;</div><div class=\"line\">    isLocatedSuccess = <span class=\"keyword\">false</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (provider.equals(<span class=\"string\">\"network\"</span>)) <span class=\"comment\">//</span></div><div class=\"line\">        startActivity(<span class=\"keyword\">new</span> Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>com.android.vending.apkGoogle play storecom.google.android.gms.apkGoogle play services<br></p>\n<p><a href=\"http://pan.baidu.com/s/1i5q8jo5\">http://pan.baidu.com/s/1i5q8jo5</a> solm</p>\n<p></p>"},{"layout":"post","title":"facebook google+ Twitter sign-in fragment","keywords":"android, google map, fragments","description":"google map2.0","banner":"http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg","_content":"\n\n### 1.\nblog: [Google+Facebook](http://www.cnblogs.com/lngg057/p/5020192.html)\n\ng+: [G+ start](https://developers.google.com/identity/sign-in/android/start)\n\nfacebook: [Facebook start](https://developers.facebook.com/docs/android/getting-started)\n\niCCP: [Not recognizing known sRGB profile](http://www.bigademo.com/iccp-not-recognizing-known-srgb-profile/)\n\n<!--more-->\n\n- \n\n    [2016-04-01 11:24:04 - Dex Loader] Unable to execute dex: method ID not in [0, 0xffff]: 65536\n    [2016-04-01 11:24:04 - VIVAT_SHARESDK] Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536\n\n[](http://www.cnblogs.com/yaozhongxiao/p/3521428.html)\n\n- iCCP: Not recognizing known sRGB profile pngiCCP profile sRGB\n\nhttp://my.oschina.net/1pei/blog/479162?fromerr=ARrUPlGS\n\n\n\n1:Image Magick http://www.imagemagick.com.cn/download.html.windowsdll\n\n2  \n\n~~~ C++\n//WINDOWS\nset fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  \nfor /f \"tokens=*\" %i in ('dir/s/b *.png') do \"%fn%\" \"%i\" -strip \"%i\"\nwindow%%i%i\n~~~\n\n~~~ C++\n//LINUX\n set fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  \nfor /f \"tokens=*\" %%i in ('dir/s/b *.png') do \"%fn%\" \"%%i\" -strip \"%%i\"\n~~~\n\n### 2.\n\n- 1.This client application's callback url has been locked.\n\n    Twitter signinlogcat[Twitter](https://apps.twitter.com)SettingsEnable Callback Locking (It is recommended to enable callback locking to ensure apps cannot overwrite the callback url)appcallback url[](https://twittercommunity.com/t/callback-url-is-locked/59481)\n\n### 3.add() vs. replace()\n- Fragment2add()replace()\n\n    add()FragmentFragmentonAttach()-onResume()FragmentViewattachcontainerView\n\n    ActivtyFragmentonPause()-onDetach()\n\n    replace()FragmentFragmentFragmentonAttach()FragmentonPause()-onDetach()containerViewdetachFragmentView\n\n- show() & hide().\n\n    FragmentFragmentViewFragmentViewdetachcontainerViewchildViewattach() & detach()Fragmentdetach()onPause()-onDestroyView()\n\n    FragmentViewdetachattach()onCreateView()-onResume()\n\n- remove()\n\n    remove()add()onAttach()-onResume()remove()onPause()-onDetach()\n\n\n### 4.FragmentTransaction add  replace \n FragmentTransaction  add   replace .add  replace \n\n- add fragment container \n\n    Add a fragment to the activity state. This fragment may optionally also have its view (if Fragment.onCreateView returns non-null) into a container view of the activity.\n\n~~~ Java\npublic abstract FragmentTransaction add (int containerViewId, Fragment fragment, String tag)\n~~~\n\n\n- replace removeidfragmentaddfragment\n\n    Replace an existing fragment that was added to a container. This is essentially the same as calling remove(Fragment) for all currently added fragments that were added with the same containerViewId and then add(int, Fragment, String) with the same arguments given here.\n\n~~~ Java\npublic abstract FragmentTransaction replace (int containerViewId, Fragment fragment, String tag)\n~~~\n\n\n\nFrameLayoutFragmentadd  replace FrameLayoutaddFrameLayout2replaceaddFragmentFrameLayoutaddFragment\n\naddreplace\n\n###\t5.fragment\nfragmentreplace()tagonResume\n\n~~~ Java\ngetFragmentManager()\n \t.beginTransaction()\n    .replace(R.id.base_container,\n    \t inputVerifyCodeFragment,\"tag_code\")\n    .addToBackStack(null).commit();\n~~~\n\n### 6.fragment\nfragment2fragmentfragment1fragment2android:clickable=\"true\"\n","source":"_posts/2016-03-15-facebook-google+signin.md","raw":"---\nlayout: post\ntitle: facebook google+ Twitter sign-in fragment\ncategory: accumulation\ntags: accumulation\nkeywords: android, google map, fragments\ndescription: google map2.0\nbanner: http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg\n---\n\n\n### 1.\nblog: [Google+Facebook](http://www.cnblogs.com/lngg057/p/5020192.html)\n\ng+: [G+ start](https://developers.google.com/identity/sign-in/android/start)\n\nfacebook: [Facebook start](https://developers.facebook.com/docs/android/getting-started)\n\niCCP: [Not recognizing known sRGB profile](http://www.bigademo.com/iccp-not-recognizing-known-srgb-profile/)\n\n<!--more-->\n\n- \n\n    [2016-04-01 11:24:04 - Dex Loader] Unable to execute dex: method ID not in [0, 0xffff]: 65536\n    [2016-04-01 11:24:04 - VIVAT_SHARESDK] Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536\n\n[](http://www.cnblogs.com/yaozhongxiao/p/3521428.html)\n\n- iCCP: Not recognizing known sRGB profile pngiCCP profile sRGB\n\nhttp://my.oschina.net/1pei/blog/479162?fromerr=ARrUPlGS\n\n\n\n1:Image Magick http://www.imagemagick.com.cn/download.html.windowsdll\n\n2  \n\n~~~ C++\n//WINDOWS\nset fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  \nfor /f \"tokens=*\" %i in ('dir/s/b *.png') do \"%fn%\" \"%i\" -strip \"%i\"\nwindow%%i%i\n~~~\n\n~~~ C++\n//LINUX\n set fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  \nfor /f \"tokens=*\" %%i in ('dir/s/b *.png') do \"%fn%\" \"%%i\" -strip \"%%i\"\n~~~\n\n### 2.\n\n- 1.This client application's callback url has been locked.\n\n    Twitter signinlogcat[Twitter](https://apps.twitter.com)SettingsEnable Callback Locking (It is recommended to enable callback locking to ensure apps cannot overwrite the callback url)appcallback url[](https://twittercommunity.com/t/callback-url-is-locked/59481)\n\n### 3.add() vs. replace()\n- Fragment2add()replace()\n\n    add()FragmentFragmentonAttach()-onResume()FragmentViewattachcontainerView\n\n    ActivtyFragmentonPause()-onDetach()\n\n    replace()FragmentFragmentFragmentonAttach()FragmentonPause()-onDetach()containerViewdetachFragmentView\n\n- show() & hide().\n\n    FragmentFragmentViewFragmentViewdetachcontainerViewchildViewattach() & detach()Fragmentdetach()onPause()-onDestroyView()\n\n    FragmentViewdetachattach()onCreateView()-onResume()\n\n- remove()\n\n    remove()add()onAttach()-onResume()remove()onPause()-onDetach()\n\n\n### 4.FragmentTransaction add  replace \n FragmentTransaction  add   replace .add  replace \n\n- add fragment container \n\n    Add a fragment to the activity state. This fragment may optionally also have its view (if Fragment.onCreateView returns non-null) into a container view of the activity.\n\n~~~ Java\npublic abstract FragmentTransaction add (int containerViewId, Fragment fragment, String tag)\n~~~\n\n\n- replace removeidfragmentaddfragment\n\n    Replace an existing fragment that was added to a container. This is essentially the same as calling remove(Fragment) for all currently added fragments that were added with the same containerViewId and then add(int, Fragment, String) with the same arguments given here.\n\n~~~ Java\npublic abstract FragmentTransaction replace (int containerViewId, Fragment fragment, String tag)\n~~~\n\n\n\nFrameLayoutFragmentadd  replace FrameLayoutaddFrameLayout2replaceaddFragmentFrameLayoutaddFragment\n\naddreplace\n\n###\t5.fragment\nfragmentreplace()tagonResume\n\n~~~ Java\ngetFragmentManager()\n \t.beginTransaction()\n    .replace(R.id.base_container,\n    \t inputVerifyCodeFragment,\"tag_code\")\n    .addToBackStack(null).commit();\n~~~\n\n### 6.fragment\nfragment2fragmentfragment1fragment2android:clickable=\"true\"\n","slug":"facebook-google+signin","published":1,"date":"2016-03-14T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj420009bxs6au58dxam","content":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p>blog: <a href=\"http://www.cnblogs.com/lngg057/p/5020192.html\" target=\"_blank\" rel=\"external\">Google+Facebook</a></p>\n<p>g+: <a href=\"https://developers.google.com/identity/sign-in/android/start\" target=\"_blank\" rel=\"external\">G+ start</a></p>\n<p>facebook: <a href=\"https://developers.facebook.com/docs/android/getting-started\" target=\"_blank\" rel=\"external\">Facebook start</a></p>\n<p>iCCP: <a href=\"http://www.bigademo.com/iccp-not-recognizing-known-srgb-profile/\" target=\"_blank\" rel=\"external\">Not recognizing known sRGB profile</a></p>\n<a id=\"more\"></a>\n<ul>\n<li><p></p>\n<p>  [2016-04-01 11:24:04 - Dex Loader] Unable to execute dex: method ID not in [0, 0xffff]: 65536<br>  [2016-04-01 11:24:04 - VIVAT_SHARESDK] Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536</p>\n</li>\n</ul>\n<p><a href=\"http://www.cnblogs.com/yaozhongxiao/p/3521428.html\" target=\"_blank\" rel=\"external\"></a></p>\n<ul>\n<li>iCCP: Not recognizing known sRGB profile pngiCCP profile sRGB</li>\n</ul>\n<p><a href=\"http://my.oschina.net/1pei/blog/479162?fromerr=ARrUPlGS\" target=\"_blank\" rel=\"external\">http://my.oschina.net/1pei/blog/479162?fromerr=ARrUPlGS</a></p>\n<p></p>\n<p>1:Image Magick <a href=\"http://www.imagemagick.com.cn/download.html.windowsdll\" target=\"_blank\" rel=\"external\">http://www.imagemagick.com.cn/download.html.windowsdll</a></p>\n<p>2  </p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//WINDOWS</div><div class=\"line\">set fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  </div><div class=\"line\">for /f \"tokens=*\" %i in ('dir/s/b *.png') do \"%fn%\" \"%i\" -strip \"%i\"</div><div class=\"line\">window%%i%i</div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//LINUX</div><div class=\"line\"> set fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  </div><div class=\"line\">for /f \"tokens=*\" %%i in ('dir/s/b *.png') do \"%fn%\" \"%%i\" -strip \"%%i\"</div></pre></td></tr></table></figure>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><ul>\n<li><p>1.This client applications callback url has been locked.</p>\n<p>  Twitter signinlogcat<a href=\"https://apps.twitter.com\" target=\"_blank\" rel=\"external\">Twitter</a>SettingsEnable Callback Locking (It is recommended to enable callback locking to ensure apps cannot overwrite the callback url)appcallback url<a href=\"https://twittercommunity.com/t/callback-url-is-locked/59481\" target=\"_blank\" rel=\"external\"></a></p>\n</li>\n</ul>\n<h3 id=\"3-add-vs-replace\"><a href=\"#3-add-vs-replace\" class=\"headerlink\" title=\"3.add() vs. replace()\"></a>3.add() vs. replace()</h3><ul>\n<li><p>Fragment2add()replace()</p>\n<p>  add()FragmentFragmentonAttach()-onResume()FragmentViewattachcontainerView</p>\n<p>  ActivtyFragmentonPause()-onDetach()</p>\n<p>  replace()FragmentFragmentFragmentonAttach()FragmentonPause()-onDetach()containerViewdetachFragmentView</p>\n</li>\n<li><p>show() &amp; hide().</p>\n<p>  FragmentFragmentViewFragmentViewdetachcontainerViewchildViewattach() &amp; detach()Fragmentdetach()onPause()-onDestroyView()</p>\n<p>  FragmentViewdetachattach()onCreateView()-onResume()</p>\n</li>\n<li><p>remove()</p>\n<p>  remove()add()onAttach()-onResume()remove()onPause()-onDetach()</p>\n</li>\n</ul>\n<h3 id=\"4-FragmentTransaction-add--replace-\"><a href=\"#4-FragmentTransaction-add--replace-\" class=\"headerlink\" title=\"4.FragmentTransaction add  replace \"></a>4.FragmentTransaction add  replace </h3><p> FragmentTransaction  add   replace .add  replace </p>\n<ul>\n<li><p>add fragment container </p>\n<p>  Add a fragment to the activity state. This fragment may optionally also have its view (if Fragment.onCreateView returns non-null) into a container view of the activity.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> FragmentTransaction <span class=\"title\">add</span> <span class=\"params\">(<span class=\"keyword\">int</span> containerViewId, Fragment fragment, String tag)</span></span></div></pre></td></tr></table></figure>\n<ul>\n<li><p>replace removeidfragmentaddfragment</p>\n<p>  Replace an existing fragment that was added to a container. This is essentially the same as calling remove(Fragment) for all currently added fragments that were added with the same containerViewId and then add(int, Fragment, String) with the same arguments given here.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> FragmentTransaction <span class=\"title\">replace</span> <span class=\"params\">(<span class=\"keyword\">int</span> containerViewId, Fragment fragment, String tag)</span></span></div></pre></td></tr></table></figure>\n<p>FrameLayoutFragmentadd  replace FrameLayoutaddFrameLayout2replaceaddFragmentFrameLayoutaddFragment</p>\n<p>addreplace</p>\n<h3 id=\"5-fragment\"><a href=\"#5-fragment\" class=\"headerlink\" title=\"5.fragment\"></a>5.fragment</h3><p>fragmentreplace()tagonResume</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">getFragmentManager()</div><div class=\"line\"> \t.beginTransaction()</div><div class=\"line\">    .replace(R.id.base_container,</div><div class=\"line\">    \t inputVerifyCodeFragment,<span class=\"string\">\"tag_code\"</span>)</div><div class=\"line\">    .addToBackStack(<span class=\"keyword\">null</span>).commit();</div></pre></td></tr></table></figure>\n<h3 id=\"6-fragment\"><a href=\"#6-fragment\" class=\"headerlink\" title=\"6.fragment\"></a>6.fragment</h3><p>fragment2fragmentfragment1fragment2android:clickable=true</p>\n","excerpt":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p>blog: <a href=\"http://www.cnblogs.com/lngg057/p/5020192.html\">Google+Facebook</a></p>\n<p>g+: <a href=\"https://developers.google.com/identity/sign-in/android/start\">G+ start</a></p>\n<p>facebook: <a href=\"https://developers.facebook.com/docs/android/getting-started\">Facebook start</a></p>\n<p>iCCP: <a href=\"http://www.bigademo.com/iccp-not-recognizing-known-srgb-profile/\">Not recognizing known sRGB profile</a></p>","more":"<ul>\n<li><p></p>\n<p>  [2016-04-01 11:24:04 - Dex Loader] Unable to execute dex: method ID not in [0, 0xffff]: 65536<br>  [2016-04-01 11:24:04 - VIVAT_SHARESDK] Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536</p>\n</li>\n</ul>\n<p><a href=\"http://www.cnblogs.com/yaozhongxiao/p/3521428.html\"></a></p>\n<ul>\n<li>iCCP: Not recognizing known sRGB profile pngiCCP profile sRGB</li>\n</ul>\n<p><a href=\"http://my.oschina.net/1pei/blog/479162?fromerr=ARrUPlGS\">http://my.oschina.net/1pei/blog/479162?fromerr=ARrUPlGS</a></p>\n<p></p>\n<p>1:Image Magick <a href=\"http://www.imagemagick.com.cn/download.html.windowsdll\">http://www.imagemagick.com.cn/download.html.windowsdll</a></p>\n<p>2  </p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//WINDOWS</div><div class=\"line\">set fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  </div><div class=\"line\">for /f \"tokens=*\" %i in ('dir/s/b *.png') do \"%fn%\" \"%i\" -strip \"%i\"</div><div class=\"line\">window%%i%i</div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//LINUX</div><div class=\"line\"> set fn=E:\\Program Files\\ImageMagick-6.9.0-Q16\\convert.exe  </div><div class=\"line\">for /f \"tokens=*\" %%i in ('dir/s/b *.png') do \"%fn%\" \"%%i\" -strip \"%%i\"</div></pre></td></tr></table></figure>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><ul>\n<li><p>1.This client applications callback url has been locked.</p>\n<p>  Twitter signinlogcat<a href=\"https://apps.twitter.com\">Twitter</a>SettingsEnable Callback Locking (It is recommended to enable callback locking to ensure apps cannot overwrite the callback url)appcallback url<a href=\"https://twittercommunity.com/t/callback-url-is-locked/59481\"></a></p>\n</li>\n</ul>\n<h3 id=\"3-add-vs-replace\"><a href=\"#3-add-vs-replace\" class=\"headerlink\" title=\"3.add() vs. replace()\"></a>3.add() vs. replace()</h3><ul>\n<li><p>Fragment2add()replace()</p>\n<p>  add()FragmentFragmentonAttach()-onResume()FragmentViewattachcontainerView</p>\n<p>  ActivtyFragmentonPause()-onDetach()</p>\n<p>  replace()FragmentFragmentFragmentonAttach()FragmentonPause()-onDetach()containerViewdetachFragmentView</p>\n</li>\n<li><p>show() &amp; hide().</p>\n<p>  FragmentFragmentViewFragmentViewdetachcontainerViewchildViewattach() &amp; detach()Fragmentdetach()onPause()-onDestroyView()</p>\n<p>  FragmentViewdetachattach()onCreateView()-onResume()</p>\n</li>\n<li><p>remove()</p>\n<p>  remove()add()onAttach()-onResume()remove()onPause()-onDetach()</p>\n</li>\n</ul>\n<h3 id=\"4-FragmentTransaction-add--replace-\"><a href=\"#4-FragmentTransaction-add--replace-\" class=\"headerlink\" title=\"4.FragmentTransaction add  replace \"></a>4.FragmentTransaction add  replace </h3><p> FragmentTransaction  add   replace .add  replace </p>\n<ul>\n<li><p>add fragment container </p>\n<p>  Add a fragment to the activity state. This fragment may optionally also have its view (if Fragment.onCreateView returns non-null) into a container view of the activity.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> FragmentTransaction <span class=\"title\">add</span> <span class=\"params\">(<span class=\"keyword\">int</span> containerViewId, Fragment fragment, String tag)</span></span></div></pre></td></tr></table></figure>\n<ul>\n<li><p>replace removeidfragmentaddfragment</p>\n<p>  Replace an existing fragment that was added to a container. This is essentially the same as calling remove(Fragment) for all currently added fragments that were added with the same containerViewId and then add(int, Fragment, String) with the same arguments given here.</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> FragmentTransaction <span class=\"title\">replace</span> <span class=\"params\">(<span class=\"keyword\">int</span> containerViewId, Fragment fragment, String tag)</span></span></div></pre></td></tr></table></figure>\n<p>FrameLayoutFragmentadd  replace FrameLayoutaddFrameLayout2replaceaddFragmentFrameLayoutaddFragment</p>\n<p>addreplace</p>\n<h3 id=\"5-fragment\"><a href=\"#5-fragment\" class=\"headerlink\" title=\"5.fragment\"></a>5.fragment</h3><p>fragmentreplace()tagonResume</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">getFragmentManager()</div><div class=\"line\"> \t.beginTransaction()</div><div class=\"line\">    .replace(R.id.base_container,</div><div class=\"line\">    \t inputVerifyCodeFragment,<span class=\"string\">\"tag_code\"</span>)</div><div class=\"line\">    .addToBackStack(<span class=\"keyword\">null</span>).commit();</div></pre></td></tr></table></figure>\n<h3 id=\"6-fragment\"><a href=\"#6-fragment\" class=\"headerlink\" title=\"6.fragment\"></a>6.fragment</h3><p>fragment2fragmentfragment1fragment2android:clickable=true</p>"},{"layout":"post","title":"android","keywords":", ,","banner":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Chestnut%20Branches.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Chestnut%20Branches.jpg","_content":"\n\n### mipmap drawable \nNexus 6  493 ppi xxhdpixxxhdpixxxhdpimipmap-xxxhdpi,sclaemipmap\n\n### setTranslucentStatus()\nAndroid4.4\n\n<!--more-->\n\n~~~ Java\npublic class MainActivity extends Activity\n{\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //api>=19\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT)\n        {\n            setTranslucentStatus(true);\n        }\n\n        SystemBarTintManager tintManager = new SystemBarTintManager(this);\n        tintManager.setStatusBarTintEnabled(true);\n        tintManager.setStatusBarTintColor(Color.parseColor(\"#FFC1E0\"));\n    }\n\n    @TargetApi(19)\n    private void setTranslucentStatus(boolean on)\n    {\n        Window win = getWindow();\n        WindowManager.LayoutParams winParams = win.getAttributes();\n        final int bits = WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS;\n        if (on)\n        {\n            winParams.flags |= bits;\n        }\n        else\n        {\n            winParams.flags &= ~bits;\n        }\n        win.setAttributes(winParams);\n    }\n}\n~~~\n\n\n\n~~~ Javascript%\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              <!---->\n              android:fitsSystemWindows=\"true\"\n              android:clipToPadding=\"true\"\n\n              android:orientation=\"vertical\"\n              android:background=\"#FFD9EC\"\n        >\n\n    <TextView\n            android:text=\"\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"50dp\"\n            android:textSize=\"23dp\"\n            android:layout_gravity=\"center_horizontal\"\n            android:gravity=\"center\"\n            android:background=\"#FFD9EC\"\n            />\n    <TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@android:color/darker_gray\"/>\n\n</LinearLayout>\n~~~\n\n### Bitmap\n\n~~~ Java\npublic int getBitmapSize(Bitmap bitmap){\n    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT){     //API 19\n        return bitmap.getAllocationByteCount();\n    }\n    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR1){//API 12\n        return bitmap.getByteCount();\n    }\n    return bitmap.getRowBytes() * bitmap.getHeight();                //earlier version\n}\n~~~\n\n\n### Activity\n\n\n\n* 1Activityandroid:configChanges\n\n* 2Activityandroid:configChanges=\"orientation\"\n\n* 3Activityandroid:configChanges=\"orientation\\|keyboardHidden\"onConfigurationChanged\n\n\n\n1Activity\n\n2Activity\n\n~~~ Java\nonCreate-->\nonStart-->\nonResume-->\n~~~\n\n3crtl+f12\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\n~~~\n4crtl+f12log\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\n~~~\n5AndroidManifest.xmlActivity android:configChanges=\"orientation\"3\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\n~~~\n64onConfigChanged\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\nonConfigurationChanged-->\n~~~\n75android:configChanges=\"orientation\" android:configChanges=\"orientation\\|keyboardHidden\"3onConfigChanged\n\n~~~ Java\nonConfigurationChanged-->\n~~~\n84\n\n~~~ Java\nonConfigurationChanged-->\nonConfigurationChanged-->\n~~~\n\nActivity\n\n  - 1.ActivityToastAlertDialogActivity\n  - 2.ActivityHOME()onSaveInstanceState --> onPause --> onStop       onRestart -->onStart--->onResume\n  - 3.ActivityonPause--->onResume\n","source":"_posts/2016-03-20-android-new-knowledge-summary.md","raw":"---\nlayout: post\ntitle:  android\ncategory: accumulation\ntags: accumulation\nkeywords: , ,\nbanner: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Chestnut%20Branches.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Chestnut%20Branches.jpg\n---\n\n\n### mipmap drawable \nNexus 6  493 ppi xxhdpixxxhdpixxxhdpimipmap-xxxhdpi,sclaemipmap\n\n### setTranslucentStatus()\nAndroid4.4\n\n<!--more-->\n\n~~~ Java\npublic class MainActivity extends Activity\n{\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //api>=19\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT)\n        {\n            setTranslucentStatus(true);\n        }\n\n        SystemBarTintManager tintManager = new SystemBarTintManager(this);\n        tintManager.setStatusBarTintEnabled(true);\n        tintManager.setStatusBarTintColor(Color.parseColor(\"#FFC1E0\"));\n    }\n\n    @TargetApi(19)\n    private void setTranslucentStatus(boolean on)\n    {\n        Window win = getWindow();\n        WindowManager.LayoutParams winParams = win.getAttributes();\n        final int bits = WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS;\n        if (on)\n        {\n            winParams.flags |= bits;\n        }\n        else\n        {\n            winParams.flags &= ~bits;\n        }\n        win.setAttributes(winParams);\n    }\n}\n~~~\n\n\n\n~~~ Javascript%\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              <!---->\n              android:fitsSystemWindows=\"true\"\n              android:clipToPadding=\"true\"\n\n              android:orientation=\"vertical\"\n              android:background=\"#FFD9EC\"\n        >\n\n    <TextView\n            android:text=\"\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"50dp\"\n            android:textSize=\"23dp\"\n            android:layout_gravity=\"center_horizontal\"\n            android:gravity=\"center\"\n            android:background=\"#FFD9EC\"\n            />\n    <TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:background=\"@android:color/darker_gray\"/>\n\n</LinearLayout>\n~~~\n\n### Bitmap\n\n~~~ Java\npublic int getBitmapSize(Bitmap bitmap){\n    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT){     //API 19\n        return bitmap.getAllocationByteCount();\n    }\n    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR1){//API 12\n        return bitmap.getByteCount();\n    }\n    return bitmap.getRowBytes() * bitmap.getHeight();                //earlier version\n}\n~~~\n\n\n### Activity\n\n\n\n* 1Activityandroid:configChanges\n\n* 2Activityandroid:configChanges=\"orientation\"\n\n* 3Activityandroid:configChanges=\"orientation\\|keyboardHidden\"onConfigurationChanged\n\n\n\n1Activity\n\n2Activity\n\n~~~ Java\nonCreate-->\nonStart-->\nonResume-->\n~~~\n\n3crtl+f12\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\n~~~\n4crtl+f12log\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\n~~~\n5AndroidManifest.xmlActivity android:configChanges=\"orientation\"3\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\n~~~\n64onConfigChanged\n\n~~~ Java\nonSaveInstanceState-->\nonPause-->\nonStop-->\nonDestroy-->\nonCreate-->\nonStart-->\nonRestoreInstanceState-->\nonResume-->\nonConfigurationChanged-->\n~~~\n75android:configChanges=\"orientation\" android:configChanges=\"orientation\\|keyboardHidden\"3onConfigChanged\n\n~~~ Java\nonConfigurationChanged-->\n~~~\n84\n\n~~~ Java\nonConfigurationChanged-->\nonConfigurationChanged-->\n~~~\n\nActivity\n\n  - 1.ActivityToastAlertDialogActivity\n  - 2.ActivityHOME()onSaveInstanceState --> onPause --> onStop       onRestart -->onStart--->onResume\n  - 3.ActivityonPause--->onResume\n","slug":"android-new-knowledge-summary","published":1,"date":"2016-03-19T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj46000abxs60x3e3xyj","content":"<h3 id=\"mipmap-drawable-\"><a href=\"#mipmap-drawable-\" class=\"headerlink\" title=\"mipmap drawable \"></a>mipmap drawable </h3><p>Nexus 6  493 ppi xxhdpixxxhdpixxxhdpimipmap-xxxhdpi,sclaemipmap</p>\n<h3 id=\"setTranslucentStatus-\"><a href=\"#setTranslucentStatus-\" class=\"headerlink\" title=\"setTranslucentStatus()\"></a>setTranslucentStatus()</h3><p>Android4.4</p>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//api&gt;=19</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT)</div><div class=\"line\">        &#123;</div><div class=\"line\">            setTranslucentStatus(<span class=\"keyword\">true</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        SystemBarTintManager tintManager = <span class=\"keyword\">new</span> SystemBarTintManager(<span class=\"keyword\">this</span>);</div><div class=\"line\">        tintManager.setStatusBarTintEnabled(<span class=\"keyword\">true</span>);</div><div class=\"line\">        tintManager.setStatusBarTintColor(Color.parseColor(<span class=\"string\">\"#FFC1E0\"</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@TargetApi</span>(<span class=\"number\">19</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setTranslucentStatus</span><span class=\"params\">(<span class=\"keyword\">boolean</span> on)</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        Window win = getWindow();</div><div class=\"line\">        WindowManager.LayoutParams winParams = win.getAttributes();</div><div class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> bits = WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS;</div><div class=\"line\">        <span class=\"keyword\">if</span> (on)</div><div class=\"line\">        &#123;</div><div class=\"line\">            winParams.flags |= bits;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">        &#123;</div><div class=\"line\">            winParams.flags &amp;= ~bits;</div><div class=\"line\">        &#125;</div><div class=\"line\">        win.setAttributes(winParams);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">              android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">              android:layout_height=&quot;match_parent&quot;</div><div class=\"line\">              &lt;!----&gt;</div><div class=\"line\">              android:fitsSystemWindows=&quot;true&quot;</div><div class=\"line\">              android:clipToPadding=&quot;true&quot;</div><div class=\"line\"></div><div class=\"line\">              android:orientation=&quot;vertical&quot;</div><div class=\"line\">              android:background=&quot;#FFD9EC&quot;</div><div class=\"line\">        &gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">            android:text=&quot;&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;50dp&quot;</div><div class=\"line\">            android:textSize=&quot;23dp&quot;</div><div class=\"line\">            android:layout_gravity=&quot;center_horizontal&quot;</div><div class=\"line\">            android:gravity=&quot;center&quot;</div><div class=\"line\">            android:background=&quot;#FFD9EC&quot;</div><div class=\"line\">            /&gt;</div><div class=\"line\">    &lt;TextView</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;match_parent&quot;</div><div class=\"line\">            android:background=&quot;@android:color/darker_gray&quot;/&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getBitmapSize</span><span class=\"params\">(Bitmap bitmap)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT)&#123;     <span class=\"comment\">//API 19</span></div><div class=\"line\">        <span class=\"keyword\">return</span> bitmap.getAllocationByteCount();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB_MR1)&#123;<span class=\"comment\">//API 12</span></div><div class=\"line\">        <span class=\"keyword\">return</span> bitmap.getByteCount();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> bitmap.getRowBytes() * bitmap.getHeight();                <span class=\"comment\">//earlier version</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"Activity\"><a href=\"#Activity\" class=\"headerlink\" title=\"Activity\"></a>Activity</h3><p></p>\n<ul>\n<li><p>1Activityandroid:configChanges</p>\n</li>\n<li><p>2Activityandroid:configChanges=orientation</p>\n</li>\n<li><p>3Activityandroid:configChanges=orientation|keyboardHiddenonConfigurationChanged</p>\n</li>\n</ul>\n<p></p>\n<p>1Activity</p>\n<p>2Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>3crtl+f12</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>4crtl+f12log</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>5AndroidManifest.xmlActivity android:configChanges=orientation3</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>64onConfigChanged</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div><div class=\"line\">onConfigurationChanged--&gt;</div></pre></td></tr></table></figure>\n<p>75android:configChanges=orientation android:configChanges=orientation|keyboardHidden3onConfigChanged</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onConfigurationChanged--&gt;</div></pre></td></tr></table></figure>\n<p>84</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onConfigurationChanged--&gt;</div><div class=\"line\">onConfigurationChanged--&gt;</div></pre></td></tr></table></figure>\n<p>Activity</p>\n<ul>\n<li>1.ActivityToastAlertDialogActivity</li>\n<li>2.ActivityHOME()onSaveInstanceState &gt; onPause &gt; onStop       onRestart &gt;onStart&gt;onResume</li>\n<li>3.ActivityonPause&gt;onResume</li>\n</ul>\n","excerpt":"<h3 id=\"mipmap-drawable-\"><a href=\"#mipmap-drawable-\" class=\"headerlink\" title=\"mipmap drawable \"></a>mipmap drawable </h3><p>Nexus 6  493 ppi xxhdpixxxhdpixxxhdpimipmap-xxxhdpi,sclaemipmap</p>\n<h3 id=\"setTranslucentStatus-\"><a href=\"#setTranslucentStatus-\" class=\"headerlink\" title=\"setTranslucentStatus()\"></a>setTranslucentStatus()</h3><p>Android4.4</p>","more":"<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">//api&gt;=19</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT)</div><div class=\"line\">        &#123;</div><div class=\"line\">            setTranslucentStatus(<span class=\"keyword\">true</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        SystemBarTintManager tintManager = <span class=\"keyword\">new</span> SystemBarTintManager(<span class=\"keyword\">this</span>);</div><div class=\"line\">        tintManager.setStatusBarTintEnabled(<span class=\"keyword\">true</span>);</div><div class=\"line\">        tintManager.setStatusBarTintColor(Color.parseColor(<span class=\"string\">\"#FFC1E0\"</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@TargetApi</span>(<span class=\"number\">19</span>)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">setTranslucentStatus</span><span class=\"params\">(<span class=\"keyword\">boolean</span> on)</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        Window win = getWindow();</div><div class=\"line\">        WindowManager.LayoutParams winParams = win.getAttributes();</div><div class=\"line\">        <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> bits = WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS;</div><div class=\"line\">        <span class=\"keyword\">if</span> (on)</div><div class=\"line\">        &#123;</div><div class=\"line\">            winParams.flags |= bits;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span></div><div class=\"line\">        &#123;</div><div class=\"line\">            winParams.flags &amp;= ~bits;</div><div class=\"line\">        &#125;</div><div class=\"line\">        win.setAttributes(winParams);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class=\"line\">              android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">              android:layout_height=&quot;match_parent&quot;</div><div class=\"line\">              &lt;!----&gt;</div><div class=\"line\">              android:fitsSystemWindows=&quot;true&quot;</div><div class=\"line\">              android:clipToPadding=&quot;true&quot;</div><div class=\"line\"></div><div class=\"line\">              android:orientation=&quot;vertical&quot;</div><div class=\"line\">              android:background=&quot;#FFD9EC&quot;</div><div class=\"line\">        &gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;TextView</div><div class=\"line\">            android:text=&quot;&quot;</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;50dp&quot;</div><div class=\"line\">            android:textSize=&quot;23dp&quot;</div><div class=\"line\">            android:layout_gravity=&quot;center_horizontal&quot;</div><div class=\"line\">            android:gravity=&quot;center&quot;</div><div class=\"line\">            android:background=&quot;#FFD9EC&quot;</div><div class=\"line\">            /&gt;</div><div class=\"line\">    &lt;TextView</div><div class=\"line\">            android:layout_width=&quot;match_parent&quot;</div><div class=\"line\">            android:layout_height=&quot;match_parent&quot;</div><div class=\"line\">            android:background=&quot;@android:color/darker_gray&quot;/&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>\n<h3 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getBitmapSize</span><span class=\"params\">(Bitmap bitmap)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT)&#123;     <span class=\"comment\">//API 19</span></div><div class=\"line\">        <span class=\"keyword\">return</span> bitmap.getAllocationByteCount();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.HONEYCOMB_MR1)&#123;<span class=\"comment\">//API 12</span></div><div class=\"line\">        <span class=\"keyword\">return</span> bitmap.getByteCount();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> bitmap.getRowBytes() * bitmap.getHeight();                <span class=\"comment\">//earlier version</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"Activity\"><a href=\"#Activity\" class=\"headerlink\" title=\"Activity\"></a>Activity</h3><p></p>\n<ul>\n<li><p>1Activityandroid:configChanges</p>\n</li>\n<li><p>2Activityandroid:configChanges=orientation</p>\n</li>\n<li><p>3Activityandroid:configChanges=orientation|keyboardHiddenonConfigurationChanged</p>\n</li>\n</ul>\n<p></p>\n<p>1Activity</p>\n<p>2Activity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>3crtl+f12</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>4crtl+f12log</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>5AndroidManifest.xmlActivity android:configChanges=orientation3</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div></pre></td></tr></table></figure>\n<p>64onConfigChanged</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onSaveInstanceState--&gt;</div><div class=\"line\">onPause--&gt;</div><div class=\"line\">onStop--&gt;</div><div class=\"line\">onDestroy--&gt;</div><div class=\"line\">onCreate--&gt;</div><div class=\"line\">onStart--&gt;</div><div class=\"line\">onRestoreInstanceState--&gt;</div><div class=\"line\">onResume--&gt;</div><div class=\"line\">onConfigurationChanged--&gt;</div></pre></td></tr></table></figure>\n<p>75android:configChanges=orientation android:configChanges=orientation|keyboardHidden3onConfigChanged</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onConfigurationChanged--&gt;</div></pre></td></tr></table></figure>\n<p>84</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">onConfigurationChanged--&gt;</div><div class=\"line\">onConfigurationChanged--&gt;</div></pre></td></tr></table></figure>\n<p>Activity</p>\n<ul>\n<li>1.ActivityToastAlertDialogActivity</li>\n<li>2.ActivityHOME()onSaveInstanceState &gt; onPause &gt; onStop       onRestart &gt;onStart&gt;onResume</li>\n<li>3.ActivityonPause&gt;onResume</li>\n</ul>"},{"layout":"post","title":"google cloud messageGCMAzureNotification","keywords":"gcm, azure, notification","description":"google cloud messageGCMAzureNotification","banner":"http://obxk8w81b.bkt.clouddn.com/Country%20Lane%20with%20Two%20Figures.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Country%20Lane%20with%20Two%20Figures.jpg","_content":"\n\n### 1.\nmicrosoftazure\n\ngcm start: https://developers.google.com/cloud-messaging/android/start\n\nazure start: https://azure.microsoft.com/zh-cn/documentation/articles/notification-hubs-android-get-started/\n\ngcm official demo: https://github.com/google/gcm\n\ngcm personal demo: https://github.com/iammert/FastGCM\n\n<!--more-->\n\n### 2.\n- 1.demo\n\nstackoverflowhttp://stackoverflow.com/questions/13835676/google-cloud-messaging-messages-sometimes-not-received-until-network-state-cha\n\n\n### 3.onActivityResult()onResume()\nAPIActivityonResume()\n\n\n\n1.onResume()\n2.onAcitviyResult()\n\n\n\n### 4.Android4.4Uri\n\n~~~ Java\n\npublic static String getPhotoPathFromContentUri(Context context, Uri uri) {\n    String photoPath = \"\";\n    if(context == null || uri == null) {\n        return photoPath;\n    }\n\n    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT && DocumentsContract.isDocumentUri(context, uri)) {\n        String docId = DocumentsContract.getDocumentId(uri);\n        if(isExternalStorageDocument(uri)) {\n            String [] split = docId.split(\":\");\n            if(split.length >= 2) {\n                String type = split[0];\n                if(\"primary\".equalsIgnoreCase(type)) {\n                    photoPath = Environment.getExternalStorageDirectory() + \"/\" + split[1];\n                }\n            }\n        }\n        else if(isDownloadsDocument(uri)) {\n            Uri contentUri = ContentUris.withAppendedId(Uri.parse(\"content://downloads/public_downloads\"), Long.valueOf(docId));\n            photoPath = getDataColumn(context, contentUri, null, null);\n        }\n        else if(isMediaDocument(uri)) {\n            String[] split = docId.split(\":\");\n            if(split.length >= 2) {\n                String type = split[0];\n                Uri contentUris = null;\n                if(\"image\".equals(type)) {\n                    contentUris = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                }\n                else if(\"video\".equals(type)) {\n                    contentUris = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                }\n                else if(\"audio\".equals(type)) {\n                    contentUris = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                }\n                String selection = MediaStore.Images.Media._ID + \"=?\";\n                String[] selectionArgs = new String[] { split[1] };\n                photoPath = getDataColumn(context, contentUris, selection, selectionArgs);\n            }\n        }\n    }\n    else if(\"file\".equalsIgnoreCase(uri.getScheme())) {\n        photoPath = uri.getPath();\n    }\n    else {\n        photoPath = getDataColumn(context, uri, null, null);\n    }\n\n    return photoPath;\n}\n\nprivate static boolean isExternalStorageDocument(Uri uri) {\n    return \"com.android.externalstorage.documents\".equals(uri.getAuthority());\n}\n\nprivate static boolean isDownloadsDocument(Uri uri) {\n    return \"com.android.providers.downloads.documents\".equals(uri.getAuthority());\n}\n\nprivate static boolean isMediaDocument(Uri uri) {\n    return \"com.android.providers.media.documents\".equals(uri.getAuthority());\n}\n\nprivate static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) {\n    Cursor cursor = null;\n    String column = MediaStore.Images.Media.DATA;\n    String[] projection = { column };\n    try {\n        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, null);\n        if (cursor != null && cursor.moveToFirst()) {\n            int index = cursor.getColumnIndexOrThrow(column);\n            return cursor.getString(index);\n        }\n    } finally {\n        if (cursor != null && !cursor.isClosed())\n                cursor.close();\n    }\n    return null;\n}\n\n~~~\n","source":"_posts/2016-05-12-GCM-Azure_summary.md","raw":"---\nlayout: post\ntitle: google cloud messageGCMAzureNotification\ncategory: accumulation\ntags: accumulation\nkeywords: gcm, azure, notification\ndescription: google cloud messageGCMAzureNotification\nbanner: http://obxk8w81b.bkt.clouddn.com/Country%20Lane%20with%20Two%20Figures.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Country%20Lane%20with%20Two%20Figures.jpg\n\n---\n\n\n### 1.\nmicrosoftazure\n\ngcm start: https://developers.google.com/cloud-messaging/android/start\n\nazure start: https://azure.microsoft.com/zh-cn/documentation/articles/notification-hubs-android-get-started/\n\ngcm official demo: https://github.com/google/gcm\n\ngcm personal demo: https://github.com/iammert/FastGCM\n\n<!--more-->\n\n### 2.\n- 1.demo\n\nstackoverflowhttp://stackoverflow.com/questions/13835676/google-cloud-messaging-messages-sometimes-not-received-until-network-state-cha\n\n\n### 3.onActivityResult()onResume()\nAPIActivityonResume()\n\n\n\n1.onResume()\n2.onAcitviyResult()\n\n\n\n### 4.Android4.4Uri\n\n~~~ Java\n\npublic static String getPhotoPathFromContentUri(Context context, Uri uri) {\n    String photoPath = \"\";\n    if(context == null || uri == null) {\n        return photoPath;\n    }\n\n    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT && DocumentsContract.isDocumentUri(context, uri)) {\n        String docId = DocumentsContract.getDocumentId(uri);\n        if(isExternalStorageDocument(uri)) {\n            String [] split = docId.split(\":\");\n            if(split.length >= 2) {\n                String type = split[0];\n                if(\"primary\".equalsIgnoreCase(type)) {\n                    photoPath = Environment.getExternalStorageDirectory() + \"/\" + split[1];\n                }\n            }\n        }\n        else if(isDownloadsDocument(uri)) {\n            Uri contentUri = ContentUris.withAppendedId(Uri.parse(\"content://downloads/public_downloads\"), Long.valueOf(docId));\n            photoPath = getDataColumn(context, contentUri, null, null);\n        }\n        else if(isMediaDocument(uri)) {\n            String[] split = docId.split(\":\");\n            if(split.length >= 2) {\n                String type = split[0];\n                Uri contentUris = null;\n                if(\"image\".equals(type)) {\n                    contentUris = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                }\n                else if(\"video\".equals(type)) {\n                    contentUris = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                }\n                else if(\"audio\".equals(type)) {\n                    contentUris = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                }\n                String selection = MediaStore.Images.Media._ID + \"=?\";\n                String[] selectionArgs = new String[] { split[1] };\n                photoPath = getDataColumn(context, contentUris, selection, selectionArgs);\n            }\n        }\n    }\n    else if(\"file\".equalsIgnoreCase(uri.getScheme())) {\n        photoPath = uri.getPath();\n    }\n    else {\n        photoPath = getDataColumn(context, uri, null, null);\n    }\n\n    return photoPath;\n}\n\nprivate static boolean isExternalStorageDocument(Uri uri) {\n    return \"com.android.externalstorage.documents\".equals(uri.getAuthority());\n}\n\nprivate static boolean isDownloadsDocument(Uri uri) {\n    return \"com.android.providers.downloads.documents\".equals(uri.getAuthority());\n}\n\nprivate static boolean isMediaDocument(Uri uri) {\n    return \"com.android.providers.media.documents\".equals(uri.getAuthority());\n}\n\nprivate static String getDataColumn(Context context, Uri uri, String selection, String[] selectionArgs) {\n    Cursor cursor = null;\n    String column = MediaStore.Images.Media.DATA;\n    String[] projection = { column };\n    try {\n        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, null);\n        if (cursor != null && cursor.moveToFirst()) {\n            int index = cursor.getColumnIndexOrThrow(column);\n            return cursor.getString(index);\n        }\n    } finally {\n        if (cursor != null && !cursor.isClosed())\n                cursor.close();\n    }\n    return null;\n}\n\n~~~\n","slug":"GCM-Azure_summary","published":1,"date":"2016-05-11T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4a000ebxs6gh4ldmv9","content":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p>microsoftazure</p>\n<p>gcm start: <a href=\"https://developers.google.com/cloud-messaging/android/start\" target=\"_blank\" rel=\"external\">https://developers.google.com/cloud-messaging/android/start</a></p>\n<p>azure start: <a href=\"https://azure.microsoft.com/zh-cn/documentation/articles/notification-hubs-android-get-started/\" target=\"_blank\" rel=\"external\">https://azure.microsoft.com/zh-cn/documentation/articles/notification-hubs-android-get-started/</a></p>\n<p>gcm official demo: <a href=\"https://github.com/google/gcm\" target=\"_blank\" rel=\"external\">https://github.com/google/gcm</a></p>\n<p>gcm personal demo: <a href=\"https://github.com/iammert/FastGCM\" target=\"_blank\" rel=\"external\">https://github.com/iammert/FastGCM</a></p>\n<a id=\"more\"></a>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><ul>\n<li>1.demo</li>\n</ul>\n<p>stackoverflow<a href=\"http://stackoverflow.com/questions/13835676/google-cloud-messaging-messages-sometimes-not-received-until-network-state-cha\" target=\"_blank\" rel=\"external\">http://stackoverflow.com/questions/13835676/google-cloud-messaging-messages-sometimes-not-received-until-network-state-cha</a></p>\n<h3 id=\"3-onActivityResult-onResume-\"><a href=\"#3-onActivityResult-onResume-\" class=\"headerlink\" title=\"3.onActivityResult()onResume()\"></a>3.onActivityResult()onResume()</h3><p>APIActivityonResume()</p>\n<p><br><br>1.onResume()<br>2.onAcitviyResult()</p>\n<p></p>\n<h3 id=\"4-Android4-4Uri\"><a href=\"#4-Android4-4Uri\" class=\"headerlink\" title=\"4.Android4.4Uri\"></a>4.Android4.4Uri</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getPhotoPathFromContentUri</span><span class=\"params\">(Context context, Uri uri)</span> </span>&#123;</div><div class=\"line\">    String photoPath = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span>(context == <span class=\"keyword\">null</span> || uri == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> photoPath;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span>(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) &#123;</div><div class=\"line\">        String docId = DocumentsContract.getDocumentId(uri);</div><div class=\"line\">        <span class=\"keyword\">if</span>(isExternalStorageDocument(uri)) &#123;</div><div class=\"line\">            String [] split = docId.split(<span class=\"string\">\":\"</span>);</div><div class=\"line\">            <span class=\"keyword\">if</span>(split.length &gt;= <span class=\"number\">2</span>) &#123;</div><div class=\"line\">                String type = split[<span class=\"number\">0</span>];</div><div class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"string\">\"primary\"</span>.equalsIgnoreCase(type)) &#123;</div><div class=\"line\">                    photoPath = Environment.getExternalStorageDirectory() + <span class=\"string\">\"/\"</span> + split[<span class=\"number\">1</span>];</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(isDownloadsDocument(uri)) &#123;</div><div class=\"line\">            Uri contentUri = ContentUris.withAppendedId(Uri.parse(<span class=\"string\">\"content://downloads/public_downloads\"</span>), Long.valueOf(docId));</div><div class=\"line\">            photoPath = getDataColumn(context, contentUri, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(isMediaDocument(uri)) &#123;</div><div class=\"line\">            String[] split = docId.split(<span class=\"string\">\":\"</span>);</div><div class=\"line\">            <span class=\"keyword\">if</span>(split.length &gt;= <span class=\"number\">2</span>) &#123;</div><div class=\"line\">                String type = split[<span class=\"number\">0</span>];</div><div class=\"line\">                Uri contentUris = <span class=\"keyword\">null</span>;</div><div class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"string\">\"image\"</span>.equals(type)) &#123;</div><div class=\"line\">                    contentUris = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"video\"</span>.equals(type)) &#123;</div><div class=\"line\">                    contentUris = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"audio\"</span>.equals(type)) &#123;</div><div class=\"line\">                    contentUris = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;</div><div class=\"line\">                &#125;</div><div class=\"line\">                String selection = MediaStore.Images.Media._ID + <span class=\"string\">\"=?\"</span>;</div><div class=\"line\">                String[] selectionArgs = <span class=\"keyword\">new</span> String[] &#123; split[<span class=\"number\">1</span>] &#125;;</div><div class=\"line\">                photoPath = getDataColumn(context, contentUris, selection, selectionArgs);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"file\"</span>.equalsIgnoreCase(uri.getScheme())) &#123;</div><div class=\"line\">        photoPath = uri.getPath();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        photoPath = getDataColumn(context, uri, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> photoPath;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isExternalStorageDocument</span><span class=\"params\">(Uri uri)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"com.android.externalstorage.documents\"</span>.equals(uri.getAuthority());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isDownloadsDocument</span><span class=\"params\">(Uri uri)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"com.android.providers.downloads.documents\"</span>.equals(uri.getAuthority());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMediaDocument</span><span class=\"params\">(Uri uri)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"com.android.providers.media.documents\"</span>.equals(uri.getAuthority());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getDataColumn</span><span class=\"params\">(Context context, Uri uri, String selection, String[] selectionArgs)</span> </span>&#123;</div><div class=\"line\">    Cursor cursor = <span class=\"keyword\">null</span>;</div><div class=\"line\">    String column = MediaStore.Images.Media.DATA;</div><div class=\"line\">    String[] projection = &#123; column &#125;;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, <span class=\"keyword\">null</span>);</div><div class=\"line\">        <span class=\"keyword\">if</span> (cursor != <span class=\"keyword\">null</span> &amp;&amp; cursor.moveToFirst()) &#123;</div><div class=\"line\">            <span class=\"keyword\">int</span> index = cursor.getColumnIndexOrThrow(column);</div><div class=\"line\">            <span class=\"keyword\">return</span> cursor.getString(index);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (cursor != <span class=\"keyword\">null</span> &amp;&amp; !cursor.isClosed())</div><div class=\"line\">                cursor.close();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p>microsoftazure</p>\n<p>gcm start: <a href=\"https://developers.google.com/cloud-messaging/android/start\">https://developers.google.com/cloud-messaging/android/start</a></p>\n<p>azure start: <a href=\"https://azure.microsoft.com/zh-cn/documentation/articles/notification-hubs-android-get-started/\">https://azure.microsoft.com/zh-cn/documentation/articles/notification-hubs-android-get-started/</a></p>\n<p>gcm official demo: <a href=\"https://github.com/google/gcm\">https://github.com/google/gcm</a></p>\n<p>gcm personal demo: <a href=\"https://github.com/iammert/FastGCM\">https://github.com/iammert/FastGCM</a></p>","more":"<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><ul>\n<li>1.demo</li>\n</ul>\n<p>stackoverflow<a href=\"http://stackoverflow.com/questions/13835676/google-cloud-messaging-messages-sometimes-not-received-until-network-state-cha\">http://stackoverflow.com/questions/13835676/google-cloud-messaging-messages-sometimes-not-received-until-network-state-cha</a></p>\n<h3 id=\"3-onActivityResult-onResume-\"><a href=\"#3-onActivityResult-onResume-\" class=\"headerlink\" title=\"3.onActivityResult()onResume()\"></a>3.onActivityResult()onResume()</h3><p>APIActivityonResume()</p>\n<p><br><br>1.onResume()<br>2.onAcitviyResult()</p>\n<p></p>\n<h3 id=\"4-Android4-4Uri\"><a href=\"#4-Android4-4Uri\" class=\"headerlink\" title=\"4.Android4.4Uri\"></a>4.Android4.4Uri</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getPhotoPathFromContentUri</span><span class=\"params\">(Context context, Uri uri)</span> </span>&#123;</div><div class=\"line\">    String photoPath = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span>(context == <span class=\"keyword\">null</span> || uri == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> photoPath;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span>(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) &#123;</div><div class=\"line\">        String docId = DocumentsContract.getDocumentId(uri);</div><div class=\"line\">        <span class=\"keyword\">if</span>(isExternalStorageDocument(uri)) &#123;</div><div class=\"line\">            String [] split = docId.split(<span class=\"string\">\":\"</span>);</div><div class=\"line\">            <span class=\"keyword\">if</span>(split.length &gt;= <span class=\"number\">2</span>) &#123;</div><div class=\"line\">                String type = split[<span class=\"number\">0</span>];</div><div class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"string\">\"primary\"</span>.equalsIgnoreCase(type)) &#123;</div><div class=\"line\">                    photoPath = Environment.getExternalStorageDirectory() + <span class=\"string\">\"/\"</span> + split[<span class=\"number\">1</span>];</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(isDownloadsDocument(uri)) &#123;</div><div class=\"line\">            Uri contentUri = ContentUris.withAppendedId(Uri.parse(<span class=\"string\">\"content://downloads/public_downloads\"</span>), Long.valueOf(docId));</div><div class=\"line\">            photoPath = getDataColumn(context, contentUri, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(isMediaDocument(uri)) &#123;</div><div class=\"line\">            String[] split = docId.split(<span class=\"string\">\":\"</span>);</div><div class=\"line\">            <span class=\"keyword\">if</span>(split.length &gt;= <span class=\"number\">2</span>) &#123;</div><div class=\"line\">                String type = split[<span class=\"number\">0</span>];</div><div class=\"line\">                Uri contentUris = <span class=\"keyword\">null</span>;</div><div class=\"line\">                <span class=\"keyword\">if</span>(<span class=\"string\">\"image\"</span>.equals(type)) &#123;</div><div class=\"line\">                    contentUris = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"video\"</span>.equals(type)) &#123;</div><div class=\"line\">                    contentUris = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"audio\"</span>.equals(type)) &#123;</div><div class=\"line\">                    contentUris = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;</div><div class=\"line\">                &#125;</div><div class=\"line\">                String selection = MediaStore.Images.Media._ID + <span class=\"string\">\"=?\"</span>;</div><div class=\"line\">                String[] selectionArgs = <span class=\"keyword\">new</span> String[] &#123; split[<span class=\"number\">1</span>] &#125;;</div><div class=\"line\">                photoPath = getDataColumn(context, contentUris, selection, selectionArgs);</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"file\"</span>.equalsIgnoreCase(uri.getScheme())) &#123;</div><div class=\"line\">        photoPath = uri.getPath();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        photoPath = getDataColumn(context, uri, <span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> photoPath;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isExternalStorageDocument</span><span class=\"params\">(Uri uri)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"com.android.externalstorage.documents\"</span>.equals(uri.getAuthority());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isDownloadsDocument</span><span class=\"params\">(Uri uri)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"com.android.providers.downloads.documents\"</span>.equals(uri.getAuthority());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isMediaDocument</span><span class=\"params\">(Uri uri)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"com.android.providers.media.documents\"</span>.equals(uri.getAuthority());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getDataColumn</span><span class=\"params\">(Context context, Uri uri, String selection, String[] selectionArgs)</span> </span>&#123;</div><div class=\"line\">    Cursor cursor = <span class=\"keyword\">null</span>;</div><div class=\"line\">    String column = MediaStore.Images.Media.DATA;</div><div class=\"line\">    String[] projection = &#123; column &#125;;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs, <span class=\"keyword\">null</span>);</div><div class=\"line\">        <span class=\"keyword\">if</span> (cursor != <span class=\"keyword\">null</span> &amp;&amp; cursor.moveToFirst()) &#123;</div><div class=\"line\">            <span class=\"keyword\">int</span> index = cursor.getColumnIndexOrThrow(column);</div><div class=\"line\">            <span class=\"keyword\">return</span> cursor.getString(index);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125; <span class=\"keyword\">finally</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (cursor != <span class=\"keyword\">null</span> &amp;&amp; !cursor.isClosed())</div><div class=\"line\">                cursor.close();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"},{"layout":"post","title":"Java StringC/C++byte[]","keywords":"Java String, bytes,coding","description":"Java StringC/C++byte[]","banner":"http://obxk8w81b.bkt.clouddn.com/Bridge%20and%20Houses%20on%20the%20Corner%20of%20Herengracht-Prinsessegracht,%20The%20Hague.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Bridge%20and%20Houses%20on%20the%20Corner%20of%20Herengracht-Prinsessegracht,%20The%20Hague.jpg","_content":"\n\n   JAVAStringJAVA\n\n### 1\n   JAVA****3PC330x330x333ultraEdit\n\n   <!--more-->\n\n### 2+\n   0x3330x430x03ASCIIGB23120xB5, 0xB1 ****GB23120xB5,0xB1ASCIIASCIIBIG5\n\n### 3UNICODE\n   GB2312BIG50xB5,0xB1\n   +128 **UNICODE28**8x8x8x8x = 655366GB2312UNICODE80xB5,0xB1UNICODE\n\n### 4C\n   CCJAVA**Cchar[]**CCchar816****char[]\n\n### 5JAVA\n   JAVAJAVAStringJAVA**String**  **StringUNICODE**JAVAchar28160~65535UNICODEStringUNICODEgetChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) char[]char[]StringUNICODE\n\n   UNICODEJAVAUNICODE0xB5,0xB1JAVAJAVAWIN98JAVALINUXJAVAASCIInew String({0xB5,0xB1})StringStringnew String({0xB5,0xB1},\"GB2312\")StringJAVAStringWIN9880xB5,0xB10xB5,0xB1GB2312**String.getBytes(\"GB2312\")** **byte[]**JAVAI/Obyte[]byte[]ServletHttpRequest.getParameter()JSP/SERVLET\n\n### 6JAVA\n\n   new String(...,\"ISO-8859-1\")StringUNICODEBYTEStringchar[]\n\n   GB2312UTF-8UTF-8new String(...)StringStringUTF-8StringJAVACJAVAbyte[]char[]\n\n\n### 7\n[](http://www.regexlab.com/zh/encoding.htm)\n","source":"_posts/2016-05-18-javaString-and-bytes.md","raw":"---\nlayout: post\ntitle: Java StringC/C++byte[]\ncategory: accumulation\ntags: accumulation\nkeywords: Java String, bytes,coding\ndescription: Java StringC/C++byte[]\nbanner: http://obxk8w81b.bkt.clouddn.com/Bridge%20and%20Houses%20on%20the%20Corner%20of%20Herengracht-Prinsessegracht,%20The%20Hague.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Bridge%20and%20Houses%20on%20the%20Corner%20of%20Herengracht-Prinsessegracht,%20The%20Hague.jpg\n---\n\n\n   JAVAStringJAVA\n\n### 1\n   JAVA****3PC330x330x333ultraEdit\n\n   <!--more-->\n\n### 2+\n   0x3330x430x03ASCIIGB23120xB5, 0xB1 ****GB23120xB5,0xB1ASCIIASCIIBIG5\n\n### 3UNICODE\n   GB2312BIG50xB5,0xB1\n   +128 **UNICODE28**8x8x8x8x = 655366GB2312UNICODE80xB5,0xB1UNICODE\n\n### 4C\n   CCJAVA**Cchar[]**CCchar816****char[]\n\n### 5JAVA\n   JAVAJAVAStringJAVA**String**  **StringUNICODE**JAVAchar28160~65535UNICODEStringUNICODEgetChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) char[]char[]StringUNICODE\n\n   UNICODEJAVAUNICODE0xB5,0xB1JAVAJAVAWIN98JAVALINUXJAVAASCIInew String({0xB5,0xB1})StringStringnew String({0xB5,0xB1},\"GB2312\")StringJAVAStringWIN9880xB5,0xB10xB5,0xB1GB2312**String.getBytes(\"GB2312\")** **byte[]**JAVAI/Obyte[]byte[]ServletHttpRequest.getParameter()JSP/SERVLET\n\n### 6JAVA\n\n   new String(...,\"ISO-8859-1\")StringUNICODEBYTEStringchar[]\n\n   GB2312UTF-8UTF-8new String(...)StringStringUTF-8StringJAVACJAVAbyte[]char[]\n\n\n### 7\n[](http://www.regexlab.com/zh/encoding.htm)\n","slug":"javaString-and-bytes","published":1,"date":"2016-05-17T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4d000gbxs667ak3zb7","content":"<p>   JAVAStringJAVA</p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>   JAVA<strong></strong>3PC330x330x333ultraEdit</p>\n   <a id=\"more\"></a>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2+\"></a>2+</h3><p>   0x3330x430x03ASCIIGB23120xB5, 0xB1 <strong></strong>GB23120xB5,0xB1ASCIIASCIIBIG5</p>\n<h3 id=\"3UNICODE\"><a href=\"#3UNICODE\" class=\"headerlink\" title=\"3UNICODE\"></a>3UNICODE</h3><p>   GB2312BIG50xB5,0xB1<br>   +128 <strong>UNICODE28</strong>8x8x8x8x = 655366GB2312UNICODE80xB5,0xB1UNICODE</p>\n<h3 id=\"4C\"><a href=\"#4C\" class=\"headerlink\" title=\"4C\"></a>4C</h3><p>   CCJAVA<strong>Cchar[]</strong>CCchar816<strong></strong>char[]</p>\n<h3 id=\"5JAVA\"><a href=\"#5JAVA\" class=\"headerlink\" title=\"5JAVA\"></a>5JAVA</h3><p>   JAVAJAVAStringJAVA<strong>String</strong>  <strong>StringUNICODE</strong>JAVAchar28160~65535UNICODEStringUNICODEgetChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) char[]char[]StringUNICODE</p>\n<p>   UNICODEJAVAUNICODE0xB5,0xB1JAVAJAVAWIN98JAVALINUXJAVAASCIInew String({0xB5,0xB1})StringStringnew String({0xB5,0xB1},GB2312)StringJAVAStringWIN9880xB5,0xB10xB5,0xB1GB2312<strong>String.getBytes(GB2312)</strong> <strong>byte[]</strong>JAVAI/Obyte[]byte[]ServletHttpRequest.getParameter()JSP/SERVLET</p>\n<h3 id=\"6JAVA\"><a href=\"#6JAVA\" class=\"headerlink\" title=\"6JAVA\"></a>6JAVA</h3><p>   new String(,ISO-8859-1)StringUNICODEBYTEStringchar[]</p>\n<p>   GB2312UTF-8UTF-8new String()StringStringUTF-8StringJAVACJAVAbyte[]char[]</p>\n<h3 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h3><p><a href=\"http://www.regexlab.com/zh/encoding.htm\" target=\"_blank\" rel=\"external\"></a></p>\n","excerpt":"<p>   JAVAStringJAVA</p>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>   JAVA<strong></strong>3PC330x330x333ultraEdit</p>","more":"<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2+\"></a>2+</h3><p>   0x3330x430x03ASCIIGB23120xB5, 0xB1 <strong></strong>GB23120xB5,0xB1ASCIIASCIIBIG5</p>\n<h3 id=\"3UNICODE\"><a href=\"#3UNICODE\" class=\"headerlink\" title=\"3UNICODE\"></a>3UNICODE</h3><p>   GB2312BIG50xB5,0xB1<br>   +128 <strong>UNICODE28</strong>8x8x8x8x = 655366GB2312UNICODE80xB5,0xB1UNICODE</p>\n<h3 id=\"4C\"><a href=\"#4C\" class=\"headerlink\" title=\"4C\"></a>4C</h3><p>   CCJAVA<strong>Cchar[]</strong>CCchar816<strong></strong>char[]</p>\n<h3 id=\"5JAVA\"><a href=\"#5JAVA\" class=\"headerlink\" title=\"5JAVA\"></a>5JAVA</h3><p>   JAVAJAVAStringJAVA<strong>String</strong>  <strong>StringUNICODE</strong>JAVAchar28160~65535UNICODEStringUNICODEgetChars(int srcBegin, int srcEnd, char[] dst, int dstBegin) char[]char[]StringUNICODE</p>\n<p>   UNICODEJAVAUNICODE0xB5,0xB1JAVAJAVAWIN98JAVALINUXJAVAASCIInew String({0xB5,0xB1})StringStringnew String({0xB5,0xB1},GB2312)StringJAVAStringWIN9880xB5,0xB10xB5,0xB1GB2312<strong>String.getBytes(GB2312)</strong> <strong>byte[]</strong>JAVAI/Obyte[]byte[]ServletHttpRequest.getParameter()JSP/SERVLET</p>\n<h3 id=\"6JAVA\"><a href=\"#6JAVA\" class=\"headerlink\" title=\"6JAVA\"></a>6JAVA</h3><p>   new String(,ISO-8859-1)StringUNICODEBYTEStringchar[]</p>\n<p>   GB2312UTF-8UTF-8new String()StringStringUTF-8StringJAVACJAVAbyte[]char[]</p>\n<h3 id=\"7\"><a href=\"#7\" class=\"headerlink\" title=\"7\"></a>7</h3><p><a href=\"http://www.regexlab.com/zh/encoding.htm\"></a></p>"},{"layout":"post","title":"android","keywords":"android,","banner":"http://obxk8w81b.bkt.clouddn.com/Auvers%20Town%20Hall%20on%2014%20July%201890.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Auvers%20Town%20Hall%20on%2014%20July%201890.jpg","_content":"\n\n### 1 Activity\n\nAndroid8ActivityActivity\n\n1 Activity\n\n#### 1.1 Activity\n\n##### 1.1.1 \n\n- (1)ActivityonRestart\n\n- (2)ActivityonPause -> onStopActivityonStopActivityonRestart -> onStart -> onResume\n\n<!--more-->\n\n- (3)onStartonStopActivityonPauseonResumeActivity\n\n- (4)Activity AActivity BonPause(A) -> onCreate(B) -> onStart(B) -> onResume(B) -> onStop(A)onPause\n\n1.1.2 \n\n- (1)onSaveInstanceStateActivityonStoponPause\n\n    ActivityonRestoreInstanceStateonStart\n\n    ActivityonSaveInstanceState\n\n    ActivityActivityActivitylistviewviewviewviewonSaveInstanceStateonRestoreInstanceState\n\n- (2)Activity\n\n    ActivityActivityActivity\n\n- (3)android:configChanges=\"xxx\"\n\n    local\n\n    keyboardHidden\n\n    orientation\n\n    android:configChanges=\"xxx\"ActivityActivityonConfigurationChanged\n\n#### 1.2 Activity\n\n##### 1.2.1 \n\n- (1)Activity\n\n- (2)ActivityContext(ApplicationContextService)standardActivitycontextActivityFLAG_ACTIVITY_NEW_TASK\n\n- (3)Activity\n\n- (4)TaskAffinityActivity\n\n    ActivityTaskAffinitysingleTaskallowTaskReparenting\n\n    TaskAffinitysingleTaskActivityActivityTaskAffinity\n\n    TaskAffinityallowTaskReparentingABActivity CActivity CallowTaskReparentingtrueBActivity CActivity CAB\n\n- (5)singleTask\n\n    singleTaskActivityA\n\n    ActivityActivityActivity.\n\n    ActivityonNewIntent(ActivitysingleTaskFLAG_ACTIVITY_CLEAR_TOP)ActivityActivity\n\n- (6)xmlandroid:launchModeintent.addFlags()ActivityFLAG_ACTIVITY_CLEAR_TOPActivitysingleInstance\n\n##### 1.2.2 ActivityFlags\n\nFLAG_ACTIVITY_NEW_TASK,FLAG_ACTIVITY_SINGLE_TOP,FLAG_ACTIVITY_CLEAR_TOP\n\nFLAG_ACTIVITY_EXCLUDE_FROM_RECENTSActivityActivityActivityandroid:excludeFromRecents=\"true\"\n\n#### 1.3 IntentFilter\n\n- (1)IntentFilteractioncategorydataactioncategorydata\n\n    actioncategorydataactioncategorydataIntentactioncategorydataActivityActivityintent-filterIntentintenf-filterActivity\n~~~ Javascript\n<intent-filter>\n    <action android:name=\"com.ryg.charpter_1.c\" />\n    <action android:name=\"com.ryg.charpter_1.d\" />\n\n    <category android:name=\"com.ryg.category.c\" />\n    <category android:name=\"com.ryg.category.d\" />\n    <category android:name=\"android.intent.category.DEFAULT\" />\n\n    <data android:mimeType=\"text/plain\" />\n</intent-filter>\n~~~  \n\n- (2)action\n\n    Intentactionactionaction\n\n- (3)category\n\n    Intentcategorycategorycategorycategorycategoryandroid.intent.category.DEFAULTActivitycategorycategory\n\n- (4)data\n\n    data\n~~~ Javascript\n<data android:scheme=\"string\"\n\tandroid:host=\"string\"\n\tandroid:port=\"string\"\n\tandroid:path=\"string\"`\n\tandroid:pathPattern=\"string\"\n\tandroid:pathPrefix=\"string\"\n\tandroid:mimeType=\"string\" />\n~~~\n    mimeTypeURImimeTypeURI\n~~~ Javascript\n<scheme>://<host>:<port>/[<path>]|[<pathPrefix>]|[pathPattern]\n~~~\n    content://com.example.project:200/folder/subfolder/etc\n\n  - schemehostportURIschemehostURI\n\n  - pathpathPatternpathPrefixpathpathPrefixpathPattern(\\*)\n\n  dataIntentdatadatadata\n\n  URIscheme\n\n  mimeTypeimage/\\*text/\\*URIURIschemecontentfileschemescheme\n\n~~~ Java\n//URI\n<intent-filter>\n    <data android:mimeType=\"image/*\"/>\n  ...\n</intent-filter>\n~~~\n\n~~~ Java\n//URI\n<intent-filter>\n    <data android:mimeType=\"image/*\" android:scheme=\"http\" .../>\n    ...\n</intent-filter>\n~~~\n\n  IntentdatasetDataAndType\n\n  setDatasetType\n~~~ Java\nintent.setDataAndType(Uri.parse(\"file://abc\"), \"image/png\");\n~~~\n  data\n\n~~~ Java\n<intent-filter>\n    <data android:scheme=\"file\" android:host=\"www.github.com\"/>\n</intent-filter>\n\n<intent-filter>\n    <data android:scheme=\"file\"/>\n    <data android:host=\"www.github.com\"/>\n</intent-filter>\n~~~\n  ActivityIntent\n\n  - (1)PackageManagerresolveActivityIntentresolveActivitynull\n\n  - (2)PackageManagerqueryIntentActivitiesActivity\nServiceBroadcastReceiverPackageManagerqueryIntentServicesqueryBroadcastReceivers\n\n  - actioncategoryActivity\n~~~ Java\n<intent-filter>\n    <action android:name=\"android.intent.action.MAIN\" />\n    <category android:name=\"android.intent.category.LAUNCHER\" />\n</intent-filter>\n~~~\n\n### 2 IPC\n\n#### 2.1 Android IPC\n\n(1)IPCLinuxAndroidBinderIPCSocket\n\n#### 2.2 Android\n\n- (1)android:process.\n\n    packageName::ShareUID\n\n    android:process=\":xyz\" // packageName:xyz\n\n    android:process=\"aaa.bbb.ccc\" // aaa.bbb.ccc\n\n- (2)AndroidUIDUID\n\n    ShareUIDShareUID data\n- (3)android\n\n- (4)\n\n  - 1.\n  - 2.\n  - 3.SharedPreferencesSharedPreferences\n  - 4.ApplicationApplicationApplication\n\n    \n\n#### 2.3 IPC\n\n- (1)SerializableJavaParcelableAndroid\n\n- (2)serialVersionUIdlongserialVersionUIdserialVersionUId\n\n  serialVersionUIdserialVersionUIdserialVersionUIdserialVersionUIdserialVersionUId\n\n  - 1.\n\n  - 2.transient\n\n- (3)ParcelableBinderParcelableIntentBundleBitmapListMapParcelable\n\n~~~ Java\npublic class Book implements Parcelable {\n    public int bookId;\n    public String bookName;\n    public Book() {\n    }\n\n    public Book(int bookId, String bookName) {\n        this.bookId = bookId;\n        this.bookName = bookName;\n    }\n\n    //100\n    public int describeContents() {\n        return 0;\n    }\n\n    //flags0110\n    public void writeToParcel(Parcel out, int flags) {\n        out.writeInt(bookId);\n        out.writeString(bookName);\n    }\n\n    //\n    public static final Parcelable.Creator<Book> CREATOR = new Parcelable.Creator<Book>() {\n        //\n        public Book createFromParcel(Parcel in) {\n            return new Book(in);\n        }\n        public Book[] newArray(int size) {//\n            return new Book[size];\n        }\n    };\n\n    private Book(Parcel in) {\n        bookId = in.readInt();\n        bookName = in.readString();\n    }\n\n}\n~~~\n\n- (4)BinderAndroidIBinder\n\n  IPCBinderAndroidBinder/dev/binder\n\n  FrameworkBinderServiceManagerManagerManagerService\n\n  AndroidBinderbindServiceBinderBinderAIDL\n\n\n  AndroidBinderServiceAIDLMessengerServiceBinderMessengerAIDLBinder\n\n- (5)aidlaidljava\n\n  ididtransact\n\n  StubStubBindertransacttransactStubProxy\n\n  StubStubProxy \n\n  - 1.asInterface(android.os.IBinder obj)BinderAIDLStubStub.Proxy\n  - 2.asBinderBinder\n  - 3.onTransactBinder\n\n    public Boolean onTransact(int code, Parcelable data, Parcelable reply, int flags)\n\n    codedatareplyfalse()\n\n  - 4.Proxy#[Method]\n\n    _datatransactRPConTransactRPC_replyRPC_reply\n\n  AIDLBinder[](https://github.com/singwhatiwanna/android-art-res/blob/master/Chapter_2/src/com/ryg/chapter_2/manualbinder/BookManagerImpl.java)\n\n- (6)BinderlinkToDeathunlinkToDeath\n\n  BinderBinderlinkToDeathunlinkToDeathlinkToDeathBinderBinder\n\n  Binder\n\n  - 1.DeathRecipientDeathRecipientbindeDiedBinder\n\n~~~ Java\nprivate IBinder.DeathRecipient mDeathRecipient = new IBinder.DeathRecipient() {\n    @Override\n    public void binderDied() {\n        if (mRemoteBookManager == null) return;\n        mRemoteBookManager.asBinder().unlinkToDeath(mDeathRecipient, 0);\n        mRemoteBookManager = null;\n        // TODO:Service\n    }\n};\n~~~\n  - 2.binder\n\n~~~ Java\nmRemoteBookManager.asBinder().linkToDeath(mDeathRecipient, 0);\n~~~\n\n#### 2.4 AndroidIPC\n\n- (1)BundleBundleParcelableActivityServiceReceiverIntentBundle\n\n- (2)\n\n  SharedPreferencesSharedPreferencesSharedPreferences\n\n- (3)MessengerMessengerIPCAIDLMessenger\n\n- (4)AIDL\n\n  ServiceAIDLAIDLStubStubServiceonBindService\n\n  - 1.AIDLStringCharSequenceArrayListHashMapParcelableAIDL\n  - 2.AIDLimport\n  - 3.AIDLinoutinout\n  - 4.AIDL\n  - 5.AIDLAIDL\n  - 6.RemoteCallbackListListenerRemoteCallbackListAIDLAIDLIInterface\n\n- (5)ContentProvider\n\n  - 1.ContentProvider\n  - 2.ContentProviderMediaStoreContentProvider\n  - 3.ContentProviderSQLite\n  - 4.ContentProviderContentResolverregisterContentObserver\n\n- (6)Socket\n\n  SocketTCPUDP\n\n#### 2.5 Binder\n\n- (1)ServiceserviceserviceAIDLService\n\n  AIDLBinderServicequeryBinderBinderBinder\n\n  BinderBinderServiceService\n\n- (2)BinderBinderPoolAIDLBinderPool\n\n#### 2.6 IPC\n\n![IPC](/images/blogimages/2016/androidart_ipc.png)\n\n\n\n### 9 \n[amurocrash](http://blog.csdn.net/amurocrash/article/details/48858353)\n\n#### 9.1 \n\n- (1)BroadcastReceiverAndroidManifestAndroidManifestContentProviderIntentIntent\n- (2)ActivityIntent\n- (3)ServiceserviceServiceserviceservice\n- (4)BroadcastReceiverAndroidManifestContext.registerReceiver()BroadcastReceiver\n- (5)ContentProviderContentProviderinsertdeleteupdatequeryBinderContentProvider\n\n#### 9.2 Activity\n\n##### (1)Activity\n![Activity](/images/blogimages/2016/androidart_activity.png)\n\n(2)ApplicationThreadActivityThreadApplicationThreadNativeApplicationThreadNativeBinderIApplicationThreadApplicationThreadNativeAIDL\n(3)ActivityManagerService(AMS)ActivityManagerNativeActivityManagerNativeBinderIActivityManagerBinderAMSBinder\n(4)ApplicationInstrumentationActivity\n(5)ContextImplContextContextImplActivityattachActivityattachActivityWindowWindowwindowActivity [Activitywindow]\n\n#### 9.3 Service\n\n##### (1)Service\n\n****\n![Service1](/images/blogimages/2016/androidart_service1.png)\n\n****\n![Service2](/images/blogimages/2016/androidart_service2.png)\n\n#### 9.4 BroadcastReceiver\n##### (1)BroadcastReceiver\n\n****PackageManagerService\n![broadcastreceiver1](/images/blogimages/2016/androidart_broadcastreceiver1.png)\n****\n![broadcastreceiver2](/images/blogimages/2016/androidart_broadcastreceiver2.png)\n##### (2)\n\n##### (3)\nAndroid 3.1\n\n#### 9.5 ContentProvider\n\n##### (1)ContentProviderAMSonCreateApplicationonCreate\n##### (2)ContentProvider\n- 1.ActivityThreadmainActivityThread\n- 2.ActivityThreadattachActivityManagerServiceattachApplicationApplicationThreadAMSApplicationThreadActivityThreadAMS\n- 3.ActivityManagerServiceattachApplicationApplicationThreadbindApplicationHActivityThreadhandleBindApplication\n- 4.handleBindApplicationApplicationContentProviderContentProviderApplicationonCreate\n\n##### (3)ContentProviderandroid:multiprocessfalsetrueContentProvider\n\n##### (4)ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\n![ContentProvider](/images/blogimages/2016/androidart_contentprovider.png)\n","source":"_posts/2016-03-20-android-books-reading-.md","raw":"---\nlayout: post\ntitle: android\ncategory: read\ntags: read\nkeywords: android,\nbanner: http://obxk8w81b.bkt.clouddn.com/Auvers%20Town%20Hall%20on%2014%20July%201890.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Auvers%20Town%20Hall%20on%2014%20July%201890.jpg\n---\n\n\n### 1 Activity\n\nAndroid8ActivityActivity\n\n1 Activity\n\n#### 1.1 Activity\n\n##### 1.1.1 \n\n- (1)ActivityonRestart\n\n- (2)ActivityonPause -> onStopActivityonStopActivityonRestart -> onStart -> onResume\n\n<!--more-->\n\n- (3)onStartonStopActivityonPauseonResumeActivity\n\n- (4)Activity AActivity BonPause(A) -> onCreate(B) -> onStart(B) -> onResume(B) -> onStop(A)onPause\n\n1.1.2 \n\n- (1)onSaveInstanceStateActivityonStoponPause\n\n    ActivityonRestoreInstanceStateonStart\n\n    ActivityonSaveInstanceState\n\n    ActivityActivityActivitylistviewviewviewviewonSaveInstanceStateonRestoreInstanceState\n\n- (2)Activity\n\n    ActivityActivityActivity\n\n- (3)android:configChanges=\"xxx\"\n\n    local\n\n    keyboardHidden\n\n    orientation\n\n    android:configChanges=\"xxx\"ActivityActivityonConfigurationChanged\n\n#### 1.2 Activity\n\n##### 1.2.1 \n\n- (1)Activity\n\n- (2)ActivityContext(ApplicationContextService)standardActivitycontextActivityFLAG_ACTIVITY_NEW_TASK\n\n- (3)Activity\n\n- (4)TaskAffinityActivity\n\n    ActivityTaskAffinitysingleTaskallowTaskReparenting\n\n    TaskAffinitysingleTaskActivityActivityTaskAffinity\n\n    TaskAffinityallowTaskReparentingABActivity CActivity CallowTaskReparentingtrueBActivity CActivity CAB\n\n- (5)singleTask\n\n    singleTaskActivityA\n\n    ActivityActivityActivity.\n\n    ActivityonNewIntent(ActivitysingleTaskFLAG_ACTIVITY_CLEAR_TOP)ActivityActivity\n\n- (6)xmlandroid:launchModeintent.addFlags()ActivityFLAG_ACTIVITY_CLEAR_TOPActivitysingleInstance\n\n##### 1.2.2 ActivityFlags\n\nFLAG_ACTIVITY_NEW_TASK,FLAG_ACTIVITY_SINGLE_TOP,FLAG_ACTIVITY_CLEAR_TOP\n\nFLAG_ACTIVITY_EXCLUDE_FROM_RECENTSActivityActivityActivityandroid:excludeFromRecents=\"true\"\n\n#### 1.3 IntentFilter\n\n- (1)IntentFilteractioncategorydataactioncategorydata\n\n    actioncategorydataactioncategorydataIntentactioncategorydataActivityActivityintent-filterIntentintenf-filterActivity\n~~~ Javascript\n<intent-filter>\n    <action android:name=\"com.ryg.charpter_1.c\" />\n    <action android:name=\"com.ryg.charpter_1.d\" />\n\n    <category android:name=\"com.ryg.category.c\" />\n    <category android:name=\"com.ryg.category.d\" />\n    <category android:name=\"android.intent.category.DEFAULT\" />\n\n    <data android:mimeType=\"text/plain\" />\n</intent-filter>\n~~~  \n\n- (2)action\n\n    Intentactionactionaction\n\n- (3)category\n\n    Intentcategorycategorycategorycategorycategoryandroid.intent.category.DEFAULTActivitycategorycategory\n\n- (4)data\n\n    data\n~~~ Javascript\n<data android:scheme=\"string\"\n\tandroid:host=\"string\"\n\tandroid:port=\"string\"\n\tandroid:path=\"string\"`\n\tandroid:pathPattern=\"string\"\n\tandroid:pathPrefix=\"string\"\n\tandroid:mimeType=\"string\" />\n~~~\n    mimeTypeURImimeTypeURI\n~~~ Javascript\n<scheme>://<host>:<port>/[<path>]|[<pathPrefix>]|[pathPattern]\n~~~\n    content://com.example.project:200/folder/subfolder/etc\n\n  - schemehostportURIschemehostURI\n\n  - pathpathPatternpathPrefixpathpathPrefixpathPattern(\\*)\n\n  dataIntentdatadatadata\n\n  URIscheme\n\n  mimeTypeimage/\\*text/\\*URIURIschemecontentfileschemescheme\n\n~~~ Java\n//URI\n<intent-filter>\n    <data android:mimeType=\"image/*\"/>\n  ...\n</intent-filter>\n~~~\n\n~~~ Java\n//URI\n<intent-filter>\n    <data android:mimeType=\"image/*\" android:scheme=\"http\" .../>\n    ...\n</intent-filter>\n~~~\n\n  IntentdatasetDataAndType\n\n  setDatasetType\n~~~ Java\nintent.setDataAndType(Uri.parse(\"file://abc\"), \"image/png\");\n~~~\n  data\n\n~~~ Java\n<intent-filter>\n    <data android:scheme=\"file\" android:host=\"www.github.com\"/>\n</intent-filter>\n\n<intent-filter>\n    <data android:scheme=\"file\"/>\n    <data android:host=\"www.github.com\"/>\n</intent-filter>\n~~~\n  ActivityIntent\n\n  - (1)PackageManagerresolveActivityIntentresolveActivitynull\n\n  - (2)PackageManagerqueryIntentActivitiesActivity\nServiceBroadcastReceiverPackageManagerqueryIntentServicesqueryBroadcastReceivers\n\n  - actioncategoryActivity\n~~~ Java\n<intent-filter>\n    <action android:name=\"android.intent.action.MAIN\" />\n    <category android:name=\"android.intent.category.LAUNCHER\" />\n</intent-filter>\n~~~\n\n### 2 IPC\n\n#### 2.1 Android IPC\n\n(1)IPCLinuxAndroidBinderIPCSocket\n\n#### 2.2 Android\n\n- (1)android:process.\n\n    packageName::ShareUID\n\n    android:process=\":xyz\" // packageName:xyz\n\n    android:process=\"aaa.bbb.ccc\" // aaa.bbb.ccc\n\n- (2)AndroidUIDUID\n\n    ShareUIDShareUID data\n- (3)android\n\n- (4)\n\n  - 1.\n  - 2.\n  - 3.SharedPreferencesSharedPreferences\n  - 4.ApplicationApplicationApplication\n\n    \n\n#### 2.3 IPC\n\n- (1)SerializableJavaParcelableAndroid\n\n- (2)serialVersionUIdlongserialVersionUIdserialVersionUId\n\n  serialVersionUIdserialVersionUIdserialVersionUIdserialVersionUIdserialVersionUId\n\n  - 1.\n\n  - 2.transient\n\n- (3)ParcelableBinderParcelableIntentBundleBitmapListMapParcelable\n\n~~~ Java\npublic class Book implements Parcelable {\n    public int bookId;\n    public String bookName;\n    public Book() {\n    }\n\n    public Book(int bookId, String bookName) {\n        this.bookId = bookId;\n        this.bookName = bookName;\n    }\n\n    //100\n    public int describeContents() {\n        return 0;\n    }\n\n    //flags0110\n    public void writeToParcel(Parcel out, int flags) {\n        out.writeInt(bookId);\n        out.writeString(bookName);\n    }\n\n    //\n    public static final Parcelable.Creator<Book> CREATOR = new Parcelable.Creator<Book>() {\n        //\n        public Book createFromParcel(Parcel in) {\n            return new Book(in);\n        }\n        public Book[] newArray(int size) {//\n            return new Book[size];\n        }\n    };\n\n    private Book(Parcel in) {\n        bookId = in.readInt();\n        bookName = in.readString();\n    }\n\n}\n~~~\n\n- (4)BinderAndroidIBinder\n\n  IPCBinderAndroidBinder/dev/binder\n\n  FrameworkBinderServiceManagerManagerManagerService\n\n  AndroidBinderbindServiceBinderBinderAIDL\n\n\n  AndroidBinderServiceAIDLMessengerServiceBinderMessengerAIDLBinder\n\n- (5)aidlaidljava\n\n  ididtransact\n\n  StubStubBindertransacttransactStubProxy\n\n  StubStubProxy \n\n  - 1.asInterface(android.os.IBinder obj)BinderAIDLStubStub.Proxy\n  - 2.asBinderBinder\n  - 3.onTransactBinder\n\n    public Boolean onTransact(int code, Parcelable data, Parcelable reply, int flags)\n\n    codedatareplyfalse()\n\n  - 4.Proxy#[Method]\n\n    _datatransactRPConTransactRPC_replyRPC_reply\n\n  AIDLBinder[](https://github.com/singwhatiwanna/android-art-res/blob/master/Chapter_2/src/com/ryg/chapter_2/manualbinder/BookManagerImpl.java)\n\n- (6)BinderlinkToDeathunlinkToDeath\n\n  BinderBinderlinkToDeathunlinkToDeathlinkToDeathBinderBinder\n\n  Binder\n\n  - 1.DeathRecipientDeathRecipientbindeDiedBinder\n\n~~~ Java\nprivate IBinder.DeathRecipient mDeathRecipient = new IBinder.DeathRecipient() {\n    @Override\n    public void binderDied() {\n        if (mRemoteBookManager == null) return;\n        mRemoteBookManager.asBinder().unlinkToDeath(mDeathRecipient, 0);\n        mRemoteBookManager = null;\n        // TODO:Service\n    }\n};\n~~~\n  - 2.binder\n\n~~~ Java\nmRemoteBookManager.asBinder().linkToDeath(mDeathRecipient, 0);\n~~~\n\n#### 2.4 AndroidIPC\n\n- (1)BundleBundleParcelableActivityServiceReceiverIntentBundle\n\n- (2)\n\n  SharedPreferencesSharedPreferencesSharedPreferences\n\n- (3)MessengerMessengerIPCAIDLMessenger\n\n- (4)AIDL\n\n  ServiceAIDLAIDLStubStubServiceonBindService\n\n  - 1.AIDLStringCharSequenceArrayListHashMapParcelableAIDL\n  - 2.AIDLimport\n  - 3.AIDLinoutinout\n  - 4.AIDL\n  - 5.AIDLAIDL\n  - 6.RemoteCallbackListListenerRemoteCallbackListAIDLAIDLIInterface\n\n- (5)ContentProvider\n\n  - 1.ContentProvider\n  - 2.ContentProviderMediaStoreContentProvider\n  - 3.ContentProviderSQLite\n  - 4.ContentProviderContentResolverregisterContentObserver\n\n- (6)Socket\n\n  SocketTCPUDP\n\n#### 2.5 Binder\n\n- (1)ServiceserviceserviceAIDLService\n\n  AIDLBinderServicequeryBinderBinderBinder\n\n  BinderBinderServiceService\n\n- (2)BinderBinderPoolAIDLBinderPool\n\n#### 2.6 IPC\n\n![IPC](/images/blogimages/2016/androidart_ipc.png)\n\n\n\n### 9 \n[amurocrash](http://blog.csdn.net/amurocrash/article/details/48858353)\n\n#### 9.1 \n\n- (1)BroadcastReceiverAndroidManifestAndroidManifestContentProviderIntentIntent\n- (2)ActivityIntent\n- (3)ServiceserviceServiceserviceservice\n- (4)BroadcastReceiverAndroidManifestContext.registerReceiver()BroadcastReceiver\n- (5)ContentProviderContentProviderinsertdeleteupdatequeryBinderContentProvider\n\n#### 9.2 Activity\n\n##### (1)Activity\n![Activity](/images/blogimages/2016/androidart_activity.png)\n\n(2)ApplicationThreadActivityThreadApplicationThreadNativeApplicationThreadNativeBinderIApplicationThreadApplicationThreadNativeAIDL\n(3)ActivityManagerService(AMS)ActivityManagerNativeActivityManagerNativeBinderIActivityManagerBinderAMSBinder\n(4)ApplicationInstrumentationActivity\n(5)ContextImplContextContextImplActivityattachActivityattachActivityWindowWindowwindowActivity [Activitywindow]\n\n#### 9.3 Service\n\n##### (1)Service\n\n****\n![Service1](/images/blogimages/2016/androidart_service1.png)\n\n****\n![Service2](/images/blogimages/2016/androidart_service2.png)\n\n#### 9.4 BroadcastReceiver\n##### (1)BroadcastReceiver\n\n****PackageManagerService\n![broadcastreceiver1](/images/blogimages/2016/androidart_broadcastreceiver1.png)\n****\n![broadcastreceiver2](/images/blogimages/2016/androidart_broadcastreceiver2.png)\n##### (2)\n\n##### (3)\nAndroid 3.1\n\n#### 9.5 ContentProvider\n\n##### (1)ContentProviderAMSonCreateApplicationonCreate\n##### (2)ContentProvider\n- 1.ActivityThreadmainActivityThread\n- 2.ActivityThreadattachActivityManagerServiceattachApplicationApplicationThreadAMSApplicationThreadActivityThreadAMS\n- 3.ActivityManagerServiceattachApplicationApplicationThreadbindApplicationHActivityThreadhandleBindApplication\n- 4.handleBindApplicationApplicationContentProviderContentProviderApplicationonCreate\n\n##### (3)ContentProviderandroid:multiprocessfalsetrueContentProvider\n\n##### (4)ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\n![ContentProvider](/images/blogimages/2016/androidart_contentprovider.png)\n","slug":"android-books-reading-","published":1,"date":"2016-03-19T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4h000kbxs6tiyvg0sh","content":"<h3 id=\"1-Activity\"><a href=\"#1-Activity\" class=\"headerlink\" title=\"1 Activity\"></a>1 Activity</h3><p>Android8ActivityActivity</p>\n<p>1 Activity</p>\n<h4 id=\"1-1-Activity\"><a href=\"#1-1-Activity\" class=\"headerlink\" title=\"1.1 Activity\"></a>1.1 Activity</h4><h5 id=\"1-1-1-\"><a href=\"#1-1-1-\" class=\"headerlink\" title=\"1.1.1 \"></a>1.1.1 </h5><ul>\n<li><p>(1)ActivityonRestart</p>\n</li>\n<li><p>(2)ActivityonPause -&gt; onStopActivityonStopActivityonRestart -&gt; onStart -&gt; onResume</p>\n</li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li><p>(3)onStartonStopActivityonPauseonResumeActivity</p>\n</li>\n<li><p>(4)Activity AActivity BonPause(A) -&gt; onCreate(B) -&gt; onStart(B) -&gt; onResume(B) -&gt; onStop(A)onPause</p>\n</li>\n</ul>\n<p>1.1.2 </p>\n<ul>\n<li><p>(1)onSaveInstanceStateActivityonStoponPause</p>\n<p>  ActivityonRestoreInstanceStateonStart</p>\n<p>  ActivityonSaveInstanceState</p>\n<p>  ActivityActivityActivitylistviewviewviewviewonSaveInstanceStateonRestoreInstanceState</p>\n</li>\n<li><p>(2)Activity</p>\n<p>  ActivityActivityActivity</p>\n</li>\n<li><p>(3)android:configChanges=xxx</p>\n<p>  local</p>\n<p>  keyboardHidden</p>\n<p>  orientation</p>\n<p>  android:configChanges=xxxActivityActivityonConfigurationChanged</p>\n</li>\n</ul>\n<h4 id=\"1-2-Activity\"><a href=\"#1-2-Activity\" class=\"headerlink\" title=\"1.2 Activity\"></a>1.2 Activity</h4><h5 id=\"1-2-1-\"><a href=\"#1-2-1-\" class=\"headerlink\" title=\"1.2.1 \"></a>1.2.1 </h5><ul>\n<li><p>(1)Activity</p>\n</li>\n<li><p>(2)ActivityContext(ApplicationContextService)standardActivitycontextActivityFLAG_ACTIVITY_NEW_TASK</p>\n</li>\n<li><p>(3)Activity</p>\n</li>\n<li><p>(4)TaskAffinityActivity</p>\n<p>  ActivityTaskAffinitysingleTaskallowTaskReparenting</p>\n<p>  TaskAffinitysingleTaskActivityActivityTaskAffinity</p>\n<p>  TaskAffinityallowTaskReparentingABActivity CActivity CallowTaskReparentingtrueBActivity CActivity CAB</p>\n</li>\n<li><p>(5)singleTask</p>\n<p>  singleTaskActivityA</p>\n<p>  ActivityActivityActivity.</p>\n<p>  ActivityonNewIntent(ActivitysingleTaskFLAG_ACTIVITY_CLEAR_TOP)ActivityActivity</p>\n</li>\n<li><p>(6)xmlandroid:launchModeintent.addFlags()ActivityFLAG_ACTIVITY_CLEAR_TOPActivitysingleInstance</p>\n</li>\n</ul>\n<h5 id=\"1-2-2-ActivityFlags\"><a href=\"#1-2-2-ActivityFlags\" class=\"headerlink\" title=\"1.2.2 ActivityFlags\"></a>1.2.2 ActivityFlags</h5><p>FLAG_ACTIVITY_NEW_TASK,FLAG_ACTIVITY_SINGLE_TOP,FLAG_ACTIVITY_CLEAR_TOP</p>\n<p>FLAG_ACTIVITY_EXCLUDE_FROM_RECENTSActivityActivityActivityandroid:excludeFromRecents=true</p>\n<h4 id=\"1-3-IntentFilter\"><a href=\"#1-3-IntentFilter\" class=\"headerlink\" title=\"1.3 IntentFilter\"></a>1.3 IntentFilter</h4><ul>\n<li><p>(1)IntentFilteractioncategorydataactioncategorydata</p>\n<p>  actioncategorydataactioncategorydataIntentactioncategorydataActivityActivityintent-filterIntentintenf-filterActivity</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;action android:name=\"com.ryg.charpter_1.c\" /&gt;</div><div class=\"line\">    &lt;action android:name=\"com.ryg.charpter_1.d\" /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;category android:name=\"com.ryg.category.c\" /&gt;</div><div class=\"line\">    &lt;category android:name=\"com.ryg.category.d\" /&gt;</div><div class=\"line\">    &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;data android:mimeType=\"text/plain\" /&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div><div class=\"line\">~~~  </div><div class=\"line\"></div><div class=\"line\">- (2)action</div><div class=\"line\"></div><div class=\"line\">    Intentactionactionaction</div><div class=\"line\"></div><div class=\"line\">- (3)category</div><div class=\"line\"></div><div class=\"line\">    Intentcategorycategorycategorycategorycategoryandroid.intent.category.DEFAULTActivitycategorycategory</div><div class=\"line\"></div><div class=\"line\">- (4)data</div><div class=\"line\"></div><div class=\"line\">    data</div><div class=\"line\">~~~ Javascript</div><div class=\"line\">&lt;data android:scheme=\"string\"</div><div class=\"line\">\tandroid:host=\"string\"</div><div class=\"line\">\tandroid:port=\"string\"</div><div class=\"line\">\tandroid:path=\"string\"`</div><div class=\"line\">\tandroid:pathPattern=\"string\"</div><div class=\"line\">\tandroid:pathPrefix=\"string\"</div><div class=\"line\">\tandroid:mimeType=\"string\" /&gt;</div></pre></td></tr></table></figure>\n<p>  mimeTypeURImimeTypeURI</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;scheme&gt;:<span class=\"comment\">//&lt;host&gt;:&lt;port&gt;/[&lt;path&gt;]|[&lt;pathPrefix&gt;]|[pathPattern]</span></div></pre></td></tr></table></figure>\n<p>  content://com.example.project:200/folder/subfolder/etc</p>\n<ul>\n<li><p>schemehostportURIschemehostURI</p>\n</li>\n<li><p>pathpathPatternpathPrefixpathpathPrefixpathPattern(*)</p>\n</li>\n</ul>\n<p>dataIntentdatadatadata</p>\n<p>URIscheme</p>\n<p>mimeTypeimage/*text/*URIURIschemecontentfileschemescheme</p>\n</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//URI</div><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:mimeType=\"image/*\"/&gt;</div><div class=\"line\">  ...</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//URI</div><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:mimeType=\"image/*\" android:scheme=\"http\" .../&gt;</div><div class=\"line\">    ...</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n<p>  IntentdatasetDataAndType</p>\n<p>  setDatasetType<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">intent.setDataAndType(Uri.parse(<span class=\"string\">\"file://abc\"</span>), <span class=\"string\">\"image/png\"</span>);</div></pre></td></tr></table></figure></p>\n<p>  data</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:scheme=\"file\" android:host=\"www.github.com\"/&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:scheme=\"file\"/&gt;</div><div class=\"line\">    &lt;data android:host=\"www.github.com\"/&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n<p>  ActivityIntent</p>\n<ul>\n<li><p>(1)PackageManagerresolveActivityIntentresolveActivitynull</p>\n</li>\n<li><p>(2)PackageManagerqueryIntentActivitiesActivity<br>ServiceBroadcastReceiverPackageManagerqueryIntentServicesqueryBroadcastReceivers</p>\n</li>\n<li><p>actioncategoryActivity</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;action android:name=\"android.intent.action.MAIN\" /&gt;</div><div class=\"line\">    &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"2-IPC\"><a href=\"#2-IPC\" class=\"headerlink\" title=\"2 IPC\"></a>2 IPC</h3><h4 id=\"2-1-Android-IPC\"><a href=\"#2-1-Android-IPC\" class=\"headerlink\" title=\"2.1 Android IPC\"></a>2.1 Android IPC</h4><p>(1)IPCLinuxAndroidBinderIPCSocket</p>\n<h4 id=\"2-2-Android\"><a href=\"#2-2-Android\" class=\"headerlink\" title=\"2.2 Android\"></a>2.2 Android</h4><ul>\n<li><p>(1)android:process.</p>\n<p>  packageName::ShareUID</p>\n<p>  android:process=:xyz // packageName:xyz</p>\n<p>  android:process=aaa.bbb.ccc // aaa.bbb.ccc</p>\n</li>\n<li><p>(2)AndroidUIDUID</p>\n<p>  ShareUIDShareUID data</p>\n</li>\n<li><p>(3)android</p>\n</li>\n<li><p>(4)</p>\n<ul>\n<li>1.</li>\n<li>2.</li>\n<li>3.SharedPreferencesSharedPreferences</li>\n<li><p>4.ApplicationApplicationApplication</p>\n<p></p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-3-IPC\"><a href=\"#2-3-IPC\" class=\"headerlink\" title=\"2.3 IPC\"></a>2.3 IPC</h4><ul>\n<li><p>(1)SerializableJavaParcelableAndroid</p>\n</li>\n<li><p>(2)serialVersionUIdlongserialVersionUIdserialVersionUId</p>\n<p>serialVersionUIdserialVersionUIdserialVersionUIdserialVersionUIdserialVersionUId</p>\n<ul>\n<li><p>1.</p>\n</li>\n<li><p>2.transient</p>\n</li>\n</ul>\n</li>\n<li><p>(3)ParcelableBinderParcelableIntentBundleBitmapListMapParcelable</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Book</span> <span class=\"keyword\">implements</span> <span class=\"title\">Parcelable</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> bookId;</div><div class=\"line\">    <span class=\"keyword\">public</span> String bookName;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Book</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Book</span><span class=\"params\">(<span class=\"keyword\">int</span> bookId, String bookName)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.bookId = bookId;</div><div class=\"line\">        <span class=\"keyword\">this</span>.bookName = bookName;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//100</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">describeContents</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//flags0110</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeToParcel</span><span class=\"params\">(Parcel out, <span class=\"keyword\">int</span> flags)</span> </span>&#123;</div><div class=\"line\">        out.writeInt(bookId);</div><div class=\"line\">        out.writeString(bookName);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Parcelable.Creator&lt;Book&gt; CREATOR = <span class=\"keyword\">new</span> Parcelable.Creator&lt;Book&gt;() &#123;</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Book <span class=\"title\">createFromParcel</span><span class=\"params\">(Parcel in)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Book(in);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">public</span> Book[] newArray(<span class=\"keyword\">int</span> size) &#123;<span class=\"comment\">//</span></div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Book[size];</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Book</span><span class=\"params\">(Parcel in)</span> </span>&#123;</div><div class=\"line\">        bookId = in.readInt();</div><div class=\"line\">        bookName = in.readString();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>(4)BinderAndroidIBinder</p>\n<p>IPCBinderAndroidBinder/dev/binder</p>\n<p>FrameworkBinderServiceManagerManagerManagerService</p>\n<p>AndroidBinderbindServiceBinderBinderAIDL</p>\n</li>\n</ul>\n<p>  AndroidBinderServiceAIDLMessengerServiceBinderMessengerAIDLBinder</p>\n<ul>\n<li><p>(5)aidlaidljava</p>\n<p>ididtransact</p>\n<p>StubStubBindertransacttransactStubProxy</p>\n<p>StubStubProxy </p>\n<ul>\n<li>1.asInterface(android.os.IBinder obj)BinderAIDLStubStub.Proxy</li>\n<li>2.asBinderBinder</li>\n<li><p>3.onTransactBinder</p>\n<p>public Boolean onTransact(int code, Parcelable data, Parcelable reply, int flags)</p>\n<p>codedatareplyfalse()</p>\n</li>\n<li><p>4.Proxy#[Method]</p>\n<p>_datatransactRPConTransactRPC_replyRPC_reply</p>\n</li>\n</ul>\n<p>AIDLBinder<a href=\"https://github.com/singwhatiwanna/android-art-res/blob/master/Chapter_2/src/com/ryg/chapter_2/manualbinder/BookManagerImpl.java\" target=\"_blank\" rel=\"external\"></a></p>\n</li>\n<li><p>(6)BinderlinkToDeathunlinkToDeath</p>\n<p>BinderBinderlinkToDeathunlinkToDeathlinkToDeathBinderBinder</p>\n<p>Binder</p>\n<ul>\n<li>1.DeathRecipientDeathRecipientbindeDiedBinder</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> IBinder.DeathRecipient mDeathRecipient = <span class=\"keyword\">new</span> IBinder.DeathRecipient() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">binderDied</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mRemoteBookManager == <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span>;</div><div class=\"line\">        mRemoteBookManager.asBinder().unlinkToDeath(mDeathRecipient, <span class=\"number\">0</span>);</div><div class=\"line\">        mRemoteBookManager = <span class=\"keyword\">null</span>;</div><div class=\"line\">        <span class=\"comment\">// <span class=\"doctag\">TODO:</span>Service</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<ul>\n<li>2.binder</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">mRemoteBookManager.asBinder().linkToDeath(mDeathRecipient, <span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"2-4-AndroidIPC\"><a href=\"#2-4-AndroidIPC\" class=\"headerlink\" title=\"2.4 AndroidIPC\"></a>2.4 AndroidIPC</h4><ul>\n<li><p>(1)BundleBundleParcelableActivityServiceReceiverIntentBundle</p>\n</li>\n<li><p>(2)</p>\n<p>SharedPreferencesSharedPreferencesSharedPreferences</p>\n</li>\n<li><p>(3)MessengerMessengerIPCAIDLMessenger</p>\n</li>\n<li><p>(4)AIDL</p>\n<p>ServiceAIDLAIDLStubStubServiceonBindService</p>\n<ul>\n<li>1.AIDLStringCharSequenceArrayListHashMapParcelableAIDL</li>\n<li>2.AIDLimport</li>\n<li>3.AIDLinoutinout</li>\n<li>4.AIDL</li>\n<li>5.AIDLAIDL</li>\n<li>6.RemoteCallbackListListenerRemoteCallbackListAIDLAIDLIInterface</li>\n</ul>\n</li>\n<li><p>(5)ContentProvider</p>\n<ul>\n<li>1.ContentProvider</li>\n<li>2.ContentProviderMediaStoreContentProvider</li>\n<li>3.ContentProviderSQLite</li>\n<li>4.ContentProviderContentResolverregisterContentObserver</li>\n</ul>\n</li>\n<li><p>(6)Socket</p>\n<p>SocketTCPUDP</p>\n</li>\n</ul>\n<h4 id=\"2-5-Binder\"><a href=\"#2-5-Binder\" class=\"headerlink\" title=\"2.5 Binder\"></a>2.5 Binder</h4><ul>\n<li><p>(1)ServiceserviceserviceAIDLService</p>\n<p>AIDLBinderServicequeryBinderBinderBinder</p>\n<p>BinderBinderServiceService</p>\n</li>\n<li><p>(2)BinderBinderPoolAIDLBinderPool</p>\n</li>\n</ul>\n<h4 id=\"2-6-IPC\"><a href=\"#2-6-IPC\" class=\"headerlink\" title=\"2.6 IPC\"></a>2.6 IPC</h4><p><img src=\"/images/blogimages/2016/androidart_ipc.png\" alt=\"IPC\"></p>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9 \"></a>9 </h3><p><a href=\"http://blog.csdn.net/amurocrash/article/details/48858353\" target=\"_blank\" rel=\"external\">amurocrash</a></p>\n<h4 id=\"9-1-\"><a href=\"#9-1-\" class=\"headerlink\" title=\"9.1 \"></a>9.1 </h4><ul>\n<li>(1)BroadcastReceiverAndroidManifestAndroidManifestContentProviderIntentIntent</li>\n<li>(2)ActivityIntent</li>\n<li>(3)ServiceserviceServiceserviceservice</li>\n<li>(4)BroadcastReceiverAndroidManifestContext.registerReceiver()BroadcastReceiver</li>\n<li>(5)ContentProviderContentProviderinsertdeleteupdatequeryBinderContentProvider</li>\n</ul>\n<h4 id=\"9-2-Activity\"><a href=\"#9-2-Activity\" class=\"headerlink\" title=\"9.2 Activity\"></a>9.2 Activity</h4><h5 id=\"1-Activity\"><a href=\"#1-Activity\" class=\"headerlink\" title=\"(1)Activity\"></a>(1)Activity</h5><p><img src=\"/images/blogimages/2016/androidart_activity.png\" alt=\"Activity\"></p>\n<p>(2)ApplicationThreadActivityThreadApplicationThreadNativeApplicationThreadNativeBinderIApplicationThreadApplicationThreadNativeAIDL<br>(3)ActivityManagerService(AMS)ActivityManagerNativeActivityManagerNativeBinderIActivityManagerBinderAMSBinder<br>(4)ApplicationInstrumentationActivity<br>(5)ContextImplContextContextImplActivityattachActivityattachActivityWindowWindowwindowActivity [Activitywindow]</p>\n<h4 id=\"9-3-Service\"><a href=\"#9-3-Service\" class=\"headerlink\" title=\"9.3 Service\"></a>9.3 Service</h4><h5 id=\"1-Service\"><a href=\"#1-Service\" class=\"headerlink\" title=\"(1)Service\"></a>(1)Service</h5><p><br><strong></strong><br><img src=\"/images/blogimages/2016/androidart_service1.png\" alt=\"Service1\"></p>\n<p><strong></strong><br><img src=\"/images/blogimages/2016/androidart_service2.png\" alt=\"Service2\"></p>\n<h4 id=\"9-4-BroadcastReceiver\"><a href=\"#9-4-BroadcastReceiver\" class=\"headerlink\" title=\"9.4 BroadcastReceiver\"></a>9.4 BroadcastReceiver</h4><h5 id=\"1-BroadcastReceiver\"><a href=\"#1-BroadcastReceiver\" class=\"headerlink\" title=\"(1)BroadcastReceiver\"></a>(1)BroadcastReceiver</h5><p><strong></strong>PackageManagerService<br><img src=\"/images/blogimages/2016/androidart_broadcastreceiver1.png\" alt=\"broadcastreceiver1\"><br><strong></strong><br><img src=\"/images/blogimages/2016/androidart_broadcastreceiver2.png\" alt=\"broadcastreceiver2\"></p>\n<h5 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"(2)\"></a>(2)</h5><p></p>\n<h5 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"(3)\"></a>(3)</h5><p>Android 3.1</p>\n<h4 id=\"9-5-ContentProvider\"><a href=\"#9-5-ContentProvider\" class=\"headerlink\" title=\"9.5 ContentProvider\"></a>9.5 ContentProvider</h4><h5 id=\"1-ContentProviderAMSonCreateApplicationonCreate\"><a href=\"#1-ContentProviderAMSonCreateApplicationonCreate\" class=\"headerlink\" title=\"(1)ContentProviderAMSonCreateApplicationonCreate\"></a>(1)ContentProviderAMSonCreateApplicationonCreate</h5><h5 id=\"2-ContentProvider\"><a href=\"#2-ContentProvider\" class=\"headerlink\" title=\"(2)ContentProvider\"></a>(2)ContentProvider</h5><ul>\n<li>1.ActivityThreadmainActivityThread</li>\n<li>2.ActivityThreadattachActivityManagerServiceattachApplicationApplicationThreadAMSApplicationThreadActivityThreadAMS</li>\n<li>3.ActivityManagerServiceattachApplicationApplicationThreadbindApplicationHActivityThreadhandleBindApplication</li>\n<li>4.handleBindApplicationApplicationContentProviderContentProviderApplicationonCreate</li>\n</ul>\n<h5 id=\"3-ContentProviderandroid-multiprocessfalsetrueContentProvider\"><a href=\"#3-ContentProviderandroid-multiprocessfalsetrueContentProvider\" class=\"headerlink\" title=\"(3)ContentProviderandroid:multiprocessfalsetrueContentProvider\"></a>(3)ContentProviderandroid:multiprocessfalsetrueContentProvider</h5><h5 id=\"4-ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\"><a href=\"#4-ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\" class=\"headerlink\" title=\"(4)ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\"></a>(4)ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery</h5><p><img src=\"/images/blogimages/2016/androidart_contentprovider.png\" alt=\"ContentProvider\"></p>\n","excerpt":"<h3 id=\"1-Activity\"><a href=\"#1-Activity\" class=\"headerlink\" title=\"1 Activity\"></a>1 Activity</h3><p>Android8ActivityActivity</p>\n<p>1 Activity</p>\n<h4 id=\"1-1-Activity\"><a href=\"#1-1-Activity\" class=\"headerlink\" title=\"1.1 Activity\"></a>1.1 Activity</h4><h5 id=\"1-1-1-\"><a href=\"#1-1-1-\" class=\"headerlink\" title=\"1.1.1 \"></a>1.1.1 </h5><ul>\n<li><p>(1)ActivityonRestart</p>\n</li>\n<li><p>(2)ActivityonPause -&gt; onStopActivityonStopActivityonRestart -&gt; onStart -&gt; onResume</p>\n</li>\n</ul>","more":"<ul>\n<li><p>(3)onStartonStopActivityonPauseonResumeActivity</p>\n</li>\n<li><p>(4)Activity AActivity BonPause(A) -&gt; onCreate(B) -&gt; onStart(B) -&gt; onResume(B) -&gt; onStop(A)onPause</p>\n</li>\n</ul>\n<p>1.1.2 </p>\n<ul>\n<li><p>(1)onSaveInstanceStateActivityonStoponPause</p>\n<p>  ActivityonRestoreInstanceStateonStart</p>\n<p>  ActivityonSaveInstanceState</p>\n<p>  ActivityActivityActivitylistviewviewviewviewonSaveInstanceStateonRestoreInstanceState</p>\n</li>\n<li><p>(2)Activity</p>\n<p>  ActivityActivityActivity</p>\n</li>\n<li><p>(3)android:configChanges=xxx</p>\n<p>  local</p>\n<p>  keyboardHidden</p>\n<p>  orientation</p>\n<p>  android:configChanges=xxxActivityActivityonConfigurationChanged</p>\n</li>\n</ul>\n<h4 id=\"1-2-Activity\"><a href=\"#1-2-Activity\" class=\"headerlink\" title=\"1.2 Activity\"></a>1.2 Activity</h4><h5 id=\"1-2-1-\"><a href=\"#1-2-1-\" class=\"headerlink\" title=\"1.2.1 \"></a>1.2.1 </h5><ul>\n<li><p>(1)Activity</p>\n</li>\n<li><p>(2)ActivityContext(ApplicationContextService)standardActivitycontextActivityFLAG_ACTIVITY_NEW_TASK</p>\n</li>\n<li><p>(3)Activity</p>\n</li>\n<li><p>(4)TaskAffinityActivity</p>\n<p>  ActivityTaskAffinitysingleTaskallowTaskReparenting</p>\n<p>  TaskAffinitysingleTaskActivityActivityTaskAffinity</p>\n<p>  TaskAffinityallowTaskReparentingABActivity CActivity CallowTaskReparentingtrueBActivity CActivity CAB</p>\n</li>\n<li><p>(5)singleTask</p>\n<p>  singleTaskActivityA</p>\n<p>  ActivityActivityActivity.</p>\n<p>  ActivityonNewIntent(ActivitysingleTaskFLAG_ACTIVITY_CLEAR_TOP)ActivityActivity</p>\n</li>\n<li><p>(6)xmlandroid:launchModeintent.addFlags()ActivityFLAG_ACTIVITY_CLEAR_TOPActivitysingleInstance</p>\n</li>\n</ul>\n<h5 id=\"1-2-2-ActivityFlags\"><a href=\"#1-2-2-ActivityFlags\" class=\"headerlink\" title=\"1.2.2 ActivityFlags\"></a>1.2.2 ActivityFlags</h5><p>FLAG_ACTIVITY_NEW_TASK,FLAG_ACTIVITY_SINGLE_TOP,FLAG_ACTIVITY_CLEAR_TOP</p>\n<p>FLAG_ACTIVITY_EXCLUDE_FROM_RECENTSActivityActivityActivityandroid:excludeFromRecents=true</p>\n<h4 id=\"1-3-IntentFilter\"><a href=\"#1-3-IntentFilter\" class=\"headerlink\" title=\"1.3 IntentFilter\"></a>1.3 IntentFilter</h4><ul>\n<li><p>(1)IntentFilteractioncategorydataactioncategorydata</p>\n<p>  actioncategorydataactioncategorydataIntentactioncategorydataActivityActivityintent-filterIntentintenf-filterActivity</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;action android:name=\"com.ryg.charpter_1.c\" /&gt;</div><div class=\"line\">    &lt;action android:name=\"com.ryg.charpter_1.d\" /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;category android:name=\"com.ryg.category.c\" /&gt;</div><div class=\"line\">    &lt;category android:name=\"com.ryg.category.d\" /&gt;</div><div class=\"line\">    &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;</div><div class=\"line\"></div><div class=\"line\">    &lt;data android:mimeType=\"text/plain\" /&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div><div class=\"line\">~~~  </div><div class=\"line\"></div><div class=\"line\">- (2)action</div><div class=\"line\"></div><div class=\"line\">    Intentactionactionaction</div><div class=\"line\"></div><div class=\"line\">- (3)category</div><div class=\"line\"></div><div class=\"line\">    Intentcategorycategorycategorycategorycategoryandroid.intent.category.DEFAULTActivitycategorycategory</div><div class=\"line\"></div><div class=\"line\">- (4)data</div><div class=\"line\"></div><div class=\"line\">    data</div><div class=\"line\">~~~ Javascript</div><div class=\"line\">&lt;data android:scheme=\"string\"</div><div class=\"line\">\tandroid:host=\"string\"</div><div class=\"line\">\tandroid:port=\"string\"</div><div class=\"line\">\tandroid:path=\"string\"`</div><div class=\"line\">\tandroid:pathPattern=\"string\"</div><div class=\"line\">\tandroid:pathPrefix=\"string\"</div><div class=\"line\">\tandroid:mimeType=\"string\" /&gt;</div></pre></td></tr></table></figure>\n<p>  mimeTypeURImimeTypeURI</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;scheme&gt;:<span class=\"comment\">//&lt;host&gt;:&lt;port&gt;/[&lt;path&gt;]|[&lt;pathPrefix&gt;]|[pathPattern]</span></div></pre></td></tr></table></figure>\n<p>  content://com.example.project:200/folder/subfolder/etc</p>\n<ul>\n<li><p>schemehostportURIschemehostURI</p>\n</li>\n<li><p>pathpathPatternpathPrefixpathpathPrefixpathPattern(*)</p>\n</li>\n</ul>\n<p>dataIntentdatadatadata</p>\n<p>URIscheme</p>\n<p>mimeTypeimage/*text/*URIURIschemecontentfileschemescheme</p>\n</li>\n</ul>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//URI</div><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:mimeType=\"image/*\"/&gt;</div><div class=\"line\">  ...</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//URI</div><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:mimeType=\"image/*\" android:scheme=\"http\" .../&gt;</div><div class=\"line\">    ...</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n<p>  IntentdatasetDataAndType</p>\n<p>  setDatasetType<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">intent.setDataAndType(Uri.parse(<span class=\"string\">\"file://abc\"</span>), <span class=\"string\">\"image/png\"</span>);</div></pre></td></tr></table></figure></p>\n<p>  data</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:scheme=\"file\" android:host=\"www.github.com\"/&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div><div class=\"line\"></div><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;data android:scheme=\"file\"/&gt;</div><div class=\"line\">    &lt;data android:host=\"www.github.com\"/&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n<p>  ActivityIntent</p>\n<ul>\n<li><p>(1)PackageManagerresolveActivityIntentresolveActivitynull</p>\n</li>\n<li><p>(2)PackageManagerqueryIntentActivitiesActivity<br>ServiceBroadcastReceiverPackageManagerqueryIntentServicesqueryBroadcastReceivers</p>\n</li>\n<li><p>actioncategoryActivity</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;intent-filter&gt;</div><div class=\"line\">    &lt;action android:name=\"android.intent.action.MAIN\" /&gt;</div><div class=\"line\">    &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;</div><div class=\"line\">&lt;/intent-filter&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"2-IPC\"><a href=\"#2-IPC\" class=\"headerlink\" title=\"2 IPC\"></a>2 IPC</h3><h4 id=\"2-1-Android-IPC\"><a href=\"#2-1-Android-IPC\" class=\"headerlink\" title=\"2.1 Android IPC\"></a>2.1 Android IPC</h4><p>(1)IPCLinuxAndroidBinderIPCSocket</p>\n<h4 id=\"2-2-Android\"><a href=\"#2-2-Android\" class=\"headerlink\" title=\"2.2 Android\"></a>2.2 Android</h4><ul>\n<li><p>(1)android:process.</p>\n<p>  packageName::ShareUID</p>\n<p>  android:process=:xyz // packageName:xyz</p>\n<p>  android:process=aaa.bbb.ccc // aaa.bbb.ccc</p>\n</li>\n<li><p>(2)AndroidUIDUID</p>\n<p>  ShareUIDShareUID data</p>\n</li>\n<li><p>(3)android</p>\n</li>\n<li><p>(4)</p>\n<ul>\n<li>1.</li>\n<li>2.</li>\n<li>3.SharedPreferencesSharedPreferences</li>\n<li><p>4.ApplicationApplicationApplication</p>\n<p></p>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"2-3-IPC\"><a href=\"#2-3-IPC\" class=\"headerlink\" title=\"2.3 IPC\"></a>2.3 IPC</h4><ul>\n<li><p>(1)SerializableJavaParcelableAndroid</p>\n</li>\n<li><p>(2)serialVersionUIdlongserialVersionUIdserialVersionUId</p>\n<p>serialVersionUIdserialVersionUIdserialVersionUIdserialVersionUIdserialVersionUId</p>\n<ul>\n<li><p>1.</p>\n</li>\n<li><p>2.transient</p>\n</li>\n</ul>\n</li>\n<li><p>(3)ParcelableBinderParcelableIntentBundleBitmapListMapParcelable</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Book</span> <span class=\"keyword\">implements</span> <span class=\"title\">Parcelable</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">int</span> bookId;</div><div class=\"line\">    <span class=\"keyword\">public</span> String bookName;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Book</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Book</span><span class=\"params\">(<span class=\"keyword\">int</span> bookId, String bookName)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.bookId = bookId;</div><div class=\"line\">        <span class=\"keyword\">this</span>.bookName = bookName;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//100</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">describeContents</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//flags0110</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeToParcel</span><span class=\"params\">(Parcel out, <span class=\"keyword\">int</span> flags)</span> </span>&#123;</div><div class=\"line\">        out.writeInt(bookId);</div><div class=\"line\">        out.writeString(bookName);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Parcelable.Creator&lt;Book&gt; CREATOR = <span class=\"keyword\">new</span> Parcelable.Creator&lt;Book&gt;() &#123;</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Book <span class=\"title\">createFromParcel</span><span class=\"params\">(Parcel in)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Book(in);</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">public</span> Book[] newArray(<span class=\"keyword\">int</span> size) &#123;<span class=\"comment\">//</span></div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Book[size];</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Book</span><span class=\"params\">(Parcel in)</span> </span>&#123;</div><div class=\"line\">        bookId = in.readInt();</div><div class=\"line\">        bookName = in.readString();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>(4)BinderAndroidIBinder</p>\n<p>IPCBinderAndroidBinder/dev/binder</p>\n<p>FrameworkBinderServiceManagerManagerManagerService</p>\n<p>AndroidBinderbindServiceBinderBinderAIDL</p>\n</li>\n</ul>\n<p>  AndroidBinderServiceAIDLMessengerServiceBinderMessengerAIDLBinder</p>\n<ul>\n<li><p>(5)aidlaidljava</p>\n<p>ididtransact</p>\n<p>StubStubBindertransacttransactStubProxy</p>\n<p>StubStubProxy </p>\n<ul>\n<li>1.asInterface(android.os.IBinder obj)BinderAIDLStubStub.Proxy</li>\n<li>2.asBinderBinder</li>\n<li><p>3.onTransactBinder</p>\n<p>public Boolean onTransact(int code, Parcelable data, Parcelable reply, int flags)</p>\n<p>codedatareplyfalse()</p>\n</li>\n<li><p>4.Proxy#[Method]</p>\n<p>_datatransactRPConTransactRPC_replyRPC_reply</p>\n</li>\n</ul>\n<p>AIDLBinder<a href=\"https://github.com/singwhatiwanna/android-art-res/blob/master/Chapter_2/src/com/ryg/chapter_2/manualbinder/BookManagerImpl.java\"></a></p>\n</li>\n<li><p>(6)BinderlinkToDeathunlinkToDeath</p>\n<p>BinderBinderlinkToDeathunlinkToDeathlinkToDeathBinderBinder</p>\n<p>Binder</p>\n<ul>\n<li>1.DeathRecipientDeathRecipientbindeDiedBinder</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">private</span> IBinder.DeathRecipient mDeathRecipient = <span class=\"keyword\">new</span> IBinder.DeathRecipient() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">binderDied</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (mRemoteBookManager == <span class=\"keyword\">null</span>) <span class=\"keyword\">return</span>;</div><div class=\"line\">        mRemoteBookManager.asBinder().unlinkToDeath(mDeathRecipient, <span class=\"number\">0</span>);</div><div class=\"line\">        mRemoteBookManager = <span class=\"keyword\">null</span>;</div><div class=\"line\">        <span class=\"comment\">// <span class=\"doctag\">TODO:</span>Service</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<ul>\n<li>2.binder</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">mRemoteBookManager.asBinder().linkToDeath(mDeathRecipient, <span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"2-4-AndroidIPC\"><a href=\"#2-4-AndroidIPC\" class=\"headerlink\" title=\"2.4 AndroidIPC\"></a>2.4 AndroidIPC</h4><ul>\n<li><p>(1)BundleBundleParcelableActivityServiceReceiverIntentBundle</p>\n</li>\n<li><p>(2)</p>\n<p>SharedPreferencesSharedPreferencesSharedPreferences</p>\n</li>\n<li><p>(3)MessengerMessengerIPCAIDLMessenger</p>\n</li>\n<li><p>(4)AIDL</p>\n<p>ServiceAIDLAIDLStubStubServiceonBindService</p>\n<ul>\n<li>1.AIDLStringCharSequenceArrayListHashMapParcelableAIDL</li>\n<li>2.AIDLimport</li>\n<li>3.AIDLinoutinout</li>\n<li>4.AIDL</li>\n<li>5.AIDLAIDL</li>\n<li>6.RemoteCallbackListListenerRemoteCallbackListAIDLAIDLIInterface</li>\n</ul>\n</li>\n<li><p>(5)ContentProvider</p>\n<ul>\n<li>1.ContentProvider</li>\n<li>2.ContentProviderMediaStoreContentProvider</li>\n<li>3.ContentProviderSQLite</li>\n<li>4.ContentProviderContentResolverregisterContentObserver</li>\n</ul>\n</li>\n<li><p>(6)Socket</p>\n<p>SocketTCPUDP</p>\n</li>\n</ul>\n<h4 id=\"2-5-Binder\"><a href=\"#2-5-Binder\" class=\"headerlink\" title=\"2.5 Binder\"></a>2.5 Binder</h4><ul>\n<li><p>(1)ServiceserviceserviceAIDLService</p>\n<p>AIDLBinderServicequeryBinderBinderBinder</p>\n<p>BinderBinderServiceService</p>\n</li>\n<li><p>(2)BinderBinderPoolAIDLBinderPool</p>\n</li>\n</ul>\n<h4 id=\"2-6-IPC\"><a href=\"#2-6-IPC\" class=\"headerlink\" title=\"2.6 IPC\"></a>2.6 IPC</h4><p><img src=\"/images/blogimages/2016/androidart_ipc.png\" alt=\"IPC\"></p>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9 \"></a>9 </h3><p><a href=\"http://blog.csdn.net/amurocrash/article/details/48858353\">amurocrash</a></p>\n<h4 id=\"9-1-\"><a href=\"#9-1-\" class=\"headerlink\" title=\"9.1 \"></a>9.1 </h4><ul>\n<li>(1)BroadcastReceiverAndroidManifestAndroidManifestContentProviderIntentIntent</li>\n<li>(2)ActivityIntent</li>\n<li>(3)ServiceserviceServiceserviceservice</li>\n<li>(4)BroadcastReceiverAndroidManifestContext.registerReceiver()BroadcastReceiver</li>\n<li>(5)ContentProviderContentProviderinsertdeleteupdatequeryBinderContentProvider</li>\n</ul>\n<h4 id=\"9-2-Activity\"><a href=\"#9-2-Activity\" class=\"headerlink\" title=\"9.2 Activity\"></a>9.2 Activity</h4><h5 id=\"1-Activity\"><a href=\"#1-Activity\" class=\"headerlink\" title=\"(1)Activity\"></a>(1)Activity</h5><p><img src=\"/images/blogimages/2016/androidart_activity.png\" alt=\"Activity\"></p>\n<p>(2)ApplicationThreadActivityThreadApplicationThreadNativeApplicationThreadNativeBinderIApplicationThreadApplicationThreadNativeAIDL<br>(3)ActivityManagerService(AMS)ActivityManagerNativeActivityManagerNativeBinderIActivityManagerBinderAMSBinder<br>(4)ApplicationInstrumentationActivity<br>(5)ContextImplContextContextImplActivityattachActivityattachActivityWindowWindowwindowActivity [Activitywindow]</p>\n<h4 id=\"9-3-Service\"><a href=\"#9-3-Service\" class=\"headerlink\" title=\"9.3 Service\"></a>9.3 Service</h4><h5 id=\"1-Service\"><a href=\"#1-Service\" class=\"headerlink\" title=\"(1)Service\"></a>(1)Service</h5><p><br><strong></strong><br><img src=\"/images/blogimages/2016/androidart_service1.png\" alt=\"Service1\"></p>\n<p><strong></strong><br><img src=\"/images/blogimages/2016/androidart_service2.png\" alt=\"Service2\"></p>\n<h4 id=\"9-4-BroadcastReceiver\"><a href=\"#9-4-BroadcastReceiver\" class=\"headerlink\" title=\"9.4 BroadcastReceiver\"></a>9.4 BroadcastReceiver</h4><h5 id=\"1-BroadcastReceiver\"><a href=\"#1-BroadcastReceiver\" class=\"headerlink\" title=\"(1)BroadcastReceiver\"></a>(1)BroadcastReceiver</h5><p><strong></strong>PackageManagerService<br><img src=\"/images/blogimages/2016/androidart_broadcastreceiver1.png\" alt=\"broadcastreceiver1\"><br><strong></strong><br><img src=\"/images/blogimages/2016/androidart_broadcastreceiver2.png\" alt=\"broadcastreceiver2\"></p>\n<h5 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"(2)\"></a>(2)</h5><p></p>\n<h5 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"(3)\"></a>(3)</h5><p>Android 3.1</p>\n<h4 id=\"9-5-ContentProvider\"><a href=\"#9-5-ContentProvider\" class=\"headerlink\" title=\"9.5 ContentProvider\"></a>9.5 ContentProvider</h4><h5 id=\"1-ContentProviderAMSonCreateApplicationonCreate\"><a href=\"#1-ContentProviderAMSonCreateApplicationonCreate\" class=\"headerlink\" title=\"(1)ContentProviderAMSonCreateApplicationonCreate\"></a>(1)ContentProviderAMSonCreateApplicationonCreate</h5><h5 id=\"2-ContentProvider\"><a href=\"#2-ContentProvider\" class=\"headerlink\" title=\"(2)ContentProvider\"></a>(2)ContentProvider</h5><ul>\n<li>1.ActivityThreadmainActivityThread</li>\n<li>2.ActivityThreadattachActivityManagerServiceattachApplicationApplicationThreadAMSApplicationThreadActivityThreadAMS</li>\n<li>3.ActivityManagerServiceattachApplicationApplicationThreadbindApplicationHActivityThreadhandleBindApplication</li>\n<li>4.handleBindApplicationApplicationContentProviderContentProviderApplicationonCreate</li>\n</ul>\n<h5 id=\"3-ContentProviderandroid-multiprocessfalsetrueContentProvider\"><a href=\"#3-ContentProviderandroid-multiprocessfalsetrueContentProvider\" class=\"headerlink\" title=\"(3)ContentProviderandroid:multiprocessfalsetrueContentProvider\"></a>(3)ContentProviderandroid:multiprocessfalsetrueContentProvider</h5><h5 id=\"4-ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\"><a href=\"#4-ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\" class=\"headerlink\" title=\"(4)ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery\"></a>(4)ContentProviderinsertdeleteupdatequeryContentProviderContentProviderContentProviderContentProviderquery</h5><p><img src=\"/images/blogimages/2016/androidart_contentprovider.png\" alt=\"ContentProvider\"></p>"},{"layout":"post","title":"android JNI ","keywords":"jni, aes ","description":"android JNIaes","banner":"http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg","_content":"\n\n\n\n\n### 1.JNI\nJNI : Java,Java Native Interface, , JavaC/C++,  Java, C/C++ Java;\n\nCJava :\n\n- C : C  function;\n- Java : Java JVM, class, class;\n\nCJava :\n\n- JNI : CJava, ,  JNI, JNI;\n- CJava : CJavaclass, ;\n- JavaC : Java, CJava;\n- JNI : JNI, CJava;\n\n<!--more-->\n\nJNI :\n\n- native : Java, ;\n- Native : JavanativeNative;\n- JNI : JavaNative;\n- JNI : JNIEnv, jni.h;\n- JNI : NativeJNI C/C++, jniC;\n\n### 2.NDK\nC : C, ,   ;\n\n-  : unix.so, windows.dll ; C;\n-  :.a;\n\n : C   , , CPU  ;\n\n- CPU : arm, ; x86, pc; CPU;\n-  :windows x86arm;\n-  : Google NDK , linuxarn;\n\nNDK : Google, linuxarm;\n\nNDK : android-ndk-windows windowscygwin, android-ndk-linux linux;\n\nNDKcygwinCcygwin\n\n### 3.android studioEclipse\nEclipseEclipse.hso[Eclipse ADT.h/.so](http://blog.csdn.net/jspping/article/details/47780307)\n\n#### 3.1 JavaC\n\n- a.  Native  : com.packagename.jni.JNITest.java  Native  public native int add(int x, int y);\n- b.  :  AndroidProject/bin/classes ,  javah com.packagename.jni.JNITest , ,  jni.h,  Native ,  JNIEXPORT jint JNICALL Java_com_packagename_jni_JNITest_add (JNIEnv \\*, jobject, jint, jint);  \n\nJava :\n\n~~~ Java\n//Javaint C, , java shuliang.han.ndkparameterpassing.DataProvider  \npublic native int add(int x, int y);  \n~~~\nC :\n\n~~~ C++\n#include <jni.h>  \n\n//, Javanative, native  \njint Java_com_packagename_jni_JNITest_add(JNIEnv * env, jobject obj, jint x, jint y)  \n{  \n    return x + y;  \n}  \n~~~\n\n#### 3.2 .so\n\nAndroid.mk \n\n~~~ C++\nLOCAL_PATH := $(call my-dir)    \n\ninclude $(CLEAR_VARS)    \n\nLOCAL_MODULE    := hello-jni    \nLOCAL_SRC_FILES := hello-jni.c    \n\ninclude $(BUILD_SHARED_LIBRARY)  \n~~~\n\n- \n\n  **** : $(call my-dir) , , ;\n\n  **** : \" := \" ,   ,  LOCAL_PATH;\n\n  **** : $(CLEAR_VARS) , LOCAL_MODULE LOCAL_SRC_FILES ;\n\n  **** : LOCAL_MODULE    := hello-jni ,  so ,  \"lib\",  \".so\";\n\n  **** : LOCAL_SRC_FILES := hello-jni.c , ;\n\n  **** : include $(BUILD_SHARED_LIBRARY), , .so;\n\n  **** : NDKplatform \".a\" , , ;\n\n-   so  :  Android.mk , ndkndk-build;\n- Java :  Java , , , \n\n~~~ C++\nstatic{ System.loadLibrary(\"hello\"); } ;\n~~~\n\n- Application.mk :\n\n~~~ Java\nAPP_STL := stlport_static\nAPP_ABI := all\n~~~\n\n<!-- ![]({{ site.url }}/assets/img/jni_structure.png  =338x461) -->\n<!--  -->\n\n<!-- [![Pure CSS Happy Hacking Keyboard](/assets/img/jni_structure.png)](http://codepen.io/P233/pen/qEagi) -->\n![Eclipse JNI](/images/blogimages/2016/jni_structure.png)\n\n[](http://blog.csdn.net/hejinjing_tom_com/article/details/8125648)javah\n\n\n### 4.\n\n- JavaStringCchar\nC\n\n~~~ Javascript\n// javajstring, c  \nchar* Jstring2CStr(JNIEnv* env, jstring jstr) {  \n// rtn  \nchar* rtn = NULL;  \n//JavaStringClass  \njclass clsstring = (*env)->FindClass(env, \"java/lang/String\");  \n//Java \"GB2312\"  \njstring strencode = (*env)->NewStringUTF(env, \"GB2312\");  \n/*\n * String getBytes(),  String,  byte[]\n * \"(Ljava/lang/String;)[B\"  :\n * -- Ljava/lang/String; String\n * -- [B : , Bbyte, byte\n */  \njmethodID mid = (*env)->GetMethodID(env, clsstring, \"getBytes\",  \n\t\t\"(Ljava/lang/String;)[B\");  \n//JavagetBytes,  , id ,   \njbyteArray barr = (jbyteArray)(*env)->CallObjectMethod(env, jstr, mid,  \n\t\tstrencode); // String .getByte(\"GB2312\");  \n//  \njsize alen = (*env)->GetArrayLength(env, barr);  \n// ,  jbyte*  \njbyte* ba = (*env)->GetByteArrayElements(env, barr, JNI_FALSE);  \n//JavaCchar*, C '\\0'  \nif (alen > 0) {  \n\trtn = (char*) malloc(alen + 1); //new   char[alen+1]; \"\\0\"  \n\tmemcpy(rtn, ba, alen);  \n\trtn[alen] = 0;  \n}  \n(*env)->ReleaseByteArrayElements(env, barr, ba, 0); //  \n\treturn rtn;  \n}  \n~~~\n\n- Jstring2CStr :\n   - a. JavaStringclass :  :  env, String ;\n~~~ Javascript\njclass clsstring = (*env)->FindClass(env, \"java/lang/String\");  \n~~~\n   - b.Java :  NewStringUTF ;\n~~~ Javascript\njstring strencode = (*env)->NewStringUTF(env, \"GB2312\");  \n~~~   \n   - c.StringgetBytes() :   env       ,  Ljava/lang/String; String, [B  , Bbyte, byte;\n~~~ Javascript\njmethodID mid = (*env)->GetMethodID(env, clsstring, \"getBytes\",  \n    \"(Ljava/lang/String;)[B\");  \n~~~       \n   - d.  :\n~~~ Javascript\njsize alen = (*env)->GetArrayLength(env, barr);  \n~~~\n   - e.  :  ,  jbyte*;\n~~~ Javascript\njbyte* ba = (*env)->GetByteArrayElements(env, barr, JNI_FALSE);  \n~~~\n   - f.: JavaCchar*, C '\\0';\n~~~ Javascript\nif (alen > 0) {  \n    rtn = (char*) malloc(alen + 1); //new   char[alen+1]; \"\\0\"  \n    memcpy(rtn, ba, alen);  \n    rtn[alen] = 0;  \n}  \n~~~\n   - g. :\n~~~ Javascript\n(*env)->ReleaseByteArrayElements(env, barr, ba, 0); //\n~~~\n\n### 5.JNI(JNI)\n\n- **JNIJavaNative :**\n\n  , javahbin/classes, ;\n\n- **JNI:**\n\n   : JNIJNIEnv;\n\n   : Native, Java, Native, JavaClass;\n\n- **JNI:**  \n\n  +Java+++ JNIEnv+ jobject+;\n\n   : Java       \"\\_\" ;\n\n- **  :**\n\n  Native : public int hello (String str, int i);\n\n  JNI: jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject obj, jstring str, jint i);\n\n- **   :**\n\n  Native : public static int hello (String str, int i);\n\n  JNI : jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject clazz, jstring str, jint i);\n\n- ** :**\n\n  JavaJNI, Android, Android  JNI,   Native  JNI;\n\n- **JNIEnv :**\n\n  JNIEnv ,JNI, jni.h, Java  JNI , JNIEnv JNI java, java;\n\n- **JNI :**\n\n  JNIEnv,JNIEnv, Java, JNIEnv, NativeJava;\n\n- **JNIEnv :**\n\n  JNIEnv,,JNI.\n\n### 6.AES\nAES\n\n- 1.GithubJNIAES[](https://github.com/MasonLiuChn/AndroidUltimateEncrypt)\n\n- 2.JNIkeyValueivJava[](http://blog.csdn.net/why_2012_gogo/article/details/40055245)\n\n\n\n~~~ Java\nstatic {\n\tSystem.loadLibrary(\"cwtlib\");\n\tkeyValue = getKeyValue();\n\tiv = getIv();\n\n\tif(null != keyValue &&\n\t\tnull != iv) {\n\t\tKeyGenerator kgen;  \n        try {  \n            kgen = KeyGenerator.getInstance(\"AES\");  \n            kgen.init(128, new SecureRandom(keyValue));  \n            key = kgen.generateKey();  \n            paramSpec = new IvParameterSpec(iv);  \n            ecipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");         \n        } catch (NoSuchAlgorithmException e) {  \n        } catch (NoSuchPaddingException e) {  \n        }  \n\t}\n}   \n\npublic static native byte[] getKeyValue();\npublic static native byte[] getIv();\n~~~\n\n  android appapp****\n\n- 3.CC++AES\n\n  \n\n### 7.JNI\n\n   C/C++Java\n\n  \n\n~~~ Java\n//jni\n-keep class com.your.jnicallback.class { *; }\n//\n-keepclasseswithmembernames class * {\n    native <methods>;\n}\n~~~\n\n### 8.\nandroid JNI\n\n#### 8.1 JNIpublickey\n64.0.4[JNIpublickey](https://agehua.github.io/2016/05/24/JNI-Learning0/)\n","source":"_posts/2016-05-24-JNI-Learning.md","raw":"---\nlayout: post\ntitle: android JNI \ncategory: accumulation\ntags: Android JNI\nkeywords: jni, aes \ndescription: android JNIaes\nbanner: http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg\n---\n\n\n\n\n\n### 1.JNI\nJNI : Java,Java Native Interface, , JavaC/C++,  Java, C/C++ Java;\n\nCJava :\n\n- C : C  function;\n- Java : Java JVM, class, class;\n\nCJava :\n\n- JNI : CJava, ,  JNI, JNI;\n- CJava : CJavaclass, ;\n- JavaC : Java, CJava;\n- JNI : JNI, CJava;\n\n<!--more-->\n\nJNI :\n\n- native : Java, ;\n- Native : JavanativeNative;\n- JNI : JavaNative;\n- JNI : JNIEnv, jni.h;\n- JNI : NativeJNI C/C++, jniC;\n\n### 2.NDK\nC : C, ,   ;\n\n-  : unix.so, windows.dll ; C;\n-  :.a;\n\n : C   , , CPU  ;\n\n- CPU : arm, ; x86, pc; CPU;\n-  :windows x86arm;\n-  : Google NDK , linuxarn;\n\nNDK : Google, linuxarm;\n\nNDK : android-ndk-windows windowscygwin, android-ndk-linux linux;\n\nNDKcygwinCcygwin\n\n### 3.android studioEclipse\nEclipseEclipse.hso[Eclipse ADT.h/.so](http://blog.csdn.net/jspping/article/details/47780307)\n\n#### 3.1 JavaC\n\n- a.  Native  : com.packagename.jni.JNITest.java  Native  public native int add(int x, int y);\n- b.  :  AndroidProject/bin/classes ,  javah com.packagename.jni.JNITest , ,  jni.h,  Native ,  JNIEXPORT jint JNICALL Java_com_packagename_jni_JNITest_add (JNIEnv \\*, jobject, jint, jint);  \n\nJava :\n\n~~~ Java\n//Javaint C, , java shuliang.han.ndkparameterpassing.DataProvider  \npublic native int add(int x, int y);  \n~~~\nC :\n\n~~~ C++\n#include <jni.h>  \n\n//, Javanative, native  \njint Java_com_packagename_jni_JNITest_add(JNIEnv * env, jobject obj, jint x, jint y)  \n{  \n    return x + y;  \n}  \n~~~\n\n#### 3.2 .so\n\nAndroid.mk \n\n~~~ C++\nLOCAL_PATH := $(call my-dir)    \n\ninclude $(CLEAR_VARS)    \n\nLOCAL_MODULE    := hello-jni    \nLOCAL_SRC_FILES := hello-jni.c    \n\ninclude $(BUILD_SHARED_LIBRARY)  \n~~~\n\n- \n\n  **** : $(call my-dir) , , ;\n\n  **** : \" := \" ,   ,  LOCAL_PATH;\n\n  **** : $(CLEAR_VARS) , LOCAL_MODULE LOCAL_SRC_FILES ;\n\n  **** : LOCAL_MODULE    := hello-jni ,  so ,  \"lib\",  \".so\";\n\n  **** : LOCAL_SRC_FILES := hello-jni.c , ;\n\n  **** : include $(BUILD_SHARED_LIBRARY), , .so;\n\n  **** : NDKplatform \".a\" , , ;\n\n-   so  :  Android.mk , ndkndk-build;\n- Java :  Java , , , \n\n~~~ C++\nstatic{ System.loadLibrary(\"hello\"); } ;\n~~~\n\n- Application.mk :\n\n~~~ Java\nAPP_STL := stlport_static\nAPP_ABI := all\n~~~\n\n<!-- ![]({{ site.url }}/assets/img/jni_structure.png  =338x461) -->\n<!--  -->\n\n<!-- [![Pure CSS Happy Hacking Keyboard](/assets/img/jni_structure.png)](http://codepen.io/P233/pen/qEagi) -->\n![Eclipse JNI](/images/blogimages/2016/jni_structure.png)\n\n[](http://blog.csdn.net/hejinjing_tom_com/article/details/8125648)javah\n\n\n### 4.\n\n- JavaStringCchar\nC\n\n~~~ Javascript\n// javajstring, c  \nchar* Jstring2CStr(JNIEnv* env, jstring jstr) {  \n// rtn  \nchar* rtn = NULL;  \n//JavaStringClass  \njclass clsstring = (*env)->FindClass(env, \"java/lang/String\");  \n//Java \"GB2312\"  \njstring strencode = (*env)->NewStringUTF(env, \"GB2312\");  \n/*\n * String getBytes(),  String,  byte[]\n * \"(Ljava/lang/String;)[B\"  :\n * -- Ljava/lang/String; String\n * -- [B : , Bbyte, byte\n */  \njmethodID mid = (*env)->GetMethodID(env, clsstring, \"getBytes\",  \n\t\t\"(Ljava/lang/String;)[B\");  \n//JavagetBytes,  , id ,   \njbyteArray barr = (jbyteArray)(*env)->CallObjectMethod(env, jstr, mid,  \n\t\tstrencode); // String .getByte(\"GB2312\");  \n//  \njsize alen = (*env)->GetArrayLength(env, barr);  \n// ,  jbyte*  \njbyte* ba = (*env)->GetByteArrayElements(env, barr, JNI_FALSE);  \n//JavaCchar*, C '\\0'  \nif (alen > 0) {  \n\trtn = (char*) malloc(alen + 1); //new   char[alen+1]; \"\\0\"  \n\tmemcpy(rtn, ba, alen);  \n\trtn[alen] = 0;  \n}  \n(*env)->ReleaseByteArrayElements(env, barr, ba, 0); //  \n\treturn rtn;  \n}  \n~~~\n\n- Jstring2CStr :\n   - a. JavaStringclass :  :  env, String ;\n~~~ Javascript\njclass clsstring = (*env)->FindClass(env, \"java/lang/String\");  \n~~~\n   - b.Java :  NewStringUTF ;\n~~~ Javascript\njstring strencode = (*env)->NewStringUTF(env, \"GB2312\");  \n~~~   \n   - c.StringgetBytes() :   env       ,  Ljava/lang/String; String, [B  , Bbyte, byte;\n~~~ Javascript\njmethodID mid = (*env)->GetMethodID(env, clsstring, \"getBytes\",  \n    \"(Ljava/lang/String;)[B\");  \n~~~       \n   - d.  :\n~~~ Javascript\njsize alen = (*env)->GetArrayLength(env, barr);  \n~~~\n   - e.  :  ,  jbyte*;\n~~~ Javascript\njbyte* ba = (*env)->GetByteArrayElements(env, barr, JNI_FALSE);  \n~~~\n   - f.: JavaCchar*, C '\\0';\n~~~ Javascript\nif (alen > 0) {  \n    rtn = (char*) malloc(alen + 1); //new   char[alen+1]; \"\\0\"  \n    memcpy(rtn, ba, alen);  \n    rtn[alen] = 0;  \n}  \n~~~\n   - g. :\n~~~ Javascript\n(*env)->ReleaseByteArrayElements(env, barr, ba, 0); //\n~~~\n\n### 5.JNI(JNI)\n\n- **JNIJavaNative :**\n\n  , javahbin/classes, ;\n\n- **JNI:**\n\n   : JNIJNIEnv;\n\n   : Native, Java, Native, JavaClass;\n\n- **JNI:**  \n\n  +Java+++ JNIEnv+ jobject+;\n\n   : Java       \"\\_\" ;\n\n- **  :**\n\n  Native : public int hello (String str, int i);\n\n  JNI: jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject obj, jstring str, jint i);\n\n- **   :**\n\n  Native : public static int hello (String str, int i);\n\n  JNI : jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject clazz, jstring str, jint i);\n\n- ** :**\n\n  JavaJNI, Android, Android  JNI,   Native  JNI;\n\n- **JNIEnv :**\n\n  JNIEnv ,JNI, jni.h, Java  JNI , JNIEnv JNI java, java;\n\n- **JNI :**\n\n  JNIEnv,JNIEnv, Java, JNIEnv, NativeJava;\n\n- **JNIEnv :**\n\n  JNIEnv,,JNI.\n\n### 6.AES\nAES\n\n- 1.GithubJNIAES[](https://github.com/MasonLiuChn/AndroidUltimateEncrypt)\n\n- 2.JNIkeyValueivJava[](http://blog.csdn.net/why_2012_gogo/article/details/40055245)\n\n\n\n~~~ Java\nstatic {\n\tSystem.loadLibrary(\"cwtlib\");\n\tkeyValue = getKeyValue();\n\tiv = getIv();\n\n\tif(null != keyValue &&\n\t\tnull != iv) {\n\t\tKeyGenerator kgen;  \n        try {  \n            kgen = KeyGenerator.getInstance(\"AES\");  \n            kgen.init(128, new SecureRandom(keyValue));  \n            key = kgen.generateKey();  \n            paramSpec = new IvParameterSpec(iv);  \n            ecipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");         \n        } catch (NoSuchAlgorithmException e) {  \n        } catch (NoSuchPaddingException e) {  \n        }  \n\t}\n}   \n\npublic static native byte[] getKeyValue();\npublic static native byte[] getIv();\n~~~\n\n  android appapp****\n\n- 3.CC++AES\n\n  \n\n### 7.JNI\n\n   C/C++Java\n\n  \n\n~~~ Java\n//jni\n-keep class com.your.jnicallback.class { *; }\n//\n-keepclasseswithmembernames class * {\n    native <methods>;\n}\n~~~\n\n### 8.\nandroid JNI\n\n#### 8.1 JNIpublickey\n64.0.4[JNIpublickey](https://agehua.github.io/2016/05/24/JNI-Learning0/)\n","slug":"JNI-Learning","published":1,"date":"2016-05-23T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4k000mbxs6ltqfvndk","content":"<p></p>\n<h3 id=\"1-JNI\"><a href=\"#1-JNI\" class=\"headerlink\" title=\"1.JNI\"></a>1.JNI</h3><p>JNI : Java,Java Native Interface, , JavaC/C++,  Java, C/C++ Java;</p>\n<p>CJava :</p>\n<ul>\n<li>C : C  function;</li>\n<li>Java : Java JVM, class, class;</li>\n</ul>\n<p>CJava :</p>\n<ul>\n<li>JNI : CJava, ,  JNI, JNI;</li>\n<li>CJava : CJavaclass, ;</li>\n<li>JavaC : Java, CJava;</li>\n<li>JNI : JNI, CJava;</li>\n</ul>\n<a id=\"more\"></a>\n<p>JNI :</p>\n<ul>\n<li>native : Java, ;</li>\n<li>Native : JavanativeNative;</li>\n<li>JNI : JavaNative;</li>\n<li>JNI : JNIEnv, jni.h;</li>\n<li>JNI : NativeJNI C/C++, jniC;</li>\n</ul>\n<h3 id=\"2-NDK\"><a href=\"#2-NDK\" class=\"headerlink\" title=\"2.NDK\"></a>2.NDK</h3><p>C : C, ,   ;</p>\n<ul>\n<li> : unix.so, windows.dll ; C;</li>\n<li> :.a;</li>\n</ul>\n<p> : C   , , CPU  ;</p>\n<ul>\n<li>CPU : arm, ; x86, pc; CPU;</li>\n<li> :windows x86arm;</li>\n<li> : Google NDK , linuxarn;</li>\n</ul>\n<p>NDK : Google, linuxarm;</p>\n<p>NDK : android-ndk-windows windowscygwin, android-ndk-linux linux;</p>\n<p>NDKcygwinCcygwin</p>\n<h3 id=\"3-android-studioEclipse\"><a href=\"#3-android-studioEclipse\" class=\"headerlink\" title=\"3.android studioEclipse\"></a>3.android studioEclipse</h3><p>EclipseEclipse.hso<a href=\"http://blog.csdn.net/jspping/article/details/47780307\" target=\"_blank\" rel=\"external\">Eclipse ADT.h/.so</a></p>\n<h4 id=\"3-1-JavaC\"><a href=\"#3-1-JavaC\" class=\"headerlink\" title=\"3.1 JavaC\"></a>3.1 JavaC</h4><ul>\n<li>a.  Native  : com.packagename.jni.JNITest.java  Native  public native int add(int x, int y);</li>\n<li>b.  :  AndroidProject/bin/classes ,  javah com.packagename.jni.JNITest , ,  jni.h,  Native ,  JNIEXPORT jint JNICALL Java_com_packagename_jni_JNITest_add (JNIEnv *, jobject, jint, jint);  </li>\n</ul>\n<p>Java :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//Javaint C, , java shuliang.han.ndkparameterpassing.DataProvider  </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">native</span> <span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span>;</div></pre></td></tr></table></figure>\n<p>C :</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;jni.h&gt;</span>  </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//, Javanative, native  </span></div><div class=\"line\"><span class=\"function\">jint <span class=\"title\">Java_com_packagename_jni_JNITest_add</span><span class=\"params\">(JNIEnv * env, jobject obj, jint x, jint y)</span>  </span></div><div class=\"line\">&#123;  </div><div class=\"line\">    <span class=\"keyword\">return</span> x + y;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"3-2--so\"><a href=\"#3-2--so\" class=\"headerlink\" title=\"3.2 .so\"></a>3.2 .so</h4><p>Android.mk </p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">LOCAL_PATH := $(call my-dir)    </div><div class=\"line\"></div><div class=\"line\">include $(CLEAR_VARS)    </div><div class=\"line\"></div><div class=\"line\">LOCAL_MODULE    := hello-jni    </div><div class=\"line\">LOCAL_SRC_FILES := hello-jni.c    </div><div class=\"line\"></div><div class=\"line\">include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure>\n<ul>\n<li><p></p>\n<p><strong></strong> : $(call my-dir) , , ;</p>\n<p><strong></strong> :  :=  ,   ,  LOCAL_PATH;</p>\n<p><strong></strong> : $(CLEAR_VARS) , LOCAL_MODULE LOCAL_SRC_FILES ;</p>\n<p><strong></strong> : LOCAL_MODULE    := hello-jni ,  so ,  lib,  .so;</p>\n<p><strong></strong> : LOCAL_SRC_FILES := hello-jni.c , ;</p>\n<p><strong></strong> : include $(BUILD_SHARED_LIBRARY), , .so;</p>\n<p><strong></strong> : NDKplatform .a , , ;</p>\n</li>\n<li><p>  so  :  Android.mk , ndkndk-build;</p>\n</li>\n<li>Java :  Java , , , </li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span>&#123; System.loadLibrary(<span class=\"string\">\"hello\"</span>); &#125; ;</div></pre></td></tr></table></figure>\n<ul>\n<li>Application.mk :</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">APP_STL := stlport_static</div><div class=\"line\">APP_ABI := all</div></pre></td></tr></table></figure>\n<!-- ![](/assets/img/jni_structure.png  =338x461) &gt;\n<!--  -->\n<!-- [![Pure CSS Happy Hacking Keyboard](/assets/img/jni_structure.png)](http://codepen.io/P233/pen/qEagi) -->\n<p><img src=\"/images/blogimages/2016/jni_structure.png\" alt=\"Eclipse JNI\"></p>\n<p><a href=\"http://blog.csdn.net/hejinjing_tom_com/article/details/8125648\" target=\"_blank\" rel=\"external\"></a>javah</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4.\"></a>4.</h3><ul>\n<li>JavaStringCchar<br>C</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// javajstring, c  </span></div><div class=\"line\">char* Jstring2CStr(JNIEnv* env, jstring jstr) &#123;  </div><div class=\"line\"><span class=\"comment\">// rtn  </span></div><div class=\"line\">char* rtn = NULL;  </div><div class=\"line\"><span class=\"comment\">//JavaStringClass  </span></div><div class=\"line\">jclass clsstring = (*env)-&gt;FindClass(env, <span class=\"string\">\"java/lang/String\"</span>);  </div><div class=\"line\"><span class=\"comment\">//Java \"GB2312\"  </span></div><div class=\"line\">jstring strencode = (*env)-&gt;NewStringUTF(env, <span class=\"string\">\"GB2312\"</span>);  </div><div class=\"line\"><span class=\"comment\">/*</span></div><div class=\"line\"> * String getBytes(),  String,  byte[]</div><div class=\"line\"> * \"(Ljava/lang/String;)[B\"  :</div><div class=\"line\"> * -- Ljava/lang/String; String</div><div class=\"line\"> * -- [B : , Bbyte, byte</div><div class=\"line\"> */  </div><div class=\"line\">jmethodID mid = (*env)-&gt;GetMethodID(env, clsstring, <span class=\"string\">\"getBytes\"</span>,  </div><div class=\"line\">\t\t<span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);  </div><div class=\"line\"><span class=\"comment\">//JavagetBytes,  , id ,   </span></div><div class=\"line\">jbyteArray barr = (jbyteArray)(*env)-&gt;CallObjectMethod(env, jstr, mid,  </div><div class=\"line\">\t\tstrencode); <span class=\"comment\">// String .getByte(\"GB2312\");  </span></div><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\">jsize alen = (*env)-&gt;GetArrayLength(env, barr);  </div><div class=\"line\"><span class=\"comment\">// ,  jbyte*  </span></div><div class=\"line\">jbyte* ba = (*env)-&gt;GetByteArrayElements(env, barr, JNI_FALSE);  </div><div class=\"line\"><span class=\"comment\">//JavaCchar*, C '\\0'  </span></div><div class=\"line\"><span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>) &#123;  </div><div class=\"line\">\trtn = (char*) malloc(alen + <span class=\"number\">1</span>); <span class=\"comment\">//new   char[alen+1]; \"\\0\"  </span></div><div class=\"line\">\tmemcpy(rtn, ba, alen);  </div><div class=\"line\">\trtn[alen] = <span class=\"number\">0</span>;  </div><div class=\"line\">&#125;  </div><div class=\"line\">(*env)-&gt;ReleaseByteArrayElements(env, barr, ba, <span class=\"number\">0</span>); <span class=\"comment\">//  </span></div><div class=\"line\">\t<span class=\"keyword\">return</span> rtn;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>Jstring2CStr :</p>\n<ul>\n<li><p>a. JavaStringclass :  :  env, String ;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">jclass clsstring = (*env)-&gt;FindClass(env, <span class=\"string\">\"java/lang/String\"</span>);</div></pre></td></tr></table></figure>\n</li>\n<li><p>b.Java :  NewStringUTF ;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">jstring strencode = (*env)-&gt;NewStringUTF(env, <span class=\"string\">\"GB2312\"</span>);  </div><div class=\"line\">~~~   </div><div class=\"line\">   - c.<span class=\"built_in\">String</span>getBytes() :   env       ,  Ljava/lang/<span class=\"built_in\">String</span>; <span class=\"built_in\">String</span>, [B  , Bbyte, byte;</div><div class=\"line\">~~~ Javascript</div><div class=\"line\">jmethodID mid = (*env)-&gt;GetMethodID(env, clsstring, <span class=\"string\">\"getBytes\"</span>,  </div><div class=\"line\">    <span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);  </div><div class=\"line\">~~~       </div><div class=\"line\">   - d.  :</div><div class=\"line\">~~~ Javascript</div><div class=\"line\">jsize alen = (*env)-&gt;GetArrayLength(env, barr);</div></pre></td></tr></table></figure>\n</li>\n<li><p>e.  :  ,  jbyte*;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">jbyte* ba = (*env)-&gt;GetByteArrayElements(env, barr, JNI_FALSE);</div></pre></td></tr></table></figure>\n</li>\n<li><p>f.: JavaCchar*, C \\0;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>) &#123;  </div><div class=\"line\">    rtn = (char*) malloc(alen + <span class=\"number\">1</span>); <span class=\"comment\">//new   char[alen+1]; \"\\0\"  </span></div><div class=\"line\">    memcpy(rtn, ba, alen);  </div><div class=\"line\">    rtn[alen] = <span class=\"number\">0</span>;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>g. :</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">(*env)-&gt;ReleaseByteArrayElements(env, barr, ba, <span class=\"number\">0</span>); <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"5-JNI-JNI\"><a href=\"#5-JNI-JNI\" class=\"headerlink\" title=\"5.JNI(JNI)\"></a>5.JNI(JNI)</h3><ul>\n<li><p><strong>JNIJavaNative :</strong></p>\n<p>, javahbin/classes, ;</p>\n</li>\n<li><p><strong>JNI:</strong></p>\n<p> : JNIJNIEnv;</p>\n<p> : Native, Java, Native, JavaClass;</p>\n</li>\n<li><p><strong>JNI:</strong>  </p>\n<p>+Java+++ JNIEnv+ jobject+;</p>\n<p> : Java       _ ;</p>\n</li>\n<li><p><strong>  :</strong></p>\n<p>Native : public int hello (String str, int i);</p>\n<p>JNI: jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject obj, jstring str, jint i);</p>\n</li>\n<li><p><strong>   :</strong></p>\n<p>Native : public static int hello (String str, int i);</p>\n<p>JNI : jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject clazz, jstring str, jint i);</p>\n</li>\n<li><p><strong> :</strong></p>\n<p>JavaJNI, Android, Android  JNI,   Native  JNI;</p>\n</li>\n<li><p><strong>JNIEnv :</strong></p>\n<p>JNIEnv ,JNI, jni.h, Java  JNI , JNIEnv JNI java, java;</p>\n</li>\n<li><p><strong>JNI :</strong></p>\n<p>JNIEnv,JNIEnv, Java, JNIEnv, NativeJava;</p>\n</li>\n<li><p><strong>JNIEnv :</strong></p>\n<p>JNIEnv,,JNI.</p>\n</li>\n</ul>\n<h3 id=\"6-AES\"><a href=\"#6-AES\" class=\"headerlink\" title=\"6.AES\"></a>6.AES</h3><p>AES</p>\n<ul>\n<li><p>1.GithubJNIAES<a href=\"https://github.com/MasonLiuChn/AndroidUltimateEncrypt\" target=\"_blank\" rel=\"external\"></a></p>\n</li>\n<li><p>2.JNIkeyValueivJava<a href=\"http://blog.csdn.net/why_2012_gogo/article/details/40055245\" target=\"_blank\" rel=\"external\"></a></p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span> &#123;</div><div class=\"line\">\tSystem.loadLibrary(<span class=\"string\">\"cwtlib\"</span>);</div><div class=\"line\">\tkeyValue = getKeyValue();</div><div class=\"line\">\tiv = getIv();</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span>(<span class=\"keyword\">null</span> != keyValue &amp;&amp;</div><div class=\"line\">\t\t<span class=\"keyword\">null</span> != iv) &#123;</div><div class=\"line\">\t\tKeyGenerator kgen;  </div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;  </div><div class=\"line\">            kgen = KeyGenerator.getInstance(<span class=\"string\">\"AES\"</span>);  </div><div class=\"line\">            kgen.init(<span class=\"number\">128</span>, <span class=\"keyword\">new</span> SecureRandom(keyValue));  </div><div class=\"line\">            key = kgen.generateKey();  </div><div class=\"line\">            paramSpec = <span class=\"keyword\">new</span> IvParameterSpec(iv);  </div><div class=\"line\">            ecipher = Cipher.getInstance(<span class=\"string\">\"AES/CBC/PKCS5Padding\"</span>);         </div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchAlgorithmException e) &#123;  </div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchPaddingException e) &#123;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;   </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">byte</span>[] getKeyValue();</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">byte</span>[] getIv();</div></pre></td></tr></table></figure>\n<p>  android appapp<strong></strong></p>\n<ul>\n<li><p>3.CC++AES</p>\n<p></p>\n</li>\n</ul>\n<h3 id=\"7-JNI\"><a href=\"#7-JNI\" class=\"headerlink\" title=\"7.JNI\"></a>7.JNI</h3><p>   C/C++Java</p>\n<p>  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//jni</span></div><div class=\"line\">-keep <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">com</span>.<span class=\"title\">your</span>.<span class=\"title\">jnicallback</span>.<span class=\"title\">class</span> </span>&#123; *; &#125;</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">-keepclasseswithmembernames <span class=\"class\"><span class=\"keyword\">class</span> * </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">native</span> &lt;methods&gt;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8.\"></a>8.</h3><p>android JNI</p>\n<h4 id=\"8-1-JNIpublickey\"><a href=\"#8-1-JNIpublickey\" class=\"headerlink\" title=\"8.1 JNIpublickey\"></a>8.1 JNIpublickey</h4><p>64.0.4<a href=\"https://agehua.github.io/2016/05/24/JNI-Learning0/\">JNIpublickey</a></p>\n","excerpt":"<p></p>\n<h3 id=\"1-JNI\"><a href=\"#1-JNI\" class=\"headerlink\" title=\"1.JNI\"></a>1.JNI</h3><p>JNI : Java,Java Native Interface, , JavaC/C++,  Java, C/C++ Java;</p>\n<p>CJava :</p>\n<ul>\n<li>C : C  function;</li>\n<li>Java : Java JVM, class, class;</li>\n</ul>\n<p>CJava :</p>\n<ul>\n<li>JNI : CJava, ,  JNI, JNI;</li>\n<li>CJava : CJavaclass, ;</li>\n<li>JavaC : Java, CJava;</li>\n<li>JNI : JNI, CJava;</li>\n</ul>","more":"<p>JNI :</p>\n<ul>\n<li>native : Java, ;</li>\n<li>Native : JavanativeNative;</li>\n<li>JNI : JavaNative;</li>\n<li>JNI : JNIEnv, jni.h;</li>\n<li>JNI : NativeJNI C/C++, jniC;</li>\n</ul>\n<h3 id=\"2-NDK\"><a href=\"#2-NDK\" class=\"headerlink\" title=\"2.NDK\"></a>2.NDK</h3><p>C : C, ,   ;</p>\n<ul>\n<li> : unix.so, windows.dll ; C;</li>\n<li> :.a;</li>\n</ul>\n<p> : C   , , CPU  ;</p>\n<ul>\n<li>CPU : arm, ; x86, pc; CPU;</li>\n<li> :windows x86arm;</li>\n<li> : Google NDK , linuxarn;</li>\n</ul>\n<p>NDK : Google, linuxarm;</p>\n<p>NDK : android-ndk-windows windowscygwin, android-ndk-linux linux;</p>\n<p>NDKcygwinCcygwin</p>\n<h3 id=\"3-android-studioEclipse\"><a href=\"#3-android-studioEclipse\" class=\"headerlink\" title=\"3.android studioEclipse\"></a>3.android studioEclipse</h3><p>EclipseEclipse.hso<a href=\"http://blog.csdn.net/jspping/article/details/47780307\">Eclipse ADT.h/.so</a></p>\n<h4 id=\"3-1-JavaC\"><a href=\"#3-1-JavaC\" class=\"headerlink\" title=\"3.1 JavaC\"></a>3.1 JavaC</h4><ul>\n<li>a.  Native  : com.packagename.jni.JNITest.java  Native  public native int add(int x, int y);</li>\n<li>b.  :  AndroidProject/bin/classes ,  javah com.packagename.jni.JNITest , ,  jni.h,  Native ,  JNIEXPORT jint JNICALL Java_com_packagename_jni_JNITest_add (JNIEnv *, jobject, jint, jint);  </li>\n</ul>\n<p>Java :</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//Javaint C, , java shuliang.han.ndkparameterpassing.DataProvider  </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">native</span> <span class=\"keyword\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y)</span></span>;</div></pre></td></tr></table></figure>\n<p>C :</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;jni.h&gt;</span>  </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//, Javanative, native  </span></div><div class=\"line\"><span class=\"function\">jint <span class=\"title\">Java_com_packagename_jni_JNITest_add</span><span class=\"params\">(JNIEnv * env, jobject obj, jint x, jint y)</span>  </div><div class=\"line\"></span>&#123;  </div><div class=\"line\">    <span class=\"keyword\">return</span> x + y;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"3-2--so\"><a href=\"#3-2--so\" class=\"headerlink\" title=\"3.2 .so\"></a>3.2 .so</h4><p>Android.mk </p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">LOCAL_PATH := $(call my-dir)    </div><div class=\"line\"></div><div class=\"line\">include $(CLEAR_VARS)    </div><div class=\"line\"></div><div class=\"line\">LOCAL_MODULE    := hello-jni    </div><div class=\"line\">LOCAL_SRC_FILES := hello-jni.c    </div><div class=\"line\"></div><div class=\"line\">include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure>\n<ul>\n<li><p></p>\n<p><strong></strong> : $(call my-dir) , , ;</p>\n<p><strong></strong> :  :=  ,   ,  LOCAL_PATH;</p>\n<p><strong></strong> : $(CLEAR_VARS) , LOCAL_MODULE LOCAL_SRC_FILES ;</p>\n<p><strong></strong> : LOCAL_MODULE    := hello-jni ,  so ,  lib,  .so;</p>\n<p><strong></strong> : LOCAL_SRC_FILES := hello-jni.c , ;</p>\n<p><strong></strong> : include $(BUILD_SHARED_LIBRARY), , .so;</p>\n<p><strong></strong> : NDKplatform .a , , ;</p>\n</li>\n<li><p>  so  :  Android.mk , ndkndk-build;</p>\n</li>\n<li>Java :  Java , , , </li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span>&#123; System.loadLibrary(<span class=\"string\">\"hello\"</span>); &#125; ;</div></pre></td></tr></table></figure>\n<ul>\n<li>Application.mk :</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">APP_STL := stlport_static</div><div class=\"line\">APP_ABI := all</div></pre></td></tr></table></figure>\n<!-- ![](/assets/img/jni_structure.png  =338x461) &gt;\n<!--  -->\n<!-- [![Pure CSS Happy Hacking Keyboard](/assets/img/jni_structure.png)](http://codepen.io/P233/pen/qEagi) -->\n<p><img src=\"/images/blogimages/2016/jni_structure.png\" alt=\"Eclipse JNI\"></p>\n<p><a href=\"http://blog.csdn.net/hejinjing_tom_com/article/details/8125648\"></a>javah</p>\n<h3 id=\"4-\"><a href=\"#4-\" class=\"headerlink\" title=\"4.\"></a>4.</h3><ul>\n<li>JavaStringCchar<br>C</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// javajstring, c  </span></div><div class=\"line\">char* Jstring2CStr(JNIEnv* env, jstring jstr) &#123;  </div><div class=\"line\"><span class=\"comment\">// rtn  </span></div><div class=\"line\">char* rtn = NULL;  </div><div class=\"line\"><span class=\"comment\">//JavaStringClass  </span></div><div class=\"line\">jclass clsstring = (*env)-&gt;FindClass(env, <span class=\"string\">\"java/lang/String\"</span>);  </div><div class=\"line\"><span class=\"comment\">//Java \"GB2312\"  </span></div><div class=\"line\">jstring strencode = (*env)-&gt;NewStringUTF(env, <span class=\"string\">\"GB2312\"</span>);  </div><div class=\"line\"><span class=\"comment\">/*</div><div class=\"line\"> * String getBytes(),  String,  byte[]</div><div class=\"line\"> * \"(Ljava/lang/String;)[B\"  :</div><div class=\"line\"> * -- Ljava/lang/String; String</div><div class=\"line\"> * -- [B : , Bbyte, byte</div><div class=\"line\"> */</span>  </div><div class=\"line\">jmethodID mid = (*env)-&gt;GetMethodID(env, clsstring, <span class=\"string\">\"getBytes\"</span>,  </div><div class=\"line\">\t\t<span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);  </div><div class=\"line\"><span class=\"comment\">//JavagetBytes,  , id ,   </span></div><div class=\"line\">jbyteArray barr = (jbyteArray)(*env)-&gt;CallObjectMethod(env, jstr, mid,  </div><div class=\"line\">\t\tstrencode); <span class=\"comment\">// String .getByte(\"GB2312\");  </span></div><div class=\"line\"><span class=\"comment\">//  </span></div><div class=\"line\">jsize alen = (*env)-&gt;GetArrayLength(env, barr);  </div><div class=\"line\"><span class=\"comment\">// ,  jbyte*  </span></div><div class=\"line\">jbyte* ba = (*env)-&gt;GetByteArrayElements(env, barr, JNI_FALSE);  </div><div class=\"line\"><span class=\"comment\">//JavaCchar*, C '\\0'  </span></div><div class=\"line\"><span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>) &#123;  </div><div class=\"line\">\trtn = (char*) malloc(alen + <span class=\"number\">1</span>); <span class=\"comment\">//new   char[alen+1]; \"\\0\"  </span></div><div class=\"line\">\tmemcpy(rtn, ba, alen);  </div><div class=\"line\">\trtn[alen] = <span class=\"number\">0</span>;  </div><div class=\"line\">&#125;  </div><div class=\"line\">(*env)-&gt;ReleaseByteArrayElements(env, barr, ba, <span class=\"number\">0</span>); <span class=\"comment\">//  </span></div><div class=\"line\">\t<span class=\"keyword\">return</span> rtn;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>Jstring2CStr :</p>\n<ul>\n<li><p>a. JavaStringclass :  :  env, String ;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">jclass clsstring = (*env)-&gt;FindClass(env, <span class=\"string\">\"java/lang/String\"</span>);</div></pre></td></tr></table></figure>\n</li>\n<li><p>b.Java :  NewStringUTF ;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">jstring strencode = (*env)-&gt;NewStringUTF(env, <span class=\"string\">\"GB2312\"</span>);  </div><div class=\"line\">~~~   </div><div class=\"line\">   - c.<span class=\"built_in\">String</span>getBytes() :   env       ,  Ljava/lang/<span class=\"built_in\">String</span>; <span class=\"built_in\">String</span>, [B  , Bbyte, byte;</div><div class=\"line\">~~~ Javascript</div><div class=\"line\">jmethodID mid = (*env)-&gt;GetMethodID(env, clsstring, <span class=\"string\">\"getBytes\"</span>,  </div><div class=\"line\">    <span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);  </div><div class=\"line\">~~~       </div><div class=\"line\">   - d.  :</div><div class=\"line\">~~~ Javascript</div><div class=\"line\">jsize alen = (*env)-&gt;GetArrayLength(env, barr);</div></pre></td></tr></table></figure>\n</li>\n<li><p>e.  :  ,  jbyte*;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">jbyte* ba = (*env)-&gt;GetByteArrayElements(env, barr, JNI_FALSE);</div></pre></td></tr></table></figure>\n</li>\n<li><p>f.: JavaCchar*, C \\0;</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>) &#123;  </div><div class=\"line\">    rtn = (char*) malloc(alen + <span class=\"number\">1</span>); <span class=\"comment\">//new   char[alen+1]; \"\\0\"  </span></div><div class=\"line\">    memcpy(rtn, ba, alen);  </div><div class=\"line\">    rtn[alen] = <span class=\"number\">0</span>;  </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>g. :</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">(*env)-&gt;ReleaseByteArrayElements(env, barr, ba, <span class=\"number\">0</span>); <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"5-JNI-JNI\"><a href=\"#5-JNI-JNI\" class=\"headerlink\" title=\"5.JNI(JNI)\"></a>5.JNI(JNI)</h3><ul>\n<li><p><strong>JNIJavaNative :</strong></p>\n<p>, javahbin/classes, ;</p>\n</li>\n<li><p><strong>JNI:</strong></p>\n<p> : JNIJNIEnv;</p>\n<p> : Native, Java, Native, JavaClass;</p>\n</li>\n<li><p><strong>JNI:</strong>  </p>\n<p>+Java+++ JNIEnv+ jobject+;</p>\n<p> : Java       _ ;</p>\n</li>\n<li><p><strong>  :</strong></p>\n<p>Native : public int hello (String str, int i);</p>\n<p>JNI: jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject obj, jstring str, jint i);</p>\n</li>\n<li><p><strong>   :</strong></p>\n<p>Native : public static int hello (String str, int i);</p>\n<p>JNI : jint Java_shuliang_han_Hello_hello(JNIEnv * env, jobject clazz, jstring str, jint i);</p>\n</li>\n<li><p><strong> :</strong></p>\n<p>JavaJNI, Android, Android  JNI,   Native  JNI;</p>\n</li>\n<li><p><strong>JNIEnv :</strong></p>\n<p>JNIEnv ,JNI, jni.h, Java  JNI , JNIEnv JNI java, java;</p>\n</li>\n<li><p><strong>JNI :</strong></p>\n<p>JNIEnv,JNIEnv, Java, JNIEnv, NativeJava;</p>\n</li>\n<li><p><strong>JNIEnv :</strong></p>\n<p>JNIEnv,,JNI.</p>\n</li>\n</ul>\n<h3 id=\"6-AES\"><a href=\"#6-AES\" class=\"headerlink\" title=\"6.AES\"></a>6.AES</h3><p>AES</p>\n<ul>\n<li><p>1.GithubJNIAES<a href=\"https://github.com/MasonLiuChn/AndroidUltimateEncrypt\"></a></p>\n</li>\n<li><p>2.JNIkeyValueivJava<a href=\"http://blog.csdn.net/why_2012_gogo/article/details/40055245\"></a></p>\n</li>\n</ul>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span> &#123;</div><div class=\"line\">\tSystem.loadLibrary(<span class=\"string\">\"cwtlib\"</span>);</div><div class=\"line\">\tkeyValue = getKeyValue();</div><div class=\"line\">\tiv = getIv();</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">if</span>(<span class=\"keyword\">null</span> != keyValue &amp;&amp;</div><div class=\"line\">\t\t<span class=\"keyword\">null</span> != iv) &#123;</div><div class=\"line\">\t\tKeyGenerator kgen;  </div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;  </div><div class=\"line\">            kgen = KeyGenerator.getInstance(<span class=\"string\">\"AES\"</span>);  </div><div class=\"line\">            kgen.init(<span class=\"number\">128</span>, <span class=\"keyword\">new</span> SecureRandom(keyValue));  </div><div class=\"line\">            key = kgen.generateKey();  </div><div class=\"line\">            paramSpec = <span class=\"keyword\">new</span> IvParameterSpec(iv);  </div><div class=\"line\">            ecipher = Cipher.getInstance(<span class=\"string\">\"AES/CBC/PKCS5Padding\"</span>);         </div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchAlgorithmException e) &#123;  </div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (NoSuchPaddingException e) &#123;  </div><div class=\"line\">        &#125;  </div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;   </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">byte</span>[] getKeyValue();</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">byte</span>[] getIv();</div></pre></td></tr></table></figure>\n<p>  android appapp<strong></strong></p>\n<ul>\n<li><p>3.CC++AES</p>\n<p></p>\n</li>\n</ul>\n<h3 id=\"7-JNI\"><a href=\"#7-JNI\" class=\"headerlink\" title=\"7.JNI\"></a>7.JNI</h3><p>   C/C++Java</p>\n<p>  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//jni</span></div><div class=\"line\">-keep <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">com</span>.<span class=\"title\">your</span>.<span class=\"title\">jnicallback</span>.<span class=\"title\">class</span> </span>&#123; *; &#125;</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\">-keepclasseswithmembernames <span class=\"class\"><span class=\"keyword\">class</span> * </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">native</span> &lt;methods&gt;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8.\"></a>8.</h3><p>android JNI</p>\n<h4 id=\"8-1-JNIpublickey\"><a href=\"#8-1-JNIpublickey\" class=\"headerlink\" title=\"8.1 JNIpublickey\"></a>8.1 JNIpublickey</h4><p>64.0.4<a href=\"https://agehua.github.io/2016/05/24/JNI-Learning0/\">JNIpublickey</a></p>"},{"layout":"post","title":"android JNI JNI","keywords":"jni, android","description":"android Jni","banner":"http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg","_content":"\n\n###  1.Android JNI\n\n#### 1.1 AndroidJNI\n\nAndroid**Kernelinit**initforkJavaC/C++ZygoteZygote**AndroidRuntime.cppstartVm**VMstartRegJNI\n\n<!--more-->\n\nAndroidRuntime.cpp\n\n~~~ C++\nint AndroidRuntime::startReg(JNIEnv* env)\n{\n    //javaCreateThreadEtc\n    androidSetCreateThreadFunc((android_create_thread_fn) javaCreateThreadEtc);\n\n    env->PushLocalFrame(200);\n    //NI\n    if (register_jni_procs(gRegJNI, NELEM(gRegJNI), env) < 0) {\n        env->PopLocalFrame(NULL);\n        return -1;\n    }\n    env->PopLocalFrame(NULL);\n    return 0;\n}\n~~~\n\n**register_jni_procs(gRegJNI, NELEM(gRegJNI), env)**gRegJNI\n\n~~~ C++\nstatic int register_jni_procs(const RegJNIRec array[], size_t count, JNIEnv* env)\n{\n    for (size_t i = 0; i < count; i++) {\n        if (array[i].mProc(env) < 0) {\n            return -1;\n        }\n    }\n    return 0;\n}\n~~~\n\n   gRegJNI100AndroidRuntime.cpp\n\n~~~ C++\nstatic const RegJNIRec gRegJNI[] = {\n    REG_JNI(register_android_os_MessageQueue),\n    REG_JNI(register_android_os_Binder),\n    ...\n};\n~~~\n\n   jniREG_JNI\n\nMessageQueueBinderAndroidAndroidRuntime.cppnative**AndroidRuntime.cppgRegJNI**\n\n~~~ Java\nregister_[]_[]\n~~~\n\n##### MessageQueue.javanativePollOnce\n\n~~~ Java\nprivate native void nativePollOnce(long ptr, int timeoutMillis);\n~~~\n**android.os.MessageQueue.nativePollOnce()**native**android_os_MessageQueue_nativePollOnce()**\n\n- MessageQueue.javajni**register_android_os_MessageQueue**gRegJNIJNIAndroidRuntime.cppextern\n\n~~~ C++\nextern int register_android_os_MessageQueue(JNIEnv* env);\n~~~\n\nextern/framework/base/core/jni/native\n\n~~~ C++\n[]_[].cpp\n[]_[].h\n~~~\n\n> **Tips** MessageQueue.java ==> android_os_MessageQueue.cpp\n\n- android_os_MessageQueue.cppandroid_os_MessageQueue_nativePollOnce\n\n~~~ C++\nstatic void android_os_MessageQueue_nativePollOnce(JNIEnv* env, jobject obj,\n        jlong ptr, jint timeoutMillis) {\n    NativeMessageQueue* nativeMessageQueue = reinterpret_cast<NativeMessageQueue*>(ptr);\n    nativeMessageQueue->pollOnce(env, obj, timeoutMillis);\n}\n~~~\n\n##### native[]\\_[].cppBinder.java\n\nBinder.javanative**android_util_Binder.cpp**\n\n~~~ Java\npublic static final native int getCallingPid();\n~~~\n\n   getCallingPid ==> android_os_Binder_getCallingPid()AndroidRuntime.cppgRegJNIregister_android_os_Binder\n\n()nativeandroid_os_Binder.cpp/framework/base/core/jni/******android_util_Binder.cpp**google\n\n~~~ C++\nstatic jint android_os_Binder_getCallingPid(JNIEnv* env, jobject clazz)\n{\n    return IPCThreadState::self()->getCallingPid();\n}\n~~~\n\n/framework/base/core/jni/binder.javabindergrepandroid_os_Binder_getCallingPid\n\njni\n\n- /framework/base/core/jni/\n- /framework/base/services/core/jni/\n- /framework/base/media/jni/\n\n\n#### 1.2 JNI\nAndroidJNI jnijniMediaPlayer.javaandroid.media\n\n~~~ Java\npublic class MediaPlayer{\n    static {\n        System.loadLibrary(\"media_jni\");\n        native_init();\n    }\n\n    private static native final void native_init();\n    ...\n}\n~~~\n\n- staticSystem.loadLibrarymedia_jni, Androidlibmedia_jni.so\n\n- libmedia_jni.soAndroid.mk**LOCAL_MODULE:= libmedia_jni**grepmgreplibmedia_jniAndroid.mk\n\nlibmedia_jni.so/frameworks/base/media/jni/Android.mk()\n\n~~~ C++\nandroid_media_MediaPlayer.cpp\nandroid_media_MediaPlayer_native_init()\n~~~\n\n- Android.mk/frameworks/base/media/jni/android_media_MediaPlayer.cpp\n\n~~~ C++\nstatic void\nandroid_media_MediaPlayer_native_init(JNIEnv *env)\n{\n    jclass clazz;\n    clazz = env->FindClass(\"android/media/MediaPlayer\");\n    fields.context = env->GetFieldID(clazz, \"mNativeContext\", \"J\");\n    ...\n}\n~~~\n\n> **Tips**MediaPlayer.javanative_initnative/frameworks/base/media/jni/android_media_MediaPlayer.cppandroid_media_MediaPlayer_native_init\n\n**System.loadLibrary()JNI_OnLoad()**\n\n#### 1.3 **JNI_OnLoad()**\n\n[-> android_media_MediaPlayer.cpp]\n\n~~~ C++\njint JNI_OnLoad(JavaVM* vm, void* reserved)\n{\n    JNIEnv* env = NULL;\n    if (register_android_media_MediaPlayer(env) < 0) {\n        goto bail;\n    }\n    ...\n}\n~~~\n\n**register_android_media_MediaPlayer**\n\n[-> android_media_MediaPlayer.cpp]\n\n~~~ C++\nstatic int register_android_media_MediaPlayer(JNIEnv *env)\n{\n    //3.4\n    return AndroidRuntime::registerNativeMethods(env,\n                \"android/media/MediaPlayer\", gMethods, NELEM(gMethods));\n}\n~~~\n\nJavaVMJNIEnv:\n\n- 1.JavaVMJavaVM\n- 2.JNIEnvJNIEnv\n\ngMethodsjavaC/C++\n\n~~~ C++\nstatic JNINativeMethod gMethods[] = {\n    {\"prepare\",      \"()V\",  (void *)android_media_MediaPlayer_prepare},\n    {\"_start\",       \"()V\",  (void *)android_media_MediaPlayer_start},\n    {\"_stop\",        \"()V\",  (void *)android_media_MediaPlayer_stop},\n    {\"seekTo\",       \"(I)V\", (void *)android_media_MediaPlayer_seekTo},\n    {\"_release\",     \"()V\",  (void *)android_media_MediaPlayer_release},\n    {\"native_init\",  \"()V\",  (void *)android_media_MediaPlayer_native_init},\n    ...\n};\n~~~\n\n**JNINativeMethod**jni.h\n\n~~~ C++\ntypedef struct {\n    const char* name;  //Javanative\n    const char* signature; //Java\n    void*       fnPtr; //Native\n} JNINativeMethod;\n~~~\n\n### 2.JNI\n\nJNINativeMethod**signature()**signatureJavaNative\n\n#### 2.1 \n\n- ****\n\n| *Signature* |\t*Java* |\t*Native* |\n|:--------:|:-------:|:--------:|\n|B | byte\t|jbyte|\n|C | char\t| jchar|\n|D\t| double\t| jdouble|\n|F\t| float | jfloat|\n|I\t| int |\tjint|\n|S\t| short |\tjshort|\n|J\t| long\t| jlong|\n|Z\t| boolean\t| jboolean|\n|V\t| void\t| void|\n\n- ****\n\n**[**\n\n| *Signature* |\t*Java* |\t*Native*|\n|:--------:|:-------:|:--------:|\n|[B |\tbyte[] |\tjbyteArray|\n|[C |\tchar[] |\tjcharArray|\n|[D |\tdouble[] |\tjdoubleArray|\n|[F |\tfloat[] |\tjfloatArray|\n|[I |\tint[] |\tjintArray|\n|[S |\tshort[] |\tjshortArray|\n|[J |\tlong[] |\tjlongArray|\n|[Z |\tboolean[] | jbooleanArray|\n\n- ****\n\n**L+classname +**;\n\n| Signature | Java | Native |\n|:--------:|:-------:|:--------:|\n| Ljava/lang/String; | String | jstring |\n| L+classname +;\t| |\tjobject|\n|[L+classname +;\t| Object[]\t| jobjectArray|\n| Ljava.lang.Class; |\tClass\t|jclass |\n|Ljava.lang.Throwable;\t| Throwable\t| jthrowable|\n\n- **Signature**\n\n (...)Signature\n\n| Java | |\n|:--------:|:--------:|\n|void foo()\t| ()V|\n|float foo(int i) |\t(I)F|\n|long foo(int[] i)\t| ([I)J|\n|double foo(Class c) |\t(Ljava/lang/Class;)D|\n|boolean foo(int[] i,String s) |\t([ILjava/lang/String;)Z|\n|String foo(int i) |\t(I)Ljava/lang/String;|\n\n#### 2.2 \n\n- **()**\nJavaGCJNIJNIReferenceLocal Reference() Global Reference Weak Global Reference()Global Reference\n\n  ARTGCGCJavaJNIDalvikART\n\n- **()**\nJavatry..catchthrowJNIJNIEnvJava\n\n  DalvikJNINULLARTDalvikART\n","source":"_posts/2016-05-24-JNI-Learning0.md","raw":"---\nlayout: post\ntitle: android JNI JNI\ncategory: accumulation\ntags: Android JNI\nkeywords: jni, android\ndescription: android Jni\nbanner: http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg\n---\n\n\n###  1.Android JNI\n\n#### 1.1 AndroidJNI\n\nAndroid**Kernelinit**initforkJavaC/C++ZygoteZygote**AndroidRuntime.cppstartVm**VMstartRegJNI\n\n<!--more-->\n\nAndroidRuntime.cpp\n\n~~~ C++\nint AndroidRuntime::startReg(JNIEnv* env)\n{\n    //javaCreateThreadEtc\n    androidSetCreateThreadFunc((android_create_thread_fn) javaCreateThreadEtc);\n\n    env->PushLocalFrame(200);\n    //NI\n    if (register_jni_procs(gRegJNI, NELEM(gRegJNI), env) < 0) {\n        env->PopLocalFrame(NULL);\n        return -1;\n    }\n    env->PopLocalFrame(NULL);\n    return 0;\n}\n~~~\n\n**register_jni_procs(gRegJNI, NELEM(gRegJNI), env)**gRegJNI\n\n~~~ C++\nstatic int register_jni_procs(const RegJNIRec array[], size_t count, JNIEnv* env)\n{\n    for (size_t i = 0; i < count; i++) {\n        if (array[i].mProc(env) < 0) {\n            return -1;\n        }\n    }\n    return 0;\n}\n~~~\n\n   gRegJNI100AndroidRuntime.cpp\n\n~~~ C++\nstatic const RegJNIRec gRegJNI[] = {\n    REG_JNI(register_android_os_MessageQueue),\n    REG_JNI(register_android_os_Binder),\n    ...\n};\n~~~\n\n   jniREG_JNI\n\nMessageQueueBinderAndroidAndroidRuntime.cppnative**AndroidRuntime.cppgRegJNI**\n\n~~~ Java\nregister_[]_[]\n~~~\n\n##### MessageQueue.javanativePollOnce\n\n~~~ Java\nprivate native void nativePollOnce(long ptr, int timeoutMillis);\n~~~\n**android.os.MessageQueue.nativePollOnce()**native**android_os_MessageQueue_nativePollOnce()**\n\n- MessageQueue.javajni**register_android_os_MessageQueue**gRegJNIJNIAndroidRuntime.cppextern\n\n~~~ C++\nextern int register_android_os_MessageQueue(JNIEnv* env);\n~~~\n\nextern/framework/base/core/jni/native\n\n~~~ C++\n[]_[].cpp\n[]_[].h\n~~~\n\n> **Tips** MessageQueue.java ==> android_os_MessageQueue.cpp\n\n- android_os_MessageQueue.cppandroid_os_MessageQueue_nativePollOnce\n\n~~~ C++\nstatic void android_os_MessageQueue_nativePollOnce(JNIEnv* env, jobject obj,\n        jlong ptr, jint timeoutMillis) {\n    NativeMessageQueue* nativeMessageQueue = reinterpret_cast<NativeMessageQueue*>(ptr);\n    nativeMessageQueue->pollOnce(env, obj, timeoutMillis);\n}\n~~~\n\n##### native[]\\_[].cppBinder.java\n\nBinder.javanative**android_util_Binder.cpp**\n\n~~~ Java\npublic static final native int getCallingPid();\n~~~\n\n   getCallingPid ==> android_os_Binder_getCallingPid()AndroidRuntime.cppgRegJNIregister_android_os_Binder\n\n()nativeandroid_os_Binder.cpp/framework/base/core/jni/******android_util_Binder.cpp**google\n\n~~~ C++\nstatic jint android_os_Binder_getCallingPid(JNIEnv* env, jobject clazz)\n{\n    return IPCThreadState::self()->getCallingPid();\n}\n~~~\n\n/framework/base/core/jni/binder.javabindergrepandroid_os_Binder_getCallingPid\n\njni\n\n- /framework/base/core/jni/\n- /framework/base/services/core/jni/\n- /framework/base/media/jni/\n\n\n#### 1.2 JNI\nAndroidJNI jnijniMediaPlayer.javaandroid.media\n\n~~~ Java\npublic class MediaPlayer{\n    static {\n        System.loadLibrary(\"media_jni\");\n        native_init();\n    }\n\n    private static native final void native_init();\n    ...\n}\n~~~\n\n- staticSystem.loadLibrarymedia_jni, Androidlibmedia_jni.so\n\n- libmedia_jni.soAndroid.mk**LOCAL_MODULE:= libmedia_jni**grepmgreplibmedia_jniAndroid.mk\n\nlibmedia_jni.so/frameworks/base/media/jni/Android.mk()\n\n~~~ C++\nandroid_media_MediaPlayer.cpp\nandroid_media_MediaPlayer_native_init()\n~~~\n\n- Android.mk/frameworks/base/media/jni/android_media_MediaPlayer.cpp\n\n~~~ C++\nstatic void\nandroid_media_MediaPlayer_native_init(JNIEnv *env)\n{\n    jclass clazz;\n    clazz = env->FindClass(\"android/media/MediaPlayer\");\n    fields.context = env->GetFieldID(clazz, \"mNativeContext\", \"J\");\n    ...\n}\n~~~\n\n> **Tips**MediaPlayer.javanative_initnative/frameworks/base/media/jni/android_media_MediaPlayer.cppandroid_media_MediaPlayer_native_init\n\n**System.loadLibrary()JNI_OnLoad()**\n\n#### 1.3 **JNI_OnLoad()**\n\n[-> android_media_MediaPlayer.cpp]\n\n~~~ C++\njint JNI_OnLoad(JavaVM* vm, void* reserved)\n{\n    JNIEnv* env = NULL;\n    if (register_android_media_MediaPlayer(env) < 0) {\n        goto bail;\n    }\n    ...\n}\n~~~\n\n**register_android_media_MediaPlayer**\n\n[-> android_media_MediaPlayer.cpp]\n\n~~~ C++\nstatic int register_android_media_MediaPlayer(JNIEnv *env)\n{\n    //3.4\n    return AndroidRuntime::registerNativeMethods(env,\n                \"android/media/MediaPlayer\", gMethods, NELEM(gMethods));\n}\n~~~\n\nJavaVMJNIEnv:\n\n- 1.JavaVMJavaVM\n- 2.JNIEnvJNIEnv\n\ngMethodsjavaC/C++\n\n~~~ C++\nstatic JNINativeMethod gMethods[] = {\n    {\"prepare\",      \"()V\",  (void *)android_media_MediaPlayer_prepare},\n    {\"_start\",       \"()V\",  (void *)android_media_MediaPlayer_start},\n    {\"_stop\",        \"()V\",  (void *)android_media_MediaPlayer_stop},\n    {\"seekTo\",       \"(I)V\", (void *)android_media_MediaPlayer_seekTo},\n    {\"_release\",     \"()V\",  (void *)android_media_MediaPlayer_release},\n    {\"native_init\",  \"()V\",  (void *)android_media_MediaPlayer_native_init},\n    ...\n};\n~~~\n\n**JNINativeMethod**jni.h\n\n~~~ C++\ntypedef struct {\n    const char* name;  //Javanative\n    const char* signature; //Java\n    void*       fnPtr; //Native\n} JNINativeMethod;\n~~~\n\n### 2.JNI\n\nJNINativeMethod**signature()**signatureJavaNative\n\n#### 2.1 \n\n- ****\n\n| *Signature* |\t*Java* |\t*Native* |\n|:--------:|:-------:|:--------:|\n|B | byte\t|jbyte|\n|C | char\t| jchar|\n|D\t| double\t| jdouble|\n|F\t| float | jfloat|\n|I\t| int |\tjint|\n|S\t| short |\tjshort|\n|J\t| long\t| jlong|\n|Z\t| boolean\t| jboolean|\n|V\t| void\t| void|\n\n- ****\n\n**[**\n\n| *Signature* |\t*Java* |\t*Native*|\n|:--------:|:-------:|:--------:|\n|[B |\tbyte[] |\tjbyteArray|\n|[C |\tchar[] |\tjcharArray|\n|[D |\tdouble[] |\tjdoubleArray|\n|[F |\tfloat[] |\tjfloatArray|\n|[I |\tint[] |\tjintArray|\n|[S |\tshort[] |\tjshortArray|\n|[J |\tlong[] |\tjlongArray|\n|[Z |\tboolean[] | jbooleanArray|\n\n- ****\n\n**L+classname +**;\n\n| Signature | Java | Native |\n|:--------:|:-------:|:--------:|\n| Ljava/lang/String; | String | jstring |\n| L+classname +;\t| |\tjobject|\n|[L+classname +;\t| Object[]\t| jobjectArray|\n| Ljava.lang.Class; |\tClass\t|jclass |\n|Ljava.lang.Throwable;\t| Throwable\t| jthrowable|\n\n- **Signature**\n\n (...)Signature\n\n| Java | |\n|:--------:|:--------:|\n|void foo()\t| ()V|\n|float foo(int i) |\t(I)F|\n|long foo(int[] i)\t| ([I)J|\n|double foo(Class c) |\t(Ljava/lang/Class;)D|\n|boolean foo(int[] i,String s) |\t([ILjava/lang/String;)Z|\n|String foo(int i) |\t(I)Ljava/lang/String;|\n\n#### 2.2 \n\n- **()**\nJavaGCJNIJNIReferenceLocal Reference() Global Reference Weak Global Reference()Global Reference\n\n  ARTGCGCJavaJNIDalvikART\n\n- **()**\nJavatry..catchthrowJNIJNIEnvJava\n\n  DalvikJNINULLARTDalvikART\n","slug":"JNI-Learning0","published":1,"date":"2016-05-23T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4s000rbxs6n717ql5g","content":"<h3 id=\"1-Android-JNI\"><a href=\"#1-Android-JNI\" class=\"headerlink\" title=\"1.Android JNI\"></a>1.Android JNI</h3><h4 id=\"1-1-AndroidJNI\"><a href=\"#1-1-AndroidJNI\" class=\"headerlink\" title=\"1.1 AndroidJNI\"></a>1.1 AndroidJNI</h4><p>Android<strong>Kernelinit</strong>initforkJavaC/C++ZygoteZygote<strong>AndroidRuntime.cppstartVm</strong>VMstartRegJNI</p>\n<a id=\"more\"></a>\n<p>AndroidRuntime.cpp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">int</span> AndroidRuntime::startReg(JNIEnv* env)</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">//javaCreateThreadEtc</span></div><div class=\"line\">    androidSetCreateThreadFunc((android_create_thread_fn) javaCreateThreadEtc);</div><div class=\"line\"></div><div class=\"line\">    env-&gt;PushLocalFrame(<span class=\"number\">200</span>);</div><div class=\"line\">    <span class=\"comment\">//NI</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (register_jni_procs(gRegJNI, NELEM(gRegJNI), env) &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        env-&gt;PopLocalFrame(<span class=\"literal\">NULL</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    env-&gt;PopLocalFrame(<span class=\"literal\">NULL</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><strong>register_jni_procs(gRegJNI, NELEM(gRegJNI), env)</strong>gRegJNI</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">register_jni_procs</span><span class=\"params\">(<span class=\"keyword\">const</span> RegJNIRec <span class=\"built_in\">array</span>[], <span class=\"keyword\">size_t</span> count, JNIEnv* env)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">size_t</span> i = <span class=\"number\">0</span>; i &lt; count; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">array</span>[i].mProc(env) &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>   gRegJNI100AndroidRuntime.cpp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">const</span> RegJNIRec gRegJNI[] = &#123;</div><div class=\"line\">    REG_JNI(register_android_os_MessageQueue),</div><div class=\"line\">    REG_JNI(register_android_os_Binder),</div><div class=\"line\">    ...</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>   jniREG_JNI</p>\n<p>MessageQueueBinderAndroidAndroidRuntime.cppnative<strong>AndroidRuntime.cppgRegJNI</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">register_[]_[]</div></pre></td></tr></table></figure>\n<h5 id=\"MessageQueue-javanativePollOnce\"><a href=\"#MessageQueue-javanativePollOnce\" class=\"headerlink\" title=\"MessageQueue.javanativePollOnce\"></a>MessageQueue.javanativePollOnce</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">nativePollOnce</span><span class=\"params\">(<span class=\"keyword\">long</span> ptr, <span class=\"keyword\">int</span> timeoutMillis)</span></span>;</div></pre></td></tr></table></figure>\n<p><strong>android.os.MessageQueue.nativePollOnce()</strong>native<strong>android_os_MessageQueue_nativePollOnce()</strong></p>\n<ul>\n<li>MessageQueue.javajni<strong>register_android_os_MessageQueue</strong>gRegJNIJNIAndroidRuntime.cppextern</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> <span class=\"title\">register_android_os_MessageQueue</span><span class=\"params\">(JNIEnv* env)</span></span>;</div></pre></td></tr></table></figure>\n<p>extern/framework/base/core/jni/native</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">[]_[].cpp</div><div class=\"line\">[]_[].h</div></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>Tips</strong> MessageQueue.java ==&gt; android_os_MessageQueue.cpp</p>\n</blockquote>\n<ul>\n<li>android_os_MessageQueue.cppandroid_os_MessageQueue_nativePollOnce</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">android_os_MessageQueue_nativePollOnce</span><span class=\"params\">(JNIEnv* env, jobject obj,</span></span></div><div class=\"line\">        jlong ptr, jint timeoutMillis) &#123;</div><div class=\"line\">    NativeMessageQueue* nativeMessageQueue = <span class=\"keyword\">reinterpret_cast</span>&lt;NativeMessageQueue*&gt;(ptr);</div><div class=\"line\">    nativeMessageQueue-&gt;pollOnce(env, obj, timeoutMillis);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"native---cppBinder-java\"><a href=\"#native---cppBinder-java\" class=\"headerlink\" title=\"native[]_[].cppBinder.java\"></a>native[]_[].cppBinder.java</h5><p>Binder.javanative<strong>android_util_Binder.cpp</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">native</span> <span class=\"keyword\">int</span> <span class=\"title\">getCallingPid</span><span class=\"params\">()</span></span>;</div></pre></td></tr></table></figure>\n<p>   getCallingPid ==&gt; android_os_Binder_getCallingPid()AndroidRuntime.cppgRegJNIregister_android_os_Binder</p>\n<p>()nativeandroid_os_Binder.cpp/framework/base/core/jni/<strong></strong><strong>android_util_Binder.cpp</strong>google</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> jint <span class=\"title\">android_os_Binder_getCallingPid</span><span class=\"params\">(JNIEnv* env, jobject clazz)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> IPCThreadState::self()-&gt;getCallingPid();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>/framework/base/core/jni/binder.javabindergrepandroid_os_Binder_getCallingPid</p>\n<p>jni</p>\n<ul>\n<li>/framework/base/core/jni/</li>\n<li>/framework/base/services/core/jni/</li>\n<li>/framework/base/media/jni/</li>\n</ul>\n<h4 id=\"1-2-JNI\"><a href=\"#1-2-JNI\" class=\"headerlink\" title=\"1.2 JNI\"></a>1.2 JNI</h4><p>AndroidJNI jnijniMediaPlayer.javaandroid.media</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MediaPlayer</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">static</span> &#123;</div><div class=\"line\">        System.loadLibrary(<span class=\"string\">\"media_jni\"</span>);</div><div class=\"line\">        native_init();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">native_init</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>staticSystem.loadLibrarymedia_jni, Androidlibmedia_jni.so</p>\n</li>\n<li><p>libmedia_jni.soAndroid.mk<strong>LOCAL_MODULE:= libmedia_jni</strong>grepmgreplibmedia_jniAndroid.mk</p>\n</li>\n</ul>\n<p>libmedia_jni.so/frameworks/base/media/jni/Android.mk()</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">android_media_MediaPlayer.<span class=\"function\">cpp</span></div><div class=\"line\"><span class=\"title\">android_media_MediaPlayer_native_init</span><span class=\"params\">()</span></div></pre></td></tr></table></figure>\n<ul>\n<li>Android.mk/frameworks/base/media/jni/android_media_MediaPlayer.cpp</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span></span></div><div class=\"line\"><span class=\"title\">android_media_MediaPlayer_native_init</span><span class=\"params\">(JNIEnv *env)</span></div><div class=\"line\">&#123;</div><div class=\"line\">    jclass clazz;</div><div class=\"line\">    clazz = env-&gt;FindClass(<span class=\"string\">\"android/media/MediaPlayer\"</span>);</div><div class=\"line\">    fields.context = env-&gt;GetFieldID(clazz, <span class=\"string\">\"mNativeContext\"</span>, <span class=\"string\">\"J\"</span>);</div><div class=\"line\">    ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>Tips</strong>MediaPlayer.javanative_initnative/frameworks/base/media/jni/android_media_MediaPlayer.cppandroid_media_MediaPlayer_native_init</p>\n</blockquote>\n<p><strong>System.loadLibrary()JNI_OnLoad()</strong></p>\n<h4 id=\"1-3-JNI-OnLoad-\"><a href=\"#1-3-JNI-OnLoad-\" class=\"headerlink\" title=\"1.3 JNI_OnLoad()\"></a>1.3 <strong>JNI_OnLoad()</strong></h4><p>[-&gt; android_media_MediaPlayer.cpp]</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">jint <span class=\"title\">JNI_OnLoad</span><span class=\"params\">(JavaVM* vm, <span class=\"keyword\">void</span>* reserved)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    JNIEnv* env = <span class=\"literal\">NULL</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (register_android_media_MediaPlayer(env) &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">goto</span> bail;</div><div class=\"line\">    &#125;</div><div class=\"line\">    ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><strong>register_android_media_MediaPlayer</strong></p>\n<p>[-&gt; android_media_MediaPlayer.cpp]</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">register_android_media_MediaPlayer</span><span class=\"params\">(JNIEnv *env)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">//3.4</span></div><div class=\"line\">    <span class=\"keyword\">return</span> AndroidRuntime::registerNativeMethods(env,</div><div class=\"line\">                <span class=\"string\">\"android/media/MediaPlayer\"</span>, gMethods, NELEM(gMethods));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>JavaVMJNIEnv:</p>\n<ul>\n<li>1.JavaVMJavaVM</li>\n<li>2.JNIEnvJNIEnv</li>\n</ul>\n<p>gMethodsjavaC/C++</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span> JNINativeMethod gMethods[] = &#123;</div><div class=\"line\">    &#123;<span class=\"string\">\"prepare\"</span>,      <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_prepare&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"_start\"</span>,       <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_start&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"_stop\"</span>,        <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_stop&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"seekTo\"</span>,       <span class=\"string\">\"(I)V\"</span>, (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_seekTo&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"_release\"</span>,     <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_release&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"native_init\"</span>,  <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_native_init&#125;,</div><div class=\"line\">    ...</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p><strong>JNINativeMethod</strong>jni.h</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"keyword\">struct</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* name;  <span class=\"comment\">//Javanative</span></div><div class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* signature; <span class=\"comment\">//Java</span></div><div class=\"line\">    <span class=\"keyword\">void</span>*       fnPtr; <span class=\"comment\">//Native</span></div><div class=\"line\">&#125; JNINativeMethod;</div></pre></td></tr></table></figure>\n<h3 id=\"2-JNI\"><a href=\"#2-JNI\" class=\"headerlink\" title=\"2.JNI\"></a>2.JNI</h3><p>JNINativeMethod<strong>signature()</strong>signatureJavaNative</p>\n<h4 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h4><ul>\n<li><strong></strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em>Signature</em></th>\n<th style=\"text-align:center\"><em>Java</em></th>\n<th style=\"text-align:center\"><em>Native</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">B</td>\n<td style=\"text-align:center\">byte</td>\n<td style=\"text-align:center\">jbyte</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">C</td>\n<td style=\"text-align:center\">char</td>\n<td style=\"text-align:center\">jchar</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">D</td>\n<td style=\"text-align:center\">double</td>\n<td style=\"text-align:center\">jdouble</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">F</td>\n<td style=\"text-align:center\">float</td>\n<td style=\"text-align:center\">jfloat</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">I</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">jint</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">S</td>\n<td style=\"text-align:center\">short</td>\n<td style=\"text-align:center\">jshort</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">J</td>\n<td style=\"text-align:center\">long</td>\n<td style=\"text-align:center\">jlong</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Z</td>\n<td style=\"text-align:center\">boolean</td>\n<td style=\"text-align:center\">jboolean</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">V</td>\n<td style=\"text-align:center\">void</td>\n<td style=\"text-align:center\">void</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong></strong></li>\n</ul>\n<p><strong>[</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em>Signature</em></th>\n<th style=\"text-align:center\"><em>Java</em></th>\n<th style=\"text-align:center\"><em>Native</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">[B</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">jbyteArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[C</td>\n<td style=\"text-align:center\">char[]</td>\n<td style=\"text-align:center\">jcharArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[D</td>\n<td style=\"text-align:center\">double[]</td>\n<td style=\"text-align:center\">jdoubleArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[F</td>\n<td style=\"text-align:center\">float[]</td>\n<td style=\"text-align:center\">jfloatArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[I</td>\n<td style=\"text-align:center\">int[]</td>\n<td style=\"text-align:center\">jintArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[S</td>\n<td style=\"text-align:center\">short[]</td>\n<td style=\"text-align:center\">jshortArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[J</td>\n<td style=\"text-align:center\">long[]</td>\n<td style=\"text-align:center\">jlongArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[Z</td>\n<td style=\"text-align:center\">boolean[]</td>\n<td style=\"text-align:center\">jbooleanArray</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong></strong></li>\n</ul>\n<p><strong>L+classname +</strong>;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Signature</th>\n<th style=\"text-align:center\">Java</th>\n<th style=\"text-align:center\">Native</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">Ljava/lang/String;</td>\n<td style=\"text-align:center\">String</td>\n<td style=\"text-align:center\">jstring</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">L+classname +;</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">jobject</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[L+classname +;</td>\n<td style=\"text-align:center\">Object[]</td>\n<td style=\"text-align:center\">jobjectArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Ljava.lang.Class;</td>\n<td style=\"text-align:center\">Class</td>\n<td style=\"text-align:center\">jclass</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Ljava.lang.Throwable;</td>\n<td style=\"text-align:center\">Throwable</td>\n<td style=\"text-align:center\">jthrowable</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>Signature</strong></li>\n</ul>\n<p> ()Signature</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Java</th>\n<th style=\"text-align:center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">void foo()</td>\n<td style=\"text-align:center\">()V</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">float foo(int i)</td>\n<td style=\"text-align:center\">(I)F</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">long foo(int[] i)</td>\n<td style=\"text-align:center\">([I)J</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">double foo(Class c)</td>\n<td style=\"text-align:center\">(Ljava/lang/Class;)D</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">boolean foo(int[] i,String s)</td>\n<td style=\"text-align:center\">([ILjava/lang/String;)Z</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">String foo(int i)</td>\n<td style=\"text-align:center\">(I)Ljava/lang/String;</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h4><ul>\n<li><p><strong>()</strong><br>JavaGCJNIJNIReferenceLocal Reference() Global Reference Weak Global Reference()Global Reference</p>\n<p>ARTGCGCJavaJNIDalvikART</p>\n</li>\n<li><p><strong>()</strong><br>Javatry..catchthrowJNIJNIEnvJava</p>\n<p>DalvikJNINULLARTDalvikART</p>\n</li>\n</ul>\n","excerpt":"<h3 id=\"1-Android-JNI\"><a href=\"#1-Android-JNI\" class=\"headerlink\" title=\"1.Android JNI\"></a>1.Android JNI</h3><h4 id=\"1-1-AndroidJNI\"><a href=\"#1-1-AndroidJNI\" class=\"headerlink\" title=\"1.1 AndroidJNI\"></a>1.1 AndroidJNI</h4><p>Android<strong>Kernelinit</strong>initforkJavaC/C++ZygoteZygote<strong>AndroidRuntime.cppstartVm</strong>VMstartRegJNI</p>","more":"<p>AndroidRuntime.cpp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">int</span> AndroidRuntime::startReg(JNIEnv* env)</div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">//javaCreateThreadEtc</span></div><div class=\"line\">    androidSetCreateThreadFunc((android_create_thread_fn) javaCreateThreadEtc);</div><div class=\"line\"></div><div class=\"line\">    env-&gt;PushLocalFrame(<span class=\"number\">200</span>);</div><div class=\"line\">    <span class=\"comment\">//NI</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (register_jni_procs(gRegJNI, NELEM(gRegJNI), env) &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        env-&gt;PopLocalFrame(<span class=\"literal\">NULL</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    env-&gt;PopLocalFrame(<span class=\"literal\">NULL</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><strong>register_jni_procs(gRegJNI, NELEM(gRegJNI), env)</strong>gRegJNI</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">register_jni_procs</span><span class=\"params\">(<span class=\"keyword\">const</span> RegJNIRec <span class=\"built_in\">array</span>[], <span class=\"keyword\">size_t</span> count, JNIEnv* env)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">size_t</span> i = <span class=\"number\">0</span>; i &lt; count; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">array</span>[i].mProc(env) &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>   gRegJNI100AndroidRuntime.cpp</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span> <span class=\"keyword\">const</span> RegJNIRec gRegJNI[] = &#123;</div><div class=\"line\">    REG_JNI(register_android_os_MessageQueue),</div><div class=\"line\">    REG_JNI(register_android_os_Binder),</div><div class=\"line\">    ...</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>   jniREG_JNI</p>\n<p>MessageQueueBinderAndroidAndroidRuntime.cppnative<strong>AndroidRuntime.cppgRegJNI</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">register_[]_[]</div></pre></td></tr></table></figure>\n<h5 id=\"MessageQueue-javanativePollOnce\"><a href=\"#MessageQueue-javanativePollOnce\" class=\"headerlink\" title=\"MessageQueue.javanativePollOnce\"></a>MessageQueue.javanativePollOnce</h5><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">native</span> <span class=\"keyword\">void</span> <span class=\"title\">nativePollOnce</span><span class=\"params\">(<span class=\"keyword\">long</span> ptr, <span class=\"keyword\">int</span> timeoutMillis)</span></span>;</div></pre></td></tr></table></figure>\n<p><strong>android.os.MessageQueue.nativePollOnce()</strong>native<strong>android_os_MessageQueue_nativePollOnce()</strong></p>\n<ul>\n<li>MessageQueue.javajni<strong>register_android_os_MessageQueue</strong>gRegJNIJNIAndroidRuntime.cppextern</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">extern</span> <span class=\"keyword\">int</span> <span class=\"title\">register_android_os_MessageQueue</span><span class=\"params\">(JNIEnv* env)</span></span>;</div></pre></td></tr></table></figure>\n<p>extern/framework/base/core/jni/native</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">[]_[].cpp</div><div class=\"line\">[]_[].h</div></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>Tips</strong> MessageQueue.java ==&gt; android_os_MessageQueue.cpp</p>\n</blockquote>\n<ul>\n<li>android_os_MessageQueue.cppandroid_os_MessageQueue_nativePollOnce</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">android_os_MessageQueue_nativePollOnce</span><span class=\"params\">(JNIEnv* env, jobject obj,</div><div class=\"line\">        jlong ptr, jint timeoutMillis)</span> </span>&#123;</div><div class=\"line\">    NativeMessageQueue* nativeMessageQueue = <span class=\"keyword\">reinterpret_cast</span>&lt;NativeMessageQueue*&gt;(ptr);</div><div class=\"line\">    nativeMessageQueue-&gt;pollOnce(env, obj, timeoutMillis);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h5 id=\"native---cppBinder-java\"><a href=\"#native---cppBinder-java\" class=\"headerlink\" title=\"native[]_[].cppBinder.java\"></a>native[]_[].cppBinder.java</h5><p>Binder.javanative<strong>android_util_Binder.cpp</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">native</span> <span class=\"keyword\">int</span> <span class=\"title\">getCallingPid</span><span class=\"params\">()</span></span>;</div></pre></td></tr></table></figure>\n<p>   getCallingPid ==&gt; android_os_Binder_getCallingPid()AndroidRuntime.cppgRegJNIregister_android_os_Binder</p>\n<p>()nativeandroid_os_Binder.cpp/framework/base/core/jni/<strong></strong><strong>android_util_Binder.cpp</strong>google</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> jint <span class=\"title\">android_os_Binder_getCallingPid</span><span class=\"params\">(JNIEnv* env, jobject clazz)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> IPCThreadState::self()-&gt;getCallingPid();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>/framework/base/core/jni/binder.javabindergrepandroid_os_Binder_getCallingPid</p>\n<p>jni</p>\n<ul>\n<li>/framework/base/core/jni/</li>\n<li>/framework/base/services/core/jni/</li>\n<li>/framework/base/media/jni/</li>\n</ul>\n<h4 id=\"1-2-JNI\"><a href=\"#1-2-JNI\" class=\"headerlink\" title=\"1.2 JNI\"></a>1.2 JNI</h4><p>AndroidJNI jnijniMediaPlayer.javaandroid.media</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MediaPlayer</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">static</span> &#123;</div><div class=\"line\">        System.loadLibrary(<span class=\"string\">\"media_jni\"</span>);</div><div class=\"line\">        native_init();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">native_init</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li><p>staticSystem.loadLibrarymedia_jni, Androidlibmedia_jni.so</p>\n</li>\n<li><p>libmedia_jni.soAndroid.mk<strong>LOCAL_MODULE:= libmedia_jni</strong>grepmgreplibmedia_jniAndroid.mk</p>\n</li>\n</ul>\n<p>libmedia_jni.so/frameworks/base/media/jni/Android.mk()</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">android_media_MediaPlayer.<span class=\"function\">cpp</div><div class=\"line\"><span class=\"title\">android_media_MediaPlayer_native_init</span><span class=\"params\">()</span></span></div></pre></td></tr></table></figure>\n<ul>\n<li>Android.mk/frameworks/base/media/jni/android_media_MediaPlayer.cpp</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">void</span></div><div class=\"line\"><span class=\"title\">android_media_MediaPlayer_native_init</span><span class=\"params\">(JNIEnv *env)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    jclass clazz;</div><div class=\"line\">    clazz = env-&gt;FindClass(<span class=\"string\">\"android/media/MediaPlayer\"</span>);</div><div class=\"line\">    fields.context = env-&gt;GetFieldID(clazz, <span class=\"string\">\"mNativeContext\"</span>, <span class=\"string\">\"J\"</span>);</div><div class=\"line\">    ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><strong>Tips</strong>MediaPlayer.javanative_initnative/frameworks/base/media/jni/android_media_MediaPlayer.cppandroid_media_MediaPlayer_native_init</p>\n</blockquote>\n<p><strong>System.loadLibrary()JNI_OnLoad()</strong></p>\n<h4 id=\"1-3-JNI-OnLoad-\"><a href=\"#1-3-JNI-OnLoad-\" class=\"headerlink\" title=\"1.3 JNI_OnLoad()\"></a>1.3 <strong>JNI_OnLoad()</strong></h4><p>[-&gt; android_media_MediaPlayer.cpp]</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">jint <span class=\"title\">JNI_OnLoad</span><span class=\"params\">(JavaVM* vm, <span class=\"keyword\">void</span>* reserved)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    JNIEnv* env = <span class=\"literal\">NULL</span>;</div><div class=\"line\">    <span class=\"keyword\">if</span> (register_android_media_MediaPlayer(env) &lt; <span class=\"number\">0</span>) &#123;</div><div class=\"line\">        <span class=\"keyword\">goto</span> bail;</div><div class=\"line\">    &#125;</div><div class=\"line\">    ...</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><strong>register_android_media_MediaPlayer</strong></p>\n<p>[-&gt; android_media_MediaPlayer.cpp]</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">register_android_media_MediaPlayer</span><span class=\"params\">(JNIEnv *env)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//3.4</span></div><div class=\"line\">    <span class=\"keyword\">return</span> AndroidRuntime::registerNativeMethods(env,</div><div class=\"line\">                <span class=\"string\">\"android/media/MediaPlayer\"</span>, gMethods, NELEM(gMethods));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>JavaVMJNIEnv:</p>\n<ul>\n<li>1.JavaVMJavaVM</li>\n<li>2.JNIEnvJNIEnv</li>\n</ul>\n<p>gMethodsjavaC/C++</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">static</span> JNINativeMethod gMethods[] = &#123;</div><div class=\"line\">    &#123;<span class=\"string\">\"prepare\"</span>,      <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_prepare&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"_start\"</span>,       <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_start&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"_stop\"</span>,        <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_stop&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"seekTo\"</span>,       <span class=\"string\">\"(I)V\"</span>, (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_seekTo&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"_release\"</span>,     <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_release&#125;,</div><div class=\"line\">    &#123;<span class=\"string\">\"native_init\"</span>,  <span class=\"string\">\"()V\"</span>,  (<span class=\"keyword\">void</span> *)android_media_MediaPlayer_native_init&#125;,</div><div class=\"line\">    ...</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p><strong>JNINativeMethod</strong>jni.h</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"keyword\">struct</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* name;  <span class=\"comment\">//Javanative</span></div><div class=\"line\">    <span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* signature; <span class=\"comment\">//Java</span></div><div class=\"line\">    <span class=\"keyword\">void</span>*       fnPtr; <span class=\"comment\">//Native</span></div><div class=\"line\">&#125; JNINativeMethod;</div></pre></td></tr></table></figure>\n<h3 id=\"2-JNI\"><a href=\"#2-JNI\" class=\"headerlink\" title=\"2.JNI\"></a>2.JNI</h3><p>JNINativeMethod<strong>signature()</strong>signatureJavaNative</p>\n<h4 id=\"2-1-\"><a href=\"#2-1-\" class=\"headerlink\" title=\"2.1 \"></a>2.1 </h4><ul>\n<li><strong></strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em>Signature</em></th>\n<th style=\"text-align:center\"><em>Java</em></th>\n<th style=\"text-align:center\"><em>Native</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">B</td>\n<td style=\"text-align:center\">byte</td>\n<td style=\"text-align:center\">jbyte</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">C</td>\n<td style=\"text-align:center\">char</td>\n<td style=\"text-align:center\">jchar</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">D</td>\n<td style=\"text-align:center\">double</td>\n<td style=\"text-align:center\">jdouble</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">F</td>\n<td style=\"text-align:center\">float</td>\n<td style=\"text-align:center\">jfloat</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">I</td>\n<td style=\"text-align:center\">int</td>\n<td style=\"text-align:center\">jint</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">S</td>\n<td style=\"text-align:center\">short</td>\n<td style=\"text-align:center\">jshort</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">J</td>\n<td style=\"text-align:center\">long</td>\n<td style=\"text-align:center\">jlong</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Z</td>\n<td style=\"text-align:center\">boolean</td>\n<td style=\"text-align:center\">jboolean</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">V</td>\n<td style=\"text-align:center\">void</td>\n<td style=\"text-align:center\">void</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong></strong></li>\n</ul>\n<p><strong>[</strong></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em>Signature</em></th>\n<th style=\"text-align:center\"><em>Java</em></th>\n<th style=\"text-align:center\"><em>Native</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">[B</td>\n<td style=\"text-align:center\">byte[]</td>\n<td style=\"text-align:center\">jbyteArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[C</td>\n<td style=\"text-align:center\">char[]</td>\n<td style=\"text-align:center\">jcharArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[D</td>\n<td style=\"text-align:center\">double[]</td>\n<td style=\"text-align:center\">jdoubleArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[F</td>\n<td style=\"text-align:center\">float[]</td>\n<td style=\"text-align:center\">jfloatArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[I</td>\n<td style=\"text-align:center\">int[]</td>\n<td style=\"text-align:center\">jintArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[S</td>\n<td style=\"text-align:center\">short[]</td>\n<td style=\"text-align:center\">jshortArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[J</td>\n<td style=\"text-align:center\">long[]</td>\n<td style=\"text-align:center\">jlongArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[Z</td>\n<td style=\"text-align:center\">boolean[]</td>\n<td style=\"text-align:center\">jbooleanArray</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong></strong></li>\n</ul>\n<p><strong>L+classname +</strong>;</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Signature</th>\n<th style=\"text-align:center\">Java</th>\n<th style=\"text-align:center\">Native</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">Ljava/lang/String;</td>\n<td style=\"text-align:center\">String</td>\n<td style=\"text-align:center\">jstring</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">L+classname +;</td>\n<td style=\"text-align:center\"></td>\n<td style=\"text-align:center\">jobject</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">[L+classname +;</td>\n<td style=\"text-align:center\">Object[]</td>\n<td style=\"text-align:center\">jobjectArray</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Ljava.lang.Class;</td>\n<td style=\"text-align:center\">Class</td>\n<td style=\"text-align:center\">jclass</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">Ljava.lang.Throwable;</td>\n<td style=\"text-align:center\">Throwable</td>\n<td style=\"text-align:center\">jthrowable</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>Signature</strong></li>\n</ul>\n<p> ()Signature</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Java</th>\n<th style=\"text-align:center\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">void foo()</td>\n<td style=\"text-align:center\">()V</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">float foo(int i)</td>\n<td style=\"text-align:center\">(I)F</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">long foo(int[] i)</td>\n<td style=\"text-align:center\">([I)J</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">double foo(Class c)</td>\n<td style=\"text-align:center\">(Ljava/lang/Class;)D</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">boolean foo(int[] i,String s)</td>\n<td style=\"text-align:center\">([ILjava/lang/String;)Z</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">String foo(int i)</td>\n<td style=\"text-align:center\">(I)Ljava/lang/String;</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h4><ul>\n<li><p><strong>()</strong><br>JavaGCJNIJNIReferenceLocal Reference() Global Reference Weak Global Reference()Global Reference</p>\n<p>ARTGCGCJavaJNIDalvikART</p>\n</li>\n<li><p><strong>()</strong><br>Javatry..catchthrowJNIJNIEnvJava</p>\n<p>DalvikJNINULLARTDalvikART</p>\n</li>\n</ul>"},{"layout":"post","title":"Gson","keywords":"gson, json","description":"Gson","banner":"http://obxk8w81b.bkt.clouddn.com/Child%20with%20Orange.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Child%20with%20Orange.jpg","_content":"\n\n### 1.Gson\nGson GoogleJavaJSONJavaJSONJavaJavaJSON\nGson\n\n- 1.**{XXXBean.class**\n- 2.**[XXXBean[].classlist<XXXBean>**\n\n<!--more-->\n\n### 2.\n\n- json\n\n~~~ javascript\n{\n    \"items\": [\n        {\n            \"key\": \"H60-L12__1464938219953__346589_483\",\n            \"hash\": \"Fip_In4BhB5syoZ28W3l_eb6rBDU\",\n            \"fsize\": 348120,\n            \"mimeType\": \"image/jpeg\",\n            \"putTime\": 14649382507765902\n        },\n        {\n            \"key\": \"H60-L12__1465352164202__397253_2946\",\n            \"hash\": \"Fs-UwiosdckN9kVY01GrOYC-b7a9\",\n            \"fsize\": 938413,\n            \"mimeType\": \"image/jpeg\",\n            \"putTime\": 14653521712332144\n        },\n        {\n            \"key\": \"H60-L12__1465352548728__322577_4114\",\n            \"hash\": \"Frga_QiMJVb9caiuwMlJABCsu1rc\",\n            \"fsize\": 506921,\n            \"mimeType\": \"image/jpeg\",\n            \"putTime\": 14653525989907168\n        }\n    ]\n}\n~~~\n\n\n- \n\n{gson.fromJson(jsonstring, XXXBean.class)XXXBeanitems\nitems[itemslist\n\n\n- \n\nGson\n\n~~~ Java\npublic class XXXBean {\n\n    public List<XXXItem> items;\n\n    public List<XXXItem> getItems() {\n        return items;\n    }\n\n    public void setItems(List<XXXItem> items) {\n        this.items = items;\n    }\n\n    public static class XXXItem {\n        private String key;\n        private String hash;\n        private String fsize;\n        private String mimeType;\n        private String putTime;\n\n        ...\n\t}\n}\n\nGson gson = new Gson();\nList<XXXBean.XXXItem> list = gson.fromJson(jsonstring,XXXBean.class).getItems();\n~~~\n\n\n### 3.\n\njson[\n\njson==[{\"id\":1,\"name\":\"\",\"birthDay\":\"Jun 22, 2012 8:28:52 AM\"},{\"id\":2,\"name\":\"\",\"birthDay\":\"Jun 22, 2012 8:28:52 AM\"},{\"id\":3,\"name\":\"\",\"birthDay\":\"Jun 22, 2012 8:28:52 AM\"}]\n\n- list\n\n~~~ Java\n List<Student> retList = gson.fromJson(jsonstring2,  new TypeToken<List<Student>>(){}.getType());\n~~~\n\n\n- \n\n~~~ Java\nStudent[] students= gson.fromJson(jsonstring2,new Student[].class);\n~~~\n\n- listTypeToken\n\n\tTypeTokenGson\n","source":"_posts/2016-06-08-gson-summary.md","raw":"---\nlayout: post\ntitle: Gson\ncategory: accumulation\ntags: accumulation\nkeywords: gson, json\ndescription: Gson\nbanner: http://obxk8w81b.bkt.clouddn.com/Child%20with%20Orange.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Child%20with%20Orange.jpg\n---\n\n\n### 1.Gson\nGson GoogleJavaJSONJavaJSONJavaJavaJSON\nGson\n\n- 1.**{XXXBean.class**\n- 2.**[XXXBean[].classlist<XXXBean>**\n\n<!--more-->\n\n### 2.\n\n- json\n\n~~~ javascript\n{\n    \"items\": [\n        {\n            \"key\": \"H60-L12__1464938219953__346589_483\",\n            \"hash\": \"Fip_In4BhB5syoZ28W3l_eb6rBDU\",\n            \"fsize\": 348120,\n            \"mimeType\": \"image/jpeg\",\n            \"putTime\": 14649382507765902\n        },\n        {\n            \"key\": \"H60-L12__1465352164202__397253_2946\",\n            \"hash\": \"Fs-UwiosdckN9kVY01GrOYC-b7a9\",\n            \"fsize\": 938413,\n            \"mimeType\": \"image/jpeg\",\n            \"putTime\": 14653521712332144\n        },\n        {\n            \"key\": \"H60-L12__1465352548728__322577_4114\",\n            \"hash\": \"Frga_QiMJVb9caiuwMlJABCsu1rc\",\n            \"fsize\": 506921,\n            \"mimeType\": \"image/jpeg\",\n            \"putTime\": 14653525989907168\n        }\n    ]\n}\n~~~\n\n\n- \n\n{gson.fromJson(jsonstring, XXXBean.class)XXXBeanitems\nitems[itemslist\n\n\n- \n\nGson\n\n~~~ Java\npublic class XXXBean {\n\n    public List<XXXItem> items;\n\n    public List<XXXItem> getItems() {\n        return items;\n    }\n\n    public void setItems(List<XXXItem> items) {\n        this.items = items;\n    }\n\n    public static class XXXItem {\n        private String key;\n        private String hash;\n        private String fsize;\n        private String mimeType;\n        private String putTime;\n\n        ...\n\t}\n}\n\nGson gson = new Gson();\nList<XXXBean.XXXItem> list = gson.fromJson(jsonstring,XXXBean.class).getItems();\n~~~\n\n\n### 3.\n\njson[\n\njson==[{\"id\":1,\"name\":\"\",\"birthDay\":\"Jun 22, 2012 8:28:52 AM\"},{\"id\":2,\"name\":\"\",\"birthDay\":\"Jun 22, 2012 8:28:52 AM\"},{\"id\":3,\"name\":\"\",\"birthDay\":\"Jun 22, 2012 8:28:52 AM\"}]\n\n- list\n\n~~~ Java\n List<Student> retList = gson.fromJson(jsonstring2,  new TypeToken<List<Student>>(){}.getType());\n~~~\n\n\n- \n\n~~~ Java\nStudent[] students= gson.fromJson(jsonstring2,new Student[].class);\n~~~\n\n- listTypeToken\n\n\tTypeTokenGson\n","slug":"gson-summary","published":1,"date":"2016-06-07T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4u000ubxs6w1vak2f1","content":"<h3 id=\"1-Gson\"><a href=\"#1-Gson\" class=\"headerlink\" title=\"1.Gson\"></a>1.Gson</h3><p>Gson GoogleJavaJSONJavaJSONJavaJavaJSON<br>Gson</p>\n<ul>\n<li>1.<strong>{XXXBean.class</strong></li>\n<li>2.<strong>[XXXBean[].classlist<xxxbean></xxxbean></strong></li>\n</ul>\n<a id=\"more\"></a>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><ul>\n<li>json</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"items\"</span>: [</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">\"key\"</span>: <span class=\"string\">\"H60-L12__1464938219953__346589_483\"</span>,</div><div class=\"line\">            <span class=\"string\">\"hash\"</span>: <span class=\"string\">\"Fip_In4BhB5syoZ28W3l_eb6rBDU\"</span>,</div><div class=\"line\">            <span class=\"string\">\"fsize\"</span>: <span class=\"number\">348120</span>,</div><div class=\"line\">            <span class=\"string\">\"mimeType\"</span>: <span class=\"string\">\"image/jpeg\"</span>,</div><div class=\"line\">            <span class=\"string\">\"putTime\"</span>: <span class=\"number\">14649382507765902</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">\"key\"</span>: <span class=\"string\">\"H60-L12__1465352164202__397253_2946\"</span>,</div><div class=\"line\">            <span class=\"string\">\"hash\"</span>: <span class=\"string\">\"Fs-UwiosdckN9kVY01GrOYC-b7a9\"</span>,</div><div class=\"line\">            <span class=\"string\">\"fsize\"</span>: <span class=\"number\">938413</span>,</div><div class=\"line\">            <span class=\"string\">\"mimeType\"</span>: <span class=\"string\">\"image/jpeg\"</span>,</div><div class=\"line\">            <span class=\"string\">\"putTime\"</span>: <span class=\"number\">14653521712332144</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">\"key\"</span>: <span class=\"string\">\"H60-L12__1465352548728__322577_4114\"</span>,</div><div class=\"line\">            <span class=\"string\">\"hash\"</span>: <span class=\"string\">\"Frga_QiMJVb9caiuwMlJABCsu1rc\"</span>,</div><div class=\"line\">            <span class=\"string\">\"fsize\"</span>: <span class=\"number\">506921</span>,</div><div class=\"line\">            <span class=\"string\">\"mimeType\"</span>: <span class=\"string\">\"image/jpeg\"</span>,</div><div class=\"line\">            <span class=\"string\">\"putTime\"</span>: <span class=\"number\">14653525989907168</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>{gson.fromJson(jsonstring, XXXBean.class)XXXBeanitems<br>items[itemslist</p>\n<ul>\n<li></li>\n</ul>\n<p>Gson</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XXXBean</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> List&lt;XXXItem&gt; items;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;XXXItem&gt; <span class=\"title\">getItems</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> items;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setItems</span><span class=\"params\">(List&lt;XXXItem&gt; items)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.items = items;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XXXItem</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">private</span> String key;</div><div class=\"line\">        <span class=\"keyword\">private</span> String hash;</div><div class=\"line\">        <span class=\"keyword\">private</span> String fsize;</div><div class=\"line\">        <span class=\"keyword\">private</span> String mimeType;</div><div class=\"line\">        <span class=\"keyword\">private</span> String putTime;</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Gson gson = <span class=\"keyword\">new</span> Gson();</div><div class=\"line\">List&lt;XXXBean.XXXItem&gt; list = gson.fromJson(jsonstring,XXXBean.class).getItems();</div></pre></td></tr></table></figure>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>json[</p>\n<p>json==[{id:1,name:,birthDay:Jun 22, 2012 8:28:52 AM},{id:2,name:,birthDay:Jun 22, 2012 8:28:52 AM},{id:3,name:,birthDay:Jun 22, 2012 8:28:52 AM}]</p>\n<ul>\n<li>list</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">List&lt;Student&gt; retList = gson.fromJson(jsonstring2,  <span class=\"keyword\">new</span> TypeToken&lt;List&lt;Student&gt;&gt;()&#123;&#125;.getType());</div></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Student[] students= gson.fromJson(jsonstring2,<span class=\"keyword\">new</span> Student[].class);</div></pre></td></tr></table></figure>\n<ul>\n<li><p>listTypeToken</p>\n<p>  TypeTokenGson</p>\n</li>\n</ul>\n","excerpt":"<h3 id=\"1-Gson\"><a href=\"#1-Gson\" class=\"headerlink\" title=\"1.Gson\"></a>1.Gson</h3><p>Gson GoogleJavaJSONJavaJSONJavaJavaJSON<br>Gson</p>\n<ul>\n<li>1.<strong>{XXXBean.class</strong></li>\n<li>2.<strong>[XXXBean[].classlist<XXXBean></strong></li>\n</ul>","more":"<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><ul>\n<li>json</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"items\"</span>: [</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">\"key\"</span>: <span class=\"string\">\"H60-L12__1464938219953__346589_483\"</span>,</div><div class=\"line\">            <span class=\"string\">\"hash\"</span>: <span class=\"string\">\"Fip_In4BhB5syoZ28W3l_eb6rBDU\"</span>,</div><div class=\"line\">            <span class=\"string\">\"fsize\"</span>: <span class=\"number\">348120</span>,</div><div class=\"line\">            <span class=\"string\">\"mimeType\"</span>: <span class=\"string\">\"image/jpeg\"</span>,</div><div class=\"line\">            <span class=\"string\">\"putTime\"</span>: <span class=\"number\">14649382507765902</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">\"key\"</span>: <span class=\"string\">\"H60-L12__1465352164202__397253_2946\"</span>,</div><div class=\"line\">            <span class=\"string\">\"hash\"</span>: <span class=\"string\">\"Fs-UwiosdckN9kVY01GrOYC-b7a9\"</span>,</div><div class=\"line\">            <span class=\"string\">\"fsize\"</span>: <span class=\"number\">938413</span>,</div><div class=\"line\">            <span class=\"string\">\"mimeType\"</span>: <span class=\"string\">\"image/jpeg\"</span>,</div><div class=\"line\">            <span class=\"string\">\"putTime\"</span>: <span class=\"number\">14653521712332144</span></div><div class=\"line\">        &#125;,</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"string\">\"key\"</span>: <span class=\"string\">\"H60-L12__1465352548728__322577_4114\"</span>,</div><div class=\"line\">            <span class=\"string\">\"hash\"</span>: <span class=\"string\">\"Frga_QiMJVb9caiuwMlJABCsu1rc\"</span>,</div><div class=\"line\">            <span class=\"string\">\"fsize\"</span>: <span class=\"number\">506921</span>,</div><div class=\"line\">            <span class=\"string\">\"mimeType\"</span>: <span class=\"string\">\"image/jpeg\"</span>,</div><div class=\"line\">            <span class=\"string\">\"putTime\"</span>: <span class=\"number\">14653525989907168</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<p>{gson.fromJson(jsonstring, XXXBean.class)XXXBeanitems<br>items[itemslist</p>\n<ul>\n<li></li>\n</ul>\n<p>Gson</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XXXBean</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> List&lt;XXXItem&gt; items;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;XXXItem&gt; <span class=\"title\">getItems</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> items;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setItems</span><span class=\"params\">(List&lt;XXXItem&gt; items)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.items = items;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">XXXItem</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">private</span> String key;</div><div class=\"line\">        <span class=\"keyword\">private</span> String hash;</div><div class=\"line\">        <span class=\"keyword\">private</span> String fsize;</div><div class=\"line\">        <span class=\"keyword\">private</span> String mimeType;</div><div class=\"line\">        <span class=\"keyword\">private</span> String putTime;</div><div class=\"line\"></div><div class=\"line\">        ...</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Gson gson = <span class=\"keyword\">new</span> Gson();</div><div class=\"line\">List&lt;XXXBean.XXXItem&gt; list = gson.fromJson(jsonstring,XXXBean.class).getItems();</div></pre></td></tr></table></figure>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>json[</p>\n<p>json==[{id:1,name:,birthDay:Jun 22, 2012 8:28:52 AM},{id:2,name:,birthDay:Jun 22, 2012 8:28:52 AM},{id:3,name:,birthDay:Jun 22, 2012 8:28:52 AM}]</p>\n<ul>\n<li>list</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">List&lt;Student&gt; retList = gson.fromJson(jsonstring2,  <span class=\"keyword\">new</span> TypeToken&lt;List&lt;Student&gt;&gt;()&#123;&#125;.getType());</div></pre></td></tr></table></figure>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Student[] students= gson.fromJson(jsonstring2,<span class=\"keyword\">new</span> Student[].class);</div></pre></td></tr></table></figure>\n<ul>\n<li><p>listTypeToken</p>\n<p>  TypeTokenGson</p>\n</li>\n</ul>"},{"layout":"post","title":"android","keywords":"qiniu, android","description":"androidlistdeleteuploaddownload","banner":"http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg","_content":"\n\n\n### 1.android\n\n  androidlistdeleteuploaddownload\n\n  **AccessKeySecretKeyjava**\n\n  :)  \n\n<!--more-->\n\n### 2.\n\n\n\n- \n\n~~~ Java\n package com.qiniu.ui.utils;\n\n import android.graphics.Bitmap;\n import android.graphics.Bitmap.CompressFormat;\n import android.os.Environment;\n import android.util.Log;\n import com.loopj.android.http.AsyncHttpClient;\n import com.loopj.android.http.AsyncHttpResponseHandler;\n import com.loopj.android.http.RequestParams;\n import com.qiniu.android.storage.UpProgressHandler;\n import com.qiniu.android.storage.UploadManager;\n import com.qiniu.android.storage.UploadOptions;\n import com.qiniu.android.utils.UrlSafeBase64;\n import com.qiniu.api.auth.AuthException;\n import com.qiniu.api.auth.digest.Mac;\n import com.qiniu.api.rs.PutPolicy;\n import com.qiniu.ui.SHA;\n import com.qiniu.ui.contains.QiNiuConfig;\n import org.apache.http.Header;\n import org.json.JSONException;\n import java.io.BufferedOutputStream;\n import java.io.FileOutputStream;\n import java.util.Random;\n import static com.qiniu.ui.SHA.hMacSHA1Encrypt;\n\n\n /**\n  * @date 2016526 11:00:43\n  * @author lijixin\n  * @web https://agehua.github.io\n  * @Description: \n  */\n public class QiniuUitls {\n\n \tprivate static final String fileName = \"temp.jpg\";\n \tprivate static final String tempJpeg = Environment.getExternalStorageDirectory().getPath() + \"/\" + fileName;\n\n \tprivate static int maxWidth = 720;\n \tprivate static int maxHeight = 1080;\n\n \tpublic interface QiniuUploadUitlsListener {\n \t\tvoid onSucess(String fileUrl);\n \t\tvoid onError(int errorCode, String msg);\n \t\tvoid onProgress(int progress);\n \t}\n\n \tpublic interface QiniuRequestListener {\n \t\tvoid onSucceed(byte[] bytes);\n \t\tvoid onFailed(byte[] bytes);\n \t}\n\n \t/**\n \t * bitmapjpeg720*1080\n \t * @param bitmap\n \t * @param filePath\n \t * @param quality\n \t * @return\n \t */\n \tpublic static boolean saveBitmapToJpegFile(Bitmap bitmap, String filePath, int quality) {\n \t\ttry {\n \t\t\tFileOutputStream fileOutStr = new FileOutputStream(filePath);\n \t\t\tBufferedOutputStream bufOutStr = new BufferedOutputStream(fileOutStr);\n \t\t\tresizeBitmap(bitmap).compress(CompressFormat.JPEG, quality, bufOutStr);\n \t\t\tbufOutStr.flush();\n \t\t\tbufOutStr.close();\n \t\t} catch (Exception exception) {\n \t\t\treturn false;\n \t\t}\n \t\treturn true;\n \t}\n\n \t/**\n \t * \n \t *\n \t * @param bitmap\n \t * @return\n \t */\n \tpublic static Bitmap resizeBitmap(Bitmap bitmap) {\n \t\tif (bitmap != null) {\n \t\t\tint width = bitmap.getWidth();\n \t\t\tint height = bitmap.getHeight();\n \t\t\t//720\n \t\t\tif (width > maxWidth) {\n \t\t\t\t//\n \t\t\t\tint pWidth = maxWidth;\n \t\t\t\tint pHeight = maxWidth * height / width;\n \t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, false);\n \t\t\t\tbitmap.recycle();\n \t\t\t\treturn result;\n \t\t\t}\n \t\t\tif (height > maxHeight) {\n \t\t\t\t//\n \t\t\t\tint pHeight = maxHeight;\n \t\t\t\tint pWidth = maxHeight * width / height;\n \t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, false);\n \t\t\t\tbitmap.recycle();\n \t\t\t\treturn result;\n \t\t\t}\n \t\t}\n \t\treturn bitmap;\n \t}\n\n \tpublic static void uploadImage(Bitmap bitmap, QiniuUploadUitlsListener listener) {\n \t\tsaveBitmapToJpegFile(bitmap, tempJpeg,100);\n \t\tuploadImage(tempJpeg, listener);\n \t}\n\n \t/**\n \t * jpgapijpg\n \t * @param filePath\n \t * @param listener\n \t */\n \tpublic static void uploadImage(String filePath, final QiniuUploadUitlsListener listener) {\n \t\tfinal String fileUrlUUID = getFileUrlUUID();\n \t\tString token = getToken();\n \t\tif (token == null) {\n \t\t\tif (listener != null) {\n \t\t\t\tlistener.onError(-1, \"token is null\");\n \t\t\t}\n \t\t\treturn;\n \t\t}\n \t\tUploadManager uploadManager = new UploadManager();\n \t\tuploadManager.put(filePath, fileUrlUUID, token, (key, info, response) -> {\n \t\t\tSystem.out.println(\"debug:info = \" + info + \",response = \" + response);\n \t\t\tif (info != null && info.statusCode == 200) {// \n \t\t\t\tString fileRealUrl = getRealUrl(fileUrlUUID);\n \t\t\t\tSystem.out.println(\"debug:fileRealUrl = \" + fileRealUrl);\n \t\t\t\tif (listener != null) {\n \t\t\t\t\tlistener.onSucess(fileRealUrl);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tif (listener != null) {\n \t\t\t\t\tlistener.onError(info.statusCode, info.error);\n \t\t\t\t}\n \t\t\t}\n \t\t}, new UploadOptions(null, null, false, new UpProgressHandler() {\n \t\t\tpublic void progress(String key, double percent) {\n \t\t\t\tif (listener != null) {\n \t\t\t\t\tlistener.onProgress((int) (percent * 100));\n \t\t\t\t}\n \t\t\t}\n \t\t}, null));\n \t}\n\n \t/**\n \t * \n \t * <p>\t H60-L12__1464851303930__156750_1884</p>\n \t * @return\n \t */\n \tprivate static String getFileUrlUUID() {\n \t\tString filePath = android.os.Build.MODEL + \"__\" + System.currentTimeMillis() + \"__\" + (new Random().nextInt(500000))\n \t\t\t\t+ \"_\" + (new Random().nextInt(10000));\n \t\treturn filePath.replace(\".\", \"0\");\n \t}\n\n \tprivate static String getRealUrl(String fileUrlUUID) {\n \t\tString filePath = \"http://\" + QiNiuConfig.QINIU_BUCKNAME + \".qiniudn.com/\" + fileUrlUUID;\n \t\treturn filePath;\n \t}\n\n \t/**\n \t * token \n \t *\n \t * @return\n \t */\n \tprivate static String getToken() {\n \t\tMac mac = new Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);\n \t\tPutPolicy putPolicy = new PutPolicy(QiNiuConfig.QINIU_BUCKNAME);\n \t\tputPolicy.returnBody = \"{\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)}\";\n \t\ttry {\n \t\t\tString uptoken = putPolicy.token(mac);\n \t\t\tSystem.out.println(\"debug:uptoken = \" + uptoken);\n \t\t\treturn uptoken;\n \t\t} catch (AuthException e) {\n \t\t\te.printStackTrace();\n \t\t} catch (JSONException e) {\n \t\t\te.printStackTrace();\n \t\t}\n \t\treturn null;\n \t}\n\n \t/**\n \t * hostfileurl\n \t * @param domain host\n \t * @param imgKey file key\n \t * @return url\n \t */\n \tpublic static String downloadFile(String domain,String imgKey){\n \t\t//\n \t\t//\n //\t\tString domain =\"http://example.xxx.clouddn.com/\";\n //\t\tString path =\"H60-L12__1464917382714__36888_5255\";\n \t\tStringBuilder sb =new StringBuilder();\n \t\t//\n \t\tString url = sb.append(domain).append(imgKey).append(\"?e=1478365261\").toString();\n \t\tLog.e(\"encodedEntryURI\",url);\n\n \t\tbyte[] sign =null;\n \t\ttry {\n \t\t\tsign = SHA.hMacSHA1Encrypt(url,QiNiuConfig.QINIU_SK);\n \t\t} catch (Exception e) {\n \t\t\te.printStackTrace();\n \t\t}\n \t\tString encodedSign = UrlSafeBase64.encodeToString(sign);\n \t\tsb.append(\"&token=\").append(QiNiuConfig.QINIU_AK).append(\":\").append(encodedSign);\n \t\tLog.e(\"download token\",sb.toString());\n \t\treturn sb.toString();\n \t}\n\n \t/**\n \t * \n \t * @param bucket \n \t * @param prefix \n \t * @param listener\n \t * @return\n \t */\n \tpublic static void listFile(String bucket, String prefix,final QiniuRequestListener listener){\n\n \t\ttry{\n \t\t\tStringBuilder sb = new StringBuilder();\n\n \t\t\tString entryUrl = sb.append(\"bucket=\").append(bucket)\n \t\t\t\t\t.append(\"&prefix=\").append(prefix).toString();\n \t\t\tString host = \"http://rsf.qbox.me\";\n \t\t\tString path = \"/list?\" +entryUrl;\n \t\t\tString url = host+path;\n \t\t\tLog.e(\"AAAAAAA\", url);\n \t\t\tbyte[] sign = SHA.hMacSHA1Encrypt(path+\"\\n\", QiNiuConfig.QINIU_SK);\n \t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);\n \t\t\tString authorization = QiNiuConfig.QINIU_AK + ':' + encodedSign;\n \t\t\tAsyncHttpClient client = new AsyncHttpClient();\n \t\t\tclient.addHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\n \t\t\tclient.addHeader(\"Authorization\", \"QBox \"+authorization);\n \t\t\tRequestParams params = new RequestParams();\n \t\t\tclient.post(url, params, new AsyncHttpResponseHandler() {\n \t\t\t\t@Override\n \t\t\t\tpublic void onSuccess(int i, Header[] headers, byte[] bytes) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onSucceed(bytes);\n \t\t\t\t}\n\n \t\t\t\t@Override\n \t\t\t\tpublic void onFailure(int i, Header[] headers, byte[] bytes, Throwable throwable) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onFailed(bytes);\n \t\t\t\t}\n \t\t\t});\n \t\t}catch(Exception e){\n \t\t\te.printStackTrace();\n \t\t}\n \t\treturn ;\n \t}\n\n \t/**\n \t * \n \t * @param bucket \n \t * @param fileName \n \t * */\n \tpublic static boolean deleteFile(String bucket,String fileName,final QiniuRequestListener listener){\n \t\ttry{\n \t\t\tString entryUrl = bucket+\":\"+fileName;\n \t\t\tString encodedEntryURI = UrlSafeBase64.encodeToString(entryUrl.getBytes());\n \t\t\tString host = \"http://rs.qiniu.com\";\n \t\t\tString path = \"/delete/\"+encodedEntryURI;\n \t\t\tString url = host+path;\n \t\t\tLog.e(\"AAAAAAA\", url);\n \t\t\tbyte[] sign = hMacSHA1Encrypt(path+\"\\n\", QiNiuConfig.QINIU_SK);\n \t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);\n \t\t\tString authorization = QiNiuConfig.QINIU_AK + ':' + encodedSign;\n\n \t\t\tAsyncHttpClient client = new AsyncHttpClient();\n \t\t\tclient.addHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\n \t\t\tclient.addHeader(\"Authorization\", \"QBox \"+authorization);\n \t\t\tRequestParams params = new RequestParams();\n \t\t\tclient.post(url, params, new AsyncHttpResponseHandler() {\n \t\t\t\t@Override\n \t\t\t\tpublic void onSuccess(int i, Header[] headers, byte[] bytes) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onSucceed(bytes);\n \t\t\t\t}\n\n \t\t\t\t@Override\n \t\t\t\tpublic void onFailure(int i, Header[] headers, byte[] bytes, Throwable throwable) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onFailed(bytes);\n \t\t\t\t\tif (null!=bytes) {\n \t\t\t\t\t\tString s = new String(bytes);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t});\n\n \t\t}catch(Exception e){\n \t\t\te.printStackTrace();\n \t\t}\n \t\treturn false;\n \t}\n\n }\n~~~\n\n- HMAC-SHA1\n\n[](http://developer.qiniu.com/article/developer/security/access-token.html)\n\n~~~ Java\n/**\n * HMAC-SHA1\n * @author agehua\n *\n */\npublic class SHA {\n\n    private static final String MAC_NAME = \"HmacSHA1\";\n    private static final String ENCODING = \"UTF-8\";\n\n    /**\n     *\n     *  HMAC-SHA1 encryptText\n     * @param encryptText \n     * @param encryptKey \n     * @return\n     * @throws Exception\n     */\n    public static byte[] hMacSHA1Encrypt(String encryptText, String encryptKey)\n            throws Exception {\n        byte[] data = encryptKey.getBytes(ENCODING);\n        // ,\n        SecretKey secretKey = new SecretKeySpec(data, MAC_NAME);\n        //  Mac   Mac \n        Mac mac = Mac.getInstance(MAC_NAME);\n        //  Mac \n        mac.init(secretKey);\n        byte[] text = encryptText.getBytes(ENCODING);\n        //  Mac \n        return mac.doFinal(text);\n    }\n}  \n~~~  \n\n- Config\n\n~~~ Java\npublic final class QiNiuConfig {\n\tpublic static final String token = getToken();\n\tpublic static final String QINIU_AK = \"Your_AccessKey\";\n\tpublic static final String QINIU_SK = \"Your_SecretKey\";\n\tpublic static final String QINIU_BUCKNAME = \"\";\n\n\tpublic static String getToken() {\n\t\tMac mac = new Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);\n\t\tPutPolicy putPolicy = new PutPolicy(QiNiuConfig.QINIU_BUCKNAME);\n\t\tputPolicy.returnBody = \"{\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)}\";\n\t\ttry {\n\t\t\tString uptoken = putPolicy.token(mac);\n\t\t\tSystem.out.println(\"debug:uptoken = \" + uptoken);\n\t\t\treturn uptoken;\n\t\t} catch (AuthException e) {\n\t\t\te.printStackTrace();\n\t\t} catch (JSONException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn null;\n\t}\n}\n\n~~~\n\n [Gist](https://gist.github.com/agehua/f73bcb98af2c0c44a4c49c7c7b7e6bda)\n\n :)  \n","source":"_posts/2016-05-28-qiniu-android-summary.md","raw":"---\nlayout: post\ntitle: android\ncategory: technology\ntags: technology\nkeywords: qiniu, android\ndescription: androidlistdeleteuploaddownload\nbanner: http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Avenue%20of%20Plane%20Trees%20near%20Arles%20Station.jpg\n\n---\n\n\n\n### 1.android\n\n  androidlistdeleteuploaddownload\n\n  **AccessKeySecretKeyjava**\n\n  :)  \n\n<!--more-->\n\n### 2.\n\n\n\n- \n\n~~~ Java\n package com.qiniu.ui.utils;\n\n import android.graphics.Bitmap;\n import android.graphics.Bitmap.CompressFormat;\n import android.os.Environment;\n import android.util.Log;\n import com.loopj.android.http.AsyncHttpClient;\n import com.loopj.android.http.AsyncHttpResponseHandler;\n import com.loopj.android.http.RequestParams;\n import com.qiniu.android.storage.UpProgressHandler;\n import com.qiniu.android.storage.UploadManager;\n import com.qiniu.android.storage.UploadOptions;\n import com.qiniu.android.utils.UrlSafeBase64;\n import com.qiniu.api.auth.AuthException;\n import com.qiniu.api.auth.digest.Mac;\n import com.qiniu.api.rs.PutPolicy;\n import com.qiniu.ui.SHA;\n import com.qiniu.ui.contains.QiNiuConfig;\n import org.apache.http.Header;\n import org.json.JSONException;\n import java.io.BufferedOutputStream;\n import java.io.FileOutputStream;\n import java.util.Random;\n import static com.qiniu.ui.SHA.hMacSHA1Encrypt;\n\n\n /**\n  * @date 2016526 11:00:43\n  * @author lijixin\n  * @web https://agehua.github.io\n  * @Description: \n  */\n public class QiniuUitls {\n\n \tprivate static final String fileName = \"temp.jpg\";\n \tprivate static final String tempJpeg = Environment.getExternalStorageDirectory().getPath() + \"/\" + fileName;\n\n \tprivate static int maxWidth = 720;\n \tprivate static int maxHeight = 1080;\n\n \tpublic interface QiniuUploadUitlsListener {\n \t\tvoid onSucess(String fileUrl);\n \t\tvoid onError(int errorCode, String msg);\n \t\tvoid onProgress(int progress);\n \t}\n\n \tpublic interface QiniuRequestListener {\n \t\tvoid onSucceed(byte[] bytes);\n \t\tvoid onFailed(byte[] bytes);\n \t}\n\n \t/**\n \t * bitmapjpeg720*1080\n \t * @param bitmap\n \t * @param filePath\n \t * @param quality\n \t * @return\n \t */\n \tpublic static boolean saveBitmapToJpegFile(Bitmap bitmap, String filePath, int quality) {\n \t\ttry {\n \t\t\tFileOutputStream fileOutStr = new FileOutputStream(filePath);\n \t\t\tBufferedOutputStream bufOutStr = new BufferedOutputStream(fileOutStr);\n \t\t\tresizeBitmap(bitmap).compress(CompressFormat.JPEG, quality, bufOutStr);\n \t\t\tbufOutStr.flush();\n \t\t\tbufOutStr.close();\n \t\t} catch (Exception exception) {\n \t\t\treturn false;\n \t\t}\n \t\treturn true;\n \t}\n\n \t/**\n \t * \n \t *\n \t * @param bitmap\n \t * @return\n \t */\n \tpublic static Bitmap resizeBitmap(Bitmap bitmap) {\n \t\tif (bitmap != null) {\n \t\t\tint width = bitmap.getWidth();\n \t\t\tint height = bitmap.getHeight();\n \t\t\t//720\n \t\t\tif (width > maxWidth) {\n \t\t\t\t//\n \t\t\t\tint pWidth = maxWidth;\n \t\t\t\tint pHeight = maxWidth * height / width;\n \t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, false);\n \t\t\t\tbitmap.recycle();\n \t\t\t\treturn result;\n \t\t\t}\n \t\t\tif (height > maxHeight) {\n \t\t\t\t//\n \t\t\t\tint pHeight = maxHeight;\n \t\t\t\tint pWidth = maxHeight * width / height;\n \t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, false);\n \t\t\t\tbitmap.recycle();\n \t\t\t\treturn result;\n \t\t\t}\n \t\t}\n \t\treturn bitmap;\n \t}\n\n \tpublic static void uploadImage(Bitmap bitmap, QiniuUploadUitlsListener listener) {\n \t\tsaveBitmapToJpegFile(bitmap, tempJpeg,100);\n \t\tuploadImage(tempJpeg, listener);\n \t}\n\n \t/**\n \t * jpgapijpg\n \t * @param filePath\n \t * @param listener\n \t */\n \tpublic static void uploadImage(String filePath, final QiniuUploadUitlsListener listener) {\n \t\tfinal String fileUrlUUID = getFileUrlUUID();\n \t\tString token = getToken();\n \t\tif (token == null) {\n \t\t\tif (listener != null) {\n \t\t\t\tlistener.onError(-1, \"token is null\");\n \t\t\t}\n \t\t\treturn;\n \t\t}\n \t\tUploadManager uploadManager = new UploadManager();\n \t\tuploadManager.put(filePath, fileUrlUUID, token, (key, info, response) -> {\n \t\t\tSystem.out.println(\"debug:info = \" + info + \",response = \" + response);\n \t\t\tif (info != null && info.statusCode == 200) {// \n \t\t\t\tString fileRealUrl = getRealUrl(fileUrlUUID);\n \t\t\t\tSystem.out.println(\"debug:fileRealUrl = \" + fileRealUrl);\n \t\t\t\tif (listener != null) {\n \t\t\t\t\tlistener.onSucess(fileRealUrl);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tif (listener != null) {\n \t\t\t\t\tlistener.onError(info.statusCode, info.error);\n \t\t\t\t}\n \t\t\t}\n \t\t}, new UploadOptions(null, null, false, new UpProgressHandler() {\n \t\t\tpublic void progress(String key, double percent) {\n \t\t\t\tif (listener != null) {\n \t\t\t\t\tlistener.onProgress((int) (percent * 100));\n \t\t\t\t}\n \t\t\t}\n \t\t}, null));\n \t}\n\n \t/**\n \t * \n \t * <p>\t H60-L12__1464851303930__156750_1884</p>\n \t * @return\n \t */\n \tprivate static String getFileUrlUUID() {\n \t\tString filePath = android.os.Build.MODEL + \"__\" + System.currentTimeMillis() + \"__\" + (new Random().nextInt(500000))\n \t\t\t\t+ \"_\" + (new Random().nextInt(10000));\n \t\treturn filePath.replace(\".\", \"0\");\n \t}\n\n \tprivate static String getRealUrl(String fileUrlUUID) {\n \t\tString filePath = \"http://\" + QiNiuConfig.QINIU_BUCKNAME + \".qiniudn.com/\" + fileUrlUUID;\n \t\treturn filePath;\n \t}\n\n \t/**\n \t * token \n \t *\n \t * @return\n \t */\n \tprivate static String getToken() {\n \t\tMac mac = new Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);\n \t\tPutPolicy putPolicy = new PutPolicy(QiNiuConfig.QINIU_BUCKNAME);\n \t\tputPolicy.returnBody = \"{\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)}\";\n \t\ttry {\n \t\t\tString uptoken = putPolicy.token(mac);\n \t\t\tSystem.out.println(\"debug:uptoken = \" + uptoken);\n \t\t\treturn uptoken;\n \t\t} catch (AuthException e) {\n \t\t\te.printStackTrace();\n \t\t} catch (JSONException e) {\n \t\t\te.printStackTrace();\n \t\t}\n \t\treturn null;\n \t}\n\n \t/**\n \t * hostfileurl\n \t * @param domain host\n \t * @param imgKey file key\n \t * @return url\n \t */\n \tpublic static String downloadFile(String domain,String imgKey){\n \t\t//\n \t\t//\n //\t\tString domain =\"http://example.xxx.clouddn.com/\";\n //\t\tString path =\"H60-L12__1464917382714__36888_5255\";\n \t\tStringBuilder sb =new StringBuilder();\n \t\t//\n \t\tString url = sb.append(domain).append(imgKey).append(\"?e=1478365261\").toString();\n \t\tLog.e(\"encodedEntryURI\",url);\n\n \t\tbyte[] sign =null;\n \t\ttry {\n \t\t\tsign = SHA.hMacSHA1Encrypt(url,QiNiuConfig.QINIU_SK);\n \t\t} catch (Exception e) {\n \t\t\te.printStackTrace();\n \t\t}\n \t\tString encodedSign = UrlSafeBase64.encodeToString(sign);\n \t\tsb.append(\"&token=\").append(QiNiuConfig.QINIU_AK).append(\":\").append(encodedSign);\n \t\tLog.e(\"download token\",sb.toString());\n \t\treturn sb.toString();\n \t}\n\n \t/**\n \t * \n \t * @param bucket \n \t * @param prefix \n \t * @param listener\n \t * @return\n \t */\n \tpublic static void listFile(String bucket, String prefix,final QiniuRequestListener listener){\n\n \t\ttry{\n \t\t\tStringBuilder sb = new StringBuilder();\n\n \t\t\tString entryUrl = sb.append(\"bucket=\").append(bucket)\n \t\t\t\t\t.append(\"&prefix=\").append(prefix).toString();\n \t\t\tString host = \"http://rsf.qbox.me\";\n \t\t\tString path = \"/list?\" +entryUrl;\n \t\t\tString url = host+path;\n \t\t\tLog.e(\"AAAAAAA\", url);\n \t\t\tbyte[] sign = SHA.hMacSHA1Encrypt(path+\"\\n\", QiNiuConfig.QINIU_SK);\n \t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);\n \t\t\tString authorization = QiNiuConfig.QINIU_AK + ':' + encodedSign;\n \t\t\tAsyncHttpClient client = new AsyncHttpClient();\n \t\t\tclient.addHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\n \t\t\tclient.addHeader(\"Authorization\", \"QBox \"+authorization);\n \t\t\tRequestParams params = new RequestParams();\n \t\t\tclient.post(url, params, new AsyncHttpResponseHandler() {\n \t\t\t\t@Override\n \t\t\t\tpublic void onSuccess(int i, Header[] headers, byte[] bytes) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onSucceed(bytes);\n \t\t\t\t}\n\n \t\t\t\t@Override\n \t\t\t\tpublic void onFailure(int i, Header[] headers, byte[] bytes, Throwable throwable) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onFailed(bytes);\n \t\t\t\t}\n \t\t\t});\n \t\t}catch(Exception e){\n \t\t\te.printStackTrace();\n \t\t}\n \t\treturn ;\n \t}\n\n \t/**\n \t * \n \t * @param bucket \n \t * @param fileName \n \t * */\n \tpublic static boolean deleteFile(String bucket,String fileName,final QiniuRequestListener listener){\n \t\ttry{\n \t\t\tString entryUrl = bucket+\":\"+fileName;\n \t\t\tString encodedEntryURI = UrlSafeBase64.encodeToString(entryUrl.getBytes());\n \t\t\tString host = \"http://rs.qiniu.com\";\n \t\t\tString path = \"/delete/\"+encodedEntryURI;\n \t\t\tString url = host+path;\n \t\t\tLog.e(\"AAAAAAA\", url);\n \t\t\tbyte[] sign = hMacSHA1Encrypt(path+\"\\n\", QiNiuConfig.QINIU_SK);\n \t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);\n \t\t\tString authorization = QiNiuConfig.QINIU_AK + ':' + encodedSign;\n\n \t\t\tAsyncHttpClient client = new AsyncHttpClient();\n \t\t\tclient.addHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\n \t\t\tclient.addHeader(\"Authorization\", \"QBox \"+authorization);\n \t\t\tRequestParams params = new RequestParams();\n \t\t\tclient.post(url, params, new AsyncHttpResponseHandler() {\n \t\t\t\t@Override\n \t\t\t\tpublic void onSuccess(int i, Header[] headers, byte[] bytes) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onSucceed(bytes);\n \t\t\t\t}\n\n \t\t\t\t@Override\n \t\t\t\tpublic void onFailure(int i, Header[] headers, byte[] bytes, Throwable throwable) {\n \t\t\t\t\tif (null!=listener)\n \t\t\t\t\t\tlistener.onFailed(bytes);\n \t\t\t\t\tif (null!=bytes) {\n \t\t\t\t\t\tString s = new String(bytes);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t});\n\n \t\t}catch(Exception e){\n \t\t\te.printStackTrace();\n \t\t}\n \t\treturn false;\n \t}\n\n }\n~~~\n\n- HMAC-SHA1\n\n[](http://developer.qiniu.com/article/developer/security/access-token.html)\n\n~~~ Java\n/**\n * HMAC-SHA1\n * @author agehua\n *\n */\npublic class SHA {\n\n    private static final String MAC_NAME = \"HmacSHA1\";\n    private static final String ENCODING = \"UTF-8\";\n\n    /**\n     *\n     *  HMAC-SHA1 encryptText\n     * @param encryptText \n     * @param encryptKey \n     * @return\n     * @throws Exception\n     */\n    public static byte[] hMacSHA1Encrypt(String encryptText, String encryptKey)\n            throws Exception {\n        byte[] data = encryptKey.getBytes(ENCODING);\n        // ,\n        SecretKey secretKey = new SecretKeySpec(data, MAC_NAME);\n        //  Mac   Mac \n        Mac mac = Mac.getInstance(MAC_NAME);\n        //  Mac \n        mac.init(secretKey);\n        byte[] text = encryptText.getBytes(ENCODING);\n        //  Mac \n        return mac.doFinal(text);\n    }\n}  \n~~~  \n\n- Config\n\n~~~ Java\npublic final class QiNiuConfig {\n\tpublic static final String token = getToken();\n\tpublic static final String QINIU_AK = \"Your_AccessKey\";\n\tpublic static final String QINIU_SK = \"Your_SecretKey\";\n\tpublic static final String QINIU_BUCKNAME = \"\";\n\n\tpublic static String getToken() {\n\t\tMac mac = new Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);\n\t\tPutPolicy putPolicy = new PutPolicy(QiNiuConfig.QINIU_BUCKNAME);\n\t\tputPolicy.returnBody = \"{\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)}\";\n\t\ttry {\n\t\t\tString uptoken = putPolicy.token(mac);\n\t\t\tSystem.out.println(\"debug:uptoken = \" + uptoken);\n\t\t\treturn uptoken;\n\t\t} catch (AuthException e) {\n\t\t\te.printStackTrace();\n\t\t} catch (JSONException e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn null;\n\t}\n}\n\n~~~\n\n [Gist](https://gist.github.com/agehua/f73bcb98af2c0c44a4c49c7c7b7e6bda)\n\n :)  \n","slug":"qiniu-android-summary","published":1,"date":"2016-05-27T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4x000zbxs6vij8wit7","content":"<h3 id=\"1-android\"><a href=\"#1-android\" class=\"headerlink\" title=\"1.android\"></a>1.android</h3><p>  androidlistdeleteuploaddownload</p>\n<p>  <strong>AccessKeySecretKeyjava</strong></p>\n<p>  :)  </p>\n<a id=\"more\"></a>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><p></p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> com.qiniu.ui.utils;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap.CompressFormat;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Environment;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.Log;</div><div class=\"line\"><span class=\"keyword\">import</span> com.loopj.android.http.AsyncHttpClient;</div><div class=\"line\"><span class=\"keyword\">import</span> com.loopj.android.http.AsyncHttpResponseHandler;</div><div class=\"line\"><span class=\"keyword\">import</span> com.loopj.android.http.RequestParams;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.storage.UpProgressHandler;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.storage.UploadManager;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.storage.UploadOptions;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.utils.UrlSafeBase64;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.api.auth.AuthException;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.api.auth.digest.Mac;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.api.rs.PutPolicy;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.ui.SHA;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.ui.contains.QiNiuConfig;</div><div class=\"line\"><span class=\"keyword\">import</span> org.apache.http.Header;</div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedOutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</div><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.qiniu.ui.SHA.hMacSHA1Encrypt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2016526 11:00:43</div><div class=\"line\"> * <span class=\"doctag\">@author</span> lijixin</div><div class=\"line\"> * <span class=\"doctag\">@web</span> https://agehua.github.io</div><div class=\"line\"> * <span class=\"doctag\">@Description</span>: </div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QiniuUitls</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String fileName = <span class=\"string\">\"temp.jpg\"</span>;</div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String tempJpeg = Environment.getExternalStorageDirectory().getPath() + <span class=\"string\">\"/\"</span> + fileName;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> maxWidth = <span class=\"number\">720</span>;</div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> maxHeight = <span class=\"number\">1080</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">QiniuUploadUitlsListener</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSucess</span><span class=\"params\">(String fileUrl)</span></span>;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(<span class=\"keyword\">int</span> errorCode, String msg)</span></span>;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> progress)</span></span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">QiniuRequestListener</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSucceed</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] bytes)</span></span>;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onFailed</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] bytes)</span></span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * bitmapjpeg720*1080</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bitmap</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> filePath</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> quality</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveBitmapToJpegFile</span><span class=\"params\">(Bitmap bitmap, String filePath, <span class=\"keyword\">int</span> quality)</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tFileOutputStream fileOutStr = <span class=\"keyword\">new</span> FileOutputStream(filePath);</div><div class=\"line\">\t\t\tBufferedOutputStream bufOutStr = <span class=\"keyword\">new</span> BufferedOutputStream(fileOutStr);</div><div class=\"line\">\t\t\tresizeBitmap(bitmap).compress(CompressFormat.JPEG, quality, bufOutStr);</div><div class=\"line\">\t\t\tbufOutStr.flush();</div><div class=\"line\">\t\t\tbufOutStr.close();</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception exception) &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * </div><div class=\"line\">\t *</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bitmap</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Bitmap <span class=\"title\">resizeBitmap</span><span class=\"params\">(Bitmap bitmap)</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">int</span> width = bitmap.getWidth();</div><div class=\"line\">\t\t\t<span class=\"keyword\">int</span> height = bitmap.getHeight();</div><div class=\"line\">\t\t\t<span class=\"comment\">//720</span></div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (width &gt; maxWidth) &#123;</div><div class=\"line\">\t\t\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pWidth = maxWidth;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pHeight = maxWidth * height / width;</div><div class=\"line\">\t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, <span class=\"keyword\">false</span>);</div><div class=\"line\">\t\t\t\tbitmap.recycle();</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> result;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (height &gt; maxHeight) &#123;</div><div class=\"line\">\t\t\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pHeight = maxHeight;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pWidth = maxHeight * width / height;</div><div class=\"line\">\t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, <span class=\"keyword\">false</span>);</div><div class=\"line\">\t\t\t\tbitmap.recycle();</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> result;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> bitmap;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">uploadImage</span><span class=\"params\">(Bitmap bitmap, QiniuUploadUitlsListener listener)</span> </span>&#123;</div><div class=\"line\">\t\tsaveBitmapToJpegFile(bitmap, tempJpeg,<span class=\"number\">100</span>);</div><div class=\"line\">\t\tuploadImage(tempJpeg, listener);</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * jpgapijpg</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> filePath</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> listener</div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">uploadImage</span><span class=\"params\">(String filePath, <span class=\"keyword\">final</span> QiniuUploadUitlsListener listener)</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">final</span> String fileUrlUUID = getFileUrlUUID();</div><div class=\"line\">\t\tString token = getToken();</div><div class=\"line\">\t\t<span class=\"keyword\">if</span> (token == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\tlistener.onError(-<span class=\"number\">1</span>, <span class=\"string\">\"token is null\"</span>);</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span>;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\tUploadManager uploadManager = <span class=\"keyword\">new</span> UploadManager();</div><div class=\"line\">\t\tuploadManager.put(filePath, fileUrlUUID, token, (key, info, response) -&gt; &#123;</div><div class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"debug:info = \"</span> + info + <span class=\"string\">\",response = \"</span> + response);</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (info != <span class=\"keyword\">null</span> &amp;&amp; info.statusCode == <span class=\"number\">200</span>) &#123;<span class=\"comment\">// </span></div><div class=\"line\">\t\t\t\tString fileRealUrl = getRealUrl(fileUrlUUID);</div><div class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">\"debug:fileRealUrl = \"</span> + fileRealUrl);</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\t\tlistener.onSucess(fileRealUrl);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\t\tlistener.onError(info.statusCode, info.error);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;, <span class=\"keyword\">new</span> UploadOptions(<span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">false</span>, <span class=\"keyword\">new</span> UpProgressHandler() &#123;</div><div class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">progress</span><span class=\"params\">(String key, <span class=\"keyword\">double</span> percent)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\t\tlistener.onProgress((<span class=\"keyword\">int</span>) (percent * <span class=\"number\">100</span>));</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;, <span class=\"keyword\">null</span>));</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * </div><div class=\"line\">\t * &lt;p&gt;\t H60-L12__1464851303930__156750_1884&lt;/p&gt;</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getFileUrlUUID</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tString filePath = android.os.Build.MODEL + <span class=\"string\">\"__\"</span> + System.currentTimeMillis() + <span class=\"string\">\"__\"</span> + (<span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">500000</span>))</div><div class=\"line\">\t\t\t\t+ <span class=\"string\">\"_\"</span> + (<span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">10000</span>));</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> filePath.replace(<span class=\"string\">\".\"</span>, <span class=\"string\">\"0\"</span>);</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getRealUrl</span><span class=\"params\">(String fileUrlUUID)</span> </span>&#123;</div><div class=\"line\">\t\tString filePath = <span class=\"string\">\"http://\"</span> + QiNiuConfig.QINIU_BUCKNAME + <span class=\"string\">\".qiniudn.com/\"</span> + fileUrlUUID;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> filePath;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * token </div><div class=\"line\">\t *</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getToken</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tMac mac = <span class=\"keyword\">new</span> Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\tPutPolicy putPolicy = <span class=\"keyword\">new</span> PutPolicy(QiNiuConfig.QINIU_BUCKNAME);</div><div class=\"line\">\t\tputPolicy.returnBody = <span class=\"string\">\"&#123;\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)&#125;\"</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tString uptoken = putPolicy.token(mac);</div><div class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"debug:uptoken = \"</span> + uptoken);</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> uptoken;</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (AuthException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * hostfileurl</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> domain host</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> imgKey file key</div><div class=\"line\">\t * <span class=\"doctag\">@return</span> url</div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">downloadFile</span><span class=\"params\">(String domain,String imgKey)</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">//\t\tString domain =\"http://example.xxx.clouddn.com/\";</span></div><div class=\"line\"><span class=\"comment\">//\t\tString path =\"H60-L12__1464917382714__36888_5255\";</span></div><div class=\"line\">\t\tStringBuilder sb =<span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\tString url = sb.append(domain).append(imgKey).append(<span class=\"string\">\"?e=1478365261\"</span>).toString();</div><div class=\"line\">\t\tLog.e(<span class=\"string\">\"encodedEntryURI\"</span>,url);</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">byte</span>[] sign =<span class=\"keyword\">null</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tsign = SHA.hMacSHA1Encrypt(url,QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);</div><div class=\"line\">\t\tsb.append(<span class=\"string\">\"&amp;token=\"</span>).append(QiNiuConfig.QINIU_AK).append(<span class=\"string\">\":\"</span>).append(encodedSign);</div><div class=\"line\">\t\tLog.e(<span class=\"string\">\"download token\"</span>,sb.toString());</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> sb.toString();</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bucket </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> prefix </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> listener</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">listFile</span><span class=\"params\">(String bucket, String prefix,<span class=\"keyword\">final</span> QiniuRequestListener listener)</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">try</span>&#123;</div><div class=\"line\">\t\t\tStringBuilder sb = <span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\"></div><div class=\"line\">\t\t\tString entryUrl = sb.append(<span class=\"string\">\"bucket=\"</span>).append(bucket)</div><div class=\"line\">\t\t\t\t\t.append(<span class=\"string\">\"&amp;prefix=\"</span>).append(prefix).toString();</div><div class=\"line\">\t\t\tString host = <span class=\"string\">\"http://rsf.qbox.me\"</span>;</div><div class=\"line\">\t\t\tString path = <span class=\"string\">\"/list?\"</span> +entryUrl;</div><div class=\"line\">\t\t\tString url = host+path;</div><div class=\"line\">\t\t\tLog.e(<span class=\"string\">\"AAAAAAA\"</span>, url);</div><div class=\"line\">\t\t\t<span class=\"keyword\">byte</span>[] sign = SHA.hMacSHA1Encrypt(path+<span class=\"string\">\"\\n\"</span>, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);</div><div class=\"line\">\t\t\tString authorization = QiNiuConfig.QINIU_AK + <span class=\"string\">':'</span> + encodedSign;</div><div class=\"line\">\t\t\tAsyncHttpClient client = <span class=\"keyword\">new</span> AsyncHttpClient();</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Content-Type\"</span>,<span class=\"string\">\"application/x-www-form-urlencoded\"</span>);</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Authorization\"</span>, <span class=\"string\">\"QBox \"</span>+authorization);</div><div class=\"line\">\t\t\tRequestParams params = <span class=\"keyword\">new</span> RequestParams();</div><div class=\"line\">\t\t\tclient.post(url, params, <span class=\"keyword\">new</span> AsyncHttpResponseHandler() &#123;</div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onSucceed(bytes);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes, Throwable throwable)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onFailed(bytes);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;);</div><div class=\"line\">\t\t&#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> ;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</span></div><div class=\"line\">\t * </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bucket </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> fileName </div><div class=\"line\">\t * */</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">deleteFile</span><span class=\"params\">(String bucket,String fileName,<span class=\"keyword\">final</span> QiniuRequestListener listener)</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span>&#123;</div><div class=\"line\">\t\t\tString entryUrl = bucket+<span class=\"string\">\":\"</span>+fileName;</div><div class=\"line\">\t\t\tString encodedEntryURI = UrlSafeBase64.encodeToString(entryUrl.getBytes());</div><div class=\"line\">\t\t\tString host = <span class=\"string\">\"http://rs.qiniu.com\"</span>;</div><div class=\"line\">\t\t\tString path = <span class=\"string\">\"/delete/\"</span>+encodedEntryURI;</div><div class=\"line\">\t\t\tString url = host+path;</div><div class=\"line\">\t\t\tLog.e(<span class=\"string\">\"AAAAAAA\"</span>, url);</div><div class=\"line\">\t\t\t<span class=\"keyword\">byte</span>[] sign = hMacSHA1Encrypt(path+<span class=\"string\">\"\\n\"</span>, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);</div><div class=\"line\">\t\t\tString authorization = QiNiuConfig.QINIU_AK + <span class=\"string\">':'</span> + encodedSign;</div><div class=\"line\"></div><div class=\"line\">\t\t\tAsyncHttpClient client = <span class=\"keyword\">new</span> AsyncHttpClient();</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Content-Type\"</span>,<span class=\"string\">\"application/x-www-form-urlencoded\"</span>);</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Authorization\"</span>, <span class=\"string\">\"QBox \"</span>+authorization);</div><div class=\"line\">\t\t\tRequestParams params = <span class=\"keyword\">new</span> RequestParams();</div><div class=\"line\">\t\t\tclient.post(url, params, <span class=\"keyword\">new</span> AsyncHttpResponseHandler() &#123;</div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onSucceed(bytes);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes, Throwable throwable)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onFailed(bytes);</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=bytes) &#123;</div><div class=\"line\">\t\t\t\t\t\tString s = <span class=\"keyword\">new</span> String(bytes);</div><div class=\"line\">\t\t\t\t\t&#125;</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;);</div><div class=\"line\"></div><div class=\"line\">\t\t&#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>HMAC-SHA1</li>\n</ul>\n<p><a href=\"http://developer.qiniu.com/article/developer/security/access-token.html\" target=\"_blank\" rel=\"external\"></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * HMAC-SHA1</div><div class=\"line\"> * <span class=\"doctag\">@author</span> agehua</div><div class=\"line\"> *</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SHA</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String MAC_NAME = <span class=\"string\">\"HmacSHA1\"</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String ENCODING = <span class=\"string\">\"UTF-8\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     *</div><div class=\"line\">     *  HMAC-SHA1 encryptText</div><div class=\"line\">     * <span class=\"doctag\">@param</span> encryptText </div><div class=\"line\">     * <span class=\"doctag\">@param</span> encryptKey </div><div class=\"line\">     * <span class=\"doctag\">@return</span></div><div class=\"line\">     * <span class=\"doctag\">@throws</span> Exception</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">byte</span>[] hMacSHA1Encrypt(String encryptText, String encryptKey)</div><div class=\"line\">            <span class=\"keyword\">throws</span> Exception &#123;</div><div class=\"line\">        <span class=\"keyword\">byte</span>[] data = encryptKey.getBytes(ENCODING);</div><div class=\"line\">        <span class=\"comment\">// ,</span></div><div class=\"line\">        SecretKey secretKey = <span class=\"keyword\">new</span> SecretKeySpec(data, MAC_NAME);</div><div class=\"line\">        <span class=\"comment\">//  Mac   Mac </span></div><div class=\"line\">        Mac mac = Mac.getInstance(MAC_NAME);</div><div class=\"line\">        <span class=\"comment\">//  Mac </span></div><div class=\"line\">        mac.init(secretKey);</div><div class=\"line\">        <span class=\"keyword\">byte</span>[] text = encryptText.getBytes(ENCODING);</div><div class=\"line\">        <span class=\"comment\">//  Mac </span></div><div class=\"line\">        <span class=\"keyword\">return</span> mac.doFinal(text);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;  </div><div class=\"line\">~~~  </div><div class=\"line\"></div><div class=\"line\">- Config</div><div class=\"line\"></div><div class=\"line\">~~~ Java</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QiNiuConfig</span> </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String token = getToken();</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QINIU_AK = <span class=\"string\">\"Your_AccessKey\"</span>;</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QINIU_SK = <span class=\"string\">\"Your_SecretKey\"</span>;</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QINIU_BUCKNAME = <span class=\"string\">\"\"</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getToken</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tMac mac = <span class=\"keyword\">new</span> Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\tPutPolicy putPolicy = <span class=\"keyword\">new</span> PutPolicy(QiNiuConfig.QINIU_BUCKNAME);</div><div class=\"line\">\t\tputPolicy.returnBody = <span class=\"string\">\"&#123;\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)&#125;\"</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tString uptoken = putPolicy.token(mac);</div><div class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"debug:uptoken = \"</span> + uptoken);</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> uptoken;</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (AuthException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> <a href=\"https://gist.github.com/agehua/f73bcb98af2c0c44a4c49c7c7b7e6bda\" target=\"_blank\" rel=\"external\">Gist</a></p>\n<p> :)  </p>\n","excerpt":"<h3 id=\"1-android\"><a href=\"#1-android\" class=\"headerlink\" title=\"1.android\"></a>1.android</h3><p>  androidlistdeleteuploaddownload</p>\n<p>  <strong>AccessKeySecretKeyjava</strong></p>\n<p>  :)  </p>","more":"<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><p></p>\n<ul>\n<li></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> com.qiniu.ui.utils;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap.CompressFormat;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Environment;</div><div class=\"line\"><span class=\"keyword\">import</span> android.util.Log;</div><div class=\"line\"><span class=\"keyword\">import</span> com.loopj.android.http.AsyncHttpClient;</div><div class=\"line\"><span class=\"keyword\">import</span> com.loopj.android.http.AsyncHttpResponseHandler;</div><div class=\"line\"><span class=\"keyword\">import</span> com.loopj.android.http.RequestParams;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.storage.UpProgressHandler;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.storage.UploadManager;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.storage.UploadOptions;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.android.utils.UrlSafeBase64;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.api.auth.AuthException;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.api.auth.digest.Mac;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.api.rs.PutPolicy;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.ui.SHA;</div><div class=\"line\"><span class=\"keyword\">import</span> com.qiniu.ui.contains.QiNiuConfig;</div><div class=\"line\"><span class=\"keyword\">import</span> org.apache.http.Header;</div><div class=\"line\"><span class=\"keyword\">import</span> org.json.JSONException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.BufferedOutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</div><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">static</span> com.qiniu.ui.SHA.hMacSHA1Encrypt;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2016526 11:00:43</div><div class=\"line\"> * <span class=\"doctag\">@author</span> lijixin</div><div class=\"line\"> * <span class=\"doctag\">@web</span> https://agehua.github.io</div><div class=\"line\"> * <span class=\"doctag\">@Description</span>: </div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QiniuUitls</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String fileName = <span class=\"string\">\"temp.jpg\"</span>;</div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String tempJpeg = Environment.getExternalStorageDirectory().getPath() + <span class=\"string\">\"/\"</span> + fileName;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> maxWidth = <span class=\"number\">720</span>;</div><div class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> maxHeight = <span class=\"number\">1080</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">QiniuUploadUitlsListener</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSucess</span><span class=\"params\">(String fileUrl)</span></span>;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(<span class=\"keyword\">int</span> errorCode, String msg)</span></span>;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onProgress</span><span class=\"params\">(<span class=\"keyword\">int</span> progress)</span></span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">QiniuRequestListener</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSucceed</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] bytes)</span></span>;</div><div class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onFailed</span><span class=\"params\">(<span class=\"keyword\">byte</span>[] bytes)</span></span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * bitmapjpeg720*1080</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bitmap</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> filePath</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> quality</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">saveBitmapToJpegFile</span><span class=\"params\">(Bitmap bitmap, String filePath, <span class=\"keyword\">int</span> quality)</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tFileOutputStream fileOutStr = <span class=\"keyword\">new</span> FileOutputStream(filePath);</div><div class=\"line\">\t\t\tBufferedOutputStream bufOutStr = <span class=\"keyword\">new</span> BufferedOutputStream(fileOutStr);</div><div class=\"line\">\t\t\tresizeBitmap(bitmap).compress(CompressFormat.JPEG, quality, bufOutStr);</div><div class=\"line\">\t\t\tbufOutStr.flush();</div><div class=\"line\">\t\t\tbufOutStr.close();</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception exception) &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * </div><div class=\"line\">\t *</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bitmap</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Bitmap <span class=\"title\">resizeBitmap</span><span class=\"params\">(Bitmap bitmap)</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">int</span> width = bitmap.getWidth();</div><div class=\"line\">\t\t\t<span class=\"keyword\">int</span> height = bitmap.getHeight();</div><div class=\"line\">\t\t\t<span class=\"comment\">//720</span></div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (width &gt; maxWidth) &#123;</div><div class=\"line\">\t\t\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pWidth = maxWidth;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pHeight = maxWidth * height / width;</div><div class=\"line\">\t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, <span class=\"keyword\">false</span>);</div><div class=\"line\">\t\t\t\tbitmap.recycle();</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> result;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (height &gt; maxHeight) &#123;</div><div class=\"line\">\t\t\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pHeight = maxHeight;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> pWidth = maxHeight * width / height;</div><div class=\"line\">\t\t\t\tBitmap result = Bitmap.createScaledBitmap(bitmap, pWidth, pHeight, <span class=\"keyword\">false</span>);</div><div class=\"line\">\t\t\t\tbitmap.recycle();</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> result;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> bitmap;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">uploadImage</span><span class=\"params\">(Bitmap bitmap, QiniuUploadUitlsListener listener)</span> </span>&#123;</div><div class=\"line\">\t\tsaveBitmapToJpegFile(bitmap, tempJpeg,<span class=\"number\">100</span>);</div><div class=\"line\">\t\tuploadImage(tempJpeg, listener);</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * jpgapijpg</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> filePath</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> listener</div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">uploadImage</span><span class=\"params\">(String filePath, <span class=\"keyword\">final</span> QiniuUploadUitlsListener listener)</span> </span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">final</span> String fileUrlUUID = getFileUrlUUID();</div><div class=\"line\">\t\tString token = getToken();</div><div class=\"line\">\t\t<span class=\"keyword\">if</span> (token == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\tlistener.onError(-<span class=\"number\">1</span>, <span class=\"string\">\"token is null\"</span>);</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span>;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\tUploadManager uploadManager = <span class=\"keyword\">new</span> UploadManager();</div><div class=\"line\">\t\tuploadManager.put(filePath, fileUrlUUID, token, (key, info, response) -&gt; &#123;</div><div class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"debug:info = \"</span> + info + <span class=\"string\">\",response = \"</span> + response);</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span> (info != <span class=\"keyword\">null</span> &amp;&amp; info.statusCode == <span class=\"number\">200</span>) &#123;<span class=\"comment\">// </span></div><div class=\"line\">\t\t\t\tString fileRealUrl = getRealUrl(fileUrlUUID);</div><div class=\"line\">\t\t\t\tSystem.out.println(<span class=\"string\">\"debug:fileRealUrl = \"</span> + fileRealUrl);</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\t\tlistener.onSucess(fileRealUrl);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\t\tlistener.onError(info.statusCode, info.error);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;, <span class=\"keyword\">new</span> UploadOptions(<span class=\"keyword\">null</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">false</span>, <span class=\"keyword\">new</span> UpProgressHandler() &#123;</div><div class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">progress</span><span class=\"params\">(String key, <span class=\"keyword\">double</span> percent)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (listener != <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">\t\t\t\t\tlistener.onProgress((<span class=\"keyword\">int</span>) (percent * <span class=\"number\">100</span>));</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;, <span class=\"keyword\">null</span>));</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * </div><div class=\"line\">\t * &lt;p&gt;\t H60-L12__1464851303930__156750_1884&lt;/p&gt;</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getFileUrlUUID</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tString filePath = android.os.Build.MODEL + <span class=\"string\">\"__\"</span> + System.currentTimeMillis() + <span class=\"string\">\"__\"</span> + (<span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">500000</span>))</div><div class=\"line\">\t\t\t\t+ <span class=\"string\">\"_\"</span> + (<span class=\"keyword\">new</span> Random().nextInt(<span class=\"number\">10000</span>));</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> filePath.replace(<span class=\"string\">\".\"</span>, <span class=\"string\">\"0\"</span>);</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getRealUrl</span><span class=\"params\">(String fileUrlUUID)</span> </span>&#123;</div><div class=\"line\">\t\tString filePath = <span class=\"string\">\"http://\"</span> + QiNiuConfig.QINIU_BUCKNAME + <span class=\"string\">\".qiniudn.com/\"</span> + fileUrlUUID;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> filePath;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * token </div><div class=\"line\">\t *</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String <span class=\"title\">getToken</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tMac mac = <span class=\"keyword\">new</span> Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\tPutPolicy putPolicy = <span class=\"keyword\">new</span> PutPolicy(QiNiuConfig.QINIU_BUCKNAME);</div><div class=\"line\">\t\tputPolicy.returnBody = <span class=\"string\">\"&#123;\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)&#125;\"</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tString uptoken = putPolicy.token(mac);</div><div class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"debug:uptoken = \"</span> + uptoken);</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> uptoken;</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (AuthException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * hostfileurl</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> domain host</div><div class=\"line\">\t * <span class=\"doctag\">@param</span> imgKey file key</div><div class=\"line\">\t * <span class=\"doctag\">@return</span> url</div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">downloadFile</span><span class=\"params\">(String domain,String imgKey)</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\"><span class=\"comment\">//\t\tString domain =\"http://example.xxx.clouddn.com/\";</span></div><div class=\"line\"><span class=\"comment\">//\t\tString path =\"H60-L12__1464917382714__36888_5255\";</span></div><div class=\"line\">\t\tStringBuilder sb =<span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\">\t\tString url = sb.append(domain).append(imgKey).append(<span class=\"string\">\"?e=1478365261\"</span>).toString();</div><div class=\"line\">\t\tLog.e(<span class=\"string\">\"encodedEntryURI\"</span>,url);</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">byte</span>[] sign =<span class=\"keyword\">null</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tsign = SHA.hMacSHA1Encrypt(url,QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);</div><div class=\"line\">\t\tsb.append(<span class=\"string\">\"&amp;token=\"</span>).append(QiNiuConfig.QINIU_AK).append(<span class=\"string\">\":\"</span>).append(encodedSign);</div><div class=\"line\">\t\tLog.e(<span class=\"string\">\"download token\"</span>,sb.toString());</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> sb.toString();</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bucket </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> prefix </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> listener</div><div class=\"line\">\t * <span class=\"doctag\">@return</span></div><div class=\"line\">\t */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">listFile</span><span class=\"params\">(String bucket, String prefix,<span class=\"keyword\">final</span> QiniuRequestListener listener)</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">\t\t<span class=\"keyword\">try</span>&#123;</div><div class=\"line\">\t\t\tStringBuilder sb = <span class=\"keyword\">new</span> StringBuilder();</div><div class=\"line\"></div><div class=\"line\">\t\t\tString entryUrl = sb.append(<span class=\"string\">\"bucket=\"</span>).append(bucket)</div><div class=\"line\">\t\t\t\t\t.append(<span class=\"string\">\"&amp;prefix=\"</span>).append(prefix).toString();</div><div class=\"line\">\t\t\tString host = <span class=\"string\">\"http://rsf.qbox.me\"</span>;</div><div class=\"line\">\t\t\tString path = <span class=\"string\">\"/list?\"</span> +entryUrl;</div><div class=\"line\">\t\t\tString url = host+path;</div><div class=\"line\">\t\t\tLog.e(<span class=\"string\">\"AAAAAAA\"</span>, url);</div><div class=\"line\">\t\t\t<span class=\"keyword\">byte</span>[] sign = SHA.hMacSHA1Encrypt(path+<span class=\"string\">\"\\n\"</span>, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);</div><div class=\"line\">\t\t\tString authorization = QiNiuConfig.QINIU_AK + <span class=\"string\">':'</span> + encodedSign;</div><div class=\"line\">\t\t\tAsyncHttpClient client = <span class=\"keyword\">new</span> AsyncHttpClient();</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Content-Type\"</span>,<span class=\"string\">\"application/x-www-form-urlencoded\"</span>);</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Authorization\"</span>, <span class=\"string\">\"QBox \"</span>+authorization);</div><div class=\"line\">\t\t\tRequestParams params = <span class=\"keyword\">new</span> RequestParams();</div><div class=\"line\">\t\t\tclient.post(url, params, <span class=\"keyword\">new</span> AsyncHttpResponseHandler() &#123;</div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onSucceed(bytes);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes, Throwable throwable)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onFailed(bytes);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;);</div><div class=\"line\">\t\t&#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> ;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"comment\">/**</div><div class=\"line\">\t * </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> bucket </div><div class=\"line\">\t * <span class=\"doctag\">@param</span> fileName </div><div class=\"line\">\t * */</span></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">deleteFile</span><span class=\"params\">(String bucket,String fileName,<span class=\"keyword\">final</span> QiniuRequestListener listener)</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span>&#123;</div><div class=\"line\">\t\t\tString entryUrl = bucket+<span class=\"string\">\":\"</span>+fileName;</div><div class=\"line\">\t\t\tString encodedEntryURI = UrlSafeBase64.encodeToString(entryUrl.getBytes());</div><div class=\"line\">\t\t\tString host = <span class=\"string\">\"http://rs.qiniu.com\"</span>;</div><div class=\"line\">\t\t\tString path = <span class=\"string\">\"/delete/\"</span>+encodedEntryURI;</div><div class=\"line\">\t\t\tString url = host+path;</div><div class=\"line\">\t\t\tLog.e(<span class=\"string\">\"AAAAAAA\"</span>, url);</div><div class=\"line\">\t\t\t<span class=\"keyword\">byte</span>[] sign = hMacSHA1Encrypt(path+<span class=\"string\">\"\\n\"</span>, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\t\tString encodedSign = UrlSafeBase64.encodeToString(sign);</div><div class=\"line\">\t\t\tString authorization = QiNiuConfig.QINIU_AK + <span class=\"string\">':'</span> + encodedSign;</div><div class=\"line\"></div><div class=\"line\">\t\t\tAsyncHttpClient client = <span class=\"keyword\">new</span> AsyncHttpClient();</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Content-Type\"</span>,<span class=\"string\">\"application/x-www-form-urlencoded\"</span>);</div><div class=\"line\">\t\t\tclient.addHeader(<span class=\"string\">\"Authorization\"</span>, <span class=\"string\">\"QBox \"</span>+authorization);</div><div class=\"line\">\t\t\tRequestParams params = <span class=\"keyword\">new</span> RequestParams();</div><div class=\"line\">\t\t\tclient.post(url, params, <span class=\"keyword\">new</span> AsyncHttpResponseHandler() &#123;</div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onSucceed(bytes);</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t\t\t\t<span class=\"meta\">@Override</span></div><div class=\"line\">\t\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(<span class=\"keyword\">int</span> i, Header[] headers, <span class=\"keyword\">byte</span>[] bytes, Throwable throwable)</span> </span>&#123;</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=listener)</div><div class=\"line\">\t\t\t\t\t\tlistener.onFailed(bytes);</div><div class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=bytes) &#123;</div><div class=\"line\">\t\t\t\t\t\tString s = <span class=\"keyword\">new</span> String(bytes);</div><div class=\"line\">\t\t\t\t\t&#125;</div><div class=\"line\">\t\t\t\t&#125;</div><div class=\"line\">\t\t\t&#125;);</div><div class=\"line\"></div><div class=\"line\">\t\t&#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<ul>\n<li>HMAC-SHA1</li>\n</ul>\n<p><a href=\"http://developer.qiniu.com/article/developer/security/access-token.html\"></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * HMAC-SHA1</div><div class=\"line\"> * <span class=\"doctag\">@author</span> agehua</div><div class=\"line\"> *</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SHA</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String MAC_NAME = <span class=\"string\">\"HmacSHA1\"</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String ENCODING = <span class=\"string\">\"UTF-8\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     *</div><div class=\"line\">     *  HMAC-SHA1 encryptText</div><div class=\"line\">     * <span class=\"doctag\">@param</span> encryptText </div><div class=\"line\">     * <span class=\"doctag\">@param</span> encryptKey </div><div class=\"line\">     * <span class=\"doctag\">@return</span></div><div class=\"line\">     * <span class=\"doctag\">@throws</span> Exception</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">byte</span>[] hMacSHA1Encrypt(String encryptText, String encryptKey)</div><div class=\"line\">            <span class=\"keyword\">throws</span> Exception &#123;</div><div class=\"line\">        <span class=\"keyword\">byte</span>[] data = encryptKey.getBytes(ENCODING);</div><div class=\"line\">        <span class=\"comment\">// ,</span></div><div class=\"line\">        SecretKey secretKey = <span class=\"keyword\">new</span> SecretKeySpec(data, MAC_NAME);</div><div class=\"line\">        <span class=\"comment\">//  Mac   Mac </span></div><div class=\"line\">        Mac mac = Mac.getInstance(MAC_NAME);</div><div class=\"line\">        <span class=\"comment\">//  Mac </span></div><div class=\"line\">        mac.init(secretKey);</div><div class=\"line\">        <span class=\"keyword\">byte</span>[] text = encryptText.getBytes(ENCODING);</div><div class=\"line\">        <span class=\"comment\">//  Mac </span></div><div class=\"line\">        <span class=\"keyword\">return</span> mac.doFinal(text);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;  </div><div class=\"line\">~~~  </div><div class=\"line\"></div><div class=\"line\">- Config</div><div class=\"line\"></div><div class=\"line\">~~~ Java</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QiNiuConfig</span> </span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String token = getToken();</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QINIU_AK = <span class=\"string\">\"Your_AccessKey\"</span>;</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QINIU_SK = <span class=\"string\">\"Your_SecretKey\"</span>;</div><div class=\"line\">\t<span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String QINIU_BUCKNAME = <span class=\"string\">\"\"</span>;</div><div class=\"line\"></div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">getToken</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">\t\tMac mac = <span class=\"keyword\">new</span> Mac(QiNiuConfig.QINIU_AK, QiNiuConfig.QINIU_SK);</div><div class=\"line\">\t\tPutPolicy putPolicy = <span class=\"keyword\">new</span> PutPolicy(QiNiuConfig.QINIU_BUCKNAME);</div><div class=\"line\">\t\tputPolicy.returnBody = <span class=\"string\">\"&#123;\\\"name\\\": $(fname),\\\"size\\\": \\\"$(fsize)\\\",\\\"w\\\": \\\"$(imageInfo.width)\\\",\\\"h\\\": \\\"$(imageInfo.height)\\\",\\\"key\\\":$(etag)&#125;\"</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</div><div class=\"line\">\t\t\tString uptoken = putPolicy.token(mac);</div><div class=\"line\">\t\t\tSystem.out.println(<span class=\"string\">\"debug:uptoken = \"</span> + uptoken);</div><div class=\"line\">\t\t\t<span class=\"keyword\">return</span> uptoken;</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (AuthException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</div><div class=\"line\">\t\t\te.printStackTrace();</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> <a href=\"https://gist.github.com/agehua/f73bcb98af2c0c44a4c49c7c7b7e6bda\">Gist</a></p>\n<p> :)  </p>"},{"layout":"post","title":"Android Webview :(","keywords":"Android Webview, js","description":"Android Webview :(","banner":"http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg","_content":"\n\n### 1.Android Webview\n\n- 1.webview\n\n  - 1.\n\n  - 2.Acivity\n\n  <!--more-->\n\n  ~~~ Java\n   public void goFinish(){\n        isLoadWithError =false;\n        if (null!=jsCallBack)\n            mWebView.removeJavascriptInterface(\"XXX\");\n        mWebView.setFocusable(true);\n        mWebView.removeAllViews();\n        try {\n        \tmWebView.clearHistory(); //webview\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n        mWebView.destroy();\n\n        try {\n        \t//mWebViewWebView\n            Field fieldWebView = this.getClass().getDeclaredField(\"mWebView\");\n            fieldWebView.setAccessible(true);\n            WebView webView = (WebView) fieldWebView.get(this);\n            webView.removeAllViews();\n            webView.destroy();\n\n        }catch (NoSuchFieldException e) {\n            e.printStackTrace();\n\n        }catch (IllegalArgumentException e) {\n            e.printStackTrace();\n\n        }catch (IllegalAccessException e) {\n            e.printStackTrace();\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n        this.finish();\n    }\n   ~~~\n\n> webview****\n\n\n- 2.h5 game\n\n\t :)\n\n- 3.android WebviewCrosswalk\n\n\tCrosswalk4,2html5\n\n\t[Crosswalk](https://crosswalk-project.org/)\n\n\tCrosswalkCrosswalkAppAPK20M[](https://www.zhihu.com/question/26484511)\n\n- 4.\n\n\t[](http://x5.tencent.com/index)\n\n### 2.WebView\n\n- 1.Android4.2Java@JavascriptInterface  \n\n- 2.Android4.2searchBoxJavaBridge_Js\n\n  [Android WebViewJs](http://blog.csdn.net/leehong2005/article/details/11808557/)\n\n  webview[BaseWebView](https://gist.github.com/agehua/99233b40e05db29ee0ed4f50fb2c7530)\n\n### 3.AndroidWebViewJavaScript\n:[AndroidWebViewJavaScript](http://blog.csdn.net/jiangwei0910410003/article/details/52687530)\n","source":"_posts/2016-07-25-android-webview-summary.md","raw":"---\nlayout: post\ntitle: Android Webview :(\ncategory: accumulation\ntags: accumulation\nkeywords: Android Webview, js\ndescription: Android Webview :(\nbanner: http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg\n---\n\n\n### 1.Android Webview\n\n- 1.webview\n\n  - 1.\n\n  - 2.Acivity\n\n  <!--more-->\n\n  ~~~ Java\n   public void goFinish(){\n        isLoadWithError =false;\n        if (null!=jsCallBack)\n            mWebView.removeJavascriptInterface(\"XXX\");\n        mWebView.setFocusable(true);\n        mWebView.removeAllViews();\n        try {\n        \tmWebView.clearHistory(); //webview\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n        mWebView.destroy();\n\n        try {\n        \t//mWebViewWebView\n            Field fieldWebView = this.getClass().getDeclaredField(\"mWebView\");\n            fieldWebView.setAccessible(true);\n            WebView webView = (WebView) fieldWebView.get(this);\n            webView.removeAllViews();\n            webView.destroy();\n\n        }catch (NoSuchFieldException e) {\n            e.printStackTrace();\n\n        }catch (IllegalArgumentException e) {\n            e.printStackTrace();\n\n        }catch (IllegalAccessException e) {\n            e.printStackTrace();\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n        this.finish();\n    }\n   ~~~\n\n> webview****\n\n\n- 2.h5 game\n\n\t :)\n\n- 3.android WebviewCrosswalk\n\n\tCrosswalk4,2html5\n\n\t[Crosswalk](https://crosswalk-project.org/)\n\n\tCrosswalkCrosswalkAppAPK20M[](https://www.zhihu.com/question/26484511)\n\n- 4.\n\n\t[](http://x5.tencent.com/index)\n\n### 2.WebView\n\n- 1.Android4.2Java@JavascriptInterface  \n\n- 2.Android4.2searchBoxJavaBridge_Js\n\n  [Android WebViewJs](http://blog.csdn.net/leehong2005/article/details/11808557/)\n\n  webview[BaseWebView](https://gist.github.com/agehua/99233b40e05db29ee0ed4f50fb2c7530)\n\n### 3.AndroidWebViewJavaScript\n:[AndroidWebViewJavaScript](http://blog.csdn.net/jiangwei0910410003/article/details/52687530)\n","slug":"android-webview-summary","published":1,"date":"2016-07-24T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj4z0012bxs68t759qya","content":"<h3 id=\"1-Android-Webview\"><a href=\"#1-Android-Webview\" class=\"headerlink\" title=\"1.Android Webview\"></a>1.Android Webview</h3><ul>\n<li><p>1.webview</p>\n<ul>\n<li><p>1.</p>\n</li>\n<li><p>2.Acivity</p>\n</li>\n</ul>\n<a id=\"more\"></a>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">goFinish</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">     isLoadWithError =<span class=\"keyword\">false</span>;</div><div class=\"line\">     <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=jsCallBack)</div><div class=\"line\">         mWebView.removeJavascriptInterface(<span class=\"string\">\"XXX\"</span>);</div><div class=\"line\">     mWebView.setFocusable(<span class=\"keyword\">true</span>);</div><div class=\"line\">     mWebView.removeAllViews();</div><div class=\"line\">     <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">     \tmWebView.clearHistory(); <span class=\"comment\">//webview</span></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\">     &#125;</div><div class=\"line\">     mWebView.destroy();</div><div class=\"line\"></div><div class=\"line\">     <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">     \t<span class=\"comment\">//mWebViewWebView</span></div><div class=\"line\">         Field fieldWebView = <span class=\"keyword\">this</span>.getClass().getDeclaredField(<span class=\"string\">\"mWebView\"</span>);</div><div class=\"line\">         fieldWebView.setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">         WebView webView = (WebView) fieldWebView.get(<span class=\"keyword\">this</span>);</div><div class=\"line\">         webView.removeAllViews();</div><div class=\"line\">         webView.destroy();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span> (NoSuchFieldException e) &#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span> (IllegalArgumentException e) &#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span> (IllegalAccessException e) &#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\">     &#125;</div><div class=\"line\">     <span class=\"keyword\">this</span>.finish();</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p>webview<strong></strong></p>\n</blockquote>\n<ul>\n<li><p>2.h5 game</p>\n<p>   :)</p>\n</li>\n<li><p>3.android WebviewCrosswalk</p>\n<p>  Crosswalk4,2html5</p>\n<p>  <a href=\"https://crosswalk-project.org/\" target=\"_blank\" rel=\"external\">Crosswalk</a></p>\n<p>  CrosswalkCrosswalkAppAPK20M<a href=\"https://www.zhihu.com/question/26484511\" target=\"_blank\" rel=\"external\"></a></p>\n</li>\n<li><p>4.</p>\n<p>  <a href=\"http://x5.tencent.com/index\" target=\"_blank\" rel=\"external\"></a></p>\n</li>\n</ul>\n<h3 id=\"2-WebView\"><a href=\"#2-WebView\" class=\"headerlink\" title=\"2.WebView\"></a>2.WebView</h3><ul>\n<li><p>1.Android4.2Java@JavascriptInterface  </p>\n</li>\n<li><p>2.Android4.2searchBoxJavaBridge_Js</p>\n<p><a href=\"http://blog.csdn.net/leehong2005/article/details/11808557/\" target=\"_blank\" rel=\"external\">Android WebViewJs</a></p>\n<p>webview<a href=\"https://gist.github.com/agehua/99233b40e05db29ee0ed4f50fb2c7530\" target=\"_blank\" rel=\"external\">BaseWebView</a></p>\n</li>\n</ul>\n<h3 id=\"3-AndroidWebViewJavaScript\"><a href=\"#3-AndroidWebViewJavaScript\" class=\"headerlink\" title=\"3.AndroidWebViewJavaScript\"></a>3.AndroidWebViewJavaScript</h3><p>:<a href=\"http://blog.csdn.net/jiangwei0910410003/article/details/52687530\" target=\"_blank\" rel=\"external\">AndroidWebViewJavaScript</a></p>\n","excerpt":"<h3 id=\"1-Android-Webview\"><a href=\"#1-Android-Webview\" class=\"headerlink\" title=\"1.Android Webview\"></a>1.Android Webview</h3><ul>\n<li><p>1.webview</p>\n<ul>\n<li><p>1.</p>\n</li>\n<li><p>2.Acivity</p>\n</li>\n</ul>","more":"<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">goFinish</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">     isLoadWithError =<span class=\"keyword\">false</span>;</div><div class=\"line\">     <span class=\"keyword\">if</span> (<span class=\"keyword\">null</span>!=jsCallBack)</div><div class=\"line\">         mWebView.removeJavascriptInterface(<span class=\"string\">\"XXX\"</span>);</div><div class=\"line\">     mWebView.setFocusable(<span class=\"keyword\">true</span>);</div><div class=\"line\">     mWebView.removeAllViews();</div><div class=\"line\">     <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">     \tmWebView.clearHistory(); <span class=\"comment\">//webview</span></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\">     &#125;</div><div class=\"line\">     mWebView.destroy();</div><div class=\"line\"></div><div class=\"line\">     <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">     \t<span class=\"comment\">//mWebViewWebView</span></div><div class=\"line\">         Field fieldWebView = <span class=\"keyword\">this</span>.getClass().getDeclaredField(<span class=\"string\">\"mWebView\"</span>);</div><div class=\"line\">         fieldWebView.setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">         WebView webView = (WebView) fieldWebView.get(<span class=\"keyword\">this</span>);</div><div class=\"line\">         webView.removeAllViews();</div><div class=\"line\">         webView.destroy();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span> (NoSuchFieldException e) &#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span> (IllegalArgumentException e) &#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span> (IllegalAccessException e) &#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\"></div><div class=\"line\">     &#125;<span class=\"keyword\">catch</span>(Exception e)&#123;</div><div class=\"line\">         e.printStackTrace();</div><div class=\"line\">     &#125;</div><div class=\"line\">     <span class=\"keyword\">this</span>.finish();</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p>webview<strong></strong></p>\n</blockquote>\n<ul>\n<li><p>2.h5 game</p>\n<p>   :)</p>\n</li>\n<li><p>3.android WebviewCrosswalk</p>\n<p>  Crosswalk4,2html5</p>\n<p>  <a href=\"https://crosswalk-project.org/\">Crosswalk</a></p>\n<p>  CrosswalkCrosswalkAppAPK20M<a href=\"https://www.zhihu.com/question/26484511\"></a></p>\n</li>\n<li><p>4.</p>\n<p>  <a href=\"http://x5.tencent.com/index\"></a></p>\n</li>\n</ul>\n<h3 id=\"2-WebView\"><a href=\"#2-WebView\" class=\"headerlink\" title=\"2.WebView\"></a>2.WebView</h3><ul>\n<li><p>1.Android4.2Java@JavascriptInterface  </p>\n</li>\n<li><p>2.Android4.2searchBoxJavaBridge_Js</p>\n<p><a href=\"http://blog.csdn.net/leehong2005/article/details/11808557/\">Android WebViewJs</a></p>\n<p>webview<a href=\"https://gist.github.com/agehua/99233b40e05db29ee0ed4f50fb2c7530\">BaseWebView</a></p>\n</li>\n</ul>\n<h3 id=\"3-AndroidWebViewJavaScript\"><a href=\"#3-AndroidWebViewJavaScript\" class=\"headerlink\" title=\"3.AndroidWebViewJavaScript\"></a>3.AndroidWebViewJavaScript</h3><p>:<a href=\"http://blog.csdn.net/jiangwei0910410003/article/details/52687530\">AndroidWebViewJavaScript</a></p>"},{"layout":"post","title":"Android","keywords":"LocationListener","description":"AndroidGPS","banner":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Acacia%20Branches.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Acacia%20Branches.jpg","_content":"\n\n\n### 1.LocationListener\n\nGPS\n\n<!--more-->\n\n~~~ Java\n/**\n  * \n  */\n  private void startLocationService(){\n      locationListener = new LocationListener() {\n\n          @Override\n          public void onStatusChanged(String provider, int status, Bundle extras) {\n          }\n          @Override\n          public void onProviderEnabled(String provider) {\n              // GPS LocationProvider\n              location = locManager.getLastKnownLocation(provider);\n          }\n          @Override\n          public void onProviderDisabled(String provider) {\n              isLocatedSuccess = false;\n              if (provider.equals(\"network\")) {\n                      locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3 * 1000, 8,locationListener);\n              }else if(provider.equals(\"gps\")){//GPS\n                  startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));\n              }else {\n                  updateToNewLocation(null);\n              }\n          }\n          @Override\n          public void onLocationChanged(Location location) {\n              // \n              isLocatedSuccess = true;\n              updateToNewLocation(location);\n              locManager.removeUpdates(this);\n          }\n      };\n\n      if (locManager.getProvider(LocationManager.NETWORK_PROVIDER) != null)\n          locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 3 * 1000, 8,locationListener);\n      else if (locManager.getProvider(LocationManager.GPS_PROVIDER) != null)\n          locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3 * 1000, 8,locationListener);\n      else Toast.makeText(mActivity(), \"\", Toast.LENGTH_SHORT).show();\n  }\n~~~  \n","source":"_posts/2016-08-03-android-LocationListener.md","raw":"---\nlayout: post\ntitle: Android\ncategory: technology\ntags: technology\nkeywords: LocationListener\ndescription: AndroidGPS\nbanner: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Acacia%20Branches.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Acacia%20Branches.jpg\n---\n\n\n\n### 1.LocationListener\n\nGPS\n\n<!--more-->\n\n~~~ Java\n/**\n  * \n  */\n  private void startLocationService(){\n      locationListener = new LocationListener() {\n\n          @Override\n          public void onStatusChanged(String provider, int status, Bundle extras) {\n          }\n          @Override\n          public void onProviderEnabled(String provider) {\n              // GPS LocationProvider\n              location = locManager.getLastKnownLocation(provider);\n          }\n          @Override\n          public void onProviderDisabled(String provider) {\n              isLocatedSuccess = false;\n              if (provider.equals(\"network\")) {\n                      locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3 * 1000, 8,locationListener);\n              }else if(provider.equals(\"gps\")){//GPS\n                  startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));\n              }else {\n                  updateToNewLocation(null);\n              }\n          }\n          @Override\n          public void onLocationChanged(Location location) {\n              // \n              isLocatedSuccess = true;\n              updateToNewLocation(location);\n              locManager.removeUpdates(this);\n          }\n      };\n\n      if (locManager.getProvider(LocationManager.NETWORK_PROVIDER) != null)\n          locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 3 * 1000, 8,locationListener);\n      else if (locManager.getProvider(LocationManager.GPS_PROVIDER) != null)\n          locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3 * 1000, 8,locationListener);\n      else Toast.makeText(mActivity(), \"\", Toast.LENGTH_SHORT).show();\n  }\n~~~  \n","slug":"android-LocationListener","published":1,"date":"2016-08-02T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj500017bxs6rrenl4zl","content":"<h3 id=\"1-LocationListener\"><a href=\"#1-LocationListener\" class=\"headerlink\" title=\"1.LocationListener\"></a>1.LocationListener</h3><p>GPS</p>\n<a id=\"more\"></a>\n<pre><code class=\"Java\"><span class=\"comment\">/**\n  * \n  */</span>\n  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">startLocationService</span><span class=\"params\">()</span></span>{\n      locationListener = <span class=\"keyword\">new</span> LocationListener() {\n\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStatusChanged</span><span class=\"params\">(String provider, <span class=\"keyword\">int</span> status, Bundle extras)</span> </span>{\n          }\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProviderEnabled</span><span class=\"params\">(String provider)</span> </span>{\n              <span class=\"comment\">// GPS LocationProvider</span>\n              location = locManager.getLastKnownLocation(provider);\n          }\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProviderDisabled</span><span class=\"params\">(String provider)</span> </span>{\n              isLocatedSuccess = <span class=\"keyword\">false</span>;\n              <span class=\"keyword\">if</span> (provider.equals(<span class=\"string\">\"network\"</span>)) {\n                      locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">3</span> * <span class=\"number\">1000</span>, <span class=\"number\">8</span>,locationListener);\n              }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(provider.equals(<span class=\"string\">\"gps\"</span>)){<span class=\"comment\">//GPS</span>\n                  startActivity(<span class=\"keyword\">new</span> Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));\n              }<span class=\"keyword\">else</span> {\n                  updateToNewLocation(<span class=\"keyword\">null</span>);\n              }\n          }\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLocationChanged</span><span class=\"params\">(Location location)</span> </span>{\n              <span class=\"comment\">// </span>\n              isLocatedSuccess = <span class=\"keyword\">true</span>;\n              updateToNewLocation(location);\n              locManager.removeUpdates(<span class=\"keyword\">this</span>);\n          }\n      };\n\n      <span class=\"keyword\">if</span> (locManager.getProvider(LocationManager.NETWORK_PROVIDER) != <span class=\"keyword\">null</span>)\n          locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, <span class=\"number\">3</span> * <span class=\"number\">1000</span>, <span class=\"number\">8</span>,locationListener);\n      <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (locManager.getProvider(LocationManager.GPS_PROVIDER) != <span class=\"keyword\">null</span>)\n          locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">3</span> * <span class=\"number\">1000</span>, <span class=\"number\">8</span>,locationListener);\n      <span class=\"keyword\">else</span> Toast.makeText(mActivity(), <span class=\"string\">\"\"</span>, Toast.LENGTH_SHORT).show();\n  }\n</code></pre>\n","excerpt":"<h3 id=\"1-LocationListener\"><a href=\"#1-LocationListener\" class=\"headerlink\" title=\"1.LocationListener\"></a>1.LocationListener</h3><p>GPS</p>","more":"<pre><code class=\"Java\"><span class=\"comment\">/**\n  * \n  */</span>\n  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">startLocationService</span><span class=\"params\">()</span></span>{\n      locationListener = <span class=\"keyword\">new</span> LocationListener() {\n\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStatusChanged</span><span class=\"params\">(String provider, <span class=\"keyword\">int</span> status, Bundle extras)</span> </span>{\n          }\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProviderEnabled</span><span class=\"params\">(String provider)</span> </span>{\n              <span class=\"comment\">// GPS LocationProvider</span>\n              location = locManager.getLastKnownLocation(provider);\n          }\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProviderDisabled</span><span class=\"params\">(String provider)</span> </span>{\n              isLocatedSuccess = <span class=\"keyword\">false</span>;\n              <span class=\"keyword\">if</span> (provider.equals(<span class=\"string\">\"network\"</span>)) {\n                      locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">3</span> * <span class=\"number\">1000</span>, <span class=\"number\">8</span>,locationListener);\n              }<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(provider.equals(<span class=\"string\">\"gps\"</span>)){<span class=\"comment\">//GPS</span>\n                  startActivity(<span class=\"keyword\">new</span> Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));\n              }<span class=\"keyword\">else</span> {\n                  updateToNewLocation(<span class=\"keyword\">null</span>);\n              }\n          }\n          <span class=\"meta\">@Override</span>\n          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLocationChanged</span><span class=\"params\">(Location location)</span> </span>{\n              <span class=\"comment\">// </span>\n              isLocatedSuccess = <span class=\"keyword\">true</span>;\n              updateToNewLocation(location);\n              locManager.removeUpdates(<span class=\"keyword\">this</span>);\n          }\n      };\n\n      <span class=\"keyword\">if</span> (locManager.getProvider(LocationManager.NETWORK_PROVIDER) != <span class=\"keyword\">null</span>)\n          locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, <span class=\"number\">3</span> * <span class=\"number\">1000</span>, <span class=\"number\">8</span>,locationListener);\n      <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (locManager.getProvider(LocationManager.GPS_PROVIDER) != <span class=\"keyword\">null</span>)\n          locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, <span class=\"number\">3</span> * <span class=\"number\">1000</span>, <span class=\"number\">8</span>,locationListener);\n      <span class=\"keyword\">else</span> Toast.makeText(mActivity(), <span class=\"string\">\"\"</span>, Toast.LENGTH_SHORT).show();\n  }\n</code></pre>"},{"layout":"post","title":"RxJava ","keywords":"RxJava RxAndroid","description":"RxAndroid","banner":"http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg","_content":"\n\n### 1.\n[AndroidRxJava](http://gank.io/post/560e15be2dca930e00da1083)\n\n    RxJava\n\n### 2.\nRxJava\nRxJavaObservable() Observer () subscribe ()ObservableObserversubscribe()ObservableObserver\n\n<!--more-->\n\n RxJava onNext()onClick()/onEvent()onCompleted()onError()\n\n> RxJavaObserverObservableScheduler\n\n### 3.Observer\n\nObserver  RxJava  Observer \n\n~~~ Java\nObserver<String> observer = new Observer<String>() {\n    @Override\n    public void onNext(String s) {\n        Log.d(tag, \"Item: \" + s);\n    }\n\n    @Override\n    public void onCompleted() {\n        Log.d(tag, \"Completed!\");\n    }\n\n    @Override\n    public void onError(Throwable e) {\n        Log.d(tag, \"Error!\");\n    }\n};\n~~~\n Observer RxJavaObserverSubscriber SubscriberObserver\n\n~~~ Java\nSubscriber<String> subscriber = new Subscriber<String>() {\n    @Override\n    public void onNext(String s) {\n        Log.d(tag, \"Item: \" + s);\n    }\n\n    @Override\n    public void onCompleted() {\n        Log.d(tag, \"Completed!\");\n    }\n\n    @Override\n    public void onError(Throwable e) {\n        Log.d(tag, \"Error!\");\n    }\n};\n~~~\n\nObserverSubscriber\n\n- onStart(): Subscriber\n\n    subscribe\n    >  onStart()subscribe  doOnSubscribe() \n\n- unsubscribe(): SubscriberSubscription\n\n    SubscriberisUnsubscribed() **unsubscribe()**subscribe()Observable Subscriber ******** onPause() onStop()  unsubscribe() \n\n### 4.Observable\n\n#### **1.Observable.just(T...)from(T[])/from(Iterable<? extends T>)**\n\n  - 1). just(T...): \n\n  - 2). from(T[])/from(Iterable<? extends T>):  Iterable \n\n  - 3). ObservableObserverObservableonNext()Observable.just()/from()ObservableonComplete()\n\n  ~~~ Java\n  Observable<List<String>> listObservable = Observable.just(getColorList());\n  ~~~\n\n  > just()UIgetColorList().\n\n    ObserverObservable\n\n~~~ Java\nlistObservable.subscribe(new Observer<List<String>>() {\n\n    @Override\n    public void onCompleted() { }\n\n    @Override\n    public void onError(Throwable e) { }\n\n    @Override\n    public void onNext(List<String> colors) {\n        mSimpleStringAdapter.setStrings(colors);\n    }\n});\n~~~\n  ObservableonComplete()onError()\n\n#### **2.Observable.fromCallable()**\n\n  \n\n~~~ Java\nObservable<List<String>> tvShowObservable = Observable.fromCallable(new Callable<List<String>>() {\n\n      @Override\n      public List<String> call() {\n          return mRestClient.getFavoriteTvShows();\n      }\n});\n~~~\n\nObservable.fromCallable()\n\n  - 1).Observer\n\n  - 2).call()just()\n\n    \n\nObservable\n\n~~~ Java\nmTvShowSubscription = tvShowObservable\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(new Observer<List<String>>() {\n\n        @Override\n        public void onCompleted() { }\n\n        @Override\n        public void onError(Throwable e) { }\n\n        @Override\n        public void onNext(List<String> tvShows){\n            displayTvShows(tvShows);\n        }\n});\n~~~\n\n  \n\n  - 1).subscribeOn() \n\n    Observablesubscribe()subscribeOn()\"IO Scheduler\"Schedulers.io()Scheduler\n\n  - 2).observeOn() onNext()\n\n    observeOn()ScheduleronNext()AndroidSchedules.mainThread()Scheduler(UIScheduler)\n\n  - 3).subscribe() CallableObservablesubscribe()\n\n    Observable.subscribe(Subscriber) \n\n~~~ Java  \n//  subscribe() \n//  RxJava  GitHub \npublic Subscription subscribe(Subscriber subscriber) {\n    subscriber.onStart();\n    onSubscribe.call(subscriber);\n    return subscriber;\n}\n~~~\n  subscriber()3\n\n>   .Subscriber.onStart()\n   .ObservableOnSubscribe.call(Subscriber)RxJava Observable subscribe()\n   .SubscriberSubscriptionunsubscribe().\n\n  - 4).mTvShowSubscription\n\n    ObserverObservableSubscriptionSubscriptionObserverObservableActivityonDestroy()\n\n~~~ Java  \nif (mTvShowSubscription != null && !mTvShowSubscription.isUnsubscribed()) {\n      mTvShowSubscription.unsubscribe(); //\n}\n~~~\n   unsubscribe()ObservableObserverunsubscribe()ObserverObservable\n\n#### **3.Single**\n\nSingleObservableObservableObservableonComplete()/onNext()/onError()onSuccess()/onError()\n\n  ObservableSingleSingle:\n\n~~~ Java\nSingle<List<String>> tvShowSingle = Single.fromCallable(new Callable<List<String>>() {\n    @Override\n    public List<String> call() throws Exception {\n        mRestClient.getFavoriteTvShows();\n    }\n});\n~~~\n\n  \n\n~~~ Java\nmTvShowSubscription = tvShowSingle\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(new SingleSubscriber<List<String>>() {\n\n        @Override\n        public void onSuccess(List<String> tvShows) {\n            displayTvShows(tvShows);\n        }\n\n        @Override\n        public void onError(Throwable error) {\n            displayErrorMessage();\n        }\n});\n~~~\n\n\nObserverSingleSubscriberObserveronSuccess()onError()SingleSubscriberSingleObserverObservable\n\nSingleSubscriptionSubscriptiononDestroy()\n\n### 5.Scheduler\n\n  RxJava Scheduler \n\n> - 1.Schedulers.immediate():  Scheduler\n- 2.Schedulers.newThread(): \n- 3.Schedulers.io(): I/O  Scheduler newThread()  io()  io()  newThread()  io() \n- 4.Schedulers.computation():  Scheduler CPU  I/O  Scheduler  CPU  I/O  computation()  I/O  CPU\n- 5. Android  AndroidSchedulers.mainThread() Android \n\n### 6.\n\n1.Subject ObservableObserver\n\n  Subjects = Observable + ObserverSubjectObservableObserver\n\n  RxjavaSubject:\n\n>    PublishSubject  subject\n    BehaviorSubject : \n    ReplaySubject  \n    AsyncSubject  \n","source":"_posts/2016-08-16-RxAndroid-Learning.md","raw":"---\nlayout: post\ntitle: RxJava \ncategory: technology\ntags: RxJava\nkeywords: RxJava RxAndroid\ndescription: RxAndroid\nbanner: http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg\n---\n\n\n### 1.\n[AndroidRxJava](http://gank.io/post/560e15be2dca930e00da1083)\n\n    RxJava\n\n### 2.\nRxJava\nRxJavaObservable() Observer () subscribe ()ObservableObserversubscribe()ObservableObserver\n\n<!--more-->\n\n RxJava onNext()onClick()/onEvent()onCompleted()onError()\n\n> RxJavaObserverObservableScheduler\n\n### 3.Observer\n\nObserver  RxJava  Observer \n\n~~~ Java\nObserver<String> observer = new Observer<String>() {\n    @Override\n    public void onNext(String s) {\n        Log.d(tag, \"Item: \" + s);\n    }\n\n    @Override\n    public void onCompleted() {\n        Log.d(tag, \"Completed!\");\n    }\n\n    @Override\n    public void onError(Throwable e) {\n        Log.d(tag, \"Error!\");\n    }\n};\n~~~\n Observer RxJavaObserverSubscriber SubscriberObserver\n\n~~~ Java\nSubscriber<String> subscriber = new Subscriber<String>() {\n    @Override\n    public void onNext(String s) {\n        Log.d(tag, \"Item: \" + s);\n    }\n\n    @Override\n    public void onCompleted() {\n        Log.d(tag, \"Completed!\");\n    }\n\n    @Override\n    public void onError(Throwable e) {\n        Log.d(tag, \"Error!\");\n    }\n};\n~~~\n\nObserverSubscriber\n\n- onStart(): Subscriber\n\n    subscribe\n    >  onStart()subscribe  doOnSubscribe() \n\n- unsubscribe(): SubscriberSubscription\n\n    SubscriberisUnsubscribed() **unsubscribe()**subscribe()Observable Subscriber ******** onPause() onStop()  unsubscribe() \n\n### 4.Observable\n\n#### **1.Observable.just(T...)from(T[])/from(Iterable<? extends T>)**\n\n  - 1). just(T...): \n\n  - 2). from(T[])/from(Iterable<? extends T>):  Iterable \n\n  - 3). ObservableObserverObservableonNext()Observable.just()/from()ObservableonComplete()\n\n  ~~~ Java\n  Observable<List<String>> listObservable = Observable.just(getColorList());\n  ~~~\n\n  > just()UIgetColorList().\n\n    ObserverObservable\n\n~~~ Java\nlistObservable.subscribe(new Observer<List<String>>() {\n\n    @Override\n    public void onCompleted() { }\n\n    @Override\n    public void onError(Throwable e) { }\n\n    @Override\n    public void onNext(List<String> colors) {\n        mSimpleStringAdapter.setStrings(colors);\n    }\n});\n~~~\n  ObservableonComplete()onError()\n\n#### **2.Observable.fromCallable()**\n\n  \n\n~~~ Java\nObservable<List<String>> tvShowObservable = Observable.fromCallable(new Callable<List<String>>() {\n\n      @Override\n      public List<String> call() {\n          return mRestClient.getFavoriteTvShows();\n      }\n});\n~~~\n\nObservable.fromCallable()\n\n  - 1).Observer\n\n  - 2).call()just()\n\n    \n\nObservable\n\n~~~ Java\nmTvShowSubscription = tvShowObservable\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(new Observer<List<String>>() {\n\n        @Override\n        public void onCompleted() { }\n\n        @Override\n        public void onError(Throwable e) { }\n\n        @Override\n        public void onNext(List<String> tvShows){\n            displayTvShows(tvShows);\n        }\n});\n~~~\n\n  \n\n  - 1).subscribeOn() \n\n    Observablesubscribe()subscribeOn()\"IO Scheduler\"Schedulers.io()Scheduler\n\n  - 2).observeOn() onNext()\n\n    observeOn()ScheduleronNext()AndroidSchedules.mainThread()Scheduler(UIScheduler)\n\n  - 3).subscribe() CallableObservablesubscribe()\n\n    Observable.subscribe(Subscriber) \n\n~~~ Java  \n//  subscribe() \n//  RxJava  GitHub \npublic Subscription subscribe(Subscriber subscriber) {\n    subscriber.onStart();\n    onSubscribe.call(subscriber);\n    return subscriber;\n}\n~~~\n  subscriber()3\n\n>   .Subscriber.onStart()\n   .ObservableOnSubscribe.call(Subscriber)RxJava Observable subscribe()\n   .SubscriberSubscriptionunsubscribe().\n\n  - 4).mTvShowSubscription\n\n    ObserverObservableSubscriptionSubscriptionObserverObservableActivityonDestroy()\n\n~~~ Java  \nif (mTvShowSubscription != null && !mTvShowSubscription.isUnsubscribed()) {\n      mTvShowSubscription.unsubscribe(); //\n}\n~~~\n   unsubscribe()ObservableObserverunsubscribe()ObserverObservable\n\n#### **3.Single**\n\nSingleObservableObservableObservableonComplete()/onNext()/onError()onSuccess()/onError()\n\n  ObservableSingleSingle:\n\n~~~ Java\nSingle<List<String>> tvShowSingle = Single.fromCallable(new Callable<List<String>>() {\n    @Override\n    public List<String> call() throws Exception {\n        mRestClient.getFavoriteTvShows();\n    }\n});\n~~~\n\n  \n\n~~~ Java\nmTvShowSubscription = tvShowSingle\n    .subscribeOn(Schedulers.io())\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(new SingleSubscriber<List<String>>() {\n\n        @Override\n        public void onSuccess(List<String> tvShows) {\n            displayTvShows(tvShows);\n        }\n\n        @Override\n        public void onError(Throwable error) {\n            displayErrorMessage();\n        }\n});\n~~~\n\n\nObserverSingleSubscriberObserveronSuccess()onError()SingleSubscriberSingleObserverObservable\n\nSingleSubscriptionSubscriptiononDestroy()\n\n### 5.Scheduler\n\n  RxJava Scheduler \n\n> - 1.Schedulers.immediate():  Scheduler\n- 2.Schedulers.newThread(): \n- 3.Schedulers.io(): I/O  Scheduler newThread()  io()  io()  newThread()  io() \n- 4.Schedulers.computation():  Scheduler CPU  I/O  Scheduler  CPU  I/O  computation()  I/O  CPU\n- 5. Android  AndroidSchedulers.mainThread() Android \n\n### 6.\n\n1.Subject ObservableObserver\n\n  Subjects = Observable + ObserverSubjectObservableObserver\n\n  RxjavaSubject:\n\n>    PublishSubject  subject\n    BehaviorSubject : \n    ReplaySubject  \n    AsyncSubject  \n","slug":"RxAndroid-Learning","published":1,"date":"2016-08-15T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj52001abxs625fljjiq","content":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p><a href=\"http://gank.io/post/560e15be2dca930e00da1083\" target=\"_blank\" rel=\"external\">AndroidRxJava</a></p>\n<pre><code>RxJava\n</code></pre><h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><p>RxJava<br>RxJavaObservable() Observer () subscribe ()ObservableObserversubscribe()ObservableObserver</p>\n<a id=\"more\"></a>\n<p> RxJava onNext()onClick()/onEvent()onCompleted()onError()</p>\n<blockquote>\n<p>RxJavaObserverObservableScheduler</p>\n</blockquote>\n<h3 id=\"3-Observer\"><a href=\"#3-Observer\" class=\"headerlink\" title=\"3.Observer\"></a>3.Observer</h3><p>Observer  RxJava  Observer </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Observer&lt;String&gt; observer = <span class=\"keyword\">new</span> Observer&lt;String&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String s)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Item: \"</span> + s);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Completed!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Error!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p> Observer RxJavaObserverSubscriber SubscriberObserver</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Subscriber&lt;String&gt; subscriber = <span class=\"keyword\">new</span> Subscriber&lt;String&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String s)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Item: \"</span> + s);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Completed!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Error!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>ObserverSubscriber</p>\n<ul>\n<li><p>onStart(): Subscriber</p>\n<p>  subscribe</p>\n<blockquote>\n<p> onStart()subscribe  doOnSubscribe() </p>\n</blockquote>\n</li>\n<li><p>unsubscribe(): SubscriberSubscription</p>\n<p>  SubscriberisUnsubscribed() <strong>unsubscribe()</strong>subscribe()Observable Subscriber <strong></strong><strong></strong> onPause() onStop()  unsubscribe() </p>\n</li>\n</ul>\n<h3 id=\"4-Observable\"><a href=\"#4-Observable\" class=\"headerlink\" title=\"4.Observable\"></a>4.Observable</h3><h4 id=\"1-Observable-just-T-from-T-from-Iterable-lt-extends-T-gt\"><a href=\"#1-Observable-just-T-from-T-from-Iterable-lt-extends-T-gt\" class=\"headerlink\" title=\"1.Observable.just(T)from(T[])/from(Iterable&lt;? extends T&gt;)\"></a><strong>1.Observable.just(T)from(T[])/from(Iterable&lt;? extends T&gt;)</strong></h4><ul>\n<li><p>1). just(T): </p>\n</li>\n<li><p>2). from(T[])/from(Iterable&lt;? extends T&gt;):  Iterable </p>\n</li>\n<li><p>3). ObservableObserverObservableonNext()Observable.just()/from()ObservableonComplete()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Observable&lt;List&lt;String&gt;&gt; listObservable = Observable.just(getColorList());</div></pre></td></tr></table></figure>\n<blockquote>\n<p>just()UIgetColorList().</p>\n</blockquote>\n<p>ObserverObservable</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">listObservable.subscribe(<span class=\"keyword\">new</span> Observer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(List&lt;String&gt; colors)</span> </span>&#123;</div><div class=\"line\">        mSimpleStringAdapter.setStrings(colors);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>  ObservableonComplete()onError()</p>\n<h4 id=\"2-Observable-fromCallable\"><a href=\"#2-Observable-fromCallable\" class=\"headerlink\" title=\"2.Observable.fromCallable()\"></a><strong>2.Observable.fromCallable()</strong></h4><p>  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Observable&lt;List&lt;String&gt;&gt; tvShowObservable = Observable.fromCallable(<span class=\"keyword\">new</span> Callable&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> List&lt;String&gt; <span class=\"title\">call</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> mRestClient.getFavoriteTvShows();</div><div class=\"line\">      &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Observable.fromCallable()</p>\n<ul>\n<li><p>1).Observer</p>\n</li>\n<li><p>2).call()just()</p>\n<p></p>\n</li>\n</ul>\n<p>Observable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">mTvShowSubscription = tvShowObservable</div><div class=\"line\">    .subscribeOn(Schedulers.io())</div><div class=\"line\">    .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">    .subscribe(<span class=\"keyword\">new</span> Observer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(List&lt;String&gt; tvShows)</span></span>&#123;</div><div class=\"line\">            displayTvShows(tvShows);</div><div class=\"line\">        &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li><p>1).subscribeOn() </p>\n<p>Observablesubscribe()subscribeOn()IO SchedulerSchedulers.io()Scheduler</p>\n</li>\n<li><p>2).observeOn() onNext()</p>\n<p>observeOn()ScheduleronNext()AndroidSchedules.mainThread()Scheduler(UIScheduler)</p>\n</li>\n<li><p>3).subscribe() CallableObservablesubscribe()</p>\n<p>Observable.subscribe(Subscriber) </p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  subscribe() </span></div><div class=\"line\"><span class=\"comment\">//  RxJava  GitHub </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Subscription <span class=\"title\">subscribe</span><span class=\"params\">(Subscriber subscriber)</span> </span>&#123;</div><div class=\"line\">    subscriber.onStart();</div><div class=\"line\">    onSubscribe.call(subscriber);</div><div class=\"line\">    <span class=\"keyword\">return</span> subscriber;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>  subscriber()3</p>\n<blockquote>\n<p>  .Subscriber.onStart()<br>   .ObservableOnSubscribe.call(Subscriber)RxJava Observable subscribe()<br>   .SubscriberSubscriptionunsubscribe().</p>\n</blockquote>\n<ul>\n<li><p>4).mTvShowSubscription</p>\n<p>ObserverObservableSubscriptionSubscriptionObserverObservableActivityonDestroy()</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (mTvShowSubscription != <span class=\"keyword\">null</span> &amp;&amp; !mTvShowSubscription.isUnsubscribed()) &#123;</div><div class=\"line\">      mTvShowSubscription.unsubscribe(); <span class=\"comment\">//</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>   unsubscribe()ObservableObserverunsubscribe()ObserverObservable</p>\n<h4 id=\"3-Single\"><a href=\"#3-Single\" class=\"headerlink\" title=\"3.Single\"></a><strong>3.Single</strong></h4><p>SingleObservableObservableObservableonComplete()/onNext()/onError()onSuccess()/onError()</p>\n<p>  ObservableSingleSingle:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Single&lt;List&lt;String&gt;&gt; tvShowSingle = Single.fromCallable(<span class=\"keyword\">new</span> Callable&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;String&gt; <span class=\"title\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        mRestClient.getFavoriteTvShows();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">mTvShowSubscription = tvShowSingle</div><div class=\"line\">    .subscribeOn(Schedulers.io())</div><div class=\"line\">    .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">    .subscribe(<span class=\"keyword\">new</span> SingleSubscriber&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(List&lt;String&gt; tvShows)</span> </span>&#123;</div><div class=\"line\">            displayTvShows(tvShows);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable error)</span> </span>&#123;</div><div class=\"line\">            displayErrorMessage();</div><div class=\"line\">        &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>ObserverSingleSubscriberObserveronSuccess()onError()SingleSubscriberSingleObserverObservable</p>\n<p>SingleSubscriptionSubscriptiononDestroy()</p>\n<h3 id=\"5-Scheduler\"><a href=\"#5-Scheduler\" class=\"headerlink\" title=\"5.Scheduler\"></a>5.Scheduler</h3><p>  RxJava Scheduler </p>\n<blockquote>\n<ul>\n<li>1.Schedulers.immediate():  Scheduler</li>\n<li>2.Schedulers.newThread(): </li>\n<li>3.Schedulers.io(): I/O  Scheduler newThread()  io()  io()  newThread()  io() </li>\n<li>4.Schedulers.computation():  Scheduler CPU  I/O  Scheduler  CPU  I/O  computation()  I/O  CPU</li>\n<li>5. Android  AndroidSchedulers.mainThread() Android </li>\n</ul>\n</blockquote>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6.\"></a>6.</h3><p>1.Subject ObservableObserver</p>\n<p>  Subjects = Observable + ObserverSubjectObservableObserver</p>\n<p>  RxjavaSubject:</p>\n<blockquote>\n<p>   PublishSubject  subject<br>    BehaviorSubject : <br>    ReplaySubject  <br>    AsyncSubject  </p>\n</blockquote>\n","excerpt":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p><a href=\"http://gank.io/post/560e15be2dca930e00da1083\">AndroidRxJava</a></p>\n<pre><code>RxJava\n</code></pre><h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2.\"></a>2.</h3><p>RxJava<br>RxJavaObservable() Observer () subscribe ()ObservableObserversubscribe()ObservableObserver</p>","more":"<p> RxJava onNext()onClick()/onEvent()onCompleted()onError()</p>\n<blockquote>\n<p>RxJavaObserverObservableScheduler</p>\n</blockquote>\n<h3 id=\"3-Observer\"><a href=\"#3-Observer\" class=\"headerlink\" title=\"3.Observer\"></a>3.Observer</h3><p>Observer  RxJava  Observer </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Observer&lt;String&gt; observer = <span class=\"keyword\">new</span> Observer&lt;String&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String s)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Item: \"</span> + s);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Completed!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Error!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p> Observer RxJavaObserverSubscriber SubscriberObserver</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Subscriber&lt;String&gt; subscriber = <span class=\"keyword\">new</span> Subscriber&lt;String&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(String s)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Item: \"</span> + s);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Completed!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123;</div><div class=\"line\">        Log.d(tag, <span class=\"string\">\"Error!\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>ObserverSubscriber</p>\n<ul>\n<li><p>onStart(): Subscriber</p>\n<p>  subscribe</p>\n<blockquote>\n<p> onStart()subscribe  doOnSubscribe() </p>\n</blockquote>\n</li>\n<li><p>unsubscribe(): SubscriberSubscription</p>\n<p>  SubscriberisUnsubscribed() <strong>unsubscribe()</strong>subscribe()Observable Subscriber <strong></strong><strong></strong> onPause() onStop()  unsubscribe() </p>\n</li>\n</ul>\n<h3 id=\"4-Observable\"><a href=\"#4-Observable\" class=\"headerlink\" title=\"4.Observable\"></a>4.Observable</h3><h4 id=\"1-Observable-just-T-from-T-from-Iterable-lt-extends-T-gt\"><a href=\"#1-Observable-just-T-from-T-from-Iterable-lt-extends-T-gt\" class=\"headerlink\" title=\"1.Observable.just(T)from(T[])/from(Iterable&lt;? extends T&gt;)\"></a><strong>1.Observable.just(T)from(T[])/from(Iterable&lt;? extends T&gt;)</strong></h4><ul>\n<li><p>1). just(T): </p>\n</li>\n<li><p>2). from(T[])/from(Iterable&lt;? extends T&gt;):  Iterable </p>\n</li>\n<li><p>3). ObservableObserverObservableonNext()Observable.just()/from()ObservableonComplete()</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Observable&lt;List&lt;String&gt;&gt; listObservable = Observable.just(getColorList());</div></pre></td></tr></table></figure>\n<blockquote>\n<p>just()UIgetColorList().</p>\n</blockquote>\n<p>ObserverObservable</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">listObservable.subscribe(<span class=\"keyword\">new</span> Observer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(List&lt;String&gt; colors)</span> </span>&#123;</div><div class=\"line\">        mSimpleStringAdapter.setStrings(colors);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>  ObservableonComplete()onError()</p>\n<h4 id=\"2-Observable-fromCallable\"><a href=\"#2-Observable-fromCallable\" class=\"headerlink\" title=\"2.Observable.fromCallable()\"></a><strong>2.Observable.fromCallable()</strong></h4><p>  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Observable&lt;List&lt;String&gt;&gt; tvShowObservable = Observable.fromCallable(<span class=\"keyword\">new</span> Callable&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"meta\">@Override</span></div><div class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> List&lt;String&gt; <span class=\"title\">call</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">          <span class=\"keyword\">return</span> mRestClient.getFavoriteTvShows();</div><div class=\"line\">      &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Observable.fromCallable()</p>\n<ul>\n<li><p>1).Observer</p>\n</li>\n<li><p>2).call()just()</p>\n<p></p>\n</li>\n</ul>\n<p>Observable</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">mTvShowSubscription = tvShowObservable</div><div class=\"line\">    .subscribeOn(Schedulers.io())</div><div class=\"line\">    .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">    .subscribe(<span class=\"keyword\">new</span> Observer&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCompleted</span><span class=\"params\">()</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable e)</span> </span>&#123; &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onNext</span><span class=\"params\">(List&lt;String&gt; tvShows)</span></span>&#123;</div><div class=\"line\">            displayTvShows(tvShows);</div><div class=\"line\">        &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>  </p>\n<ul>\n<li><p>1).subscribeOn() </p>\n<p>Observablesubscribe()subscribeOn()IO SchedulerSchedulers.io()Scheduler</p>\n</li>\n<li><p>2).observeOn() onNext()</p>\n<p>observeOn()ScheduleronNext()AndroidSchedules.mainThread()Scheduler(UIScheduler)</p>\n</li>\n<li><p>3).subscribe() CallableObservablesubscribe()</p>\n<p>Observable.subscribe(Subscriber) </p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//  subscribe() </span></div><div class=\"line\"><span class=\"comment\">//  RxJava  GitHub </span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Subscription <span class=\"title\">subscribe</span><span class=\"params\">(Subscriber subscriber)</span> </span>&#123;</div><div class=\"line\">    subscriber.onStart();</div><div class=\"line\">    onSubscribe.call(subscriber);</div><div class=\"line\">    <span class=\"keyword\">return</span> subscriber;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>  subscriber()3</p>\n<blockquote>\n<p>  .Subscriber.onStart()<br>   .ObservableOnSubscribe.call(Subscriber)RxJava Observable subscribe()<br>   .SubscriberSubscriptionunsubscribe().</p>\n</blockquote>\n<ul>\n<li><p>4).mTvShowSubscription</p>\n<p>ObserverObservableSubscriptionSubscriptionObserverObservableActivityonDestroy()</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (mTvShowSubscription != <span class=\"keyword\">null</span> &amp;&amp; !mTvShowSubscription.isUnsubscribed()) &#123;</div><div class=\"line\">      mTvShowSubscription.unsubscribe(); <span class=\"comment\">//</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>   unsubscribe()ObservableObserverunsubscribe()ObserverObservable</p>\n<h4 id=\"3-Single\"><a href=\"#3-Single\" class=\"headerlink\" title=\"3.Single\"></a><strong>3.Single</strong></h4><p>SingleObservableObservableObservableonComplete()/onNext()/onError()onSuccess()/onError()</p>\n<p>  ObservableSingleSingle:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Single&lt;List&lt;String&gt;&gt; tvShowSingle = Single.fromCallable(<span class=\"keyword\">new</span> Callable&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> List&lt;String&gt; <span class=\"title\">call</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        mRestClient.getFavoriteTvShows();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>  </p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">mTvShowSubscription = tvShowSingle</div><div class=\"line\">    .subscribeOn(Schedulers.io())</div><div class=\"line\">    .observeOn(AndroidSchedulers.mainThread())</div><div class=\"line\">    .subscribe(<span class=\"keyword\">new</span> SingleSubscriber&lt;List&lt;String&gt;&gt;() &#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(List&lt;String&gt; tvShows)</span> </span>&#123;</div><div class=\"line\">            displayTvShows(tvShows);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(Throwable error)</span> </span>&#123;</div><div class=\"line\">            displayErrorMessage();</div><div class=\"line\">        &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>ObserverSingleSubscriberObserveronSuccess()onError()SingleSubscriberSingleObserverObservable</p>\n<p>SingleSubscriptionSubscriptiononDestroy()</p>\n<h3 id=\"5-Scheduler\"><a href=\"#5-Scheduler\" class=\"headerlink\" title=\"5.Scheduler\"></a>5.Scheduler</h3><p>  RxJava Scheduler </p>\n<blockquote>\n<ul>\n<li>1.Schedulers.immediate():  Scheduler</li>\n<li>2.Schedulers.newThread(): </li>\n<li>3.Schedulers.io(): I/O  Scheduler newThread()  io()  io()  newThread()  io() </li>\n<li>4.Schedulers.computation():  Scheduler CPU  I/O  Scheduler  CPU  I/O  computation()  I/O  CPU</li>\n<li>5. Android  AndroidSchedulers.mainThread() Android </li>\n</ul>\n</blockquote>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6.\"></a>6.</h3><p>1.Subject ObservableObserver</p>\n<p>  Subjects = Observable + ObserverSubjectObservableObserver</p>\n<p>  RxjavaSubject:</p>\n<blockquote>\n<p>   PublishSubject  subject<br>    BehaviorSubject : <br>    ReplaySubject  <br>    AsyncSubject  </p>\n</blockquote>"},{"layout":"post","title":"ThreadLocalHandlerThreadLopper","keywords":"ThreadLocal, HandlerThread, Lopper","banner":"http://obxk8w81b.bkt.clouddn.com/A%20Lane%20in%20the%20Public%20Garden%20at%20Arles.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/A%20Lane%20in%20the%20Public%20Garden%20at%20Arles.jpg","_content":"\n\n### 1.\n\n    AndroidUIWorkThreadUIMainThread\n\nhandler Message MessageQueueLooper MessageHandlerHandler \n\n### 2.ThreadLocal<T>\n\nThreadThreadLocal.ThreadLocalMap threadLocals mapkeyThreadLocalvalueThreadLocalThreadLocal  putThreadLocal getThreadmapkeyThreadmapLocalThreadThreadLocalThread\n\n<!--more-->\n\nmapmapbeanThreadLocal \n\nThreadLocal\n\n[Android  HandlerLooperHandlerThread ](http://www.jianshu.com/p/08cb3665972f)\n\n\n### 3.Looper\nLooperAndroid handlerLooper\nLooperprivate static final ThreadLocal sThreadLocal = new ThreadLocal();\nAndroidThreadLocalLooper.preparesThreadLocalkeynewloopervalue putmapLooper.loopsThreadLocalLooperMessageQueueMessagemessageHandler\n\n### 4.Handler\nSDKHandler\n\n    A Handler allows you to sendand process Messageand Runnable objects associated\n    with a thread's MessageQueue.Each Handler instance is associated with a single\n    thread and that thread'smessage queue. When you create a new Handler, it is bound\n    to the thread /message queue of the thread that is creating it -- from that point\n    on, it willdeliver messages and runnables to that message queue and execute them\n    as theycome out of the message queue.\n\n#### 4.1 Handler\n\n    There are two main uses for aHandler: (1) to schedule messages and runnables to be\n    executed as some point inthe future; and (2) to enqueue an action to be performed\n    on a different thread than your own.\n\nHandlerLooper(UI-ThreadLooper)\n\n#### 4.2 HandlerUI\n\nHandlerHandlerUIUIHandlerUISDK4UI()\n\n    - Activity.runOnUiThread(Runnable)\n    - View.post(Runnable)\n    - View.postDelayed(Runnable, long)\n    - UIHandler\n\n\n    - HandlerHandler\n    - LooperMessageQueueLooperLooperHandler\n    - UIView.post\n    - handler\n    - handlerhandlerhandler\n    - AndroidLooperUI\n    - Looper.myLooper();      //Looper\n        Looper.getMainLooper() //UILopper\n    - HandleLooperLooperLooper\n    - Looper.prepare()Looper.loop();\n\n### 5.\n\n\n\n#### 5.1 \n~~~ Java\nMessage msg =mHandler.obtainMessage();\nmsg.what = what;\nmsg.sendToTarget();\n~~~\n\n#### 5.2 \n\n~~~ Java\nMessageQueue queue= mQueue;\n  if (queue != null){\n  msg.target =this;\n  sent =queue.enqueueMessage(msg, uptimeMillis);\n}\n~~~\nHandler.javasendMessageAtTime(Messagemsg, long uptimeMillis)MessageQueueMessagetargetMessageHandlerMessage\n\n#### 5.3 \n~~~ Java\nLooper me =myLooper();\nMessageQueue queue= me.mQueue;\nwhile (true) {\n  Message msg =queue.next(); // might block\n  if (msg !=null) {\n    if(msg.target == null) {\n      // Notarget is a magic identifier for the quit message.\n      return;\n    }\n    msg.target.dispatchMessage(msg);\n    msg.recycle();\n  }\n}\n~~~\n\nLooper.javaloop()MessageQueuenextMessageMessagetargetHandlerdispatchMessage\n\n#### 5.4 \n~~~ Java\nif (msg.callback!= null) {\n  handleCallback(msg);\n} else {\n  if (mCallback!= null) {\n    if(mCallback.handleMessage(msg)) {\n      return;\n    }\n  }\n handleMessage(msg);\n}\n~~~\nHandler.javadispatchMessage(Messagemsg)handleMessageMessageHandlerhandleMessage(Messagemsg)\ndispatchMessage\nMessageHandlerMessageQueueLooperHandler\n\nView.post(Runnable)\n\n    post(Runnableaction)ViewUIHandleraction\n    postHandlerHandleractionMessageMessage\n    callbackactionUI HandlerMessage\n    mCallback.handleMessagerunnablerun\n    UIUI\n\n\n### 5.HandlerThread\nHandlerThreadThreadLooperLooperHandler\n\nHandlerThreadstart()HandlerHandlerThreadlooper\n\n~~~ Java\nHandlerThread thread = new HandlerThread(\"MyHandlerThread\");\nthread.start();\nmHandler = new Handler(thread.getLooper());\nmHandler.post(new Runnable(){...});\n~~~\n\nHandlerHandlerThreadUIHandlerUI\n\nHandlerThreadhandlerThread.quit()\n\n\n\n~~~ Java\npublic class HandlerThreadActivity extends Activity {\n    private static final String TAG = \"HandlerThreadActivity\";\n    private HandlerThreadmHandlerThread;\n    private MyHandler mMyHandler;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n       // TODO Auto-generatedmethod stub\n       super.onCreate(savedInstanceState);\n       TextView text = new TextView(this);\n       text.setText(\"HandlerThreadActivity\");\n       setContentView(text);\n\n       Log.d(TAG, \"The mainthread id = \" + Thread.currentThread().getId());\n\n       //HandlerThreadLooper\n       //Android\n       mHandlerThread = new HandlerThread(\"handler_thread\");\n\n       //HandlerThreadgetLooper()start();\n       mHandlerThread.start();\n       //HandlermHandlerThread\n       mMyHandler = new MyHandler(mHandlerThread.getLooper());\n\n       mMyHandler.sendEmptyMessage(1);\n    }\n\n    private class MyHandler extends Handler {\n\n       public MyHandler(Looper looper) {\n           super(looper);\n       }\n\n       @Override\n       public void handleMessage(Message msg) {\n           Log.d(TAG, \"MyHandler-->handleMessage-->threadid = \" + Thread.currentThread().getId());\n           super.handleMessage(msg);\n       }\n    }\n}\n~~~\n","source":"_posts/2016-09-05-ThreadLocal-HandlerThread-Lopper.md","raw":"---\nlayout: post\ntitle:  ThreadLocalHandlerThreadLopper\ncategory: accumulation\ntags: accumulation\nkeywords: ThreadLocal, HandlerThread, Lopper\nbanner: http://obxk8w81b.bkt.clouddn.com/A%20Lane%20in%20the%20Public%20Garden%20at%20Arles.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/A%20Lane%20in%20the%20Public%20Garden%20at%20Arles.jpg\n---\n\n\n### 1.\n\n    AndroidUIWorkThreadUIMainThread\n\nhandler Message MessageQueueLooper MessageHandlerHandler \n\n### 2.ThreadLocal<T>\n\nThreadThreadLocal.ThreadLocalMap threadLocals mapkeyThreadLocalvalueThreadLocalThreadLocal  putThreadLocal getThreadmapkeyThreadmapLocalThreadThreadLocalThread\n\n<!--more-->\n\nmapmapbeanThreadLocal \n\nThreadLocal\n\n[Android  HandlerLooperHandlerThread ](http://www.jianshu.com/p/08cb3665972f)\n\n\n### 3.Looper\nLooperAndroid handlerLooper\nLooperprivate static final ThreadLocal sThreadLocal = new ThreadLocal();\nAndroidThreadLocalLooper.preparesThreadLocalkeynewloopervalue putmapLooper.loopsThreadLocalLooperMessageQueueMessagemessageHandler\n\n### 4.Handler\nSDKHandler\n\n    A Handler allows you to sendand process Messageand Runnable objects associated\n    with a thread's MessageQueue.Each Handler instance is associated with a single\n    thread and that thread'smessage queue. When you create a new Handler, it is bound\n    to the thread /message queue of the thread that is creating it -- from that point\n    on, it willdeliver messages and runnables to that message queue and execute them\n    as theycome out of the message queue.\n\n#### 4.1 Handler\n\n    There are two main uses for aHandler: (1) to schedule messages and runnables to be\n    executed as some point inthe future; and (2) to enqueue an action to be performed\n    on a different thread than your own.\n\nHandlerLooper(UI-ThreadLooper)\n\n#### 4.2 HandlerUI\n\nHandlerHandlerUIUIHandlerUISDK4UI()\n\n    - Activity.runOnUiThread(Runnable)\n    - View.post(Runnable)\n    - View.postDelayed(Runnable, long)\n    - UIHandler\n\n\n    - HandlerHandler\n    - LooperMessageQueueLooperLooperHandler\n    - UIView.post\n    - handler\n    - handlerhandlerhandler\n    - AndroidLooperUI\n    - Looper.myLooper();      //Looper\n        Looper.getMainLooper() //UILopper\n    - HandleLooperLooperLooper\n    - Looper.prepare()Looper.loop();\n\n### 5.\n\n\n\n#### 5.1 \n~~~ Java\nMessage msg =mHandler.obtainMessage();\nmsg.what = what;\nmsg.sendToTarget();\n~~~\n\n#### 5.2 \n\n~~~ Java\nMessageQueue queue= mQueue;\n  if (queue != null){\n  msg.target =this;\n  sent =queue.enqueueMessage(msg, uptimeMillis);\n}\n~~~\nHandler.javasendMessageAtTime(Messagemsg, long uptimeMillis)MessageQueueMessagetargetMessageHandlerMessage\n\n#### 5.3 \n~~~ Java\nLooper me =myLooper();\nMessageQueue queue= me.mQueue;\nwhile (true) {\n  Message msg =queue.next(); // might block\n  if (msg !=null) {\n    if(msg.target == null) {\n      // Notarget is a magic identifier for the quit message.\n      return;\n    }\n    msg.target.dispatchMessage(msg);\n    msg.recycle();\n  }\n}\n~~~\n\nLooper.javaloop()MessageQueuenextMessageMessagetargetHandlerdispatchMessage\n\n#### 5.4 \n~~~ Java\nif (msg.callback!= null) {\n  handleCallback(msg);\n} else {\n  if (mCallback!= null) {\n    if(mCallback.handleMessage(msg)) {\n      return;\n    }\n  }\n handleMessage(msg);\n}\n~~~\nHandler.javadispatchMessage(Messagemsg)handleMessageMessageHandlerhandleMessage(Messagemsg)\ndispatchMessage\nMessageHandlerMessageQueueLooperHandler\n\nView.post(Runnable)\n\n    post(Runnableaction)ViewUIHandleraction\n    postHandlerHandleractionMessageMessage\n    callbackactionUI HandlerMessage\n    mCallback.handleMessagerunnablerun\n    UIUI\n\n\n### 5.HandlerThread\nHandlerThreadThreadLooperLooperHandler\n\nHandlerThreadstart()HandlerHandlerThreadlooper\n\n~~~ Java\nHandlerThread thread = new HandlerThread(\"MyHandlerThread\");\nthread.start();\nmHandler = new Handler(thread.getLooper());\nmHandler.post(new Runnable(){...});\n~~~\n\nHandlerHandlerThreadUIHandlerUI\n\nHandlerThreadhandlerThread.quit()\n\n\n\n~~~ Java\npublic class HandlerThreadActivity extends Activity {\n    private static final String TAG = \"HandlerThreadActivity\";\n    private HandlerThreadmHandlerThread;\n    private MyHandler mMyHandler;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n       // TODO Auto-generatedmethod stub\n       super.onCreate(savedInstanceState);\n       TextView text = new TextView(this);\n       text.setText(\"HandlerThreadActivity\");\n       setContentView(text);\n\n       Log.d(TAG, \"The mainthread id = \" + Thread.currentThread().getId());\n\n       //HandlerThreadLooper\n       //Android\n       mHandlerThread = new HandlerThread(\"handler_thread\");\n\n       //HandlerThreadgetLooper()start();\n       mHandlerThread.start();\n       //HandlermHandlerThread\n       mMyHandler = new MyHandler(mHandlerThread.getLooper());\n\n       mMyHandler.sendEmptyMessage(1);\n    }\n\n    private class MyHandler extends Handler {\n\n       public MyHandler(Looper looper) {\n           super(looper);\n       }\n\n       @Override\n       public void handleMessage(Message msg) {\n           Log.d(TAG, \"MyHandler-->handleMessage-->threadid = \" + Thread.currentThread().getId());\n           super.handleMessage(msg);\n       }\n    }\n}\n~~~\n","slug":"ThreadLocal-HandlerThread-Lopper","published":1,"date":"2016-09-04T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj56001fbxs6k185lj0f","content":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><pre><code>AndroidUIWorkThreadUIMainThread\n</code></pre><p>handler Message MessageQueueLooper MessageHandlerHandler </p>\n<h3 id=\"2-ThreadLocal\"><a href=\"#2-ThreadLocal\" class=\"headerlink\" title=\"2.ThreadLocal\"></a>2.ThreadLocal<t></t></h3><p>ThreadThreadLocal.ThreadLocalMap threadLocals mapkeyThreadLocalvalueThreadLocalThreadLocal  putThreadLocal getThreadmapkeyThreadmapLocalThreadThreadLocalThread</p>\n<a id=\"more\"></a>\n<p>mapmapbeanThreadLocal </p>\n<p>ThreadLocal</p>\n<p><a href=\"http://www.jianshu.com/p/08cb3665972f\" target=\"_blank\" rel=\"external\">Android  HandlerLooperHandlerThread </a></p>\n<h3 id=\"3-Looper\"><a href=\"#3-Looper\" class=\"headerlink\" title=\"3.Looper\"></a>3.Looper</h3><p>LooperAndroid handlerLooper<br>Looperprivate static final ThreadLocal sThreadLocal = new ThreadLocal();<br>AndroidThreadLocalLooper.preparesThreadLocalkeynewloopervalue putmapLooper.loopsThreadLocalLooperMessageQueueMessagemessageHandler</p>\n<h3 id=\"4-Handler\"><a href=\"#4-Handler\" class=\"headerlink\" title=\"4.Handler\"></a>4.Handler</h3><p>SDKHandler</p>\n<pre><code>A Handler allows you to sendand process Messageand Runnable objects associated\nwith a thread&apos;s MessageQueue.Each Handler instance is associated with a single\nthread and that thread&apos;smessage queue. When you create a new Handler, it is bound\nto the thread /message queue of the thread that is creating it -- from that point\non, it willdeliver messages and runnables to that message queue and execute them\nas theycome out of the message queue.\n</code></pre><h4 id=\"4-1-Handler\"><a href=\"#4-1-Handler\" class=\"headerlink\" title=\"4.1 Handler\"></a>4.1 Handler</h4><pre><code>There are two main uses for aHandler: (1) to schedule messages and runnables to be\nexecuted as some point inthe future; and (2) to enqueue an action to be performed\non a different thread than your own.\n</code></pre><p>HandlerLooper(UI-ThreadLooper)</p>\n<h4 id=\"4-2-HandlerUI\"><a href=\"#4-2-HandlerUI\" class=\"headerlink\" title=\"4.2 HandlerUI\"></a>4.2 HandlerUI</h4><p>HandlerHandlerUIUIHandlerUISDK4UI()</p>\n<pre><code>- Activity.runOnUiThread(Runnable)\n- View.post(Runnable)\n- View.postDelayed(Runnable, long)\n- UIHandler\n</code></pre><p></p>\n<pre><code>- HandlerHandler\n- LooperMessageQueueLooperLooperHandler\n- UIView.post\n- handler\n- handlerhandlerhandler\n- AndroidLooperUI\n- Looper.myLooper();      //Looper\n    Looper.getMainLooper() //UILopper\n- HandleLooperLooperLooper\n- Looper.prepare()Looper.loop();\n</code></pre><h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5.\"></a>5.</h3><p></p>\n<h4 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Message msg =mHandler.obtainMessage();</div><div class=\"line\">msg.what = what;</div><div class=\"line\">msg.sendToTarget();</div></pre></td></tr></table></figure>\n<h4 id=\"5-2-\"><a href=\"#5-2-\" class=\"headerlink\" title=\"5.2 \"></a>5.2 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">MessageQueue queue= mQueue;</div><div class=\"line\">  <span class=\"keyword\">if</span> (queue != <span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">  msg.target =<span class=\"keyword\">this</span>;</div><div class=\"line\">  sent =queue.enqueueMessage(msg, uptimeMillis);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Handler.javasendMessageAtTime(Messagemsg, long uptimeMillis)MessageQueueMessagetargetMessageHandlerMessage</p>\n<h4 id=\"5-3-\"><a href=\"#5-3-\" class=\"headerlink\" title=\"5.3 \"></a>5.3 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Looper me =myLooper();</div><div class=\"line\">MessageQueue queue= me.mQueue;</div><div class=\"line\"><span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</div><div class=\"line\">  Message msg =queue.next(); <span class=\"comment\">// might block</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (msg !=<span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(msg.target == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      <span class=\"comment\">// Notarget is a magic identifier for the quit message.</span></div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    msg.target.dispatchMessage(msg);</div><div class=\"line\">    msg.recycle();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Looper.javaloop()MessageQueuenextMessageMessagetargetHandlerdispatchMessage</p>\n<h4 id=\"5-4-\"><a href=\"#5-4-\" class=\"headerlink\" title=\"5.4 \"></a>5.4 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (msg.callback!= <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">  handleCallback(msg);</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (mCallback!= <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mCallback.handleMessage(msg)) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"> handleMessage(msg);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Handler.javadispatchMessage(Messagemsg)handleMessageMessageHandlerhandleMessage(Messagemsg)<br>dispatchMessage<br>MessageHandlerMessageQueueLooperHandler</p>\n<p>View.post(Runnable)</p>\n<pre><code>post(Runnableaction)ViewUIHandleraction\npostHandlerHandleractionMessageMessage\ncallbackactionUI HandlerMessage\nmCallback.handleMessagerunnablerun\nUIUI\n</code></pre><h3 id=\"5-HandlerThread\"><a href=\"#5-HandlerThread\" class=\"headerlink\" title=\"5.HandlerThread\"></a>5.HandlerThread</h3><p>HandlerThreadThreadLooperLooperHandler</p>\n<p>HandlerThreadstart()HandlerHandlerThreadlooper</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">HandlerThread thread = <span class=\"keyword\">new</span> HandlerThread(<span class=\"string\">\"MyHandlerThread\"</span>);</div><div class=\"line\">thread.start();</div><div class=\"line\">mHandler = <span class=\"keyword\">new</span> Handler(thread.getLooper());</div><div class=\"line\">mHandler.post(<span class=\"keyword\">new</span> Runnable()&#123;...&#125;);</div></pre></td></tr></table></figure>\n<p>HandlerHandlerThreadUIHandlerUI</p>\n<p>HandlerThreadhandlerThread.quit()</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HandlerThreadActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"HandlerThreadActivity\"</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> HandlerThreadmHandlerThread;</div><div class=\"line\">    <span class=\"keyword\">private</span> MyHandler mMyHandler;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">// TODO Auto-generatedmethod stub</span></div><div class=\"line\">       <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">       TextView text = <span class=\"keyword\">new</span> TextView(<span class=\"keyword\">this</span>);</div><div class=\"line\">       text.setText(<span class=\"string\">\"HandlerThreadActivity\"</span>);</div><div class=\"line\">       setContentView(text);</div><div class=\"line\"></div><div class=\"line\">       Log.d(TAG, <span class=\"string\">\"The mainthread id = \"</span> + Thread.currentThread().getId());</div><div class=\"line\"></div><div class=\"line\">       <span class=\"comment\">//HandlerThreadLooper</span></div><div class=\"line\">       <span class=\"comment\">//Android</span></div><div class=\"line\">       mHandlerThread = <span class=\"keyword\">new</span> HandlerThread(<span class=\"string\">\"handler_thread\"</span>);</div><div class=\"line\"></div><div class=\"line\">       <span class=\"comment\">//HandlerThreadgetLooper()start();</span></div><div class=\"line\">       mHandlerThread.start();</div><div class=\"line\">       <span class=\"comment\">//HandlermHandlerThread</span></div><div class=\"line\">       mMyHandler = <span class=\"keyword\">new</span> MyHandler(mHandlerThread.getLooper());</div><div class=\"line\"></div><div class=\"line\">       mMyHandler.sendEmptyMessage(<span class=\"number\">1</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyHandler</span><span class=\"params\">(Looper looper)</span> </span>&#123;</div><div class=\"line\">           <span class=\"keyword\">super</span>(looper);</div><div class=\"line\">       &#125;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"meta\">@Override</span></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">           Log.d(TAG, <span class=\"string\">\"MyHandler--&gt;handleMessage--&gt;threadid = \"</span> + Thread.currentThread().getId());</div><div class=\"line\">           <span class=\"keyword\">super</span>.handleMessage(msg);</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><pre><code>AndroidUIWorkThreadUIMainThread\n</code></pre><p>handler Message MessageQueueLooper MessageHandlerHandler </p>\n<h3 id=\"2-ThreadLocal\"><a href=\"#2-ThreadLocal\" class=\"headerlink\" title=\"2.ThreadLocal\"></a>2.ThreadLocal<T></h3><p>ThreadThreadLocal.ThreadLocalMap threadLocals mapkeyThreadLocalvalueThreadLocalThreadLocal  putThreadLocal getThreadmapkeyThreadmapLocalThreadThreadLocalThread</p>","more":"<p>mapmapbeanThreadLocal </p>\n<p>ThreadLocal</p>\n<p><a href=\"http://www.jianshu.com/p/08cb3665972f\">Android  HandlerLooperHandlerThread </a></p>\n<h3 id=\"3-Looper\"><a href=\"#3-Looper\" class=\"headerlink\" title=\"3.Looper\"></a>3.Looper</h3><p>LooperAndroid handlerLooper<br>Looperprivate static final ThreadLocal sThreadLocal = new ThreadLocal();<br>AndroidThreadLocalLooper.preparesThreadLocalkeynewloopervalue putmapLooper.loopsThreadLocalLooperMessageQueueMessagemessageHandler</p>\n<h3 id=\"4-Handler\"><a href=\"#4-Handler\" class=\"headerlink\" title=\"4.Handler\"></a>4.Handler</h3><p>SDKHandler</p>\n<pre><code>A Handler allows you to sendand process Messageand Runnable objects associated\nwith a thread&apos;s MessageQueue.Each Handler instance is associated with a single\nthread and that thread&apos;smessage queue. When you create a new Handler, it is bound\nto the thread /message queue of the thread that is creating it -- from that point\non, it willdeliver messages and runnables to that message queue and execute them\nas theycome out of the message queue.\n</code></pre><h4 id=\"4-1-Handler\"><a href=\"#4-1-Handler\" class=\"headerlink\" title=\"4.1 Handler\"></a>4.1 Handler</h4><pre><code>There are two main uses for aHandler: (1) to schedule messages and runnables to be\nexecuted as some point inthe future; and (2) to enqueue an action to be performed\non a different thread than your own.\n</code></pre><p>HandlerLooper(UI-ThreadLooper)</p>\n<h4 id=\"4-2-HandlerUI\"><a href=\"#4-2-HandlerUI\" class=\"headerlink\" title=\"4.2 HandlerUI\"></a>4.2 HandlerUI</h4><p>HandlerHandlerUIUIHandlerUISDK4UI()</p>\n<pre><code>- Activity.runOnUiThread(Runnable)\n- View.post(Runnable)\n- View.postDelayed(Runnable, long)\n- UIHandler\n</code></pre><p></p>\n<pre><code>- HandlerHandler\n- LooperMessageQueueLooperLooperHandler\n- UIView.post\n- handler\n- handlerhandlerhandler\n- AndroidLooperUI\n- Looper.myLooper();      //Looper\n    Looper.getMainLooper() //UILopper\n- HandleLooperLooperLooper\n- Looper.prepare()Looper.loop();\n</code></pre><h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5.\"></a>5.</h3><p></p>\n<h4 id=\"5-1-\"><a href=\"#5-1-\" class=\"headerlink\" title=\"5.1 \"></a>5.1 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Message msg =mHandler.obtainMessage();</div><div class=\"line\">msg.what = what;</div><div class=\"line\">msg.sendToTarget();</div></pre></td></tr></table></figure>\n<h4 id=\"5-2-\"><a href=\"#5-2-\" class=\"headerlink\" title=\"5.2 \"></a>5.2 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">MessageQueue queue= mQueue;</div><div class=\"line\">  <span class=\"keyword\">if</span> (queue != <span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">  msg.target =<span class=\"keyword\">this</span>;</div><div class=\"line\">  sent =queue.enqueueMessage(msg, uptimeMillis);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Handler.javasendMessageAtTime(Messagemsg, long uptimeMillis)MessageQueueMessagetargetMessageHandlerMessage</p>\n<h4 id=\"5-3-\"><a href=\"#5-3-\" class=\"headerlink\" title=\"5.3 \"></a>5.3 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Looper me =myLooper();</div><div class=\"line\">MessageQueue queue= me.mQueue;</div><div class=\"line\"><span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</div><div class=\"line\">  Message msg =queue.next(); <span class=\"comment\">// might block</span></div><div class=\"line\">  <span class=\"keyword\">if</span> (msg !=<span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(msg.target == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      <span class=\"comment\">// Notarget is a magic identifier for the quit message.</span></div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">    msg.target.dispatchMessage(msg);</div><div class=\"line\">    msg.recycle();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Looper.javaloop()MessageQueuenextMessageMessagetargetHandlerdispatchMessage</p>\n<h4 id=\"5-4-\"><a href=\"#5-4-\" class=\"headerlink\" title=\"5.4 \"></a>5.4 </h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (msg.callback!= <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">  handleCallback(msg);</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (mCallback!= <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(mCallback.handleMessage(msg)) &#123;</div><div class=\"line\">      <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"> handleMessage(msg);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Handler.javadispatchMessage(Messagemsg)handleMessageMessageHandlerhandleMessage(Messagemsg)<br>dispatchMessage<br>MessageHandlerMessageQueueLooperHandler</p>\n<p>View.post(Runnable)</p>\n<pre><code>post(Runnableaction)ViewUIHandleraction\npostHandlerHandleractionMessageMessage\ncallbackactionUI HandlerMessage\nmCallback.handleMessagerunnablerun\nUIUI\n</code></pre><h3 id=\"5-HandlerThread\"><a href=\"#5-HandlerThread\" class=\"headerlink\" title=\"5.HandlerThread\"></a>5.HandlerThread</h3><p>HandlerThreadThreadLooperLooperHandler</p>\n<p>HandlerThreadstart()HandlerHandlerThreadlooper</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">HandlerThread thread = <span class=\"keyword\">new</span> HandlerThread(<span class=\"string\">\"MyHandlerThread\"</span>);</div><div class=\"line\">thread.start();</div><div class=\"line\">mHandler = <span class=\"keyword\">new</span> Handler(thread.getLooper());</div><div class=\"line\">mHandler.post(<span class=\"keyword\">new</span> Runnable()&#123;...&#125;);</div></pre></td></tr></table></figure>\n<p>HandlerHandlerThreadUIHandlerUI</p>\n<p>HandlerThreadhandlerThread.quit()</p>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HandlerThreadActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"HandlerThreadActivity\"</span>;</div><div class=\"line\">    <span class=\"keyword\">private</span> HandlerThreadmHandlerThread;</div><div class=\"line\">    <span class=\"keyword\">private</span> MyHandler mMyHandler;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">       <span class=\"comment\">// TODO Auto-generatedmethod stub</span></div><div class=\"line\">       <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">       TextView text = <span class=\"keyword\">new</span> TextView(<span class=\"keyword\">this</span>);</div><div class=\"line\">       text.setText(<span class=\"string\">\"HandlerThreadActivity\"</span>);</div><div class=\"line\">       setContentView(text);</div><div class=\"line\"></div><div class=\"line\">       Log.d(TAG, <span class=\"string\">\"The mainthread id = \"</span> + Thread.currentThread().getId());</div><div class=\"line\"></div><div class=\"line\">       <span class=\"comment\">//HandlerThreadLooper</span></div><div class=\"line\">       <span class=\"comment\">//Android</span></div><div class=\"line\">       mHandlerThread = <span class=\"keyword\">new</span> HandlerThread(<span class=\"string\">\"handler_thread\"</span>);</div><div class=\"line\"></div><div class=\"line\">       <span class=\"comment\">//HandlerThreadgetLooper()start();</span></div><div class=\"line\">       mHandlerThread.start();</div><div class=\"line\">       <span class=\"comment\">//HandlermHandlerThread</span></div><div class=\"line\">       mMyHandler = <span class=\"keyword\">new</span> MyHandler(mHandlerThread.getLooper());</div><div class=\"line\"></div><div class=\"line\">       mMyHandler.sendEmptyMessage(<span class=\"number\">1</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyHandler</span><span class=\"params\">(Looper looper)</span> </span>&#123;</div><div class=\"line\">           <span class=\"keyword\">super</span>(looper);</div><div class=\"line\">       &#125;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"meta\">@Override</span></div><div class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</div><div class=\"line\">           Log.d(TAG, <span class=\"string\">\"MyHandler--&gt;handleMessage--&gt;threadid = \"</span> + Thread.currentThread().getId());</div><div class=\"line\">           <span class=\"keyword\">super</span>.handleMessage(msg);</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"},{"layout":"post","title":"apkadmob","keywords":"admob, ","banner":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Pear%20Tree.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Pear%20Tree.jpg","_content":"\n\n### \n\n[antivirus-for-android](http://www.avg.com/no-en/antivirus-for-android)apkAVGunwanted software\n\n\nBeware of Adware! 1 Types of Adware Detected\nLast reported adware activity:\tSep 16\nDays with adware in last 30:\t1 days\n\n\n\n<!--more-->\n\n![avg_warning](/images/blogimages/2016/avg_warning.PNG)\n\n### \n\n[](https://play.google.com/store/apps/details?id=imoblife.toolbox.full&hl=zh)apkadmob\n\napkAndroidManifestGoogle AdMobcom.google.ads.AdView\n\n\n\ngoogle servicejarads\n![google_servcie_ads](/images/blogimages/2016/google_servcie_ads.PNG)\n\nadsapkadmob\n","source":"_posts/2016-09-20-AVG-unwanted-software.md","raw":"---\nlayout: post\ntitle:  apkadmob\ncategory: accumulation\ntags: accumulation\nkeywords: admob, \nbanner: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Pear%20Tree.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Pear%20Tree.jpg\n---\n\n\n### \n\n[antivirus-for-android](http://www.avg.com/no-en/antivirus-for-android)apkAVGunwanted software\n\n\nBeware of Adware! 1 Types of Adware Detected\nLast reported adware activity:\tSep 16\nDays with adware in last 30:\t1 days\n\n\n\n<!--more-->\n\n![avg_warning](/images/blogimages/2016/avg_warning.PNG)\n\n### \n\n[](https://play.google.com/store/apps/details?id=imoblife.toolbox.full&hl=zh)apkadmob\n\napkAndroidManifestGoogle AdMobcom.google.ads.AdView\n\n\n\ngoogle servicejarads\n![google_servcie_ads](/images/blogimages/2016/google_servcie_ads.PNG)\n\nadsapkadmob\n","slug":"AVG-unwanted-software","published":1,"date":"2016-09-19T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj59001ibxs622pi4num","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://www.avg.com/no-en/antivirus-for-android\" target=\"_blank\" rel=\"external\">antivirus-for-android</a>apkAVGunwanted software</p>\n<p><br>Beware of Adware! 1 Types of Adware Detected<br>Last reported adware activity:    Sep 16<br>Days with adware in last 30:    1 days</p>\n<p></p>\n<a id=\"more\"></a>\n<p><img src=\"/images/blogimages/2016/avg_warning.PNG\" alt=\"avg_warning\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://play.google.com/store/apps/details?id=imoblife.toolbox.full&amp;hl=zh\" target=\"_blank\" rel=\"external\"></a>apkadmob</p>\n<p>apkAndroidManifestGoogle AdMobcom.google.ads.AdView</p>\n<p></p>\n<p>google servicejarads<br><img src=\"/images/blogimages/2016/google_servcie_ads.PNG\" alt=\"google_servcie_ads\"></p>\n<p>adsapkadmob</p>\n","excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://www.avg.com/no-en/antivirus-for-android\">antivirus-for-android</a>apkAVGunwanted software</p>\n<p><br>Beware of Adware! 1 Types of Adware Detected<br>Last reported adware activity:    Sep 16<br>Days with adware in last 30:    1 days</p>\n<p></p>","more":"<p><img src=\"/images/blogimages/2016/avg_warning.PNG\" alt=\"avg_warning\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://play.google.com/store/apps/details?id=imoblife.toolbox.full&amp;hl=zh\"></a>apkadmob</p>\n<p>apkAndroidManifestGoogle AdMobcom.google.ads.AdView</p>\n<p></p>\n<p>google servicejarads<br><img src=\"/images/blogimages/2016/google_servcie_ads.PNG\" alt=\"google_servcie_ads\"></p>\n<p>adsapkadmob</p>"},{"layout":"post","title":"ANDROID","keywords":", ANDROID","banner":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Tree.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Tree.jpg","_content":"\n### \n\n[stormzhang ANDROID ](http://stormzhang.com/designpattern/2016/03/27/android-design-pattern-singleton/)\n\n\n### \n\nDesign Pattern23Android\n\n<!--more-->\n#### \n\n~~~ Java\npublic class Singleton{\n\n    private static Singleton instance = new Singleton();\n\n    private Singleton(){}\n\n    public static Singleton newInstance(){\n        return instance;\n    }\n}\n~~~\n\n  \n\n#### \n\n~~~ Java\npublic class Singleton{\n    private static Singleton instance = null;\n\n    private Singleton(){}\n\n    public static Singleton newInstance(){\n        if(null == instance){\n            instance = new Singleton();\n        }\n        return instance;\n    }\n}\n~~~\n\n\n\n### \n\n\n\nJVM newInstance\n\n\n\n#### \n\n~~~ Java\npublic class Singleton {\n\n    private static Singleton instance = null;\n\n    private Singleton(){\n    }\n\n    public static Singleton getInstance() {\n        synchronized (Singleton.class) {\n            if (instance == null) {\n                instance = new Singleton();\n            }\n        }\n\n        return instance;\n    }\n}\n~~~\n\nsynchronized (Singleton.class)instanceAndroid\n\n#### InputMethodManager\n\n~~~ Java\npublic final class InputMethodManager {\n    //  \n    static InputMethodManager sInstance;\n\n    //api  \n    public static InputMethodManager getInstance() {\n        synchronized (InputMethodManager.class) {\n            if (sInstance == null) {\n                IBinder b = ServiceManager.getService(Context.INPUT_METHOD_SERVICE);\n                IInputMethodManager service = IInputMethodManager.Stub.asInterface(b);\n                sInstance = new InputMethodManager(service, Looper.getMainLooper());\n            }\n            return sInstance;\n        }\n    }\n}\n~~~\n\nAndroid\n\n\n\n#### \n\n~~~ Java\npublic class Singleton {\n\n    private static volatile Singleton instance = null;\n\n    private Singleton(){\n    }\n\n    public static Singleton getInstance() {\n        // if already inited, no need to get lock everytime\n        if (instance == null) {\n            synchronized (Singleton.class) {\n                if (instance == null) {\n                    instance = new Singleton();\n                }\n            }\n        }\n\n        return instance;\n    }\n}\n~~~\n\nsynchronized (Singleton.class)ifinstancesynchronized (Singleton.class)\n\n JVMJVM\n\nstatic{}\nfinal\n\nJVM\n\n JVM \n\n\n\n#### \n\n~~~ Java\npublic class Singleton{\n    //\n    private static class SingletonHolder{\n        public static Singleton instance = new Singleton();\n    }\n\n    private Singleton(){}\n\n    public static Singleton newInstance(){\n        return SingletonHolder.instance;\n    }\n\n    public void doSomething(){\n        //do something\n    }\n}\n~~~\n\n\n\nEffective Java\n\n#### \n\n~~~ Java\npublic enum Singleton{\n    //Singleton\n    instance;\n\n    public void doSomething(){\n        // do something ...\n    }    \n}\n~~~\n\n\n\n~~~ Java\npublic static void main(String[] args){\n   Singleton singleton = Singleton.instance;\n   singleton.doSomething();\n}\n~~~\n\n(JVM), \n\n### \n\n5\n","source":"_posts/2016-09-20-android-design-pattern-singleton.md","raw":"---\nlayout: post\ntitle:  ANDROID\ncategory: accumulation\ntags: Android design pattern\nkeywords: , ANDROID\nbanner: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Tree.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Tree.jpg\n---\n\n### \n\n[stormzhang ANDROID ](http://stormzhang.com/designpattern/2016/03/27/android-design-pattern-singleton/)\n\n\n### \n\nDesign Pattern23Android\n\n<!--more-->\n#### \n\n~~~ Java\npublic class Singleton{\n\n    private static Singleton instance = new Singleton();\n\n    private Singleton(){}\n\n    public static Singleton newInstance(){\n        return instance;\n    }\n}\n~~~\n\n  \n\n#### \n\n~~~ Java\npublic class Singleton{\n    private static Singleton instance = null;\n\n    private Singleton(){}\n\n    public static Singleton newInstance(){\n        if(null == instance){\n            instance = new Singleton();\n        }\n        return instance;\n    }\n}\n~~~\n\n\n\n### \n\n\n\nJVM newInstance\n\n\n\n#### \n\n~~~ Java\npublic class Singleton {\n\n    private static Singleton instance = null;\n\n    private Singleton(){\n    }\n\n    public static Singleton getInstance() {\n        synchronized (Singleton.class) {\n            if (instance == null) {\n                instance = new Singleton();\n            }\n        }\n\n        return instance;\n    }\n}\n~~~\n\nsynchronized (Singleton.class)instanceAndroid\n\n#### InputMethodManager\n\n~~~ Java\npublic final class InputMethodManager {\n    //  \n    static InputMethodManager sInstance;\n\n    //api  \n    public static InputMethodManager getInstance() {\n        synchronized (InputMethodManager.class) {\n            if (sInstance == null) {\n                IBinder b = ServiceManager.getService(Context.INPUT_METHOD_SERVICE);\n                IInputMethodManager service = IInputMethodManager.Stub.asInterface(b);\n                sInstance = new InputMethodManager(service, Looper.getMainLooper());\n            }\n            return sInstance;\n        }\n    }\n}\n~~~\n\nAndroid\n\n\n\n#### \n\n~~~ Java\npublic class Singleton {\n\n    private static volatile Singleton instance = null;\n\n    private Singleton(){\n    }\n\n    public static Singleton getInstance() {\n        // if already inited, no need to get lock everytime\n        if (instance == null) {\n            synchronized (Singleton.class) {\n                if (instance == null) {\n                    instance = new Singleton();\n                }\n            }\n        }\n\n        return instance;\n    }\n}\n~~~\n\nsynchronized (Singleton.class)ifinstancesynchronized (Singleton.class)\n\n JVMJVM\n\nstatic{}\nfinal\n\nJVM\n\n JVM \n\n\n\n#### \n\n~~~ Java\npublic class Singleton{\n    //\n    private static class SingletonHolder{\n        public static Singleton instance = new Singleton();\n    }\n\n    private Singleton(){}\n\n    public static Singleton newInstance(){\n        return SingletonHolder.instance;\n    }\n\n    public void doSomething(){\n        //do something\n    }\n}\n~~~\n\n\n\nEffective Java\n\n#### \n\n~~~ Java\npublic enum Singleton{\n    //Singleton\n    instance;\n\n    public void doSomething(){\n        // do something ...\n    }    \n}\n~~~\n\n\n\n~~~ Java\npublic static void main(String[] args){\n   Singleton singleton = Singleton.instance;\n   singleton.doSomething();\n}\n~~~\n\n(JVM), \n\n### \n\n5\n","slug":"android-design-pattern-singleton","published":1,"date":"2016-09-19T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5d001nbxs6s1m2yhg0","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://stormzhang.com/designpattern/2016/03/27/android-design-pattern-singleton/\" target=\"_blank\" rel=\"external\">stormzhang ANDROID </a><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Design Pattern23Android</p>\n<a id=\"more\"></a>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">newInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">newInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">null</span> == instance)&#123;</div><div class=\"line\">            instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>JVM newInstance</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">synchronized</span> (Singleton.class) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (instance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>synchronized (Singleton.class)instanceAndroid</p>\n<h4 id=\"InputMethodManager\"><a href=\"#InputMethodManager\" class=\"headerlink\" title=\"InputMethodManager\"></a>InputMethodManager</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InputMethodManager</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//  </span></div><div class=\"line\">    <span class=\"keyword\">static</span> InputMethodManager sInstance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//api  </span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> InputMethodManager <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">synchronized</span> (InputMethodManager.class) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (sInstance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                IBinder b = ServiceManager.getService(Context.INPUT_METHOD_SERVICE);</div><div class=\"line\">                IInputMethodManager service = IInputMethodManager.Stub.asInterface(b);</div><div class=\"line\">                sInstance = <span class=\"keyword\">new</span> InputMethodManager(service, Looper.getMainLooper());</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> sInstance;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Android</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">volatile</span> Singleton instance = <span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// if already inited, no need to get lock everytime</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (instance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">synchronized</span> (Singleton.class) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (instance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                    instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>synchronized (Singleton.class)ifinstancesynchronized (Singleton.class)</p>\n<p> JVMJVM</p>\n<p>static{}<br>final<br><br>JVM</p>\n<p> JVM </p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonHolder</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">newInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> SingletonHolder.instance;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"comment\">//do something</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p>Effective Java</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> Singleton&#123;</div><div class=\"line\">    <span class=\"comment\">//Singleton</span></div><div class=\"line\">    instance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"comment\">// do something ...</span></div><div class=\"line\">    &#125;    </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">   Singleton singleton = Singleton.instance;</div><div class=\"line\">   singleton.doSomething();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>(JVM), </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>5</p>\n","excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"http://stormzhang.com/designpattern/2016/03/27/android-design-pattern-singleton/\">stormzhang ANDROID </a><br></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Design Pattern23Android</p>","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">newInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>  </p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">newInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"keyword\">null</span> == instance)&#123;</div><div class=\"line\">            instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>JVM newInstance</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">synchronized</span> (Singleton.class) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (instance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>synchronized (Singleton.class)instanceAndroid</p>\n<h4 id=\"InputMethodManager\"><a href=\"#InputMethodManager\" class=\"headerlink\" title=\"InputMethodManager\"></a>InputMethodManager</h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InputMethodManager</span> </span>&#123;</div><div class=\"line\">    <span class=\"comment\">//  </span></div><div class=\"line\">    <span class=\"keyword\">static</span> InputMethodManager sInstance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//api  </span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> InputMethodManager <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">synchronized</span> (InputMethodManager.class) &#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (sInstance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                IBinder b = ServiceManager.getService(Context.INPUT_METHOD_SERVICE);</div><div class=\"line\">                IInputMethodManager service = IInputMethodManager.Stub.asInterface(b);</div><div class=\"line\">                sInstance = <span class=\"keyword\">new</span> InputMethodManager(service, Looper.getMainLooper());</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> sInstance;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>Android</p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">volatile</span> Singleton instance = <span class=\"keyword\">null</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// if already inited, no need to get lock everytime</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (instance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">            <span class=\"keyword\">synchronized</span> (Singleton.class) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (instance == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                    instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> instance;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>synchronized (Singleton.class)ifinstancesynchronized (Singleton.class)</p>\n<p> JVMJVM</p>\n<p>static{}<br>final<br><br>JVM</p>\n<p> JVM </p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Singleton</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SingletonHolder</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton instance = <span class=\"keyword\">new</span> Singleton();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Singleton</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Singleton <span class=\"title\">newInstance</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> SingletonHolder.instance;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"comment\">//do something</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<p>Effective Java</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> Singleton&#123;</div><div class=\"line\">    <span class=\"comment\">//Singleton</span></div><div class=\"line\">    instance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">doSomething</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"comment\">// do something ...</span></div><div class=\"line\">    &#125;    </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123;</div><div class=\"line\">   Singleton singleton = Singleton.instance;</div><div class=\"line\">   singleton.doSomething();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>(JVM), </p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>5</p>"},{"layout":"post","title":"JNIpublickey","keywords":"JNI, publickey","banner":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Branch%20in%20a%20Glass%20with%20a%20Book.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Branch%20in%20a%20Glass%20with%20a%20Book.jpg","_content":"\n\n### 1.\n[JNI](http://agehua.github.io/2016/JNI-Learning)\nJNIPublickey\n\n### 2.JNIPublickey\n[github](https://github.com/MasonLiuChn/AndroidUltimateEncrypt)\n\n4.0.4publickey\n\n<!--more-->\n\nPublickey\n\n~~~ Java\nOpenSSLRSAPublicKey{modulus=a0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb26a73305eea631ab18ec3ce746eb253e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9480cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a312c73cf0b98e0ce9a8cf6a682fa,publicExponent=10001}\n~~~\n\nGT-S7568 Android4.0.4Publickey\n\n~~~ Java\nRSA Public Key\n      modulus: a0d169cedabdaac3527c2099eeaca0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb6a73305eea631ab18ec3ce746eb23e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9410cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a313c73cf0b98e0ce9a8cf6a682aff0b98e0ce9a8cf6a682fa\n      public exponent: 10001\n~~~\nmodulus**publicExponent****public exponent**\n\n\n\n~~~ C++\njmethodID substring_mid = env->GetMethodID(string_cls,\"substring\", \"(II)Ljava/lang/String;\");\njmethodID indexOf_mid = env->GetMethodID(string_cls,\"indexOf\", \"(Ljava/lang/String;)I\");\n\njint bb = env->CallIntMethod(publicKey_str,indexOf_mid,param2);\njstring publicKey2_str =NULL;\nif (bb ==-1){\n\tjstring param3 = env->NewStringUTF(\"public exponent\");\n\tjint cc = env->CallIntMethod(publicKey_str,indexOf_mid,param3);\n\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"CC value is %d\", cc);\n\tpublicKey2_str= static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,cc-1));\n}else {\n\tpublicKey2_str = static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,bb-1));\n}\n~~~\n\n#### 2.1 JNI native\n\nJNIJNI\\__android_log_print\n\n~~~ C++\n__android_log_print(ANDROID_LOG_ERROR, TAG, \"PublicKey value is %s\",  jstringTostring(env,publicKey2_str));\n~~~\n\n- ANDROID_LOG_INFOANDROID_LOG_DEBUGANDROID_LOG_ERROR\n- LogCat\n- \n\njstringTostringjstringchar*\n\n~~~ C++\nchar* jstringTostring(JNIEnv* env, jstring jstr)\n{\n\tchar* rtn = NULL;\n  jclass clsstring = env->FindClass(\"java/lang/String\");\n  jstring strencode = env->NewStringUTF(\"utf-8\");\n  jmethodID mid = env->GetMethodID(clsstring, \"getBytes\", \"(Ljava/lang/String;)[B\");\n  jbyteArray barr= (jbyteArray)env->CallObjectMethod(jstr, mid, strencode);\n  jsize alen = env->GetArrayLength(barr);\n  jbyte* ba = env->GetByteArrayElements(barr, JNI_FALSE);\n  if (alen > 0)\n  {\n  rtn = (char*)malloc(alen + 1);\n\n  memcpy(rtn, ba, alen);\n  rtn[alen] = 0;\n  }\n  env->ReleaseByteArrayElements(barr, ba, 0);\n  return rtn;\n}\n~~~\n\njstringJavaNative TypeJavastring\n\nJNI\n[JNI ---- ](http://blog.csdn.net/qinjuning/article/details/7599796)\n\nJNI\n\n- 1..h\n.c:\n\n~~~ C++\n#include <android/log.h>\n\n#define LOG_TAG   \"From JNI ===>>\"\n~~~\n\n- 2.Android.mk\n:\n\n~~~ C++\nLOCAL_LDLIBS   := -lm -llog -ljnigraphics\n~~~\n\n\n\n[JNInativeeclipselogcat](http://www.cnblogs.com/liuling/p/2015-8-5-1.html)\n\n[JNILOGCAT Debug](http://blog.csdn.net/llwdslal/article/details/31733035)\n\n#### 2.2 \n\n\n\n~~~ C++\njstring getPublicKey(JNIEnv* env, jobject thiz,jobject context) {\n\tjclass context_cls = env->GetObjectClass(context);\n\n\tjmethodID get_package_manager_mid = env->GetMethodID(context_cls,\n\t\t\t\"getPackageManager\", \"()Landroid/content/pm/PackageManager;\");\n\n\tjmethodID get_package_name_mid = env->GetMethodID(context_cls,\n\t\t\t\"getPackageName\", \"()Ljava/lang/String;\");\n\tenv->DeleteLocalRef(context_cls);\n\tjobject pm_obj = env->CallObjectMethod(context, get_package_manager_mid);\n\tjclass pm_cls = env->FindClass(\"android/content/pm/PackageManager\");\n\n\tjmethodID get_package_info_mid = env->GetMethodID(pm_cls, \"getPackageInfo\",\n\t\t\t\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\");\n\tjstring package_name = reinterpret_cast<jstring>(env->CallObjectMethod(\n\t\t\tcontext, get_package_name_mid));\n\tjfieldID flag_fid = env->GetStaticFieldID(pm_cls, \"GET_SIGNATURES\", \"I\");\n\tjint flag = env->GetStaticIntField(pm_cls, flag_fid);\n\tenv->DeleteLocalRef(pm_cls);\n\tjobject pi_obj = env->CallObjectMethod(pm_obj, get_package_info_mid,\n\t\t\tpackage_name, flag);\n\tenv->DeleteLocalRef(package_name);\n\n\tjclass pi_cls = env->FindClass(\"android/content/pm/PackageInfo\");\n\tjfieldID signatures_fid = env->GetFieldID(pi_cls, \"signatures\",\n\t\t\t\"[Landroid/content/pm/Signature;\");\n\tenv->DeleteLocalRef(pi_cls);\n\tjobject sig_obj = env->GetObjectField(pi_obj, signatures_fid);\n\tenv->DeleteLocalRef(pi_obj);\n\n\tjobjectArray sigs = reinterpret_cast<jobjectArray>(sig_obj);\n\n\tjclass signature_cls = env->FindClass(\"android/content/pm/Signature\");\n\tjmethodID to_byte_array_mid = env->GetMethodID(signature_cls, \"toByteArray\",\n\t\t\t\"()[B\");\n\n\tjbyteArray sig_bytes = reinterpret_cast<jbyteArray>(env->CallObjectMethod(\n\t\t\tenv->GetObjectArrayElement(sigs, 0), to_byte_array_mid));\n\tjclass certificate_factory_cls = env->FindClass(\n\t\t\t\"java/security/cert/CertificateFactory\");\n\tjmethodID get_certificate_instance_mid = env->GetStaticMethodID(\n\t\t\tcertificate_factory_cls, \"getInstance\",\n\t\t\t\"(Ljava/lang/String;)Ljava/security/cert/CertificateFactory;\");\n\n\tjobject certificate_factory_obj = env->CallStaticObjectMethod(\n\t\t\tcertificate_factory_cls, get_certificate_instance_mid,\n\t\t\tenv->NewStringUTF(\"X509\"));\n\tjmethodID generate_certificate_mid = env->GetMethodID(\n\t\t\tcertificate_factory_cls, \"generateCertificate\",\n\t\t\t\"(Ljava/io/InputStream;)Ljava/security/cert/Certificate;\");\n\tenv->DeleteLocalRef(certificate_factory_cls);\n\n\tjclass certificate_cls = env->FindClass(\"java/security/cert/Certificate\");\n\tjclass byte_input_stream_cls = env->FindClass(\n\t\t\t\"java/io/ByteArrayInputStream\");\n\tjmethodID new_sig_bytes_is_mid = env->GetMethodID(byte_input_stream_cls,\n\t\t\t\"<init>\", \"([B)V\");\n\tjobject sig_bytes_is = env->NewObject(byte_input_stream_cls,\n\t\t\tnew_sig_bytes_is_mid, sig_bytes);\n\tenv->DeleteLocalRef(sig_bytes);\n\tenv->DeleteLocalRef(byte_input_stream_cls);\n\tjobject cert = env->CallObjectMethod(certificate_factory_obj,\n\t\t\tgenerate_certificate_mid, sig_bytes_is);\n\tenv->DeleteLocalRef(sig_bytes_is);\n\tenv->DeleteLocalRef(certificate_factory_obj);\n\tjmethodID get_pubic_key_mid = env->GetMethodID(certificate_cls,\n\t\t\t\"getPublicKey\", \"()Ljava/security/PublicKey;\");\n\tenv->DeleteLocalRef(certificate_cls);\n\n\tjobject publicKey  = env->CallObjectMethod(cert, get_pubic_key_mid);\n\tjclass publicKey_cls = env->GetObjectClass(publicKey);\n\tjmethodID toString_mid = env->GetMethodID(publicKey_cls,\"toString\", \"()Ljava/lang/String;\");\n\tjstring publicKey_str = static_cast<jstring>(env->CallObjectMethod(publicKey,toString_mid));\n\tenv->DeleteLocalRef(cert);\n\tenv->DeleteLocalRef(publicKey_cls);\n\tenv->DeleteLocalRef(publicKey);\n\n\n\tjclass string_cls = env->GetObjectClass(publicKey_str);\n\tjmethodID indexOf_mid = env->GetMethodID(string_cls,\"indexOf\", \"(Ljava/lang/String;)I\");\n\tjstring param = env->NewStringUTF(\"modulus\");\n\tjint aa = env->CallIntMethod(publicKey_str,indexOf_mid,param);\n\tjstring param2 = env->NewStringUTF(\"publicExponent\");\n\n\tjmethodID substring_mid = env->GetMethodID(string_cls,\"substring\", \"(II)Ljava/lang/String;\");\n\n\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"PublicKey String is %s\", jstringTostring(env,publicKey_str));\n\n\tjint bb = env->CallIntMethod(publicKey_str,indexOf_mid,param2);\n\tjstring publicKey2_str =NULL;\n\tif (bb ==-1){\n\t\tjstring param3 = env->NewStringUTF(\"public exponent\");\n\t\tjint cc = env->CallIntMethod(publicKey_str,indexOf_mid,param3);\n\t\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"CC value is %d\", cc);\n\t\tpublicKey2_str= static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,cc-1));\n\t}else {\n\t\tpublicKey2_str = static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,bb-1));\n\t}\n\n\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"PublicKey value is %s\",  jstringTostring(env,publicKey2_str));\n\treturn publicKey2_str;\n}\n~~~\n\n\n### 3.\n\nJellybean\n\n    01-20 08:53:00.141: E/AndroidRuntime(24005): java.lang.NoSuchMethodError:\n\t\tandroid.view.ViewTreeObserver.removeOnGlobalLayoutListener\n\n\n\n~~~ Java\nif (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {\n\t\tViewTreeObserver.removeGlobalOnLayoutListener(this);\n}else\n\t\tViewTreeObserver.removeOnGlobalLayoutListener(this);\n~~~\n\nsetBackground\n\n~~~ Java\nif(Build.VERSION.SzDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {\n\t\tView.setBackground(new ColorDrawable(Color.parseColor(\"#CCCCCC\")));\n} else {\n\t\tView.setBackgroundColor(Color.parseColor(\"#CCCCCC\"));\n}\n~~~\n","source":"_posts/2016-09-22-JNI-get-publickey.md","raw":"---\nlayout: post\ntitle:  JNIpublickey\ncategory: technology\ntags: Android JNI\nkeywords: JNI, publickey\nbanner: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Branch%20in%20a%20Glass%20with%20a%20Book.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Blossoming%20Almond%20Branch%20in%20a%20Glass%20with%20a%20Book.jpg\n---\n\n\n### 1.\n[JNI](http://agehua.github.io/2016/JNI-Learning)\nJNIPublickey\n\n### 2.JNIPublickey\n[github](https://github.com/MasonLiuChn/AndroidUltimateEncrypt)\n\n4.0.4publickey\n\n<!--more-->\n\nPublickey\n\n~~~ Java\nOpenSSLRSAPublicKey{modulus=a0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb26a73305eea631ab18ec3ce746eb253e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9480cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a312c73cf0b98e0ce9a8cf6a682fa,publicExponent=10001}\n~~~\n\nGT-S7568 Android4.0.4Publickey\n\n~~~ Java\nRSA Public Key\n      modulus: a0d169cedabdaac3527c2099eeaca0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb6a73305eea631ab18ec3ce746eb23e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9410cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a313c73cf0b98e0ce9a8cf6a682aff0b98e0ce9a8cf6a682fa\n      public exponent: 10001\n~~~\nmodulus**publicExponent****public exponent**\n\n\n\n~~~ C++\njmethodID substring_mid = env->GetMethodID(string_cls,\"substring\", \"(II)Ljava/lang/String;\");\njmethodID indexOf_mid = env->GetMethodID(string_cls,\"indexOf\", \"(Ljava/lang/String;)I\");\n\njint bb = env->CallIntMethod(publicKey_str,indexOf_mid,param2);\njstring publicKey2_str =NULL;\nif (bb ==-1){\n\tjstring param3 = env->NewStringUTF(\"public exponent\");\n\tjint cc = env->CallIntMethod(publicKey_str,indexOf_mid,param3);\n\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"CC value is %d\", cc);\n\tpublicKey2_str= static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,cc-1));\n}else {\n\tpublicKey2_str = static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,bb-1));\n}\n~~~\n\n#### 2.1 JNI native\n\nJNIJNI\\__android_log_print\n\n~~~ C++\n__android_log_print(ANDROID_LOG_ERROR, TAG, \"PublicKey value is %s\",  jstringTostring(env,publicKey2_str));\n~~~\n\n- ANDROID_LOG_INFOANDROID_LOG_DEBUGANDROID_LOG_ERROR\n- LogCat\n- \n\njstringTostringjstringchar*\n\n~~~ C++\nchar* jstringTostring(JNIEnv* env, jstring jstr)\n{\n\tchar* rtn = NULL;\n  jclass clsstring = env->FindClass(\"java/lang/String\");\n  jstring strencode = env->NewStringUTF(\"utf-8\");\n  jmethodID mid = env->GetMethodID(clsstring, \"getBytes\", \"(Ljava/lang/String;)[B\");\n  jbyteArray barr= (jbyteArray)env->CallObjectMethod(jstr, mid, strencode);\n  jsize alen = env->GetArrayLength(barr);\n  jbyte* ba = env->GetByteArrayElements(barr, JNI_FALSE);\n  if (alen > 0)\n  {\n  rtn = (char*)malloc(alen + 1);\n\n  memcpy(rtn, ba, alen);\n  rtn[alen] = 0;\n  }\n  env->ReleaseByteArrayElements(barr, ba, 0);\n  return rtn;\n}\n~~~\n\njstringJavaNative TypeJavastring\n\nJNI\n[JNI ---- ](http://blog.csdn.net/qinjuning/article/details/7599796)\n\nJNI\n\n- 1..h\n.c:\n\n~~~ C++\n#include <android/log.h>\n\n#define LOG_TAG   \"From JNI ===>>\"\n~~~\n\n- 2.Android.mk\n:\n\n~~~ C++\nLOCAL_LDLIBS   := -lm -llog -ljnigraphics\n~~~\n\n\n\n[JNInativeeclipselogcat](http://www.cnblogs.com/liuling/p/2015-8-5-1.html)\n\n[JNILOGCAT Debug](http://blog.csdn.net/llwdslal/article/details/31733035)\n\n#### 2.2 \n\n\n\n~~~ C++\njstring getPublicKey(JNIEnv* env, jobject thiz,jobject context) {\n\tjclass context_cls = env->GetObjectClass(context);\n\n\tjmethodID get_package_manager_mid = env->GetMethodID(context_cls,\n\t\t\t\"getPackageManager\", \"()Landroid/content/pm/PackageManager;\");\n\n\tjmethodID get_package_name_mid = env->GetMethodID(context_cls,\n\t\t\t\"getPackageName\", \"()Ljava/lang/String;\");\n\tenv->DeleteLocalRef(context_cls);\n\tjobject pm_obj = env->CallObjectMethod(context, get_package_manager_mid);\n\tjclass pm_cls = env->FindClass(\"android/content/pm/PackageManager\");\n\n\tjmethodID get_package_info_mid = env->GetMethodID(pm_cls, \"getPackageInfo\",\n\t\t\t\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\");\n\tjstring package_name = reinterpret_cast<jstring>(env->CallObjectMethod(\n\t\t\tcontext, get_package_name_mid));\n\tjfieldID flag_fid = env->GetStaticFieldID(pm_cls, \"GET_SIGNATURES\", \"I\");\n\tjint flag = env->GetStaticIntField(pm_cls, flag_fid);\n\tenv->DeleteLocalRef(pm_cls);\n\tjobject pi_obj = env->CallObjectMethod(pm_obj, get_package_info_mid,\n\t\t\tpackage_name, flag);\n\tenv->DeleteLocalRef(package_name);\n\n\tjclass pi_cls = env->FindClass(\"android/content/pm/PackageInfo\");\n\tjfieldID signatures_fid = env->GetFieldID(pi_cls, \"signatures\",\n\t\t\t\"[Landroid/content/pm/Signature;\");\n\tenv->DeleteLocalRef(pi_cls);\n\tjobject sig_obj = env->GetObjectField(pi_obj, signatures_fid);\n\tenv->DeleteLocalRef(pi_obj);\n\n\tjobjectArray sigs = reinterpret_cast<jobjectArray>(sig_obj);\n\n\tjclass signature_cls = env->FindClass(\"android/content/pm/Signature\");\n\tjmethodID to_byte_array_mid = env->GetMethodID(signature_cls, \"toByteArray\",\n\t\t\t\"()[B\");\n\n\tjbyteArray sig_bytes = reinterpret_cast<jbyteArray>(env->CallObjectMethod(\n\t\t\tenv->GetObjectArrayElement(sigs, 0), to_byte_array_mid));\n\tjclass certificate_factory_cls = env->FindClass(\n\t\t\t\"java/security/cert/CertificateFactory\");\n\tjmethodID get_certificate_instance_mid = env->GetStaticMethodID(\n\t\t\tcertificate_factory_cls, \"getInstance\",\n\t\t\t\"(Ljava/lang/String;)Ljava/security/cert/CertificateFactory;\");\n\n\tjobject certificate_factory_obj = env->CallStaticObjectMethod(\n\t\t\tcertificate_factory_cls, get_certificate_instance_mid,\n\t\t\tenv->NewStringUTF(\"X509\"));\n\tjmethodID generate_certificate_mid = env->GetMethodID(\n\t\t\tcertificate_factory_cls, \"generateCertificate\",\n\t\t\t\"(Ljava/io/InputStream;)Ljava/security/cert/Certificate;\");\n\tenv->DeleteLocalRef(certificate_factory_cls);\n\n\tjclass certificate_cls = env->FindClass(\"java/security/cert/Certificate\");\n\tjclass byte_input_stream_cls = env->FindClass(\n\t\t\t\"java/io/ByteArrayInputStream\");\n\tjmethodID new_sig_bytes_is_mid = env->GetMethodID(byte_input_stream_cls,\n\t\t\t\"<init>\", \"([B)V\");\n\tjobject sig_bytes_is = env->NewObject(byte_input_stream_cls,\n\t\t\tnew_sig_bytes_is_mid, sig_bytes);\n\tenv->DeleteLocalRef(sig_bytes);\n\tenv->DeleteLocalRef(byte_input_stream_cls);\n\tjobject cert = env->CallObjectMethod(certificate_factory_obj,\n\t\t\tgenerate_certificate_mid, sig_bytes_is);\n\tenv->DeleteLocalRef(sig_bytes_is);\n\tenv->DeleteLocalRef(certificate_factory_obj);\n\tjmethodID get_pubic_key_mid = env->GetMethodID(certificate_cls,\n\t\t\t\"getPublicKey\", \"()Ljava/security/PublicKey;\");\n\tenv->DeleteLocalRef(certificate_cls);\n\n\tjobject publicKey  = env->CallObjectMethod(cert, get_pubic_key_mid);\n\tjclass publicKey_cls = env->GetObjectClass(publicKey);\n\tjmethodID toString_mid = env->GetMethodID(publicKey_cls,\"toString\", \"()Ljava/lang/String;\");\n\tjstring publicKey_str = static_cast<jstring>(env->CallObjectMethod(publicKey,toString_mid));\n\tenv->DeleteLocalRef(cert);\n\tenv->DeleteLocalRef(publicKey_cls);\n\tenv->DeleteLocalRef(publicKey);\n\n\n\tjclass string_cls = env->GetObjectClass(publicKey_str);\n\tjmethodID indexOf_mid = env->GetMethodID(string_cls,\"indexOf\", \"(Ljava/lang/String;)I\");\n\tjstring param = env->NewStringUTF(\"modulus\");\n\tjint aa = env->CallIntMethod(publicKey_str,indexOf_mid,param);\n\tjstring param2 = env->NewStringUTF(\"publicExponent\");\n\n\tjmethodID substring_mid = env->GetMethodID(string_cls,\"substring\", \"(II)Ljava/lang/String;\");\n\n\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"PublicKey String is %s\", jstringTostring(env,publicKey_str));\n\n\tjint bb = env->CallIntMethod(publicKey_str,indexOf_mid,param2);\n\tjstring publicKey2_str =NULL;\n\tif (bb ==-1){\n\t\tjstring param3 = env->NewStringUTF(\"public exponent\");\n\t\tjint cc = env->CallIntMethod(publicKey_str,indexOf_mid,param3);\n\t\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"CC value is %d\", cc);\n\t\tpublicKey2_str= static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,cc-1));\n\t}else {\n\t\tpublicKey2_str = static_cast<jstring>(env->CallObjectMethod(publicKey_str,substring_mid,aa+8,bb-1));\n\t}\n\n\t__android_log_print(ANDROID_LOG_ERROR, TAG, \"PublicKey value is %s\",  jstringTostring(env,publicKey2_str));\n\treturn publicKey2_str;\n}\n~~~\n\n\n### 3.\n\nJellybean\n\n    01-20 08:53:00.141: E/AndroidRuntime(24005): java.lang.NoSuchMethodError:\n\t\tandroid.view.ViewTreeObserver.removeOnGlobalLayoutListener\n\n\n\n~~~ Java\nif (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {\n\t\tViewTreeObserver.removeGlobalOnLayoutListener(this);\n}else\n\t\tViewTreeObserver.removeOnGlobalLayoutListener(this);\n~~~\n\nsetBackground\n\n~~~ Java\nif(Build.VERSION.SzDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {\n\t\tView.setBackground(new ColorDrawable(Color.parseColor(\"#CCCCCC\")));\n} else {\n\t\tView.setBackgroundColor(Color.parseColor(\"#CCCCCC\"));\n}\n~~~\n","slug":"JNI-get-publickey","published":1,"date":"2016-09-21T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5f001qbxs670lmwfes","content":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p><a href=\"http://agehua.github.io/2016/JNI-Learning\">JNI</a><br>JNIPublickey</p>\n<h3 id=\"2-JNIPublickey\"><a href=\"#2-JNIPublickey\" class=\"headerlink\" title=\"2.JNIPublickey\"></a>2.JNIPublickey</h3><p><a href=\"https://github.com/MasonLiuChn/AndroidUltimateEncrypt\" target=\"_blank\" rel=\"external\">github</a></p>\n<p>4.0.4publickey</p>\n<a id=\"more\"></a>\n<p>Publickey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">OpenSSLRSAPublicKey&#123;modulus=a0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb26a73305eea631ab18ec3ce746eb253e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9480cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a312c73cf0b98e0ce9a8cf6a682fa,publicExponent=<span class=\"number\">10001</span>&#125;</div></pre></td></tr></table></figure>\n<p>GT-S7568 Android4.0.4Publickey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">RSA Public Key</div><div class=\"line\">      modulus: a0d169cedabdaac3527c2099eeaca0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb6a73305eea631ab18ec3ce746eb23e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9410cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a313c73cf0b98e0ce9a8cf6a682aff0b98e0ce9a8cf6a682fa</div><div class=\"line\">      <span class=\"keyword\">public</span> exponent: <span class=\"number\">10001</span></div></pre></td></tr></table></figure>\n<p>modulus<strong>publicExponent</strong><strong>public exponent</strong></p>\n<p></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">jmethodID substring_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"substring\"</span>, <span class=\"string\">\"(II)Ljava/lang/String;\"</span>);</div><div class=\"line\">jmethodID indexOf_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"indexOf\"</span>, <span class=\"string\">\"(Ljava/lang/String;)I\"</span>);</div><div class=\"line\"></div><div class=\"line\">jint bb = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param2);</div><div class=\"line\">jstring publicKey2_str =<span class=\"literal\">NULL</span>;</div><div class=\"line\"><span class=\"keyword\">if</span> (bb ==<span class=\"number\">-1</span>)&#123;</div><div class=\"line\">\tjstring param3 = env-&gt;NewStringUTF(<span class=\"string\">\"public exponent\"</span>);</div><div class=\"line\">\tjint cc = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param3);</div><div class=\"line\">\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"CC value is %d\"</span>, cc);</div><div class=\"line\">\tpublicKey2_str= <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,cc<span class=\"number\">-1</span>));</div><div class=\"line\">&#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\tpublicKey2_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,bb<span class=\"number\">-1</span>));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"2-1-JNI-native\"><a href=\"#2-1-JNI-native\" class=\"headerlink\" title=\"2.1 JNI native\"></a>2.1 JNI native</h4><p>JNIJNI__android_log_print</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"PublicKey value is %s\"</span>,  jstringTostring(env,publicKey2_str));</div></pre></td></tr></table></figure>\n<ul>\n<li>ANDROID_LOG_INFOANDROID_LOG_DEBUGANDROID_LOG_ERROR</li>\n<li>LogCat</li>\n<li></li>\n</ul>\n<p>jstringTostringjstringchar*</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span>* <span class=\"title\">jstringTostring</span><span class=\"params\">(JNIEnv* env, jstring jstr)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">\t<span class=\"keyword\">char</span>* rtn = <span class=\"literal\">NULL</span>;</div><div class=\"line\">  jclass clsstring = env-&gt;FindClass(<span class=\"string\">\"java/lang/String\"</span>);</div><div class=\"line\">  jstring strencode = env-&gt;NewStringUTF(<span class=\"string\">\"utf-8\"</span>);</div><div class=\"line\">  jmethodID mid = env-&gt;GetMethodID(clsstring, <span class=\"string\">\"getBytes\"</span>, <span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);</div><div class=\"line\">  jbyteArray barr= (jbyteArray)env-&gt;CallObjectMethod(jstr, mid, strencode);</div><div class=\"line\">  jsize alen = env-&gt;GetArrayLength(barr);</div><div class=\"line\">  jbyte* ba = env-&gt;GetByteArrayElements(barr, JNI_FALSE);</div><div class=\"line\">  <span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>)</div><div class=\"line\">  &#123;</div><div class=\"line\">  rtn = (<span class=\"keyword\">char</span>*)<span class=\"built_in\">malloc</span>(alen + <span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">memcpy</span>(rtn, ba, alen);</div><div class=\"line\">  rtn[alen] = <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  env-&gt;ReleaseByteArrayElements(barr, ba, <span class=\"number\">0</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> rtn;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>jstringJavaNative TypeJavastring</p>\n<p>JNI<br><a href=\"http://blog.csdn.net/qinjuning/article/details/7599796\" target=\"_blank\" rel=\"external\">JNI - </a></p>\n<p>JNI</p>\n<ul>\n<li>1..h<br>.c:</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;android/log.h&gt;</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOG_TAG   <span class=\"meta-string\">\"From JNI ===&gt;&gt;\"</span></span></div></pre></td></tr></table></figure>\n<ul>\n<li>2.Android.mk<br>:</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">LOCAL_LDLIBS   := -lm -llog -ljnigraphics</div></pre></td></tr></table></figure>\n<p></p>\n<p><a href=\"http://www.cnblogs.com/liuling/p/2015-8-5-1.html\" target=\"_blank\" rel=\"external\">JNInativeeclipselogcat</a></p>\n<p><a href=\"http://blog.csdn.net/llwdslal/article/details/31733035\" target=\"_blank\" rel=\"external\">JNILOGCAT Debug</a></p>\n<h4 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h4><p></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">jstring <span class=\"title\">getPublicKey</span><span class=\"params\">(JNIEnv* env, jobject thiz,jobject context)</span> </span>&#123;</div><div class=\"line\">\tjclass context_cls = env-&gt;GetObjectClass(context);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID get_package_manager_mid = env-&gt;GetMethodID(context_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"getPackageManager\"</span>, <span class=\"string\">\"()Landroid/content/pm/PackageManager;\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID get_package_name_mid = env-&gt;GetMethodID(context_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"getPackageName\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(context_cls);</div><div class=\"line\">\tjobject pm_obj = env-&gt;CallObjectMethod(context, get_package_manager_mid);</div><div class=\"line\">\tjclass pm_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/PackageManager\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID get_package_info_mid = env-&gt;GetMethodID(pm_cls, <span class=\"string\">\"getPackageInfo\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\"</span>);</div><div class=\"line\">\tjstring package_name = <span class=\"keyword\">reinterpret_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(</div><div class=\"line\">\t\t\tcontext, get_package_name_mid));</div><div class=\"line\">\tjfieldID flag_fid = env-&gt;GetStaticFieldID(pm_cls, <span class=\"string\">\"GET_SIGNATURES\"</span>, <span class=\"string\">\"I\"</span>);</div><div class=\"line\">\tjint flag = env-&gt;GetStaticIntField(pm_cls, flag_fid);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(pm_cls);</div><div class=\"line\">\tjobject pi_obj = env-&gt;CallObjectMethod(pm_obj, get_package_info_mid,</div><div class=\"line\">\t\t\tpackage_name, flag);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(package_name);</div><div class=\"line\"></div><div class=\"line\">\tjclass pi_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/PackageInfo\"</span>);</div><div class=\"line\">\tjfieldID signatures_fid = env-&gt;GetFieldID(pi_cls, <span class=\"string\">\"signatures\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"[Landroid/content/pm/Signature;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(pi_cls);</div><div class=\"line\">\tjobject sig_obj = env-&gt;GetObjectField(pi_obj, signatures_fid);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(pi_obj);</div><div class=\"line\"></div><div class=\"line\">\tjobjectArray sigs = <span class=\"keyword\">reinterpret_cast</span>&lt;jobjectArray&gt;(sig_obj);</div><div class=\"line\"></div><div class=\"line\">\tjclass signature_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/Signature\"</span>);</div><div class=\"line\">\tjmethodID to_byte_array_mid = env-&gt;GetMethodID(signature_cls, <span class=\"string\">\"toByteArray\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"()[B\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjbyteArray sig_bytes = <span class=\"keyword\">reinterpret_cast</span>&lt;jbyteArray&gt;(env-&gt;CallObjectMethod(</div><div class=\"line\">\t\t\tenv-&gt;GetObjectArrayElement(sigs, <span class=\"number\">0</span>), to_byte_array_mid));</div><div class=\"line\">\tjclass certificate_factory_cls = env-&gt;FindClass(</div><div class=\"line\">\t\t\t<span class=\"string\">\"java/security/cert/CertificateFactory\"</span>);</div><div class=\"line\">\tjmethodID get_certificate_instance_mid = env-&gt;GetStaticMethodID(</div><div class=\"line\">\t\t\tcertificate_factory_cls, <span class=\"string\">\"getInstance\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;)Ljava/security/cert/CertificateFactory;\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjobject certificate_factory_obj = env-&gt;CallStaticObjectMethod(</div><div class=\"line\">\t\t\tcertificate_factory_cls, get_certificate_instance_mid,</div><div class=\"line\">\t\t\tenv-&gt;NewStringUTF(<span class=\"string\">\"X509\"</span>));</div><div class=\"line\">\tjmethodID generate_certificate_mid = env-&gt;GetMethodID(</div><div class=\"line\">\t\t\tcertificate_factory_cls, <span class=\"string\">\"generateCertificate\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/io/InputStream;)Ljava/security/cert/Certificate;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_factory_cls);</div><div class=\"line\"></div><div class=\"line\">\tjclass certificate_cls = env-&gt;FindClass(<span class=\"string\">\"java/security/cert/Certificate\"</span>);</div><div class=\"line\">\tjclass byte_input_stream_cls = env-&gt;FindClass(</div><div class=\"line\">\t\t\t<span class=\"string\">\"java/io/ByteArrayInputStream\"</span>);</div><div class=\"line\">\tjmethodID new_sig_bytes_is_mid = env-&gt;GetMethodID(byte_input_stream_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"&lt;init&gt;\"</span>, <span class=\"string\">\"([B)V\"</span>);</div><div class=\"line\">\tjobject sig_bytes_is = env-&gt;NewObject(byte_input_stream_cls,</div><div class=\"line\">\t\t\tnew_sig_bytes_is_mid, sig_bytes);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(sig_bytes);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(byte_input_stream_cls);</div><div class=\"line\">\tjobject cert = env-&gt;CallObjectMethod(certificate_factory_obj,</div><div class=\"line\">\t\t\tgenerate_certificate_mid, sig_bytes_is);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(sig_bytes_is);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_factory_obj);</div><div class=\"line\">\tjmethodID get_pubic_key_mid = env-&gt;GetMethodID(certificate_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"getPublicKey\"</span>, <span class=\"string\">\"()Ljava/security/PublicKey;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_cls);</div><div class=\"line\"></div><div class=\"line\">\tjobject publicKey  = env-&gt;CallObjectMethod(cert, get_pubic_key_mid);</div><div class=\"line\">\tjclass publicKey_cls = env-&gt;GetObjectClass(publicKey);</div><div class=\"line\">\tjmethodID toString_mid = env-&gt;GetMethodID(publicKey_cls,<span class=\"string\">\"toString\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</div><div class=\"line\">\tjstring publicKey_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey,toString_mid));</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(cert);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(publicKey_cls);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(publicKey);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">\tjclass string_cls = env-&gt;GetObjectClass(publicKey_str);</div><div class=\"line\">\tjmethodID indexOf_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"indexOf\"</span>, <span class=\"string\">\"(Ljava/lang/String;)I\"</span>);</div><div class=\"line\">\tjstring param = env-&gt;NewStringUTF(<span class=\"string\">\"modulus\"</span>);</div><div class=\"line\">\tjint aa = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param);</div><div class=\"line\">\tjstring param2 = env-&gt;NewStringUTF(<span class=\"string\">\"publicExponent\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID substring_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"substring\"</span>, <span class=\"string\">\"(II)Ljava/lang/String;\"</span>);</div><div class=\"line\"></div><div class=\"line\">\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"PublicKey String is %s\"</span>, jstringTostring(env,publicKey_str));</div><div class=\"line\"></div><div class=\"line\">\tjint bb = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param2);</div><div class=\"line\">\tjstring publicKey2_str =<span class=\"literal\">NULL</span>;</div><div class=\"line\">\t<span class=\"keyword\">if</span> (bb ==<span class=\"number\">-1</span>)&#123;</div><div class=\"line\">\t\tjstring param3 = env-&gt;NewStringUTF(<span class=\"string\">\"public exponent\"</span>);</div><div class=\"line\">\t\tjint cc = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param3);</div><div class=\"line\">\t\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"CC value is %d\"</span>, cc);</div><div class=\"line\">\t\tpublicKey2_str= <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,cc<span class=\"number\">-1</span>));</div><div class=\"line\">\t&#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\tpublicKey2_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,bb<span class=\"number\">-1</span>));</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"PublicKey value is %s\"</span>,  jstringTostring(env,publicKey2_str));</div><div class=\"line\">\t<span class=\"keyword\">return</span> publicKey2_str;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>Jellybean</p>\n<pre><code>01-20 08:53:00.141: E/AndroidRuntime(24005): java.lang.NoSuchMethodError:\n    android.view.ViewTreeObserver.removeOnGlobalLayoutListener\n</code></pre><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.JELLY_BEAN) &#123;</div><div class=\"line\">\t\tViewTreeObserver.removeGlobalOnLayoutListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">&#125;<span class=\"keyword\">else</span></div><div class=\"line\">\t\tViewTreeObserver.removeOnGlobalLayoutListener(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<p>setBackground</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span>(Build.VERSION.SzDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) &#123;</div><div class=\"line\">\t\tView.setBackground(<span class=\"keyword\">new</span> ColorDrawable(Color.parseColor(<span class=\"string\">\"#CCCCCC\"</span>)));</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\tView.setBackgroundColor(Color.parseColor(<span class=\"string\">\"#CCCCCC\"</span>));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","excerpt":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.\"></a>1.</h3><p><a href=\"http://agehua.github.io/2016/JNI-Learning\">JNI</a><br>JNIPublickey</p>\n<h3 id=\"2-JNIPublickey\"><a href=\"#2-JNIPublickey\" class=\"headerlink\" title=\"2.JNIPublickey\"></a>2.JNIPublickey</h3><p><a href=\"https://github.com/MasonLiuChn/AndroidUltimateEncrypt\">github</a></p>\n<p>4.0.4publickey</p>","more":"<p>Publickey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">OpenSSLRSAPublicKey&#123;modulus=a0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb26a73305eea631ab18ec3ce746eb253e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9480cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a312c73cf0b98e0ce9a8cf6a682fa,publicExponent=<span class=\"number\">10001</span>&#125;</div></pre></td></tr></table></figure>\n<p>GT-S7568 Android4.0.4Publickey</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">RSA Public Key</div><div class=\"line\">      modulus: a0d169cedabdaac3527c2099eeaca0d169cedabdaac3527c2099eeac4cbd74bb9b14c2571bcf6755f49e1d8c8439a37e009b0cb1b1ae9bf164dc976ddc4ee050621c746610d995185accbe8b3c09cc4f8c7afd990db47be814f7f45ec9c489be5b0933e89ff58070c29c98199331160bdb3a19e0687d36e850ee686c565737be4f61328264a58792e198d873b023ec11cb6a73305eea631ab18ec3ce746eb23e47c145503e933ee5da892326ecbb29b5a005aacef2d30d720611f7014aa3f2e40954b9e4deeaca1823dd2f7b2230670acabda70d2f14b1adc9410cf0a48d47866a1aa745ae97d0ab906cd76e5ab76916d03ef153b35edc2ae7284a613b3a3a313c73cf0b98e0ce9a8cf6a682aff0b98e0ce9a8cf6a682fa</div><div class=\"line\">      <span class=\"keyword\">public</span> exponent: <span class=\"number\">10001</span></div></pre></td></tr></table></figure>\n<p>modulus<strong>publicExponent</strong><strong>public exponent</strong></p>\n<p></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">jmethodID substring_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"substring\"</span>, <span class=\"string\">\"(II)Ljava/lang/String;\"</span>);</div><div class=\"line\">jmethodID indexOf_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"indexOf\"</span>, <span class=\"string\">\"(Ljava/lang/String;)I\"</span>);</div><div class=\"line\"></div><div class=\"line\">jint bb = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param2);</div><div class=\"line\">jstring publicKey2_str =<span class=\"literal\">NULL</span>;</div><div class=\"line\"><span class=\"keyword\">if</span> (bb ==<span class=\"number\">-1</span>)&#123;</div><div class=\"line\">\tjstring param3 = env-&gt;NewStringUTF(<span class=\"string\">\"public exponent\"</span>);</div><div class=\"line\">\tjint cc = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param3);</div><div class=\"line\">\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"CC value is %d\"</span>, cc);</div><div class=\"line\">\tpublicKey2_str= <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,cc<span class=\"number\">-1</span>));</div><div class=\"line\">&#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\tpublicKey2_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,bb<span class=\"number\">-1</span>));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"2-1-JNI-native\"><a href=\"#2-1-JNI-native\" class=\"headerlink\" title=\"2.1 JNI native\"></a>2.1 JNI native</h4><p>JNIJNI__android_log_print</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"PublicKey value is %s\"</span>,  jstringTostring(env,publicKey2_str));</div></pre></td></tr></table></figure>\n<ul>\n<li>ANDROID_LOG_INFOANDROID_LOG_DEBUGANDROID_LOG_ERROR</li>\n<li>LogCat</li>\n<li></li>\n</ul>\n<p>jstringTostringjstringchar*</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">char</span>* <span class=\"title\">jstringTostring</span><span class=\"params\">(JNIEnv* env, jstring jstr)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">char</span>* rtn = <span class=\"literal\">NULL</span>;</div><div class=\"line\">  jclass clsstring = env-&gt;FindClass(<span class=\"string\">\"java/lang/String\"</span>);</div><div class=\"line\">  jstring strencode = env-&gt;NewStringUTF(<span class=\"string\">\"utf-8\"</span>);</div><div class=\"line\">  jmethodID mid = env-&gt;GetMethodID(clsstring, <span class=\"string\">\"getBytes\"</span>, <span class=\"string\">\"(Ljava/lang/String;)[B\"</span>);</div><div class=\"line\">  jbyteArray barr= (jbyteArray)env-&gt;CallObjectMethod(jstr, mid, strencode);</div><div class=\"line\">  jsize alen = env-&gt;GetArrayLength(barr);</div><div class=\"line\">  jbyte* ba = env-&gt;GetByteArrayElements(barr, JNI_FALSE);</div><div class=\"line\">  <span class=\"keyword\">if</span> (alen &gt; <span class=\"number\">0</span>)</div><div class=\"line\">  &#123;</div><div class=\"line\">  rtn = (<span class=\"keyword\">char</span>*)<span class=\"built_in\">malloc</span>(alen + <span class=\"number\">1</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"built_in\">memcpy</span>(rtn, ba, alen);</div><div class=\"line\">  rtn[alen] = <span class=\"number\">0</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">  env-&gt;ReleaseByteArrayElements(barr, ba, <span class=\"number\">0</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> rtn;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>jstringJavaNative TypeJavastring</p>\n<p>JNI<br><a href=\"http://blog.csdn.net/qinjuning/article/details/7599796\">JNI - </a></p>\n<p>JNI</p>\n<ul>\n<li>1..h<br>.c:</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;android/log.h&gt;</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LOG_TAG   <span class=\"meta-string\">\"From JNI ===&gt;&gt;\"</span></span></div></pre></td></tr></table></figure>\n<ul>\n<li>2.Android.mk<br>:</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\">LOCAL_LDLIBS   := -lm -llog -ljnigraphics</div></pre></td></tr></table></figure>\n<p></p>\n<p><a href=\"http://www.cnblogs.com/liuling/p/2015-8-5-1.html\">JNInativeeclipselogcat</a></p>\n<p><a href=\"http://blog.csdn.net/llwdslal/article/details/31733035\">JNILOGCAT Debug</a></p>\n<h4 id=\"2-2-\"><a href=\"#2-2-\" class=\"headerlink\" title=\"2.2 \"></a>2.2 </h4><p></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">jstring <span class=\"title\">getPublicKey</span><span class=\"params\">(JNIEnv* env, jobject thiz,jobject context)</span> </span>&#123;</div><div class=\"line\">\tjclass context_cls = env-&gt;GetObjectClass(context);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID get_package_manager_mid = env-&gt;GetMethodID(context_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"getPackageManager\"</span>, <span class=\"string\">\"()Landroid/content/pm/PackageManager;\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID get_package_name_mid = env-&gt;GetMethodID(context_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"getPackageName\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(context_cls);</div><div class=\"line\">\tjobject pm_obj = env-&gt;CallObjectMethod(context, get_package_manager_mid);</div><div class=\"line\">\tjclass pm_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/PackageManager\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID get_package_info_mid = env-&gt;GetMethodID(pm_cls, <span class=\"string\">\"getPackageInfo\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;\"</span>);</div><div class=\"line\">\tjstring package_name = <span class=\"keyword\">reinterpret_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(</div><div class=\"line\">\t\t\tcontext, get_package_name_mid));</div><div class=\"line\">\tjfieldID flag_fid = env-&gt;GetStaticFieldID(pm_cls, <span class=\"string\">\"GET_SIGNATURES\"</span>, <span class=\"string\">\"I\"</span>);</div><div class=\"line\">\tjint flag = env-&gt;GetStaticIntField(pm_cls, flag_fid);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(pm_cls);</div><div class=\"line\">\tjobject pi_obj = env-&gt;CallObjectMethod(pm_obj, get_package_info_mid,</div><div class=\"line\">\t\t\tpackage_name, flag);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(package_name);</div><div class=\"line\"></div><div class=\"line\">\tjclass pi_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/PackageInfo\"</span>);</div><div class=\"line\">\tjfieldID signatures_fid = env-&gt;GetFieldID(pi_cls, <span class=\"string\">\"signatures\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"[Landroid/content/pm/Signature;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(pi_cls);</div><div class=\"line\">\tjobject sig_obj = env-&gt;GetObjectField(pi_obj, signatures_fid);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(pi_obj);</div><div class=\"line\"></div><div class=\"line\">\tjobjectArray sigs = <span class=\"keyword\">reinterpret_cast</span>&lt;jobjectArray&gt;(sig_obj);</div><div class=\"line\"></div><div class=\"line\">\tjclass signature_cls = env-&gt;FindClass(<span class=\"string\">\"android/content/pm/Signature\"</span>);</div><div class=\"line\">\tjmethodID to_byte_array_mid = env-&gt;GetMethodID(signature_cls, <span class=\"string\">\"toByteArray\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"()[B\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjbyteArray sig_bytes = <span class=\"keyword\">reinterpret_cast</span>&lt;jbyteArray&gt;(env-&gt;CallObjectMethod(</div><div class=\"line\">\t\t\tenv-&gt;GetObjectArrayElement(sigs, <span class=\"number\">0</span>), to_byte_array_mid));</div><div class=\"line\">\tjclass certificate_factory_cls = env-&gt;FindClass(</div><div class=\"line\">\t\t\t<span class=\"string\">\"java/security/cert/CertificateFactory\"</span>);</div><div class=\"line\">\tjmethodID get_certificate_instance_mid = env-&gt;GetStaticMethodID(</div><div class=\"line\">\t\t\tcertificate_factory_cls, <span class=\"string\">\"getInstance\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/lang/String;)Ljava/security/cert/CertificateFactory;\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjobject certificate_factory_obj = env-&gt;CallStaticObjectMethod(</div><div class=\"line\">\t\t\tcertificate_factory_cls, get_certificate_instance_mid,</div><div class=\"line\">\t\t\tenv-&gt;NewStringUTF(<span class=\"string\">\"X509\"</span>));</div><div class=\"line\">\tjmethodID generate_certificate_mid = env-&gt;GetMethodID(</div><div class=\"line\">\t\t\tcertificate_factory_cls, <span class=\"string\">\"generateCertificate\"</span>,</div><div class=\"line\">\t\t\t<span class=\"string\">\"(Ljava/io/InputStream;)Ljava/security/cert/Certificate;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_factory_cls);</div><div class=\"line\"></div><div class=\"line\">\tjclass certificate_cls = env-&gt;FindClass(<span class=\"string\">\"java/security/cert/Certificate\"</span>);</div><div class=\"line\">\tjclass byte_input_stream_cls = env-&gt;FindClass(</div><div class=\"line\">\t\t\t<span class=\"string\">\"java/io/ByteArrayInputStream\"</span>);</div><div class=\"line\">\tjmethodID new_sig_bytes_is_mid = env-&gt;GetMethodID(byte_input_stream_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"&lt;init&gt;\"</span>, <span class=\"string\">\"([B)V\"</span>);</div><div class=\"line\">\tjobject sig_bytes_is = env-&gt;NewObject(byte_input_stream_cls,</div><div class=\"line\">\t\t\tnew_sig_bytes_is_mid, sig_bytes);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(sig_bytes);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(byte_input_stream_cls);</div><div class=\"line\">\tjobject cert = env-&gt;CallObjectMethod(certificate_factory_obj,</div><div class=\"line\">\t\t\tgenerate_certificate_mid, sig_bytes_is);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(sig_bytes_is);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_factory_obj);</div><div class=\"line\">\tjmethodID get_pubic_key_mid = env-&gt;GetMethodID(certificate_cls,</div><div class=\"line\">\t\t\t<span class=\"string\">\"getPublicKey\"</span>, <span class=\"string\">\"()Ljava/security/PublicKey;\"</span>);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(certificate_cls);</div><div class=\"line\"></div><div class=\"line\">\tjobject publicKey  = env-&gt;CallObjectMethod(cert, get_pubic_key_mid);</div><div class=\"line\">\tjclass publicKey_cls = env-&gt;GetObjectClass(publicKey);</div><div class=\"line\">\tjmethodID toString_mid = env-&gt;GetMethodID(publicKey_cls,<span class=\"string\">\"toString\"</span>, <span class=\"string\">\"()Ljava/lang/String;\"</span>);</div><div class=\"line\">\tjstring publicKey_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey,toString_mid));</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(cert);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(publicKey_cls);</div><div class=\"line\">\tenv-&gt;DeleteLocalRef(publicKey);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">\tjclass string_cls = env-&gt;GetObjectClass(publicKey_str);</div><div class=\"line\">\tjmethodID indexOf_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"indexOf\"</span>, <span class=\"string\">\"(Ljava/lang/String;)I\"</span>);</div><div class=\"line\">\tjstring param = env-&gt;NewStringUTF(<span class=\"string\">\"modulus\"</span>);</div><div class=\"line\">\tjint aa = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param);</div><div class=\"line\">\tjstring param2 = env-&gt;NewStringUTF(<span class=\"string\">\"publicExponent\"</span>);</div><div class=\"line\"></div><div class=\"line\">\tjmethodID substring_mid = env-&gt;GetMethodID(string_cls,<span class=\"string\">\"substring\"</span>, <span class=\"string\">\"(II)Ljava/lang/String;\"</span>);</div><div class=\"line\"></div><div class=\"line\">\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"PublicKey String is %s\"</span>, jstringTostring(env,publicKey_str));</div><div class=\"line\"></div><div class=\"line\">\tjint bb = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param2);</div><div class=\"line\">\tjstring publicKey2_str =<span class=\"literal\">NULL</span>;</div><div class=\"line\">\t<span class=\"keyword\">if</span> (bb ==<span class=\"number\">-1</span>)&#123;</div><div class=\"line\">\t\tjstring param3 = env-&gt;NewStringUTF(<span class=\"string\">\"public exponent\"</span>);</div><div class=\"line\">\t\tjint cc = env-&gt;CallIntMethod(publicKey_str,indexOf_mid,param3);</div><div class=\"line\">\t\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"CC value is %d\"</span>, cc);</div><div class=\"line\">\t\tpublicKey2_str= <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,cc<span class=\"number\">-1</span>));</div><div class=\"line\">\t&#125;<span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\tpublicKey2_str = <span class=\"keyword\">static_cast</span>&lt;jstring&gt;(env-&gt;CallObjectMethod(publicKey_str,substring_mid,aa+<span class=\"number\">8</span>,bb<span class=\"number\">-1</span>));</div><div class=\"line\">\t&#125;</div><div class=\"line\"></div><div class=\"line\">\t__android_log_print(ANDROID_LOG_ERROR, TAG, <span class=\"string\">\"PublicKey value is %s\"</span>,  jstringTostring(env,publicKey2_str));</div><div class=\"line\">\t<span class=\"keyword\">return</span> publicKey2_str;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3.\"></a>3.</h3><p>Jellybean</p>\n<pre><code>01-20 08:53:00.141: E/AndroidRuntime(24005): java.lang.NoSuchMethodError:\n    android.view.ViewTreeObserver.removeOnGlobalLayoutListener\n</code></pre><p></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.JELLY_BEAN) &#123;</div><div class=\"line\">\t\tViewTreeObserver.removeGlobalOnLayoutListener(<span class=\"keyword\">this</span>);</div><div class=\"line\">&#125;<span class=\"keyword\">else</span></div><div class=\"line\">\t\tViewTreeObserver.removeOnGlobalLayoutListener(<span class=\"keyword\">this</span>);</div></pre></td></tr></table></figure>\n<p>setBackground</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span>(Build.VERSION.SzDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) &#123;</div><div class=\"line\">\t\tView.setBackground(<span class=\"keyword\">new</span> ColorDrawable(Color.parseColor(<span class=\"string\">\"#CCCCCC\"</span>)));</div><div class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">\t\tView.setBackgroundColor(Color.parseColor(<span class=\"string\">\"#CCCCCC\"</span>));</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"},{"layout":"post","title":"Android ","keywords":"Android,","banner":"http://obxk8w81b.bkt.clouddn.com/Enclosed%20Field%20with%20Ploughman.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Enclosed%20Field%20with%20Ploughman.jpg","_content":"\n\n\n\n\n\n- (1)System.exit(0);\n\n- (2)Process.killProcess(Process.myPid());\n\n- (3)ActivityManager activityManager = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);\n\n    activityManager.restartPackage(\"packagename\");\n\n\n2.2\n\n<!--more-->\n\n### 1\n\nActivityListActivityActivityListListActivity\n\nActivityonCreateActivity\n\n~~~ Java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n\n       super.onCreate(savedInstanceState);\n       IntentFilter filter = new IntentFilter();\n       filter.addAction(\"finish\");\n       registerReceiver(mFinishReceiver, filter);\n       \n}\n\nprivate BroadcastReceiver mFinishReceiver = new BroadcastReceiver() {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n           if(\"finish\".equals(intent.getAction())) {\n              Log.e(\"#########\", \"I am \" + getLocalClassName()\n                     + \",now finishing myself...\");\n              finish();\n       }\n    }\n};\n~~~\n\nActivity\n\n\n\ngetApplicationContext().sendBroadcast(new Intent(\"finish\"));\n\nhttp://www.cnblogs.com/wader2011/archive/2011/10/10/2205161.html\n\n### 2\n\n~~~ Java\npublic class CloseActivity\n{\n    private static LinkedList<Activity> acys = new LinkedList<Activity>();\n\n    public static Activity curActivity;\n\n    public static void add(Activity acy)\n    {\n        acys.add(acy);\n    }\n\n    public static void remove(Activity acy) {\n        acys.remove(acy);\n    }\n\n    public static void close()\n    {\n        Activity acy;\n        while (acys.size() != 0)\n        {\n            acy = acys.poll();\n            if (!acy.isFinishing())\n            {\n                acy.finish();\n            }\n        }\n//        android.os.Process.killProcess(android.os.Process.myPid());\n    }\n}\n~~~\n\n### 3.activity stack\nAndroidstack\nDAIntentIntent.FLAG_ACTIVITY_CLEAR_TOPAActivity\n\nD:\n\n~~~ Java\nIntent intent = new Intent();\nintent.setClass(D.this, A.class);\nintent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  //FLAG\nstartActivity(intent);\nfinish();\n~~~\n\nA\n\n~~~ Java\n@Override\nprotected void onNewIntent(Intent intent) { // TODO Auto-generated method stub\n    super.onNewIntent(intent);\n        //\n    if ((Intent.FLAG_ACTIVITY_CLEAR_TOP & intent.getFlags()) != 0) {\n         finish();\n    }\n}\n~~~\n\n      AManifest.xmlandroid:launchMode=\"singleTop\"\n\n ADAactivityIntent.FLAG_ACTIVITY_CLEAR_TOPBCAandroid:launchMode=\"singleTop\" oncreate(),onNewIntentIntent.FLAG_ACTIVITY_CLEAR_TOPA finish A,B,C,D\n\n\n### 4.JNI\n[Android JNI](http://blog.csdn.net/yyh352091626/article/details/50542554)\n","source":"_posts/2016-09-22-quit-whole-application.md","raw":"---\nlayout: post\ntitle:  Android \ncategory: technology\ntags: technology\nkeywords: Android,\nbanner: http://obxk8w81b.bkt.clouddn.com/Enclosed%20Field%20with%20Ploughman.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Enclosed%20Field%20with%20Ploughman.jpg\n---\n\n\n\n\n\n\n- (1)System.exit(0);\n\n- (2)Process.killProcess(Process.myPid());\n\n- (3)ActivityManager activityManager = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);\n\n    activityManager.restartPackage(\"packagename\");\n\n\n2.2\n\n<!--more-->\n\n### 1\n\nActivityListActivityActivityListListActivity\n\nActivityonCreateActivity\n\n~~~ Java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n\n       super.onCreate(savedInstanceState);\n       IntentFilter filter = new IntentFilter();\n       filter.addAction(\"finish\");\n       registerReceiver(mFinishReceiver, filter);\n       \n}\n\nprivate BroadcastReceiver mFinishReceiver = new BroadcastReceiver() {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n           if(\"finish\".equals(intent.getAction())) {\n              Log.e(\"#########\", \"I am \" + getLocalClassName()\n                     + \",now finishing myself...\");\n              finish();\n       }\n    }\n};\n~~~\n\nActivity\n\n\n\ngetApplicationContext().sendBroadcast(new Intent(\"finish\"));\n\nhttp://www.cnblogs.com/wader2011/archive/2011/10/10/2205161.html\n\n### 2\n\n~~~ Java\npublic class CloseActivity\n{\n    private static LinkedList<Activity> acys = new LinkedList<Activity>();\n\n    public static Activity curActivity;\n\n    public static void add(Activity acy)\n    {\n        acys.add(acy);\n    }\n\n    public static void remove(Activity acy) {\n        acys.remove(acy);\n    }\n\n    public static void close()\n    {\n        Activity acy;\n        while (acys.size() != 0)\n        {\n            acy = acys.poll();\n            if (!acy.isFinishing())\n            {\n                acy.finish();\n            }\n        }\n//        android.os.Process.killProcess(android.os.Process.myPid());\n    }\n}\n~~~\n\n### 3.activity stack\nAndroidstack\nDAIntentIntent.FLAG_ACTIVITY_CLEAR_TOPAActivity\n\nD:\n\n~~~ Java\nIntent intent = new Intent();\nintent.setClass(D.this, A.class);\nintent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  //FLAG\nstartActivity(intent);\nfinish();\n~~~\n\nA\n\n~~~ Java\n@Override\nprotected void onNewIntent(Intent intent) { // TODO Auto-generated method stub\n    super.onNewIntent(intent);\n        //\n    if ((Intent.FLAG_ACTIVITY_CLEAR_TOP & intent.getFlags()) != 0) {\n         finish();\n    }\n}\n~~~\n\n      AManifest.xmlandroid:launchMode=\"singleTop\"\n\n ADAactivityIntent.FLAG_ACTIVITY_CLEAR_TOPBCAandroid:launchMode=\"singleTop\" oncreate(),onNewIntentIntent.FLAG_ACTIVITY_CLEAR_TOPA finish A,B,C,D\n\n\n### 4.JNI\n[Android JNI](http://blog.csdn.net/yyh352091626/article/details/50542554)\n","slug":"quit-whole-application","published":1,"date":"2016-09-21T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5h001ubxs6eflf9zga","content":"<p></p>\n<p></p>\n<ul>\n<li><p>(1)System.exit(0);</p>\n</li>\n<li><p>(2)Process.killProcess(Process.myPid());</p>\n</li>\n<li><p>(3)ActivityManager activityManager = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);</p>\n<p>  activityManager.restartPackage(packagename);</p>\n</li>\n</ul>\n<p>2.2</p>\n<a id=\"more\"></a>\n<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>ActivityListActivityActivityListListActivity</p>\n<p>ActivityonCreateActivity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">       IntentFilter filter = <span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">       filter.addAction(<span class=\"string\">\"finish\"</span>);</div><div class=\"line\">       registerReceiver(mFinishReceiver, filter);</div><div class=\"line\">       </div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">private</span> BroadcastReceiver mFinishReceiver = <span class=\"keyword\">new</span> BroadcastReceiver() &#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">           <span class=\"keyword\">if</span>(<span class=\"string\">\"finish\"</span>.equals(intent.getAction())) &#123;</div><div class=\"line\">              Log.e(<span class=\"string\">\"#########\"</span>, <span class=\"string\">\"I am \"</span> + getLocalClassName()</div><div class=\"line\">                     + <span class=\"string\">\",now finishing myself...\"</span>);</div><div class=\"line\">              finish();</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>Activity</p>\n<p></p>\n<p>getApplicationContext().sendBroadcast(new Intent(finish));</p>\n<p><a href=\"http://www.cnblogs.com/wader2011/archive/2011/10/10/2205161.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/wader2011/archive/2011/10/10/2205161.html</a></p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CloseActivity</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> LinkedList&lt;Activity&gt; acys = <span class=\"keyword\">new</span> LinkedList&lt;Activity&gt;();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Activity curActivity;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(Activity acy)</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        acys.add(acy);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(Activity acy)</span> </span>&#123;</div><div class=\"line\">        acys.remove(acy);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">close</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        Activity acy;</div><div class=\"line\">        <span class=\"keyword\">while</span> (acys.size() != <span class=\"number\">0</span>)</div><div class=\"line\">        &#123;</div><div class=\"line\">            acy = acys.poll();</div><div class=\"line\">            <span class=\"keyword\">if</span> (!acy.isFinishing())</div><div class=\"line\">            &#123;</div><div class=\"line\">                acy.finish();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"><span class=\"comment\">//        android.os.Process.killProcess(android.os.Process.myPid());</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-activity-stack\"><a href=\"#3-activity-stack\" class=\"headerlink\" title=\"3.activity stack\"></a>3.activity stack</h3><p>Androidstack<br>DAIntentIntent.FLAG_ACTIVITY_CLEAR_TOPAActivity</p>\n<p>D:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Intent intent = <span class=\"keyword\">new</span> Intent();</div><div class=\"line\">intent.setClass(D.<span class=\"keyword\">this</span>, A.class);</div><div class=\"line\">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  <span class=\"comment\">//FLAG</span></div><div class=\"line\">startActivity(intent);</div><div class=\"line\">finish();</div></pre></td></tr></table></figure>\n<p>A</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onNewIntent</span><span class=\"params\">(Intent intent)</span> </span>&#123; <span class=\"comment\">// TODO Auto-generated method stub</span></div><div class=\"line\">    <span class=\"keyword\">super</span>.onNewIntent(intent);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">if</span> ((Intent.FLAG_ACTIVITY_CLEAR_TOP &amp; intent.getFlags()) != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">         finish();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<pre><code>AManifest.xmlandroid:launchMode=&quot;singleTop&quot;\n</code></pre><p> ADAactivityIntent.FLAG_ACTIVITY_CLEAR_TOPBCAandroid:launchMode=singleTop oncreate(),onNewIntentIntent.FLAG_ACTIVITY_CLEAR_TOPA finish A,B,C,D</p>\n<h3 id=\"4-JNI\"><a href=\"#4-JNI\" class=\"headerlink\" title=\"4.JNI\"></a>4.JNI</h3><p><a href=\"http://blog.csdn.net/yyh352091626/article/details/50542554\" target=\"_blank\" rel=\"external\">Android JNI</a></p>\n","excerpt":"<p></p>\n<p></p>\n<ul>\n<li><p>(1)System.exit(0);</p>\n</li>\n<li><p>(2)Process.killProcess(Process.myPid());</p>\n</li>\n<li><p>(3)ActivityManager activityManager = (ActivityManager) this.getSystemService(Context.ACTIVITY_SERVICE);</p>\n<p>  activityManager.restartPackage(packagename);</p>\n</li>\n</ul>\n<p>2.2</p>","more":"<h3 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h3><p>ActivityListActivityActivityListListActivity</p>\n<p>ActivityonCreateActivity</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">       IntentFilter filter = <span class=\"keyword\">new</span> IntentFilter();</div><div class=\"line\">       filter.addAction(<span class=\"string\">\"finish\"</span>);</div><div class=\"line\">       registerReceiver(mFinishReceiver, filter);</div><div class=\"line\">       </div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">private</span> BroadcastReceiver mFinishReceiver = <span class=\"keyword\">new</span> BroadcastReceiver() &#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onReceive</span><span class=\"params\">(Context context, Intent intent)</span> </span>&#123;</div><div class=\"line\">           <span class=\"keyword\">if</span>(<span class=\"string\">\"finish\"</span>.equals(intent.getAction())) &#123;</div><div class=\"line\">              Log.e(<span class=\"string\">\"#########\"</span>, <span class=\"string\">\"I am \"</span> + getLocalClassName()</div><div class=\"line\">                     + <span class=\"string\">\",now finishing myself...\"</span>);</div><div class=\"line\">              finish();</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div></pre></td></tr></table></figure>\n<p>Activity</p>\n<p></p>\n<p>getApplicationContext().sendBroadcast(new Intent(finish));</p>\n<p><a href=\"http://www.cnblogs.com/wader2011/archive/2011/10/10/2205161.html\">http://www.cnblogs.com/wader2011/archive/2011/10/10/2205161.html</a></p>\n<h3 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h3><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CloseActivity</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> LinkedList&lt;Activity&gt; acys = <span class=\"keyword\">new</span> LinkedList&lt;Activity&gt;();</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Activity curActivity;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">add</span><span class=\"params\">(Activity acy)</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        acys.add(acy);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">remove</span><span class=\"params\">(Activity acy)</span> </span>&#123;</div><div class=\"line\">        acys.remove(acy);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">close</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        Activity acy;</div><div class=\"line\">        <span class=\"keyword\">while</span> (acys.size() != <span class=\"number\">0</span>)</div><div class=\"line\">        &#123;</div><div class=\"line\">            acy = acys.poll();</div><div class=\"line\">            <span class=\"keyword\">if</span> (!acy.isFinishing())</div><div class=\"line\">            &#123;</div><div class=\"line\">                acy.finish();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"><span class=\"comment\">//        android.os.Process.killProcess(android.os.Process.myPid());</span></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"3-activity-stack\"><a href=\"#3-activity-stack\" class=\"headerlink\" title=\"3.activity stack\"></a>3.activity stack</h3><p>Androidstack<br>DAIntentIntent.FLAG_ACTIVITY_CLEAR_TOPAActivity</p>\n<p>D:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">Intent intent = <span class=\"keyword\">new</span> Intent();</div><div class=\"line\">intent.setClass(D.<span class=\"keyword\">this</span>, A.class);</div><div class=\"line\">intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  <span class=\"comment\">//FLAG</span></div><div class=\"line\">startActivity(intent);</div><div class=\"line\">finish();</div></pre></td></tr></table></figure>\n<p>A</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Override</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onNewIntent</span><span class=\"params\">(Intent intent)</span> </span>&#123; <span class=\"comment\">// TODO Auto-generated method stub</span></div><div class=\"line\">    <span class=\"keyword\">super</span>.onNewIntent(intent);</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"keyword\">if</span> ((Intent.FLAG_ACTIVITY_CLEAR_TOP &amp; intent.getFlags()) != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">         finish();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<pre><code>AManifest.xmlandroid:launchMode=&quot;singleTop&quot;\n</code></pre><p> ADAactivityIntent.FLAG_ACTIVITY_CLEAR_TOPBCAandroid:launchMode=singleTop oncreate(),onNewIntentIntent.FLAG_ACTIVITY_CLEAR_TOPA finish A,B,C,D</p>\n<h3 id=\"4-JNI\"><a href=\"#4-JNI\" class=\"headerlink\" title=\"4.JNI\"></a>4.JNI</h3><p><a href=\"http://blog.csdn.net/yyh352091626/article/details/50542554\">Android JNI</a></p>"},{"layout":"post","title":"Android","keywords":"Android,","banner":"http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg","_content":"\n\nandroid\n\n#### 1.Android\nAndroid\n\n- (1) **Activity -> Window -> View**\nviewonTouchEventfalseonTouchEventActivity(ActivityonTouchEvent)\n\n<!--more-->\n- (2) view**onInterceptTouchEvent**\n- (3) viewACTION_DOWN********(onTouchEvent)ACTION_DOWNonTouchEvent**view**Activity\n- (4) ViewGroup**onInterceptTouchEvent**falseviewonInterceptTouchEventonTouchEvent\n- (5) View**onTouchEvent**(true)(clickablelongClickablefalse)viewlongClickablefalseclickableButtontrueTextViewfalse\n- (6) **ViewenableonTouchEvent**viewdisableclickablelongClickabletrueonTouchEventtrue\n- (7) ******view****requestDisallowInterceptTouchEvent********ACTION_DOWN**ACTION_DOWNViewGrouponInterceptTouchEvent\nViewGroupdispatchTouchEvent**FLAG_DISALLOW_INTERCEPT****viewrequestDisallowInterceptTouchEvent**trueViewGroup\n- (8) WindowPhoneWindowActivitycontentView\n\n~~~ Java\n((ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content)).getChildAt(0);\n~~~\n\n#### 2.OnTouchListeneronTouchEventOnClickListener\nviewOnTouchListenerOnTouchListeneronTouch**onTouch**falseview**onTouchEvent**trueonTouchEvent\nonTouchEventviewOnClickListeneronClickOnClickListener\n\n#### 3.AsyncTask\n\n#### 4.Handler\n\n#### 5.\n\n#### 6.Android\n\n#### 7.\n- BroadcastReceiver\n- onReceive(Context,Intent)\n      Intent.getAction\n- Context.registerReceiver()IntentFilteraction\n\n\n#### 8.\n- JNI\n- \n- \n\n#### 9.Sqlite\nSQLiteOpenHelper:\n\n    super(Context context, String name, SQLiteDatabase.CursorFactory factory, int version)\n\n.version:\n\n    onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)\n\nSQLite\n\n\n\n**SQLiteALTER TABLE**Subscription\n\n- ALTER TABLE Subscription ADD COLUMN Activation BLOB;\n- ALTER TABLE Subscription ADD COLUMN Key BLOB;\n\n****SqliteBLOB()\n\n****\n\n- 1Atemp_A\n- 2A\n- 3temp_AA\n\n\n\n~~~ Java\n//\npublic static final String TEMP_SQL_CREATE_TABLE_SUBSCRIBE = \"alter table \"\n            + A + \" rename to temp_A\";\n\n//temp_AcopyAA\npublic static final String INSERT_SUBSCRIBE = \"select 'insert into A (code,name,username,tablename)\n                        values (\"code\",\"name\",\"cnki\",\"tablename\")' as insertSQL from temp_A\";\n\n//\npublic static final String DELETE_TEMP_SUBSCRIBE = \"delete from temp_A \";\npublic static final String DROP_TEMP_SUBSCRIBE = \"drop table if exists temp_A\";\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\n        for (int j = oldVersion; j <= newVersion; j++) {\n            switch (j) {\n            case 2:\n//\n                db.execSQL(TEMP_SQL_CREATE_TABLE_SUBSCRIBE);\n //OnCreate\n                onCreate(db);\n//\n                for (int i = 0; i < arrWhereAct.length; i++) {\n                    db.execSQL(DELETE_TEMP_SUBSCRIBE + arrWhereAct[i]);\n                }\n\n                //A\nCursor cursor = db.rawQuery(INSERT_SUBSCRIBE, null);\n                if (cursor.moveToFirst()) {\n                    do {\n                        db.execSQL(cursor.getString(cursor\n                                .getColumnIndex(\"insertSQL\")));\n                    } while (cursor.moveToNext());\n                }\n\n                cursor.close();\n//\n                db.execSQL(DROP_TEMP_SUBSCRIBE);\n\n                break;\n\n            default:\n                break;\n            }\n        }\n}\n~~~\n\n> ****for14for\n\n\n#### 10.AIDL\nAIDL Java Android Java \n\n****AIDL .aidl .java\n\n****AIDL .aidl  Java Book.java  BookManager.aidl com.lypeer.aidldemo   .aidl  Book  .aidl  import com.lypeer.aidldemo.Book;  .java  .aidl \n\n   \n\n- Java byteshortintlongfloatdoublebooleanchar\n- String \n- CharSequence\n- ListListAIDLAIDLparcelableList\n- MapMapAIDLAIDLparcelableMap\n\n**tag**tagAIDLtag**in****out****inout******intagoutinouttag\n\nJava StringCharSequencetagintaginout\n\n**AIDL**AIDL**parcelable**AIDLAIDL****Android\nAIDL\n\nAIDL\n\n~~~ Java\n// Book.aidl\n//AIDL\n// Book AIDL\n//Book.aidlBook.java\npackage com.lypeer.ipcclient;\n\n//parcelable\nparcelable Book;\n\n// BookManager.aidl\n//AIDL\npackage com.lypeer.ipcclient;\n//\nimport com.lypeer.ipcclient.Book;\n\ninterface BookManager {\n\n    //\n    List<Book> getBooks();\n    Book getBook();\n    int getBookCount();\n\n    //JavaStringCharSequence\n    //tag\n    void setBookPrice(in Book book , int price)\n    void setBookName(in Book book , String name)\n    void addBookIn(in Book book);\n    void addBookOut(out Book book);\n    void addBookInout(inout Book book);\n}\n~~~\n\n\n#### 11.Android\n\n- (Hierarchy Viewer)\n- layoutopt\n- <include>\n- < merge />\n- ViewStub\n\n#### 12.Android\n- UI\n- ANR\n- \n- Android API\n        StringBuffer/StringHashMap/ArrayMap/SparseArray\n\n[Andoid](http://blog.csdn.net/yanbober/article/details/48394201)\n","source":"_posts/2016-09-28-Android-interview-questions.md","raw":"---\nlayout: post\ntitle:  Android\ncategory: accumulation\ntags: accumulation\nkeywords: Android,\nbanner: http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Cottages%20Reminiscence%20of%20the%20North.jpg\n---\n\n\nandroid\n\n#### 1.Android\nAndroid\n\n- (1) **Activity -> Window -> View**\nviewonTouchEventfalseonTouchEventActivity(ActivityonTouchEvent)\n\n<!--more-->\n- (2) view**onInterceptTouchEvent**\n- (3) viewACTION_DOWN********(onTouchEvent)ACTION_DOWNonTouchEvent**view**Activity\n- (4) ViewGroup**onInterceptTouchEvent**falseviewonInterceptTouchEventonTouchEvent\n- (5) View**onTouchEvent**(true)(clickablelongClickablefalse)viewlongClickablefalseclickableButtontrueTextViewfalse\n- (6) **ViewenableonTouchEvent**viewdisableclickablelongClickabletrueonTouchEventtrue\n- (7) ******view****requestDisallowInterceptTouchEvent********ACTION_DOWN**ACTION_DOWNViewGrouponInterceptTouchEvent\nViewGroupdispatchTouchEvent**FLAG_DISALLOW_INTERCEPT****viewrequestDisallowInterceptTouchEvent**trueViewGroup\n- (8) WindowPhoneWindowActivitycontentView\n\n~~~ Java\n((ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content)).getChildAt(0);\n~~~\n\n#### 2.OnTouchListeneronTouchEventOnClickListener\nviewOnTouchListenerOnTouchListeneronTouch**onTouch**falseview**onTouchEvent**trueonTouchEvent\nonTouchEventviewOnClickListeneronClickOnClickListener\n\n#### 3.AsyncTask\n\n#### 4.Handler\n\n#### 5.\n\n#### 6.Android\n\n#### 7.\n- BroadcastReceiver\n- onReceive(Context,Intent)\n      Intent.getAction\n- Context.registerReceiver()IntentFilteraction\n\n\n#### 8.\n- JNI\n- \n- \n\n#### 9.Sqlite\nSQLiteOpenHelper:\n\n    super(Context context, String name, SQLiteDatabase.CursorFactory factory, int version)\n\n.version:\n\n    onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)\n\nSQLite\n\n\n\n**SQLiteALTER TABLE**Subscription\n\n- ALTER TABLE Subscription ADD COLUMN Activation BLOB;\n- ALTER TABLE Subscription ADD COLUMN Key BLOB;\n\n****SqliteBLOB()\n\n****\n\n- 1Atemp_A\n- 2A\n- 3temp_AA\n\n\n\n~~~ Java\n//\npublic static final String TEMP_SQL_CREATE_TABLE_SUBSCRIBE = \"alter table \"\n            + A + \" rename to temp_A\";\n\n//temp_AcopyAA\npublic static final String INSERT_SUBSCRIBE = \"select 'insert into A (code,name,username,tablename)\n                        values (\"code\",\"name\",\"cnki\",\"tablename\")' as insertSQL from temp_A\";\n\n//\npublic static final String DELETE_TEMP_SUBSCRIBE = \"delete from temp_A \";\npublic static final String DROP_TEMP_SUBSCRIBE = \"drop table if exists temp_A\";\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\n        for (int j = oldVersion; j <= newVersion; j++) {\n            switch (j) {\n            case 2:\n//\n                db.execSQL(TEMP_SQL_CREATE_TABLE_SUBSCRIBE);\n //OnCreate\n                onCreate(db);\n//\n                for (int i = 0; i < arrWhereAct.length; i++) {\n                    db.execSQL(DELETE_TEMP_SUBSCRIBE + arrWhereAct[i]);\n                }\n\n                //A\nCursor cursor = db.rawQuery(INSERT_SUBSCRIBE, null);\n                if (cursor.moveToFirst()) {\n                    do {\n                        db.execSQL(cursor.getString(cursor\n                                .getColumnIndex(\"insertSQL\")));\n                    } while (cursor.moveToNext());\n                }\n\n                cursor.close();\n//\n                db.execSQL(DROP_TEMP_SUBSCRIBE);\n\n                break;\n\n            default:\n                break;\n            }\n        }\n}\n~~~\n\n> ****for14for\n\n\n#### 10.AIDL\nAIDL Java Android Java \n\n****AIDL .aidl .java\n\n****AIDL .aidl  Java Book.java  BookManager.aidl com.lypeer.aidldemo   .aidl  Book  .aidl  import com.lypeer.aidldemo.Book;  .java  .aidl \n\n   \n\n- Java byteshortintlongfloatdoublebooleanchar\n- String \n- CharSequence\n- ListListAIDLAIDLparcelableList\n- MapMapAIDLAIDLparcelableMap\n\n**tag**tagAIDLtag**in****out****inout******intagoutinouttag\n\nJava StringCharSequencetagintaginout\n\n**AIDL**AIDL**parcelable**AIDLAIDL****Android\nAIDL\n\nAIDL\n\n~~~ Java\n// Book.aidl\n//AIDL\n// Book AIDL\n//Book.aidlBook.java\npackage com.lypeer.ipcclient;\n\n//parcelable\nparcelable Book;\n\n// BookManager.aidl\n//AIDL\npackage com.lypeer.ipcclient;\n//\nimport com.lypeer.ipcclient.Book;\n\ninterface BookManager {\n\n    //\n    List<Book> getBooks();\n    Book getBook();\n    int getBookCount();\n\n    //JavaStringCharSequence\n    //tag\n    void setBookPrice(in Book book , int price)\n    void setBookName(in Book book , String name)\n    void addBookIn(in Book book);\n    void addBookOut(out Book book);\n    void addBookInout(inout Book book);\n}\n~~~\n\n\n#### 11.Android\n\n- (Hierarchy Viewer)\n- layoutopt\n- <include>\n- < merge />\n- ViewStub\n\n#### 12.Android\n- UI\n- ANR\n- \n- Android API\n        StringBuffer/StringHashMap/ArrayMap/SparseArray\n\n[Andoid](http://blog.csdn.net/yanbober/article/details/48394201)\n","slug":"Android-interview-questions","published":1,"date":"2016-09-27T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5i001xbxs6o2vmlkf1","content":"<p>android</p>\n<h4 id=\"1-Android\"><a href=\"#1-Android\" class=\"headerlink\" title=\"1.Android\"></a>1.Android</h4><p>Android</p>\n<ul>\n<li>(1) <strong>Activity -&gt; Window -&gt; View</strong><br>viewonTouchEventfalseonTouchEventActivity(ActivityonTouchEvent)</li>\n</ul>\n<a id=\"more\"></a>\n<ul>\n<li>(2) view<strong>onInterceptTouchEvent</strong></li>\n<li>(3) viewACTION_DOWN<strong></strong><strong></strong>(onTouchEvent)ACTION_DOWNonTouchEvent<strong>view</strong>Activity</li>\n<li>(4) ViewGroup<strong>onInterceptTouchEvent</strong>falseviewonInterceptTouchEventonTouchEvent</li>\n<li>(5) View<strong>onTouchEvent</strong>(true)(clickablelongClickablefalse)viewlongClickablefalseclickableButtontrueTextViewfalse</li>\n<li>(6) <strong>ViewenableonTouchEvent</strong>viewdisableclickablelongClickabletrueonTouchEventtrue</li>\n<li>(7) <strong></strong><strong>view</strong><strong>requestDisallowInterceptTouchEvent</strong><strong></strong><strong>ACTION_DOWN</strong>ACTION_DOWNViewGrouponInterceptTouchEvent<br>ViewGroupdispatchTouchEvent<strong>FLAG_DISALLOW_INTERCEPT</strong><strong>viewrequestDisallowInterceptTouchEvent</strong>trueViewGroup</li>\n<li>(8) WindowPhoneWindowActivitycontentView</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">((ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content)).getChildAt(<span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"2-OnTouchListeneronTouchEventOnClickListener\"><a href=\"#2-OnTouchListeneronTouchEventOnClickListener\" class=\"headerlink\" title=\"2.OnTouchListeneronTouchEventOnClickListener\"></a>2.OnTouchListeneronTouchEventOnClickListener</h4><p>viewOnTouchListenerOnTouchListeneronTouch<strong>onTouch</strong>falseview<strong>onTouchEvent</strong>trueonTouchEvent<br>onTouchEventviewOnClickListeneronClickOnClickListener</p>\n<h4 id=\"3-AsyncTask\"><a href=\"#3-AsyncTask\" class=\"headerlink\" title=\"3.AsyncTask\"></a>3.AsyncTask</h4><h4 id=\"4-Handler\"><a href=\"#4-Handler\" class=\"headerlink\" title=\"4.Handler\"></a>4.Handler</h4><h4 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5.\"></a>5.</h4><h4 id=\"6-Android\"><a href=\"#6-Android\" class=\"headerlink\" title=\"6.Android\"></a>6.Android</h4><h4 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7.\"></a>7.</h4><ul>\n<li>BroadcastReceiver</li>\n<li>onReceive(Context,Intent)<pre><code>Intent.getAction\n</code></pre></li>\n<li>Context.registerReceiver()IntentFilteraction</li>\n</ul>\n<h4 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8.\"></a>8.</h4><ul>\n<li>JNI</li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"9-Sqlite\"><a href=\"#9-Sqlite\" class=\"headerlink\" title=\"9.Sqlite\"></a>9.Sqlite</h4><p>SQLiteOpenHelper:</p>\n<pre><code>super(Context context, String name, SQLiteDatabase.CursorFactory factory, int version)\n</code></pre><p>.version:</p>\n<pre><code>onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)\n</code></pre><p>SQLite</p>\n<p></p>\n<p><strong>SQLiteALTER TABLE</strong>Subscription</p>\n<ul>\n<li>ALTER TABLE Subscription ADD COLUMN Activation BLOB;</li>\n<li>ALTER TABLE Subscription ADD COLUMN Key BLOB;</li>\n</ul>\n<p><strong></strong>SqliteBLOB()</p>\n<p><strong></strong></p>\n<ul>\n<li>1Atemp_A</li>\n<li>2A</li>\n<li>3temp_AA</li>\n</ul>\n<p></p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//</div><div class=\"line\">public static final String TEMP_SQL_CREATE_TABLE_SUBSCRIBE = \"alter table \"</div><div class=\"line\">            + A + \" rename to temp_A\";</div><div class=\"line\"></div><div class=\"line\">//temp_AcopyAA</div><div class=\"line\">public static final String INSERT_SUBSCRIBE = \"select 'insert into A (code,name,username,tablename)</div><div class=\"line\">                        values (\"code\",\"name\",\"cnki\",\"tablename\")' as insertSQL from temp_A\";</div><div class=\"line\"></div><div class=\"line\">//</div><div class=\"line\">public static final String DELETE_TEMP_SUBSCRIBE = \"delete from temp_A \";</div><div class=\"line\">public static final String DROP_TEMP_SUBSCRIBE = \"drop table if exists temp_A\";</div><div class=\"line\"></div><div class=\"line\">@Override</div><div class=\"line\">public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) &#123;</div><div class=\"line\"></div><div class=\"line\">        for (int j = oldVersion; j &lt;= newVersion; j++) &#123;</div><div class=\"line\">            switch (j) &#123;</div><div class=\"line\">            case 2:</div><div class=\"line\">//</div><div class=\"line\">                db.execSQL(TEMP_SQL_CREATE_TABLE_SUBSCRIBE);</div><div class=\"line\"> //OnCreate</div><div class=\"line\">                onCreate(db);</div><div class=\"line\">//</div><div class=\"line\">                for (int i = 0; i &lt; arrWhereAct.length; i++) &#123;</div><div class=\"line\">                    db.execSQL(DELETE_TEMP_SUBSCRIBE + arrWhereAct[i]);</div><div class=\"line\">                &#125;</div><div class=\"line\"></div><div class=\"line\">                //A</div><div class=\"line\">Cursor cursor = db.rawQuery(INSERT_SUBSCRIBE, null);</div><div class=\"line\">                if (cursor.moveToFirst()) &#123;</div><div class=\"line\">                    do &#123;</div><div class=\"line\">                        db.execSQL(cursor.getString(cursor</div><div class=\"line\">                                .getColumnIndex(\"insertSQL\")));</div><div class=\"line\">                    &#125; while (cursor.moveToNext());</div><div class=\"line\">                &#125;</div><div class=\"line\"></div><div class=\"line\">                cursor.close();</div><div class=\"line\">//</div><div class=\"line\">                db.execSQL(DROP_TEMP_SUBSCRIBE);</div><div class=\"line\"></div><div class=\"line\">                break;</div><div class=\"line\"></div><div class=\"line\">            default:</div><div class=\"line\">                break;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><strong></strong>for14for</p>\n</blockquote>\n<h4 id=\"10-AIDL\"><a href=\"#10-AIDL\" class=\"headerlink\" title=\"10.AIDL\"></a>10.AIDL</h4><p>AIDL Java Android Java </p>\n<p><strong></strong>AIDL .aidl .java</p>\n<p><strong></strong>AIDL .aidl  Java Book.java  BookManager.aidl com.lypeer.aidldemo   .aidl  Book  .aidl  import com.lypeer.aidldemo.Book;  .java  .aidl </p>\n<p>   </p>\n<ul>\n<li>Java byteshortintlongfloatdoublebooleanchar</li>\n<li>String </li>\n<li>CharSequence</li>\n<li>ListListAIDLAIDLparcelableList</li>\n<li>MapMapAIDLAIDLparcelableMap</li>\n</ul>\n<p><strong>tag</strong>tagAIDLtag<strong>in</strong><strong>out</strong><strong>inout</strong><strong></strong>intagoutinouttag</p>\n<p>Java StringCharSequencetagintaginout</p>\n<p><strong>AIDL</strong>AIDL<strong>parcelable</strong>AIDLAIDL<strong></strong>Android<br>AIDL</p>\n<p>AIDL</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Book.aidl</span></div><div class=\"line\"><span class=\"comment\">//AIDL</span></div><div class=\"line\"><span class=\"comment\">// Book AIDL</span></div><div class=\"line\"><span class=\"comment\">//Book.aidlBook.java</span></div><div class=\"line\"><span class=\"keyword\">package</span> com.lypeer.ipcclient;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//parcelable</span></div><div class=\"line\">parcelable Book;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// BookManager.aidl</span></div><div class=\"line\"><span class=\"comment\">//AIDL</span></div><div class=\"line\"><span class=\"keyword\">package</span> com.lypeer.ipcclient;</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">import</span> com.lypeer.ipcclient.Book;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">BookManager</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"function\">List&lt;Book&gt; <span class=\"title\">getBooks</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\">Book <span class=\"title\">getBook</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getBookCount</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//JavaStringCharSequence</span></div><div class=\"line\">    <span class=\"comment\">//tag</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setBookPrice</span><span class=\"params\">(in Book book , <span class=\"keyword\">int</span> price)</span></span></div><div class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title\">setBookName</span><span class=\"params\">(in Book book , String name)</span></div><div class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title\">addBookIn</span><span class=\"params\">(in Book book)</span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">addBookOut</span><span class=\"params\">(out Book book)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">addBookInout</span><span class=\"params\">(inout Book book)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"11-Android\"><a href=\"#11-Android\" class=\"headerlink\" title=\"11.Android\"></a>11.Android</h4><ul>\n<li>(Hierarchy Viewer)</li>\n<li>layoutopt</li>\n<li><include></include></li>\n<li>&lt; merge /&gt;</li>\n<li>ViewStub</li>\n</ul>\n<h4 id=\"12-Android\"><a href=\"#12-Android\" class=\"headerlink\" title=\"12.Android\"></a>12.Android</h4><ul>\n<li>UI</li>\n<li>ANR</li>\n<li></li>\n<li>Android API<pre><code>StringBuffer/StringHashMap/ArrayMap/SparseArray\n</code></pre></li>\n</ul>\n<p><a href=\"http://blog.csdn.net/yanbober/article/details/48394201\" target=\"_blank\" rel=\"external\">Andoid</a></p>\n","excerpt":"<p>android</p>\n<h4 id=\"1-Android\"><a href=\"#1-Android\" class=\"headerlink\" title=\"1.Android\"></a>1.Android</h4><p>Android</p>\n<ul>\n<li>(1) <strong>Activity -&gt; Window -&gt; View</strong><br>viewonTouchEventfalseonTouchEventActivity(ActivityonTouchEvent)</li>\n</ul>","more":"<ul>\n<li>(2) view<strong>onInterceptTouchEvent</strong></li>\n<li>(3) viewACTION_DOWN<strong></strong><strong></strong>(onTouchEvent)ACTION_DOWNonTouchEvent<strong>view</strong>Activity</li>\n<li>(4) ViewGroup<strong>onInterceptTouchEvent</strong>falseviewonInterceptTouchEventonTouchEvent</li>\n<li>(5) View<strong>onTouchEvent</strong>(true)(clickablelongClickablefalse)viewlongClickablefalseclickableButtontrueTextViewfalse</li>\n<li>(6) <strong>ViewenableonTouchEvent</strong>viewdisableclickablelongClickabletrueonTouchEventtrue</li>\n<li>(7) <strong></strong><strong>view</strong><strong>requestDisallowInterceptTouchEvent</strong><strong></strong><strong>ACTION_DOWN</strong>ACTION_DOWNViewGrouponInterceptTouchEvent<br>ViewGroupdispatchTouchEvent<strong>FLAG_DISALLOW_INTERCEPT</strong><strong>viewrequestDisallowInterceptTouchEvent</strong>trueViewGroup</li>\n<li>(8) WindowPhoneWindowActivitycontentView</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">((ViewGroup)getWindow().getDecorView().findViewById(android.R.id.content)).getChildAt(<span class=\"number\">0</span>);</div></pre></td></tr></table></figure>\n<h4 id=\"2-OnTouchListeneronTouchEventOnClickListener\"><a href=\"#2-OnTouchListeneronTouchEventOnClickListener\" class=\"headerlink\" title=\"2.OnTouchListeneronTouchEventOnClickListener\"></a>2.OnTouchListeneronTouchEventOnClickListener</h4><p>viewOnTouchListenerOnTouchListeneronTouch<strong>onTouch</strong>falseview<strong>onTouchEvent</strong>trueonTouchEvent<br>onTouchEventviewOnClickListeneronClickOnClickListener</p>\n<h4 id=\"3-AsyncTask\"><a href=\"#3-AsyncTask\" class=\"headerlink\" title=\"3.AsyncTask\"></a>3.AsyncTask</h4><h4 id=\"4-Handler\"><a href=\"#4-Handler\" class=\"headerlink\" title=\"4.Handler\"></a>4.Handler</h4><h4 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5.\"></a>5.</h4><h4 id=\"6-Android\"><a href=\"#6-Android\" class=\"headerlink\" title=\"6.Android\"></a>6.Android</h4><h4 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7.\"></a>7.</h4><ul>\n<li>BroadcastReceiver</li>\n<li>onReceive(Context,Intent)<pre><code>Intent.getAction\n</code></pre></li>\n<li>Context.registerReceiver()IntentFilteraction</li>\n</ul>\n<h4 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8.\"></a>8.</h4><ul>\n<li>JNI</li>\n<li></li>\n<li></li>\n</ul>\n<h4 id=\"9-Sqlite\"><a href=\"#9-Sqlite\" class=\"headerlink\" title=\"9.Sqlite\"></a>9.Sqlite</h4><p>SQLiteOpenHelper:</p>\n<pre><code>super(Context context, String name, SQLiteDatabase.CursorFactory factory, int version)\n</code></pre><p>.version:</p>\n<pre><code>onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)\n</code></pre><p>SQLite</p>\n<p></p>\n<p><strong>SQLiteALTER TABLE</strong>Subscription</p>\n<ul>\n<li>ALTER TABLE Subscription ADD COLUMN Activation BLOB;</li>\n<li>ALTER TABLE Subscription ADD COLUMN Key BLOB;</li>\n</ul>\n<p><strong></strong>SqliteBLOB()</p>\n<p><strong></strong></p>\n<ul>\n<li>1Atemp_A</li>\n<li>2A</li>\n<li>3temp_AA</li>\n</ul>\n<p></p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//</div><div class=\"line\">public static final String TEMP_SQL_CREATE_TABLE_SUBSCRIBE = \"alter table \"</div><div class=\"line\">            + A + \" rename to temp_A\";</div><div class=\"line\"></div><div class=\"line\">//temp_AcopyAA</div><div class=\"line\">public static final String INSERT_SUBSCRIBE = \"select 'insert into A (code,name,username,tablename)</div><div class=\"line\">                        values (\"code\",\"name\",\"cnki\",\"tablename\")' as insertSQL from temp_A\";</div><div class=\"line\"></div><div class=\"line\">//</div><div class=\"line\">public static final String DELETE_TEMP_SUBSCRIBE = \"delete from temp_A \";</div><div class=\"line\">public static final String DROP_TEMP_SUBSCRIBE = \"drop table if exists temp_A\";</div><div class=\"line\"></div><div class=\"line\">@Override</div><div class=\"line\">public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) &#123;</div><div class=\"line\"></div><div class=\"line\">        for (int j = oldVersion; j &lt;= newVersion; j++) &#123;</div><div class=\"line\">            switch (j) &#123;</div><div class=\"line\">            case 2:</div><div class=\"line\">//</div><div class=\"line\">                db.execSQL(TEMP_SQL_CREATE_TABLE_SUBSCRIBE);</div><div class=\"line\"> //OnCreate</div><div class=\"line\">                onCreate(db);</div><div class=\"line\">//</div><div class=\"line\">                for (int i = 0; i &lt; arrWhereAct.length; i++) &#123;</div><div class=\"line\">                    db.execSQL(DELETE_TEMP_SUBSCRIBE + arrWhereAct[i]);</div><div class=\"line\">                &#125;</div><div class=\"line\"></div><div class=\"line\">                //A</div><div class=\"line\">Cursor cursor = db.rawQuery(INSERT_SUBSCRIBE, null);</div><div class=\"line\">                if (cursor.moveToFirst()) &#123;</div><div class=\"line\">                    do &#123;</div><div class=\"line\">                        db.execSQL(cursor.getString(cursor</div><div class=\"line\">                                .getColumnIndex(\"insertSQL\")));</div><div class=\"line\">                    &#125; while (cursor.moveToNext());</div><div class=\"line\">                &#125;</div><div class=\"line\"></div><div class=\"line\">                cursor.close();</div><div class=\"line\">//</div><div class=\"line\">                db.execSQL(DROP_TEMP_SUBSCRIBE);</div><div class=\"line\"></div><div class=\"line\">                break;</div><div class=\"line\"></div><div class=\"line\">            default:</div><div class=\"line\">                break;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<blockquote>\n<p><strong></strong>for14for</p>\n</blockquote>\n<h4 id=\"10-AIDL\"><a href=\"#10-AIDL\" class=\"headerlink\" title=\"10.AIDL\"></a>10.AIDL</h4><p>AIDL Java Android Java </p>\n<p><strong></strong>AIDL .aidl .java</p>\n<p><strong></strong>AIDL .aidl  Java Book.java  BookManager.aidl com.lypeer.aidldemo   .aidl  Book  .aidl  import com.lypeer.aidldemo.Book;  .java  .aidl </p>\n<p>   </p>\n<ul>\n<li>Java byteshortintlongfloatdoublebooleanchar</li>\n<li>String </li>\n<li>CharSequence</li>\n<li>ListListAIDLAIDLparcelableList</li>\n<li>MapMapAIDLAIDLparcelableMap</li>\n</ul>\n<p><strong>tag</strong>tagAIDLtag<strong>in</strong><strong>out</strong><strong>inout</strong><strong></strong>intagoutinouttag</p>\n<p>Java StringCharSequencetagintaginout</p>\n<p><strong>AIDL</strong>AIDL<strong>parcelable</strong>AIDLAIDL<strong></strong>Android<br>AIDL</p>\n<p>AIDL</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Book.aidl</span></div><div class=\"line\"><span class=\"comment\">//AIDL</span></div><div class=\"line\"><span class=\"comment\">// Book AIDL</span></div><div class=\"line\"><span class=\"comment\">//Book.aidlBook.java</span></div><div class=\"line\"><span class=\"keyword\">package</span> com.lypeer.ipcclient;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//parcelable</span></div><div class=\"line\">parcelable Book;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// BookManager.aidl</span></div><div class=\"line\"><span class=\"comment\">//AIDL</span></div><div class=\"line\"><span class=\"keyword\">package</span> com.lypeer.ipcclient;</div><div class=\"line\"><span class=\"comment\">//</span></div><div class=\"line\"><span class=\"keyword\">import</span> com.lypeer.ipcclient.Book;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">BookManager</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//</span></div><div class=\"line\">    <span class=\"function\">List&lt;Book&gt; <span class=\"title\">getBooks</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\">Book <span class=\"title\">getBook</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">getBookCount</span><span class=\"params\">()</span></span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//JavaStringCharSequence</span></div><div class=\"line\">    <span class=\"comment\">//tag</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">setBookPrice</span><span class=\"params\">(in Book book , <span class=\"keyword\">int</span> price)</span></div><div class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title\">setBookName</span><span class=\"params\">(in Book book , String name)</span></div><div class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title\">addBookIn</span><span class=\"params\">(in Book book)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">addBookOut</span><span class=\"params\">(out Book book)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">addBookInout</span><span class=\"params\">(inout Book book)</span></span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"11-Android\"><a href=\"#11-Android\" class=\"headerlink\" title=\"11.Android\"></a>11.Android</h4><ul>\n<li>(Hierarchy Viewer)</li>\n<li>layoutopt</li>\n<li><include></li>\n<li>&lt; merge /&gt;</li>\n<li>ViewStub</li>\n</ul>\n<h4 id=\"12-Android\"><a href=\"#12-Android\" class=\"headerlink\" title=\"12.Android\"></a>12.Android</h4><ul>\n<li>UI</li>\n<li>ANR</li>\n<li></li>\n<li>Android API<pre><code>StringBuffer/StringHashMap/ArrayMap/SparseArray\n</code></pre></li>\n</ul>\n<p><a href=\"http://blog.csdn.net/yanbober/article/details/48394201\">Andoid</a></p>"},{"layout":"post","title":"gradle ","keywords":"Android,gradle","banner":"http://obxk8w81b.bkt.clouddn.com/Crab%20on%20Its%20Back.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Crab%20on%20Its%20Back.jpg","_content":"\n\nGradleGroovyJavaXMLGroovyDSLantMavenIvy\n\n### Gradle\n\n> (Project)  (tasks)Gradle \n\n<!--more-->\n\n- Jar\n\n- \n\n-  projects  project  tasks  task\n\n![basic structure](/images/blogimages/2016/gradle_structure1.png)\n\nBuildProjectProjecttask\n\nAntbuild.xmlMavenpom.xmlMakemakefile\n\n#### Gradle\n\nGradle\n\n- build.gradle tasks\n\n- settings.gradle \n\n- gradle.properties \n\n### Gradle\nGradleGradleJava Java  Gradlebuild.gradle apply plugin: 'java'\n\ntasktasktask:\n\n- 1.gradle build\n- 2.gradle assemble, \n- 3.gradle clean build \n- 4.gradle check checkstylepmdfindbugs\n\nGradletask\n\n![basic task](/images/blogimages/2016/gradle_task.png)\n\nbuild\n\n#### \n\n,  Java ,  JAR .  JAR ,  Gradle .  Gradle , JAR  maven \n\nmaven\n\n~~~ Java\nrepositories {\n\tmavenCentral()\n}\n~~~\nmavenCentral() Gradlemavenmavenmavengradlemaven\n\n~~~ Java\ndependencies {\n\tcompile group: 'commons-collections', name: 'commons-collections', version: '3.2'\n\t// \n\t// compile 'commons-collections:commons-collections:3.2'\n}\n~~~\ngroup, name  version JARmvnrepository\n\n#### \n\nGradleJARJARJAR\n\n~~~ Java\ndependencies {\n\tcompile files('dir/file.jar')\n\tcompile fileTree(dir: 'libs', include: '*.jar')\n}\n~~~\n#### \n\nGradlesettings.gradle\n\n~~~ Java\ninclude 'sub-project1', 'sub-project2', 'sub-project3'\n~~~\nsub-project1sub-project2sub-project1build.gradle\n\n~~~ Java\ndependencies {\n\tcompile project(':sub-project2')\n}\n~~~\n#### \n\ngradlegradle\n\nHibernatejarJunitjarjarGradle\n\n~~~ Java\napply plugin: 'java'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile group: 'org.hibernate', name: 'hibernate-core', version: '3.6.7.Final'\n    testCompile group: 'junit', name: 'junit', version: '4.+'\n}\n~~~\njunitjar\n\nJava \n\n> - compile\n\t\n- runtime\n\t , compile\n- testCompile\n\t , runtimecompile\n- testRuntime\n\t , \n","source":"_posts/2016-10-12-gradle-learning.md","raw":"---\nlayout: post\ntitle:  gradle \ncategory: accumulation\ntags: gradle\nkeywords: Android,gradle\nbanner: http://obxk8w81b.bkt.clouddn.com/Crab%20on%20Its%20Back.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Crab%20on%20Its%20Back.jpg\n---\n\n\nGradleGroovyJavaXMLGroovyDSLantMavenIvy\n\n### Gradle\n\n> (Project)  (tasks)Gradle \n\n<!--more-->\n\n- Jar\n\n- \n\n-  projects  project  tasks  task\n\n![basic structure](/images/blogimages/2016/gradle_structure1.png)\n\nBuildProjectProjecttask\n\nAntbuild.xmlMavenpom.xmlMakemakefile\n\n#### Gradle\n\nGradle\n\n- build.gradle tasks\n\n- settings.gradle \n\n- gradle.properties \n\n### Gradle\nGradleGradleJava Java  Gradlebuild.gradle apply plugin: 'java'\n\ntasktasktask:\n\n- 1.gradle build\n- 2.gradle assemble, \n- 3.gradle clean build \n- 4.gradle check checkstylepmdfindbugs\n\nGradletask\n\n![basic task](/images/blogimages/2016/gradle_task.png)\n\nbuild\n\n#### \n\n,  Java ,  JAR .  JAR ,  Gradle .  Gradle , JAR  maven \n\nmaven\n\n~~~ Java\nrepositories {\n\tmavenCentral()\n}\n~~~\nmavenCentral() Gradlemavenmavenmavengradlemaven\n\n~~~ Java\ndependencies {\n\tcompile group: 'commons-collections', name: 'commons-collections', version: '3.2'\n\t// \n\t// compile 'commons-collections:commons-collections:3.2'\n}\n~~~\ngroup, name  version JARmvnrepository\n\n#### \n\nGradleJARJARJAR\n\n~~~ Java\ndependencies {\n\tcompile files('dir/file.jar')\n\tcompile fileTree(dir: 'libs', include: '*.jar')\n}\n~~~\n#### \n\nGradlesettings.gradle\n\n~~~ Java\ninclude 'sub-project1', 'sub-project2', 'sub-project3'\n~~~\nsub-project1sub-project2sub-project1build.gradle\n\n~~~ Java\ndependencies {\n\tcompile project(':sub-project2')\n}\n~~~\n#### \n\ngradlegradle\n\nHibernatejarJunitjarjarGradle\n\n~~~ Java\napply plugin: 'java'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile group: 'org.hibernate', name: 'hibernate-core', version: '3.6.7.Final'\n    testCompile group: 'junit', name: 'junit', version: '4.+'\n}\n~~~\njunitjar\n\nJava \n\n> - compile\n\t\n- runtime\n\t , compile\n- testCompile\n\t , runtimecompile\n- testRuntime\n\t , \n","slug":"gradle-learning","published":1,"date":"2016-10-11T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5m0021bxs6vcvynsxr","content":"<p>GradleGroovyJavaXMLGroovyDSLantMavenIvy</p>\n<h3 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h3><blockquote>\n<p>(Project)  (tasks)Gradle </p>\n</blockquote>\n<a id=\"more\"></a>\n<ul>\n<li><p>Jar</p>\n</li>\n<li><p></p>\n</li>\n<li><p> projects  project  tasks  task</p>\n</li>\n</ul>\n<p><img src=\"/images/blogimages/2016/gradle_structure1.png\" alt=\"basic structure\"></p>\n<p>BuildProjectProjecttask</p>\n<p>Antbuild.xmlMavenpom.xmlMakemakefile</p>\n<h4 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h4><p>Gradle</p>\n<ul>\n<li><p>build.gradle tasks</p>\n</li>\n<li><p>settings.gradle </p>\n</li>\n<li><p>gradle.properties </p>\n</li>\n</ul>\n<h3 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h3><p>GradleGradleJava Java  Gradlebuild.gradle apply plugin: java</p>\n<p>tasktasktask:</p>\n<ul>\n<li>1.gradle build</li>\n<li>2.gradle assemble, </li>\n<li>3.gradle clean build </li>\n<li>4.gradle check checkstylepmdfindbugs</li>\n</ul>\n<p>Gradletask</p>\n<p><img src=\"/images/blogimages/2016/gradle_task.png\" alt=\"basic task\"></p>\n<p>build</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>,  Java ,  JAR .  JAR ,  Gradle .  Gradle , JAR  maven </p>\n<p>maven</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">repositories &#123;</div><div class=\"line\">\tmavenCentral()</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>mavenCentral() Gradlemavenmavenmavengradlemaven</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">dependencies &#123;</div><div class=\"line\">\tcompile group: <span class=\"string\">'commons-collections'</span>, name: <span class=\"string\">'commons-collections'</span>, version: <span class=\"string\">'3.2'</span></div><div class=\"line\">\t<span class=\"comment\">// </span></div><div class=\"line\">\t<span class=\"comment\">// compile 'commons-collections:commons-collections:3.2'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>group, name  version JARmvnrepository</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>GradleJARJARJAR</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">dependencies &#123;</div><div class=\"line\">\t<span class=\"function\">compile <span class=\"title\">files</span><span class=\"params\">(<span class=\"string\">'dir/file.jar'</span>)</span></span></div><div class=\"line\">\tcompile <span class=\"title\">fileTree</span><span class=\"params\">(dir: <span class=\"string\">'libs'</span>, include: <span class=\"string\">'*.jar'</span>)</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Gradlesettings.gradle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">include <span class=\"string\">'sub-project1'</span>, <span class=\"string\">'sub-project2'</span>, <span class=\"string\">'sub-project3'</span></div></pre></td></tr></table></figure>\n<p>sub-project1sub-project2sub-project1build.gradle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">dependencies &#123;</div><div class=\"line\">\t<span class=\"function\">compile <span class=\"title\">project</span><span class=\"params\">(<span class=\"string\">':sub-project2'</span>)</span></span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>gradlegradle</p>\n<p>HibernatejarJunitjarjarGradle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">apply plugin: <span class=\"string\">'java'</span></div><div class=\"line\"></div><div class=\"line\">repositories &#123;</div><div class=\"line\">    mavenCentral()</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">dependencies &#123;</div><div class=\"line\">    compile group: <span class=\"string\">'org.hibernate'</span>, name: <span class=\"string\">'hibernate-core'</span>, version: <span class=\"string\">'3.6.7.Final'</span></div><div class=\"line\">    testCompile group: <span class=\"string\">'junit'</span>, name: <span class=\"string\">'junit'</span>, version: <span class=\"string\">'4.+'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>junitjar</p>\n<p>Java </p>\n<blockquote>\n<ul>\n<li>compile<br>  </li>\n<li>runtime<br>   , compile</li>\n<li>testCompile<br>   , runtimecompile</li>\n<li>testRuntime<br>   , </li>\n</ul>\n</blockquote>\n","excerpt":"<p>GradleGroovyJavaXMLGroovyDSLantMavenIvy</p>\n<h3 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h3><blockquote>\n<p>(Project)  (tasks)Gradle </p>\n</blockquote>","more":"<ul>\n<li><p>Jar</p>\n</li>\n<li><p></p>\n</li>\n<li><p> projects  project  tasks  task</p>\n</li>\n</ul>\n<p><img src=\"/images/blogimages/2016/gradle_structure1.png\" alt=\"basic structure\"></p>\n<p>BuildProjectProjecttask</p>\n<p>Antbuild.xmlMavenpom.xmlMakemakefile</p>\n<h4 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h4><p>Gradle</p>\n<ul>\n<li><p>build.gradle tasks</p>\n</li>\n<li><p>settings.gradle </p>\n</li>\n<li><p>gradle.properties </p>\n</li>\n</ul>\n<h3 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h3><p>GradleGradleJava Java  Gradlebuild.gradle apply plugin: java</p>\n<p>tasktasktask:</p>\n<ul>\n<li>1.gradle build</li>\n<li>2.gradle assemble, </li>\n<li>3.gradle clean build </li>\n<li>4.gradle check checkstylepmdfindbugs</li>\n</ul>\n<p>Gradletask</p>\n<p><img src=\"/images/blogimages/2016/gradle_task.png\" alt=\"basic task\"></p>\n<p>build</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>,  Java ,  JAR .  JAR ,  Gradle .  Gradle , JAR  maven </p>\n<p>maven</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">repositories &#123;</div><div class=\"line\">\tmavenCentral()</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>mavenCentral() Gradlemavenmavenmavengradlemaven</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">dependencies &#123;</div><div class=\"line\">\tcompile group: <span class=\"string\">'commons-collections'</span>, name: <span class=\"string\">'commons-collections'</span>, version: <span class=\"string\">'3.2'</span></div><div class=\"line\">\t<span class=\"comment\">// </span></div><div class=\"line\">\t<span class=\"comment\">// compile 'commons-collections:commons-collections:3.2'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>group, name  version JARmvnrepository</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>GradleJARJARJAR</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">dependencies &#123;</div><div class=\"line\">\t<span class=\"function\">compile <span class=\"title\">files</span><span class=\"params\">(<span class=\"string\">'dir/file.jar'</span>)</span></div><div class=\"line\">\tcompile <span class=\"title\">fileTree</span><span class=\"params\">(dir: <span class=\"string\">'libs'</span>, include: <span class=\"string\">'*.jar'</span>)</span></div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Gradlesettings.gradle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">include <span class=\"string\">'sub-project1'</span>, <span class=\"string\">'sub-project2'</span>, <span class=\"string\">'sub-project3'</span></div></pre></td></tr></table></figure>\n<p>sub-project1sub-project2sub-project1build.gradle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">dependencies &#123;</div><div class=\"line\">\t<span class=\"function\">compile <span class=\"title\">project</span><span class=\"params\">(<span class=\"string\">':sub-project2'</span>)</span></div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>gradlegradle</p>\n<p>HibernatejarJunitjarjarGradle</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">apply plugin: <span class=\"string\">'java'</span></div><div class=\"line\"></div><div class=\"line\">repositories &#123;</div><div class=\"line\">    mavenCentral()</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">dependencies &#123;</div><div class=\"line\">    compile group: <span class=\"string\">'org.hibernate'</span>, name: <span class=\"string\">'hibernate-core'</span>, version: <span class=\"string\">'3.6.7.Final'</span></div><div class=\"line\">    testCompile group: <span class=\"string\">'junit'</span>, name: <span class=\"string\">'junit'</span>, version: <span class=\"string\">'4.+'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>junitjar</p>\n<p>Java </p>\n<blockquote>\n<ul>\n<li>compile<br>  </li>\n<li>runtime<br>   , compile</li>\n<li>testCompile<br>   , runtimecompile</li>\n<li>testRuntime<br>   , </li>\n</ul>\n</blockquote>"},{"layout":"post","title":"gradle 2apk","keywords":"Android,gradle","banner":"http://obxk8w81b.bkt.clouddn.com/Cart%20with%20Red%20and%20White%20Ox.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Cart%20with%20Red%20and%20White%20Ox.jpg","_content":"\n[Gradle]()GradleAndroidGradleAPK\n\n### \nAndroidSITUATPRDAPK\n\nJavaapp-release.apk\n\ngradle\n\n> \n- buildType\n- productFlavors \n\n<!--more-->\n#### buildType\n\nAndroid Plugindebugrelease APK\n\nbuildTypeinitWith()\n\n\n\n|*Property name\t*|*Default values for debug\t*|*Default values for release / other*|\n|:--------:|:-------:|:--------:|\n|debuggable\t            | true\t|false |\n|jniDebugBuild\t        | false\t|false|\n|renderscriptDebugBuild\t| false\t|false|\n|renderscriptOptimLevel\t|   3\t|3|\n|applicationIdSuffix\t|  null\t|null|\n|versionNameSuffix\t    |  null\t|null|\n|signingConfig\t  |android.signingConfigs.debug\t|null|\n|zipAlign\t             |false\t|true|\n|runProguard\t         |false\t|false|\n|proguardFile\t     |N/A (set only)\t|N/A (set only)|\n|proguardFiles\t     |N/A (set only)\t|N/A (set only)|\n\n[Gralde plugin User Guide ](https://avatarqing.gitbooks.io/gradlepluginuserguidechineseverision/content/basic_project/build_types.html)\n\n\n#### Product flavors\nproduct flavorflavor\n\n\n\nProduct flavorproductFlavorsDSL\n\n~~~ Java\nandroid {\n    ....\n\n    productFlavors {\n        flavor1 {\n            ...\n        }\n\n        flavor2 {\n            ...\n        }\n    }\n}\n~~~\nflavorflavor1flavor2\n\n> flavorBuild TypeandroidTestsourceSet\n\n#### Build Type + Product Flavor = Build Variant+=\nBuild TypeAPK\n\nProduct FlavorBuild TypeProduct FlavorFlavor\n\nBuild TypeProduct FlavorBuild Variant\n\nFlavordebugreleaseBuild Type4Build Variant\n\n- Flavor1 - debug\n- Flavor1 - release\n- Flavor2 - debug\n- Flavor2 - release\n\nflavorBuild Variantflavordefault()flavor/configBuild VariantBuild Type\n\n### \n**Build Type****Product Flavor**\n**Build Type**\n\n~~~ Java\nbuildTypes {\n        release {\n            buildConfigField \"boolean\", \"LEO_DEBUG\", \"false\"\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'\n            debuggable false\n            jniDebuggable false\n        }\n        debug {\n            buildConfigField \"int\", \"buildType\", \"2\"\n            buildConfigField \"boolean\", \"LEO_DEBUG\", \"true\"\n        }\n    }\n~~~\n**Product Flavor**\n\n~~~ Java\nproductFlavors{\n\t\t\t kaifa{\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"1\"\n\t\t\t }\n\t\t\t ceshi {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"2\"\n\t\t\t }\n\t\t\t SIT {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"3\"\n\t\t\t }\n\t\t\t UAT {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"4\"\n\t\t\t }\n\t\t\t PRD {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"5\"\n\t\t\t }\n\t }\n~~~\nproductFlavors**app->build->generated->source->buildConfig**flavor\n\n![Gradle build structure](/images/blogimages/2016/gradle_structure2.png)\n\nbuildConfigField**flavor->release/debug->**BuildConfig.javaBuildConfig.javaintbuildTypebooleanLEO_DEBUG:\n\n~~~ Java\nif (BuildConfig.LEO_DEBUG){\n\t\t//Log\n}\nif (Environment ==BuildConfig.buildType){\n\t\t//\n}\n~~~\n\n#### gradleapk\nproductFlavors\n\n~~~ Java\nandroid.applicationVariants.all { variant ->\n        variant.outputs.each { output ->\n            def outputFile = output.outputFile\n            if (outputFile != null && outputFile.name.endsWith('.apk')) {\n                //apk\n                def flavorname =variant.productFlavors[0].name\n                if (flavorname.equals('kaifa'))\n                    flavorname = 'debug'\n                else if (flavorname.equals('ceshi'))\n                    flavorname = 'release'\n\n                def fileName = \"app-${flavorname}-${defaultConfig.versionName}-${releaseTime() }.apk\"\n                output.outputFile = new File(outputFile.parent, fileName)\n            }\n        }\n    }\n~~~\n\n\n~~~ Java\ndef releaseTime() {\n    return new Date().format(\"MMdd\", TimeZone.getTimeZone(\"UTC\"))\n}\n~~~\n\napk\n","source":"_posts/2016-10-13-gradle-learning2.md","raw":"---\nlayout: post\ntitle:  gradle 2apk\ncategory: accumulation\ntags: gradle\nkeywords: Android,gradle\nbanner: http://obxk8w81b.bkt.clouddn.com/Cart%20with%20Red%20and%20White%20Ox.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Cart%20with%20Red%20and%20White%20Ox.jpg\n---\n\n[Gradle]()GradleAndroidGradleAPK\n\n### \nAndroidSITUATPRDAPK\n\nJavaapp-release.apk\n\ngradle\n\n> \n- buildType\n- productFlavors \n\n<!--more-->\n#### buildType\n\nAndroid Plugindebugrelease APK\n\nbuildTypeinitWith()\n\n\n\n|*Property name\t*|*Default values for debug\t*|*Default values for release / other*|\n|:--------:|:-------:|:--------:|\n|debuggable\t            | true\t|false |\n|jniDebugBuild\t        | false\t|false|\n|renderscriptDebugBuild\t| false\t|false|\n|renderscriptOptimLevel\t|   3\t|3|\n|applicationIdSuffix\t|  null\t|null|\n|versionNameSuffix\t    |  null\t|null|\n|signingConfig\t  |android.signingConfigs.debug\t|null|\n|zipAlign\t             |false\t|true|\n|runProguard\t         |false\t|false|\n|proguardFile\t     |N/A (set only)\t|N/A (set only)|\n|proguardFiles\t     |N/A (set only)\t|N/A (set only)|\n\n[Gralde plugin User Guide ](https://avatarqing.gitbooks.io/gradlepluginuserguidechineseverision/content/basic_project/build_types.html)\n\n\n#### Product flavors\nproduct flavorflavor\n\n\n\nProduct flavorproductFlavorsDSL\n\n~~~ Java\nandroid {\n    ....\n\n    productFlavors {\n        flavor1 {\n            ...\n        }\n\n        flavor2 {\n            ...\n        }\n    }\n}\n~~~\nflavorflavor1flavor2\n\n> flavorBuild TypeandroidTestsourceSet\n\n#### Build Type + Product Flavor = Build Variant+=\nBuild TypeAPK\n\nProduct FlavorBuild TypeProduct FlavorFlavor\n\nBuild TypeProduct FlavorBuild Variant\n\nFlavordebugreleaseBuild Type4Build Variant\n\n- Flavor1 - debug\n- Flavor1 - release\n- Flavor2 - debug\n- Flavor2 - release\n\nflavorBuild Variantflavordefault()flavor/configBuild VariantBuild Type\n\n### \n**Build Type****Product Flavor**\n**Build Type**\n\n~~~ Java\nbuildTypes {\n        release {\n            buildConfigField \"boolean\", \"LEO_DEBUG\", \"false\"\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'\n            debuggable false\n            jniDebuggable false\n        }\n        debug {\n            buildConfigField \"int\", \"buildType\", \"2\"\n            buildConfigField \"boolean\", \"LEO_DEBUG\", \"true\"\n        }\n    }\n~~~\n**Product Flavor**\n\n~~~ Java\nproductFlavors{\n\t\t\t kaifa{\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"1\"\n\t\t\t }\n\t\t\t ceshi {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"2\"\n\t\t\t }\n\t\t\t SIT {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"3\"\n\t\t\t }\n\t\t\t UAT {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"4\"\n\t\t\t }\n\t\t\t PRD {\n\t\t\t\t\t buildConfigField \"int\", \"buildType\", \"5\"\n\t\t\t }\n\t }\n~~~\nproductFlavors**app->build->generated->source->buildConfig**flavor\n\n![Gradle build structure](/images/blogimages/2016/gradle_structure2.png)\n\nbuildConfigField**flavor->release/debug->**BuildConfig.javaBuildConfig.javaintbuildTypebooleanLEO_DEBUG:\n\n~~~ Java\nif (BuildConfig.LEO_DEBUG){\n\t\t//Log\n}\nif (Environment ==BuildConfig.buildType){\n\t\t//\n}\n~~~\n\n#### gradleapk\nproductFlavors\n\n~~~ Java\nandroid.applicationVariants.all { variant ->\n        variant.outputs.each { output ->\n            def outputFile = output.outputFile\n            if (outputFile != null && outputFile.name.endsWith('.apk')) {\n                //apk\n                def flavorname =variant.productFlavors[0].name\n                if (flavorname.equals('kaifa'))\n                    flavorname = 'debug'\n                else if (flavorname.equals('ceshi'))\n                    flavorname = 'release'\n\n                def fileName = \"app-${flavorname}-${defaultConfig.versionName}-${releaseTime() }.apk\"\n                output.outputFile = new File(outputFile.parent, fileName)\n            }\n        }\n    }\n~~~\n\n\n~~~ Java\ndef releaseTime() {\n    return new Date().format(\"MMdd\", TimeZone.getTimeZone(\"UTC\"))\n}\n~~~\n\napk\n","slug":"gradle-learning2","published":1,"date":"2016-10-12T16:00:00.000Z","updated":"2016-12-26T10:41:15.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5p0024bxs6bq1p2hhc","content":"<p><a href=\"\">Gradle</a>GradleAndroidGradleAPK</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>AndroidSITUATPRDAPK</p>\n<p>Javaapp-release.apk</p>\n<p>gradle</p>\n<blockquote>\n<p></p>\n<ul>\n<li>buildType</li>\n<li>productFlavors </li>\n</ul>\n</blockquote>\n<a id=\"more\"></a>\n<h4 id=\"buildType\"><a href=\"#buildType\" class=\"headerlink\" title=\"buildType\"></a>buildType</h4><p>Android Plugindebugrelease APK</p>\n<p>buildTypeinitWith()</p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em>Property name    </em></th>\n<th style=\"text-align:center\"><em>Default values for debug    </em></th>\n<th style=\"text-align:center\"><em>Default values for release / other</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">debuggable</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">jniDebugBuild</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">renderscriptDebugBuild</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">renderscriptOptimLevel</td>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">3</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">applicationIdSuffix</td>\n<td style=\"text-align:center\">null</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">versionNameSuffix</td>\n<td style=\"text-align:center\">null</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">signingConfig</td>\n<td style=\"text-align:center\">android.signingConfigs.debug</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">zipAlign</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">runProguard</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">proguardFile</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">proguardFiles</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n</tr>\n</tbody>\n</table>\n<p><a href=\"https://avatarqing.gitbooks.io/gradlepluginuserguidechineseverision/content/basic_project/build_types.html\" target=\"_blank\" rel=\"external\">Gralde plugin User Guide </a></p>\n<h4 id=\"Product-flavors\"><a href=\"#Product-flavors\" class=\"headerlink\" title=\"Product flavors\"></a>Product flavors</h4><p>product flavorflavor</p>\n<p></p>\n<p>Product flavorproductFlavorsDSL</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">android &#123;</div><div class=\"line\">    ....</div><div class=\"line\"></div><div class=\"line\">    productFlavors &#123;</div><div class=\"line\">        flavor1 &#123;</div><div class=\"line\">            ...</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        flavor2 &#123;</div><div class=\"line\">            ...</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>flavorflavor1flavor2</p>\n<blockquote>\n<p>flavorBuild TypeandroidTestsourceSet</p>\n</blockquote>\n<h4 id=\"Build-Type-Product-Flavor-Build-Variant--\"><a href=\"#Build-Type-Product-Flavor-Build-Variant--\" class=\"headerlink\" title=\"Build Type + Product Flavor = Build Variant+=\"></a>Build Type + Product Flavor = Build Variant+=</h4><p>Build TypeAPK</p>\n<p>Product FlavorBuild TypeProduct FlavorFlavor</p>\n<p>Build TypeProduct FlavorBuild Variant</p>\n<p>FlavordebugreleaseBuild Type4Build Variant</p>\n<ul>\n<li>Flavor1 - debug</li>\n<li>Flavor1 - release</li>\n<li>Flavor2 - debug</li>\n<li>Flavor2 - release</li>\n</ul>\n<p>flavorBuild Variantflavordefault()flavor/configBuild VariantBuild Type</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>Build Type</strong><strong>Product Flavor</strong><br><strong>Build Type</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">buildTypes &#123;</div><div class=\"line\">        release &#123;</div><div class=\"line\">            buildConfigField <span class=\"string\">\"boolean\"</span>, <span class=\"string\">\"LEO_DEBUG\"</span>, <span class=\"string\">\"false\"</span></div><div class=\"line\">            <span class=\"function\">minifyEnabled <span class=\"keyword\">true</span></span></div><div class=\"line\">            proguardFiles <span class=\"title\">getDefaultProguardFile</span><span class=\"params\">(<span class=\"string\">'proguard-android.txt'</span>)</span>, 'proguard-rules.txt'</div><div class=\"line\">            debuggable <span class=\"keyword\">false</span></div><div class=\"line\">            jniDebuggable <span class=\"keyword\">false</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        debug &#123;</div><div class=\"line\">            buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"2\"</span></div><div class=\"line\">            buildConfigField <span class=\"string\">\"boolean\"</span>, <span class=\"string\">\"LEO_DEBUG\"</span>, <span class=\"string\">\"true\"</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p><strong>Product Flavor</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">productFlavors&#123;</div><div class=\"line\">\t\t\t kaifa&#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"1\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t ceshi &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"2\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t SIT &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"3\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t UAT &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"4\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t PRD &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"5\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t &#125;</div></pre></td></tr></table></figure>\n<p>productFlavors<strong>app-&gt;build-&gt;generated-&gt;source-&gt;buildConfig</strong>flavor</p>\n<p><img src=\"/images/blogimages/2016/gradle_structure2.png\" alt=\"Gradle build structure\"></p>\n<p>buildConfigField<strong>flavor-&gt;release/debug-&gt;</strong>BuildConfig.javaBuildConfig.javaintbuildTypebooleanLEO_DEBUG:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (BuildConfig.LEO_DEBUG)&#123;</div><div class=\"line\">\t\t<span class=\"comment\">//Log</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">if</span> (Environment ==BuildConfig.buildType)&#123;</div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"gradleapk\"><a href=\"#gradleapk\" class=\"headerlink\" title=\"gradleapk\"></a>gradleapk</h4><p>productFlavors</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">android.applicationVariants.all &#123; variant -&gt;</div><div class=\"line\">        variant.outputs.each &#123; output -&gt;</div><div class=\"line\">            def outputFile = output.<span class=\"function\">outputFile</span></div><div class=\"line\">            <span class=\"title\">if</span> <span class=\"params\">(outputFile != <span class=\"keyword\">null</span> &amp;&amp; outputFile.name.endsWith(<span class=\"string\">'.apk'</span>)</span>) &#123;</div><div class=\"line\">                <span class=\"comment\">//apk</span></div><div class=\"line\">                def flavorname =variant.productFlavors[<span class=\"number\">0</span>].<span class=\"function\">name</span></div><div class=\"line\">                <span class=\"title\">if</span> <span class=\"params\">(flavorname.equals(<span class=\"string\">'kaifa'</span>)</span>)</div><div class=\"line\">                    flavorname = <span class=\"string\">'debug'</span></div><div class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (flavorname.equals(<span class=\"string\">'ceshi'</span>))</div><div class=\"line\">                    flavorname = <span class=\"string\">'release'</span></div><div class=\"line\"></div><div class=\"line\">                def fileName = <span class=\"string\">\"app-$&#123;flavorname&#125;-$&#123;defaultConfig.versionName&#125;-$&#123;releaseTime() &#125;.apk\"</span></div><div class=\"line\">                output.outputFile = <span class=\"keyword\">new</span> File(outputFile.parent, fileName)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">def <span class=\"title\">releaseTime</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Date().format(<span class=\"string\">\"MMdd\"</span>, TimeZone.getTimeZone(<span class=\"string\">\"UTC\"</span>))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>apk</p>\n","excerpt":"<p><a href=\"\">Gradle</a>GradleAndroidGradleAPK</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>AndroidSITUATPRDAPK</p>\n<p>Javaapp-release.apk</p>\n<p>gradle</p>\n<blockquote>\n<p></p>\n<ul>\n<li>buildType</li>\n<li>productFlavors </li>\n</ul>\n</blockquote>","more":"<h4 id=\"buildType\"><a href=\"#buildType\" class=\"headerlink\" title=\"buildType\"></a>buildType</h4><p>Android Plugindebugrelease APK</p>\n<p>buildTypeinitWith()</p>\n<p></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\"><em>Property name    </em></th>\n<th style=\"text-align:center\"><em>Default values for debug    </em></th>\n<th style=\"text-align:center\"><em>Default values for release / other</em></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">debuggable</td>\n<td style=\"text-align:center\">true</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">jniDebugBuild</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">renderscriptDebugBuild</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">renderscriptOptimLevel</td>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">3</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">applicationIdSuffix</td>\n<td style=\"text-align:center\">null</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">versionNameSuffix</td>\n<td style=\"text-align:center\">null</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">signingConfig</td>\n<td style=\"text-align:center\">android.signingConfigs.debug</td>\n<td style=\"text-align:center\">null</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">zipAlign</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">runProguard</td>\n<td style=\"text-align:center\">false</td>\n<td style=\"text-align:center\">false</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">proguardFile</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">proguardFiles</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n<td style=\"text-align:center\">N/A (set only)</td>\n</tr>\n</tbody>\n</table>\n<p><a href=\"https://avatarqing.gitbooks.io/gradlepluginuserguidechineseverision/content/basic_project/build_types.html\">Gralde plugin User Guide </a></p>\n<h4 id=\"Product-flavors\"><a href=\"#Product-flavors\" class=\"headerlink\" title=\"Product flavors\"></a>Product flavors</h4><p>product flavorflavor</p>\n<p></p>\n<p>Product flavorproductFlavorsDSL</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">android &#123;</div><div class=\"line\">    ....</div><div class=\"line\"></div><div class=\"line\">    productFlavors &#123;</div><div class=\"line\">        flavor1 &#123;</div><div class=\"line\">            ...</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        flavor2 &#123;</div><div class=\"line\">            ...</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>flavorflavor1flavor2</p>\n<blockquote>\n<p>flavorBuild TypeandroidTestsourceSet</p>\n</blockquote>\n<h4 id=\"Build-Type-Product-Flavor-Build-Variant--\"><a href=\"#Build-Type-Product-Flavor-Build-Variant--\" class=\"headerlink\" title=\"Build Type + Product Flavor = Build Variant+=\"></a>Build Type + Product Flavor = Build Variant+=</h4><p>Build TypeAPK</p>\n<p>Product FlavorBuild TypeProduct FlavorFlavor</p>\n<p>Build TypeProduct FlavorBuild Variant</p>\n<p>FlavordebugreleaseBuild Type4Build Variant</p>\n<ul>\n<li>Flavor1 - debug</li>\n<li>Flavor1 - release</li>\n<li>Flavor2 - debug</li>\n<li>Flavor2 - release</li>\n</ul>\n<p>flavorBuild Variantflavordefault()flavor/configBuild VariantBuild Type</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong>Build Type</strong><strong>Product Flavor</strong><br><strong>Build Type</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">buildTypes &#123;</div><div class=\"line\">        release &#123;</div><div class=\"line\">            buildConfigField <span class=\"string\">\"boolean\"</span>, <span class=\"string\">\"LEO_DEBUG\"</span>, <span class=\"string\">\"false\"</span></div><div class=\"line\">            <span class=\"function\">minifyEnabled <span class=\"keyword\">true</span></div><div class=\"line\">            proguardFiles <span class=\"title\">getDefaultProguardFile</span><span class=\"params\">(<span class=\"string\">'proguard-android.txt'</span>)</span>, 'proguard-rules.txt'</div><div class=\"line\">            debuggable <span class=\"keyword\">false</span></div><div class=\"line\">            jniDebuggable <span class=\"keyword\">false</span></div><div class=\"line\">        &#125;</div><div class=\"line\">        debug </span>&#123;</div><div class=\"line\">            buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"2\"</span></div><div class=\"line\">            buildConfigField <span class=\"string\">\"boolean\"</span>, <span class=\"string\">\"LEO_DEBUG\"</span>, <span class=\"string\">\"true\"</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p><strong>Product Flavor</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">productFlavors&#123;</div><div class=\"line\">\t\t\t kaifa&#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"1\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t ceshi &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"2\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t SIT &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"3\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t UAT &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"4\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t\t\t PRD &#123;</div><div class=\"line\">\t\t\t\t\t buildConfigField <span class=\"string\">\"int\"</span>, <span class=\"string\">\"buildType\"</span>, <span class=\"string\">\"5\"</span></div><div class=\"line\">\t\t\t &#125;</div><div class=\"line\">\t &#125;</div></pre></td></tr></table></figure>\n<p>productFlavors<strong>app-&gt;build-&gt;generated-&gt;source-&gt;buildConfig</strong>flavor</p>\n<p><img src=\"/images/blogimages/2016/gradle_structure2.png\" alt=\"Gradle build structure\"></p>\n<p>buildConfigField<strong>flavor-&gt;release/debug-&gt;</strong>BuildConfig.javaBuildConfig.javaintbuildTypebooleanLEO_DEBUG:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (BuildConfig.LEO_DEBUG)&#123;</div><div class=\"line\">\t\t<span class=\"comment\">//Log</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">if</span> (Environment ==BuildConfig.buildType)&#123;</div><div class=\"line\">\t\t<span class=\"comment\">//</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"gradleapk\"><a href=\"#gradleapk\" class=\"headerlink\" title=\"gradleapk\"></a>gradleapk</h4><p>productFlavors</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">android.applicationVariants.all &#123; variant -&gt;</div><div class=\"line\">        variant.outputs.each &#123; output -&gt;</div><div class=\"line\">            def outputFile = output.<span class=\"function\">outputFile</div><div class=\"line\">            <span class=\"title\">if</span> <span class=\"params\">(outputFile != <span class=\"keyword\">null</span> &amp;&amp; outputFile.name.endsWith(<span class=\"string\">'.apk'</span>)</span>) </span>&#123;</div><div class=\"line\">                <span class=\"comment\">//apk</span></div><div class=\"line\">                def flavorname =variant.productFlavors[<span class=\"number\">0</span>].<span class=\"function\">name</div><div class=\"line\">                <span class=\"title\">if</span> <span class=\"params\">(flavorname.equals(<span class=\"string\">'kaifa'</span>)</span>)</div><div class=\"line\">                    flavorname </span>= <span class=\"string\">'debug'</span></div><div class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (flavorname.equals(<span class=\"string\">'ceshi'</span>))</div><div class=\"line\">                    flavorname = <span class=\"string\">'release'</span></div><div class=\"line\"></div><div class=\"line\">                def fileName = <span class=\"string\">\"app-$&#123;flavorname&#125;-$&#123;defaultConfig.versionName&#125;-$&#123;releaseTime() &#125;.apk\"</span></div><div class=\"line\">                output.outputFile = <span class=\"keyword\">new</span> File(outputFile.parent, fileName)</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\">def <span class=\"title\">releaseTime</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Date().format(<span class=\"string\">\"MMdd\"</span>, TimeZone.getTimeZone(<span class=\"string\">\"UTC\"</span>))</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>apk</p>"},{"layout":"post","title":"Hexo ","keywords":"Hexo","banner":"http://obxk8w81b.bkt.clouddn.com/Couple%20Out%20for%20a%20Stroll.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Couple%20Out%20for%20a%20Stroll.jpg","_content":"\n#### Error: Cannot find module './build/Release/DTraceProviderBindings'\n\nhexomodule ctrl+chexo\n~~~ Java\n{ [Error: Cannot find module './build/Release/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' }    \n{ [Error: Cannot find module './build/default/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' }\n{ [Error: Cannot find module './build/Debug/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' }\n~~~\n<!--more-->\n\n\n**1. Hexohexo**\n\n-  /usr/local/lib/node_modules/ **hexo**\n- /usr/local/bin/ **hexo**. .\n> finderTerminal\ndefaults write com.apple.finder AppleShowAllFiles -bool true\n\n**2. npm install -g hexo --save**\n\n  :)\n","source":"_posts/2016-11-03-hexo-mac-module-not-found.md","raw":"---\nlayout: post\ntitle:  Hexo \ncategory: accumulation\ntags: Hexo\nkeywords: Hexo\nbanner: http://obxk8w81b.bkt.clouddn.com/Couple%20Out%20for%20a%20Stroll.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Couple%20Out%20for%20a%20Stroll.jpg\n---\n\n#### Error: Cannot find module './build/Release/DTraceProviderBindings'\n\nhexomodule ctrl+chexo\n~~~ Java\n{ [Error: Cannot find module './build/Release/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' }    \n{ [Error: Cannot find module './build/default/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' }\n{ [Error: Cannot find module './build/Debug/DTraceProviderBindings'] code: 'MODULE_NOT_FOUND' }\n~~~\n<!--more-->\n\n\n**1. Hexohexo**\n\n-  /usr/local/lib/node_modules/ **hexo**\n- /usr/local/bin/ **hexo**. .\n> finderTerminal\ndefaults write com.apple.finder AppleShowAllFiles -bool true\n\n**2. npm install -g hexo --save**\n\n  :)\n","slug":"hexo-mac-module-not-found","published":1,"date":"2016-11-02T16:00:00.000Z","updated":"2016-12-28T03:14:03.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5r0027bxs66mwab3r9","content":"<h4 id=\"Error-Cannot-find-module--build-Release-DTraceProviderBindings\"><a href=\"#Error-Cannot-find-module--build-Release-DTraceProviderBindings\" class=\"headerlink\" title=\"Error: Cannot find module ./build/Release/DTraceProviderBindings\"></a>Error: Cannot find module ./build/Release/DTraceProviderBindings</h4><p>hexomodule ctrl+chexo<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123; [Error: Cannot find <span class=\"keyword\">module</span> <span class=\"string\">'./build/Release/DTraceProviderBindings'</span>] code: <span class=\"string\">'MODULE_NOT_FOUND'</span> &#125;    </div><div class=\"line\">&#123; [Error: Cannot find <span class=\"keyword\">module</span> <span class=\"string\">'./build/default/DTraceProviderBindings'</span>] code: <span class=\"string\">'MODULE_NOT_FOUND'</span> &#125;</div><div class=\"line\">&#123; [Error: Cannot find <span class=\"keyword\">module</span> <span class=\"string\">'./build/Debug/DTraceProviderBindings'</span>] code: <span class=\"string\">'MODULE_NOT_FOUND'</span> &#125;</div></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p></p>\n<p><strong>1. Hexohexo</strong></p>\n<ul>\n<li> /usr/local/lib/node_modules/ <strong>hexo</strong></li>\n<li>/usr/local/bin/ <strong>hexo</strong>. .<blockquote>\n<p>finderTerminal<br>defaults write com.apple.finder AppleShowAllFiles -bool true</p>\n</blockquote>\n</li>\n</ul>\n<p><strong>2. npm install -g hexo save</strong></p>\n<p>  :)</p>\n","excerpt":"<h4 id=\"Error-Cannot-find-module--build-Release-DTraceProviderBindings\"><a href=\"#Error-Cannot-find-module--build-Release-DTraceProviderBindings\" class=\"headerlink\" title=\"Error: Cannot find module ./build/Release/DTraceProviderBindings\"></a>Error: Cannot find module ./build/Release/DTraceProviderBindings</h4><p>hexomodule ctrl+chexo<br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123; [Error: Cannot find <span class=\"keyword\">module</span> <span class=\"string\">'./build/Release/DTraceProviderBindings'</span>] code: <span class=\"string\">'MODULE_NOT_FOUND'</span> &#125;    </div><div class=\"line\">&#123; [Error: Cannot find <span class=\"keyword\">module</span> <span class=\"string\">'./build/default/DTraceProviderBindings'</span>] code: <span class=\"string\">'MODULE_NOT_FOUND'</span> &#125;</div><div class=\"line\">&#123; [Error: Cannot find <span class=\"keyword\">module</span> <span class=\"string\">'./build/Debug/DTraceProviderBindings'</span>] code: <span class=\"string\">'MODULE_NOT_FOUND'</span> &#125;</div></pre></td></tr></table></figure></p>","more":"<p></p>\n<p><strong>1. Hexohexo</strong></p>\n<ul>\n<li> /usr/local/lib/node_modules/ <strong>hexo</strong></li>\n<li>/usr/local/bin/ <strong>hexo</strong>. .<blockquote>\n<p>finderTerminal<br>defaults write com.apple.finder AppleShowAllFiles -bool true</p>\n</blockquote>\n</li>\n</ul>\n<p><strong>2. npm install -g hexo save</strong></p>\n<p>  :)</p>"},{"layout":"post","title":"Hexo Hexo ","keywords":"Hexo","banner":"http://obxk8w81b.bkt.clouddn.com/Boy%20Cutting%20Grass%20with%20a%20Sickle.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Boy%20Cutting%20Grass%20with%20a%20Sickle.jpg","_content":"\n### \nHexo_config.ymltheme, themes/landscape\n\nthemes/landscape/docs-themes4\n\n- _config.yml: \n- source/: CSS\n- layout/: \n- scripts: JavaScript\n\n[docs-templates](https://hexo.io/docs/templates.html)index\n\n<!--more-->\n\n|Template|Page|\tFallback|\n|:--------:|:-------:|:--------:|\n|index\t|Home page | |\n|post\t|Posts\t|index|\n|page|\tPages |index|\n|archive\t|Archives|\tindex|\n|category\t|Category archives\t|archive|\n|tag\t|Tag archives|\tarchive|\n\n\n\nHexosourcesURLURL(EJS)\n\nURLHexolayout.ejsbody(Fallback/archivesarchives.ejsindex.ejs)\n\n\n### \n#### (layout.ejs)\n\nlayoutHexoindex,post,page,archive,category,tagheader + content + footerheaderfooterlayout.ejsbodylayout.ejs:\n\n~~~ JavaScript\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\"/>\n    <title><%= config.title %></title>\n    <%- css('css/style') %>\n</head>\n<body>\n    <%- partial('_partial/header') %>\n    <div class=\"main\">\n        <%- body %>\n    </div>\n    <%- partial('_partial/footer') %>\n    <%- js('js/index.js') %>\n</body>\n</html>\n~~~\n\npartial,jscssHexo\n\n#### \n\nhexo new <title>hexo new [layout] <title>layoutAbouthexo new page \"about\"pageindex.ejs(),post.ejs(),archive.ejs(),tag.ejs(),page.ejs()\n\n##### index.ejs\n\nHexopageindex.ejsHTML_partial/article.ejs{index: true}post.ejspage.ejsindex.ejs:\n\n~~~ JavaScript\n//index.ejs\n<% page.posts.each(function(post, index){ %>\n    <%- partial('_partial/article', {index: true, post: post}) %>\n<% }) %>\n<div class=\"pagination\">\n    <%- paginator({ total: Math.ceil(site.posts.length / config.per_page)}) %>\n</div>\n~~~\n##### post.ejs\n\n{index: false}( XD\n\n~~~ JavaScript\n//post.ejs\n<%- partial('_partial/article', {index: false, post: page}) %>\n~~~\n##### page.ejs\n\nPageabout(hexo new page \"about\")/about/source/aboutindex.mdPage:\n\n~~~ JavaScript\n//page.ejs\n<%- partial('_partial/article', {index: false, post: page}) %>\n_partial/article.ejs\n~~~\narticlepagepost:(index: true)(index: false)_partial/article.ejs\n\n~~~ JavaScript\n//_partial/article.ejs\n<% if(index){ %>\n    //index logic...\n<% }else{ %>\n    //post or page logic...\n<% } %>\n~~~\n\n##### tag.ejs\n\nHexolist_tagsok:\n\n~~~ JavaScript\n//tag.ejs\n<%- list_tags() %>\n~~~\n:\n\n~~~ JavaScript\n//archive.ejs\n<div class=\"archive\">\n  <% var lastyear; %>\n  <% page.posts.each(function(post){ %>\n    <% var year = post.date.year() %>\n    <% if(lastyear !== year){ %>\n      <h4 class=\"year\"><%= year %></h4>\n      <% lastyear = year %>\n    <% } %>\n    <div class=\"archive_item\">\n      <a class=\"title\" href=\"<%- url_for(post.path) %>\"><%= post.title %></a>\n      <span class=\"date\"><%= post.date.format('YYYY-MM-DD') %></span>\n    </div>\n  <% }) %>\n  <div class=\"pagination\">\n    <%- paginator({ total: Math.ceil(site.posts.length / config.per_page)}) %>\n  </div>\n</div>\n~~~\ncategory\n\n### \npage.post,site.posts.length,config.per_pageHexoHexo:\n\n- site: site.posts.length\n\n- page: index.ejspage.postssite.posts\n\n- config: _config.yml\n\n- theme: _config.yml\n\n#### (Helper)\nlinklinkactiveHexo!Hexo**paginator**site.posts.lengthconfig.per_page\n\n##### Helper:\n\n- **list_tags([options])**: \n\n- **js(path/to/js), css(path/to/css)** path()source\n\n- **partial(path/to/partial)** layout\n\n### \nHexoHTML+CSSCSS\n\n### \n#### Disqus\n\npartial\n\n~~~ JavaScript\n//_partial/article.ejs\n<section class='post-content'>\n    <%- post.content %>\n</section>\n//post.commentsconfig.duoshuo_shortname\nconfig.disqus_shortname\n<% if(post.comments){ %>\n    <section id=\"comments\">\n    <% if (config.duoshuo_shortname){ %>\n            <%- partial('_partial/duoshuo') %>\n        <% }else if(config.disqus_shortname){ %>\n            <%- partial('_partial/disqus') %>\n        <% } %>\n    </section>\n<% } %>\n~~~\nDisqusjs**_partial/duoshuo.ejs_partial/disqus.ejs**ok~\n\n#### highlight.js\n\nhighlight.js:\n\n~~~ JavaScript\n//showonne/_config.yml\n\n...other configs\n\n# highlight.js\nhighlight_theme: zenburn\n~~~\nlayout.ejs:\n\n~~~ JavaScript\n<link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/<%= theme.highlight_theme %>.min.css\">\n~~~\nCDN\n\n### \nlandscape\n\n### \n","source":"_posts/2016-12-06-hexo-learning1.md","raw":"---\nlayout: post\ntitle:  Hexo Hexo \ncategory: accumulation\ntags: Hexo\nkeywords: Hexo\nbanner: http://obxk8w81b.bkt.clouddn.com/Boy%20Cutting%20Grass%20with%20a%20Sickle.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Boy%20Cutting%20Grass%20with%20a%20Sickle.jpg\n---\n\n### \nHexo_config.ymltheme, themes/landscape\n\nthemes/landscape/docs-themes4\n\n- _config.yml: \n- source/: CSS\n- layout/: \n- scripts: JavaScript\n\n[docs-templates](https://hexo.io/docs/templates.html)index\n\n<!--more-->\n\n|Template|Page|\tFallback|\n|:--------:|:-------:|:--------:|\n|index\t|Home page | |\n|post\t|Posts\t|index|\n|page|\tPages |index|\n|archive\t|Archives|\tindex|\n|category\t|Category archives\t|archive|\n|tag\t|Tag archives|\tarchive|\n\n\n\nHexosourcesURLURL(EJS)\n\nURLHexolayout.ejsbody(Fallback/archivesarchives.ejsindex.ejs)\n\n\n### \n#### (layout.ejs)\n\nlayoutHexoindex,post,page,archive,category,tagheader + content + footerheaderfooterlayout.ejsbodylayout.ejs:\n\n~~~ JavaScript\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\"/>\n    <title><%= config.title %></title>\n    <%- css('css/style') %>\n</head>\n<body>\n    <%- partial('_partial/header') %>\n    <div class=\"main\">\n        <%- body %>\n    </div>\n    <%- partial('_partial/footer') %>\n    <%- js('js/index.js') %>\n</body>\n</html>\n~~~\n\npartial,jscssHexo\n\n#### \n\nhexo new <title>hexo new [layout] <title>layoutAbouthexo new page \"about\"pageindex.ejs(),post.ejs(),archive.ejs(),tag.ejs(),page.ejs()\n\n##### index.ejs\n\nHexopageindex.ejsHTML_partial/article.ejs{index: true}post.ejspage.ejsindex.ejs:\n\n~~~ JavaScript\n//index.ejs\n<% page.posts.each(function(post, index){ %>\n    <%- partial('_partial/article', {index: true, post: post}) %>\n<% }) %>\n<div class=\"pagination\">\n    <%- paginator({ total: Math.ceil(site.posts.length / config.per_page)}) %>\n</div>\n~~~\n##### post.ejs\n\n{index: false}( XD\n\n~~~ JavaScript\n//post.ejs\n<%- partial('_partial/article', {index: false, post: page}) %>\n~~~\n##### page.ejs\n\nPageabout(hexo new page \"about\")/about/source/aboutindex.mdPage:\n\n~~~ JavaScript\n//page.ejs\n<%- partial('_partial/article', {index: false, post: page}) %>\n_partial/article.ejs\n~~~\narticlepagepost:(index: true)(index: false)_partial/article.ejs\n\n~~~ JavaScript\n//_partial/article.ejs\n<% if(index){ %>\n    //index logic...\n<% }else{ %>\n    //post or page logic...\n<% } %>\n~~~\n\n##### tag.ejs\n\nHexolist_tagsok:\n\n~~~ JavaScript\n//tag.ejs\n<%- list_tags() %>\n~~~\n:\n\n~~~ JavaScript\n//archive.ejs\n<div class=\"archive\">\n  <% var lastyear; %>\n  <% page.posts.each(function(post){ %>\n    <% var year = post.date.year() %>\n    <% if(lastyear !== year){ %>\n      <h4 class=\"year\"><%= year %></h4>\n      <% lastyear = year %>\n    <% } %>\n    <div class=\"archive_item\">\n      <a class=\"title\" href=\"<%- url_for(post.path) %>\"><%= post.title %></a>\n      <span class=\"date\"><%= post.date.format('YYYY-MM-DD') %></span>\n    </div>\n  <% }) %>\n  <div class=\"pagination\">\n    <%- paginator({ total: Math.ceil(site.posts.length / config.per_page)}) %>\n  </div>\n</div>\n~~~\ncategory\n\n### \npage.post,site.posts.length,config.per_pageHexoHexo:\n\n- site: site.posts.length\n\n- page: index.ejspage.postssite.posts\n\n- config: _config.yml\n\n- theme: _config.yml\n\n#### (Helper)\nlinklinkactiveHexo!Hexo**paginator**site.posts.lengthconfig.per_page\n\n##### Helper:\n\n- **list_tags([options])**: \n\n- **js(path/to/js), css(path/to/css)** path()source\n\n- **partial(path/to/partial)** layout\n\n### \nHexoHTML+CSSCSS\n\n### \n#### Disqus\n\npartial\n\n~~~ JavaScript\n//_partial/article.ejs\n<section class='post-content'>\n    <%- post.content %>\n</section>\n//post.commentsconfig.duoshuo_shortname\nconfig.disqus_shortname\n<% if(post.comments){ %>\n    <section id=\"comments\">\n    <% if (config.duoshuo_shortname){ %>\n            <%- partial('_partial/duoshuo') %>\n        <% }else if(config.disqus_shortname){ %>\n            <%- partial('_partial/disqus') %>\n        <% } %>\n    </section>\n<% } %>\n~~~\nDisqusjs**_partial/duoshuo.ejs_partial/disqus.ejs**ok~\n\n#### highlight.js\n\nhighlight.js:\n\n~~~ JavaScript\n//showonne/_config.yml\n\n...other configs\n\n# highlight.js\nhighlight_theme: zenburn\n~~~\nlayout.ejs:\n\n~~~ JavaScript\n<link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/<%= theme.highlight_theme %>.min.css\">\n~~~\nCDN\n\n### \nlandscape\n\n### \n","slug":"hexo-learning1","published":1,"date":"2016-12-05T16:00:00.000Z","updated":"2016-12-28T03:15:10.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5s002bbxs67cl1fg4u","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Hexo_config.ymltheme, themes/landscape</p>\n<p>themes/landscape/docs-themes4</p>\n<ul>\n<li>_config.yml: </li>\n<li>source/: CSS</li>\n<li>layout/: </li>\n<li>scripts: JavaScript</li>\n</ul>\n<p><a href=\"https://hexo.io/docs/templates.html\" target=\"_blank\" rel=\"external\">docs-templates</a>index</p>\n<a id=\"more\"></a>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Template</th>\n<th style=\"text-align:center\">Page</th>\n<th style=\"text-align:center\">Fallback</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">index</td>\n<td style=\"text-align:center\">Home page</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">post</td>\n<td style=\"text-align:center\">Posts</td>\n<td style=\"text-align:center\">index</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">page</td>\n<td style=\"text-align:center\">Pages</td>\n<td style=\"text-align:center\">index</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">archive</td>\n<td style=\"text-align:center\">Archives</td>\n<td style=\"text-align:center\">index</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">category</td>\n<td style=\"text-align:center\">Category archives</td>\n<td style=\"text-align:center\">archive</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">tag</td>\n<td style=\"text-align:center\">Tag archives</td>\n<td style=\"text-align:center\">archive</td>\n</tr>\n</tbody>\n</table>\n<p>HexosourcesURLURL(EJS)</p>\n<p>URLHexolayout.ejsbody(Fallback/archivesarchives.ejsindex.ejs)</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-layout-ejs\"><a href=\"#-layout-ejs\" class=\"headerlink\" title=\"(layout.ejs)\"></a>(layout.ejs)</h4><p>layoutHexoindex,post,page,archive,category,tagheader + content + footerheaderfooterlayout.ejsbodylayout.ejs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;!doctype html&gt;</div><div class=\"line\">&lt;html lang=\"en\"&gt;</div><div class=\"line\">&lt;head&gt;</div><div class=\"line\">    &lt;meta charset=\"UTF-8\"&gt;</div><div class=\"line\">    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\"/&gt;</div><div class=\"line\">    &lt;title&gt;&lt;%= config.title %&gt;&lt;/title&gt;</div><div class=\"line\">    &lt;%- css('css/style') %&gt;</div><div class=\"line\">&lt;/head&gt;</div><div class=\"line\">&lt;body&gt;</div><div class=\"line\">    &lt;%- partial('_partial/header') %&gt;</div><div class=\"line\">    &lt;div class=\"main\"&gt;</div><div class=\"line\">        &lt;%- body %&gt;</div><div class=\"line\">    &lt;/div&gt;</div><div class=\"line\">    &lt;%- partial('_partial/footer') %&gt;</div><div class=\"line\">    &lt;%- js('js/index.js') %&gt;</div><div class=\"line\">&lt;/body&gt;</div><div class=\"line\">&lt;/html&gt;</div></pre></td></tr></table></figure>\n<p>partial,jscssHexo</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>hexo new <title>hexo new [layout] <title>layoutAbouthexo new page aboutpageindex.ejs(),post.ejs(),archive.ejs(),tag.ejs(),page.ejs()</title></title></p>\n<h5 id=\"index-ejs\"><a href=\"#index-ejs\" class=\"headerlink\" title=\"index.ejs\"></a>index.ejs</h5><p>Hexopageindex.ejsHTML_partial/article.ejs{index: true}post.ejspage.ejsindex.ejs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//index.ejs</span></div><div class=\"line\">&lt;% page.posts.each(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">post, index</span>)</span>&#123; %&gt;</div><div class=\"line\">    &lt;%- partial('_partial/article', &#123;index: true, post: post&#125;) %&gt;</div><div class=\"line\">&lt;% &#125;) %&gt;</div><div class=\"line\">&lt;div class=\"pagination\"&gt;</div><div class=\"line\">    &lt;%- paginator(&#123; total: Math.ceil(site.posts.length / config.per_page)&#125;) %&gt;</div><div class=\"line\">&lt;/div&gt;</div></pre></td></tr></table></figure>\n<h5 id=\"post-ejs\"><a href=\"#post-ejs\" class=\"headerlink\" title=\"post.ejs\"></a>post.ejs</h5><p>{index: false}( XD</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//post.ejs</span></div><div class=\"line\">&lt;%- partial(<span class=\"string\">'_partial/article'</span>, &#123;<span class=\"attr\">index</span>: <span class=\"literal\">false</span>, <span class=\"attr\">post</span>: page&#125;) %&gt;</div></pre></td></tr></table></figure>\n<h5 id=\"page-ejs\"><a href=\"#page-ejs\" class=\"headerlink\" title=\"page.ejs\"></a>page.ejs</h5><p>Pageabout(hexo new page about)/about/source/aboutindex.mdPage:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//page.ejs</span></div><div class=\"line\">&lt;%- partial(<span class=\"string\">'_partial/article'</span>, &#123;<span class=\"attr\">index</span>: <span class=\"literal\">false</span>, <span class=\"attr\">post</span>: page&#125;) %&gt;</div><div class=\"line\">_partial/article.ejs</div></pre></td></tr></table></figure>\n<p>articlepagepost:(index: true)(index: false)_partial/article.ejs</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//_partial/article.ejs</span></div><div class=\"line\">&lt;% <span class=\"keyword\">if</span>(index)&#123; %&gt;</div><div class=\"line\">    <span class=\"comment\">//index logic...</span></div><div class=\"line\">&lt;% &#125;<span class=\"keyword\">else</span>&#123; %&gt;</div><div class=\"line\">    <span class=\"comment\">//post or page logic...</span></div><div class=\"line\">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>\n<h5 id=\"tag-ejs\"><a href=\"#tag-ejs\" class=\"headerlink\" title=\"tag.ejs\"></a>tag.ejs</h5><p>Hexolist_tagsok:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//tag.ejs</span></div><div class=\"line\">&lt;%- list_tags() %&gt;</div></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//archive.ejs</span></div><div class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"archive\"</span>&gt;</div><div class=\"line\">  &lt;% var lastyear; %&gt;</div><div class=\"line\">  &lt;% page.posts.each(function(post)&#123; %&gt;</div><div class=\"line\">    &lt;% var year = post.date.year() %&gt;</div><div class=\"line\">    &lt;% if(lastyear !== year)&#123; %&gt;</div><div class=\"line\">      &lt;h4 class=\"year\"&gt;&lt;%= year %&gt;&lt;/h4&gt;</div><div class=\"line\">      &lt;% lastyear = year %&gt;</div><div class=\"line\">    &lt;% &#125; %&gt;</div><div class=\"line\">    &lt;div class=\"archive_item\"&gt;</div><div class=\"line\">      &lt;a class=\"title\" href=\"&lt;%- url_for(post.path) %&gt;\"&gt;&lt;%= post.title %&gt;&lt;/a&gt;</div><div class=\"line\">      &lt;span class=\"date\"&gt;&lt;%= post.date.format('YYYY-MM-DD') %&gt;&lt;/span&gt;</div><div class=\"line\">    &lt;/div&gt;</div><div class=\"line\">  &lt;% &#125;) %&gt;</div><div class=\"line\">  &lt;div class=\"pagination\"&gt;</div><div class=\"line\">    &lt;%- paginator(&#123; total: Math.ceil(site.posts.length / config.per_page)&#125;) %&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/div&gt;</div></pre></td></tr></table></figure>\n<p>category</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>page.post,site.posts.length,config.per_pageHexoHexo:</p>\n<ul>\n<li><p>site: site.posts.length</p>\n</li>\n<li><p>page: index.ejspage.postssite.posts</p>\n</li>\n<li><p>config: _config.yml</p>\n</li>\n<li><p>theme: _config.yml</p>\n</li>\n</ul>\n<h4 id=\"-Helper\"><a href=\"#-Helper\" class=\"headerlink\" title=\"(Helper)\"></a>(Helper)</h4><p>linklinkactiveHexo!Hexo<strong>paginator</strong>site.posts.lengthconfig.per_page</p>\n<h5 id=\"Helper\"><a href=\"#Helper\" class=\"headerlink\" title=\"Helper:\"></a>Helper:</h5><ul>\n<li><p><strong>list_tags([options])</strong>: </p>\n</li>\n<li><p><strong>js(path/to/js), css(path/to/css)</strong> path()source</p>\n</li>\n<li><p><strong>partial(path/to/partial)</strong> layout</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HexoHTML+CSSCSS</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"Disqus\"><a href=\"#Disqus\" class=\"headerlink\" title=\"Disqus\"></a>Disqus</h4><p>partial</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//_partial/article.ejs</span></div><div class=\"line\">&lt;section <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">'post-content'</span>&gt;</div><div class=\"line\">    &lt;%- post.content %&gt;</div><div class=\"line\">&lt;/section&gt;</div><div class=\"line\"><span class=\"comment\">//post.commentsconfig.duoshuo_shortname</span></div><div class=\"line\">config.disqus_shortname</div><div class=\"line\">&lt;% <span class=\"keyword\">if</span>(post.comments)&#123; %&gt;</div><div class=\"line\">    &lt;section id=\"comments\"&gt;</div><div class=\"line\">    &lt;% if (config.duoshuo_shortname)&#123; %&gt;</div><div class=\"line\">            &lt;%- partial('_partial/duoshuo') %&gt;</div><div class=\"line\">        &lt;% &#125;else if(config.disqus_shortname)&#123; %&gt;</div><div class=\"line\">            &lt;%- partial('_partial/disqus') %&gt;</div><div class=\"line\">        &lt;% &#125; %&gt;</div><div class=\"line\">    &lt;/section&gt;</div><div class=\"line\">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>\n<p>Disqusjs<strong>_partial/duoshuo.ejs_partial/disqus.ejs</strong>ok~</p>\n<h4 id=\"highlight-js\"><a href=\"#highlight-js\" class=\"headerlink\" title=\"highlight.js\"></a>highlight.js</h4><p>highlight.js:</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//showonne/_config.yml</div><div class=\"line\"></div><div class=\"line\">...other configs</div><div class=\"line\"></div><div class=\"line\"># highlight.js</div><div class=\"line\">highlight_theme: zenburn</div></pre></td></tr></table></figure>\n<p>layout.ejs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;link rel=<span class=\"string\">\"stylesheet\"</span> href=<span class=\"string\">\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/&lt;%= theme.highlight_theme %&gt;.min.css\"</span>&gt;</div></pre></td></tr></table></figure>\n<p>CDN</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>landscape</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3>","excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Hexo_config.ymltheme, themes/landscape</p>\n<p>themes/landscape/docs-themes4</p>\n<ul>\n<li>_config.yml: </li>\n<li>source/: CSS</li>\n<li>layout/: </li>\n<li>scripts: JavaScript</li>\n</ul>\n<p><a href=\"https://hexo.io/docs/templates.html\">docs-templates</a>index</p>","more":"<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">Template</th>\n<th style=\"text-align:center\">Page</th>\n<th style=\"text-align:center\">Fallback</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">index</td>\n<td style=\"text-align:center\">Home page</td>\n<td style=\"text-align:center\"></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">post</td>\n<td style=\"text-align:center\">Posts</td>\n<td style=\"text-align:center\">index</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">page</td>\n<td style=\"text-align:center\">Pages</td>\n<td style=\"text-align:center\">index</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">archive</td>\n<td style=\"text-align:center\">Archives</td>\n<td style=\"text-align:center\">index</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">category</td>\n<td style=\"text-align:center\">Category archives</td>\n<td style=\"text-align:center\">archive</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">tag</td>\n<td style=\"text-align:center\">Tag archives</td>\n<td style=\"text-align:center\">archive</td>\n</tr>\n</tbody>\n</table>\n<p>HexosourcesURLURL(EJS)</p>\n<p>URLHexolayout.ejsbody(Fallback/archivesarchives.ejsindex.ejs)</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"-layout-ejs\"><a href=\"#-layout-ejs\" class=\"headerlink\" title=\"(layout.ejs)\"></a>(layout.ejs)</h4><p>layoutHexoindex,post,page,archive,category,tagheader + content + footerheaderfooterlayout.ejsbodylayout.ejs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;!doctype html&gt;</div><div class=\"line\">&lt;html lang=\"en\"&gt;</div><div class=\"line\">&lt;head&gt;</div><div class=\"line\">    &lt;meta charset=\"UTF-8\"&gt;</div><div class=\"line\">    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\"/&gt;</div><div class=\"line\">    &lt;title&gt;&lt;%= config.title %&gt;&lt;/title&gt;</div><div class=\"line\">    &lt;%- css('css/style') %&gt;</div><div class=\"line\">&lt;/head&gt;</div><div class=\"line\">&lt;body&gt;</div><div class=\"line\">    &lt;%- partial('_partial/header') %&gt;</div><div class=\"line\">    &lt;div class=\"main\"&gt;</div><div class=\"line\">        &lt;%- body %&gt;</div><div class=\"line\">    &lt;/div&gt;</div><div class=\"line\">    &lt;%- partial('_partial/footer') %&gt;</div><div class=\"line\">    &lt;%- js('js/index.js') %&gt;</div><div class=\"line\">&lt;/body&gt;</div><div class=\"line\">&lt;/html&gt;</div></pre></td></tr></table></figure>\n<p>partial,jscssHexo</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>hexo new <title>hexo new [layout] <title>layoutAbouthexo new page aboutpageindex.ejs(),post.ejs(),archive.ejs(),tag.ejs(),page.ejs()</p>\n<h5 id=\"index-ejs\"><a href=\"#index-ejs\" class=\"headerlink\" title=\"index.ejs\"></a>index.ejs</h5><p>Hexopageindex.ejsHTML_partial/article.ejs{index: true}post.ejspage.ejsindex.ejs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//index.ejs</span></div><div class=\"line\">&lt;% page.posts.each(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">post, index</span>)</span>&#123; %&gt;</div><div class=\"line\">    &lt;%- partial('_partial/article', &#123;index: true, post: post&#125;) %&gt;</div><div class=\"line\">&lt;% &#125;) %&gt;</div><div class=\"line\">&lt;div class=\"pagination\"&gt;</div><div class=\"line\">    &lt;%- paginator(&#123; total: Math.ceil(site.posts.length / config.per_page)&#125;) %&gt;</div><div class=\"line\">&lt;/div&gt;</div></pre></td></tr></table></figure>\n<h5 id=\"post-ejs\"><a href=\"#post-ejs\" class=\"headerlink\" title=\"post.ejs\"></a>post.ejs</h5><p>{index: false}( XD</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//post.ejs</span></div><div class=\"line\">&lt;%- partial(<span class=\"string\">'_partial/article'</span>, &#123;<span class=\"attr\">index</span>: <span class=\"literal\">false</span>, <span class=\"attr\">post</span>: page&#125;) %&gt;</div></pre></td></tr></table></figure>\n<h5 id=\"page-ejs\"><a href=\"#page-ejs\" class=\"headerlink\" title=\"page.ejs\"></a>page.ejs</h5><p>Pageabout(hexo new page about)/about/source/aboutindex.mdPage:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//page.ejs</span></div><div class=\"line\">&lt;%- partial(<span class=\"string\">'_partial/article'</span>, &#123;<span class=\"attr\">index</span>: <span class=\"literal\">false</span>, <span class=\"attr\">post</span>: page&#125;) %&gt;</div><div class=\"line\">_partial/article.ejs</div></pre></td></tr></table></figure>\n<p>articlepagepost:(index: true)(index: false)_partial/article.ejs</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//_partial/article.ejs</span></div><div class=\"line\">&lt;% <span class=\"keyword\">if</span>(index)&#123; %&gt;</div><div class=\"line\">    <span class=\"comment\">//index logic...</span></div><div class=\"line\">&lt;% &#125;<span class=\"keyword\">else</span>&#123; %&gt;</div><div class=\"line\">    <span class=\"comment\">//post or page logic...</span></div><div class=\"line\">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>\n<h5 id=\"tag-ejs\"><a href=\"#tag-ejs\" class=\"headerlink\" title=\"tag.ejs\"></a>tag.ejs</h5><p>Hexolist_tagsok:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//tag.ejs</span></div><div class=\"line\">&lt;%- list_tags() %&gt;</div></pre></td></tr></table></figure>\n<p>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//archive.ejs</span></div><div class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"archive\"</span>&gt;</div><div class=\"line\">  &lt;% var lastyear; %&gt;</div><div class=\"line\">  &lt;% page.posts.each(function(post)&#123; %&gt;</div><div class=\"line\">    &lt;% var year = post.date.year() %&gt;</div><div class=\"line\">    &lt;% if(lastyear !== year)&#123; %&gt;</div><div class=\"line\">      &lt;h4 class=\"year\"&gt;&lt;%= year %&gt;&lt;/h4&gt;</div><div class=\"line\">      &lt;% lastyear = year %&gt;</div><div class=\"line\">    &lt;% &#125; %&gt;</div><div class=\"line\">    &lt;div class=\"archive_item\"&gt;</div><div class=\"line\">      &lt;a class=\"title\" href=\"&lt;%- url_for(post.path) %&gt;\"&gt;&lt;%= post.title %&gt;&lt;/a&gt;</div><div class=\"line\">      &lt;span class=\"date\"&gt;&lt;%= post.date.format('YYYY-MM-DD') %&gt;&lt;/span&gt;</div><div class=\"line\">    &lt;/div&gt;</div><div class=\"line\">  &lt;% &#125;) %&gt;</div><div class=\"line\">  &lt;div class=\"pagination\"&gt;</div><div class=\"line\">    &lt;%- paginator(&#123; total: Math.ceil(site.posts.length / config.per_page)&#125;) %&gt;</div><div class=\"line\">  &lt;/div&gt;</div><div class=\"line\">&lt;/div&gt;</div></pre></td></tr></table></figure>\n<p>category</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>page.post,site.posts.length,config.per_pageHexoHexo:</p>\n<ul>\n<li><p>site: site.posts.length</p>\n</li>\n<li><p>page: index.ejspage.postssite.posts</p>\n</li>\n<li><p>config: _config.yml</p>\n</li>\n<li><p>theme: _config.yml</p>\n</li>\n</ul>\n<h4 id=\"-Helper\"><a href=\"#-Helper\" class=\"headerlink\" title=\"(Helper)\"></a>(Helper)</h4><p>linklinkactiveHexo!Hexo<strong>paginator</strong>site.posts.lengthconfig.per_page</p>\n<h5 id=\"Helper\"><a href=\"#Helper\" class=\"headerlink\" title=\"Helper:\"></a>Helper:</h5><ul>\n<li><p><strong>list_tags([options])</strong>: </p>\n</li>\n<li><p><strong>js(path/to/js), css(path/to/css)</strong> path()source</p>\n</li>\n<li><p><strong>partial(path/to/partial)</strong> layout</p>\n</li>\n</ul>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HexoHTML+CSSCSS</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"Disqus\"><a href=\"#Disqus\" class=\"headerlink\" title=\"Disqus\"></a>Disqus</h4><p>partial</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">//_partial/article.ejs</span></div><div class=\"line\">&lt;section <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">'post-content'</span>&gt;</div><div class=\"line\">    &lt;%- post.content %&gt;</div><div class=\"line\">&lt;/section&gt;</div><div class=\"line\"><span class=\"comment\">//post.commentsconfig.duoshuo_shortname</span></div><div class=\"line\">config.disqus_shortname</div><div class=\"line\">&lt;% <span class=\"keyword\">if</span>(post.comments)&#123; %&gt;</div><div class=\"line\">    &lt;section id=\"comments\"&gt;</div><div class=\"line\">    &lt;% if (config.duoshuo_shortname)&#123; %&gt;</div><div class=\"line\">            &lt;%- partial('_partial/duoshuo') %&gt;</div><div class=\"line\">        &lt;% &#125;else if(config.disqus_shortname)&#123; %&gt;</div><div class=\"line\">            &lt;%- partial('_partial/disqus') %&gt;</div><div class=\"line\">        &lt;% &#125; %&gt;</div><div class=\"line\">    &lt;/section&gt;</div><div class=\"line\">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>\n<p>Disqusjs<strong>_partial/duoshuo.ejs_partial/disqus.ejs</strong>ok~</p>\n<h4 id=\"highlight-js\"><a href=\"#highlight-js\" class=\"headerlink\" title=\"highlight.js\"></a>highlight.js</h4><p>highlight.js:</p>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">//showonne/_config.yml</div><div class=\"line\"></div><div class=\"line\">...other configs</div><div class=\"line\"></div><div class=\"line\"># highlight.js</div><div class=\"line\">highlight_theme: zenburn</div></pre></td></tr></table></figure>\n<p>layout.ejs:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;link rel=<span class=\"string\">\"stylesheet\"</span> href=<span class=\"string\">\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/&lt;%= theme.highlight_theme %&gt;.min.css\"</span>&gt;</div></pre></td></tr></table></figure>\n<p>CDN</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>landscape</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3>"},{"layout":"post","title":"Hexo EJS","keywords":"EJS","banner":"http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg","_content":"\n### EJS\n\nEJSJavaScriptJSONHTML\n\n### EJS\n#### 1html\n\n#### 2&lt;% code %&gt;javascript\n~~~ javascript\n<% alert('hello world') %>\n~~~\n#### 3&lt;%= code =%&gt;codehtml\n\n<!--more-->\n\n~~~ javascript\n<h1><%=title %></h1>                    titleh1\n<p><%= 'hello world' %></p>             hello worldh1\n<h1><%= '<b>hello world</b>' %></h1>    hello worldh1\n~~~ javascript\n#### 4<%- code %>html\n\n~~~ javascript\n<h1><%-title %>asd</h1>          asd\n<p><%# 'hello world' %>asd</p>   asd\n~~~\n#### 5'&lt;%''{{''%&gt;''}}'\n\n    ejs  <%  .. %>\n\n~~~ javascript\napp.set(\"view options\",{                                                                                  \n   \"open\":\"{{\",                                                                                  \n   \"close\":\"}}\"\n});\n~~~\n#### 6\n\n- 1)first\n- 2)last\n- 3)capitalize\n- 4)downcase\n- 5)upcase\n- 6)sortObject.create(obj).sort()\n- 7)sort_by:'prop'prop\n- 8)sizelength\n- 9)plus:nnNumber\n- 10)minus:nnNumber\n- 11)times:nnNumber\n- 12)divided_by:nnNumber\n- 13)join:'val''val'\n- 14)truncate:nn\n- 15)truncate_words:nnwordword\n- 16)replace:pattern,substitutionsubstitution\n- 17)prepend:valval\n- 18)append:valval\n- 19)map:'prop'prop\n- 20)reverse\n- 21)get:'prop''prop'\n- 22)jsonjson\n\n**&lt;%- include filename %&gt;**\n\n#### ejs\n\nejs \n\n- 1.\n\n~~~ JavaScript\n<%= title %>\n~~~\n\n- 2.forjsfor\n\n~~~ JavaScript\n<% for(var i=0; i<headerNavbar.length; i++) {%>\n    <li><a href=\"/reg\"><%= headerNavbar[i].name %></a></li>\n<% } %>\n~~~\n\n- 3.ifjsif\n\n~~~ JavaScript\n <% if(active=='index'){%>\nclass=\"active\"\n <% }%>\n~~~\n","source":"_posts/2016-12-04-hexo-learning0.md","raw":"---\nlayout: post\ntitle:  Hexo EJS\ncategory: accumulation\ntags: EJS\nkeywords: EJS\nbanner: http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Bulb%20Fields.jpg\n---\n\n### EJS\n\nEJSJavaScriptJSONHTML\n\n### EJS\n#### 1html\n\n#### 2&lt;% code %&gt;javascript\n~~~ javascript\n<% alert('hello world') %>\n~~~\n#### 3&lt;%= code =%&gt;codehtml\n\n<!--more-->\n\n~~~ javascript\n<h1><%=title %></h1>                    titleh1\n<p><%= 'hello world' %></p>             hello worldh1\n<h1><%= '<b>hello world</b>' %></h1>    hello worldh1\n~~~ javascript\n#### 4<%- code %>html\n\n~~~ javascript\n<h1><%-title %>asd</h1>          asd\n<p><%# 'hello world' %>asd</p>   asd\n~~~\n#### 5'&lt;%''{{''%&gt;''}}'\n\n    ejs  <%  .. %>\n\n~~~ javascript\napp.set(\"view options\",{                                                                                  \n   \"open\":\"{{\",                                                                                  \n   \"close\":\"}}\"\n});\n~~~\n#### 6\n\n- 1)first\n- 2)last\n- 3)capitalize\n- 4)downcase\n- 5)upcase\n- 6)sortObject.create(obj).sort()\n- 7)sort_by:'prop'prop\n- 8)sizelength\n- 9)plus:nnNumber\n- 10)minus:nnNumber\n- 11)times:nnNumber\n- 12)divided_by:nnNumber\n- 13)join:'val''val'\n- 14)truncate:nn\n- 15)truncate_words:nnwordword\n- 16)replace:pattern,substitutionsubstitution\n- 17)prepend:valval\n- 18)append:valval\n- 19)map:'prop'prop\n- 20)reverse\n- 21)get:'prop''prop'\n- 22)jsonjson\n\n**&lt;%- include filename %&gt;**\n\n#### ejs\n\nejs \n\n- 1.\n\n~~~ JavaScript\n<%= title %>\n~~~\n\n- 2.forjsfor\n\n~~~ JavaScript\n<% for(var i=0; i<headerNavbar.length; i++) {%>\n    <li><a href=\"/reg\"><%= headerNavbar[i].name %></a></li>\n<% } %>\n~~~\n\n- 3.ifjsif\n\n~~~ JavaScript\n <% if(active=='index'){%>\nclass=\"active\"\n <% }%>\n~~~\n","slug":"hexo-learning0","published":1,"date":"2016-12-03T16:00:00.000Z","updated":"2016-12-28T03:08:26.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5t002ebxs6e6v8eh9i","content":"<h3 id=\"EJS\"><a href=\"#EJS\" class=\"headerlink\" title=\"EJS\"></a>EJS</h3><p>EJSJavaScriptJSONHTML</p>\n<h3 id=\"EJS\"><a href=\"#EJS\" class=\"headerlink\" title=\"EJS\"></a>EJS</h3><h4 id=\"1html\"><a href=\"#1html\" class=\"headerlink\" title=\"1html\"></a>1html</h4><h4 id=\"2-lt-code-gt-javascript\"><a href=\"#2-lt-code-gt-javascript\" class=\"headerlink\" title=\"2&lt;% code %&gt;javascript\"></a>2&lt;% code %&gt;javascript</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;% alert(<span class=\"string\">'hello world'</span>) %&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"3-lt-code-gt-codehtml\"><a href=\"#3-lt-code-gt-codehtml\" class=\"headerlink\" title=\"3&lt;%= code =%&gt;codehtml\"></a>3&lt;%= code =%&gt;codehtml</h4><a id=\"more\"></a>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;h1&gt;&lt;%=title %&gt;&lt;/h1&gt;                    titleh1</div><div class=\"line\">&lt;p&gt;&lt;%= 'hello world' %&gt;&lt;/p&gt;             hello worldh1</div><div class=\"line\">&lt;h1&gt;&lt;%= '&lt;b&gt;hello world&lt;/b&gt;' %&gt;&lt;/h1&gt;    hello worldh1</div><div class=\"line\">~~~ javascript</div><div class=\"line\">#### 4&lt;%- code %&gt;html</div><div class=\"line\"></div><div class=\"line\">~~~ javascript</div><div class=\"line\">&lt;h1&gt;&lt;%-title %&gt;asd&lt;/h1&gt;          asd</div><div class=\"line\">&lt;p&gt;&lt;%# 'hello world' %&gt;asd&lt;/p&gt;   asd</div></pre></td></tr></table></figure>\n<h4 id=\"5-lt-\"><a href=\"#5-lt-\" class=\"headerlink\" title=\"5&lt;%\"></a>5&lt;%NaN</h4><pre><code>ejs  &lt;%  .. %&gt;\n</code></pre><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.set(<span class=\"string\">\"view options\"</span>,&#123;                                                                                  </div><div class=\"line\">   <span class=\"string\">\"open\"</span>:<span class=\"string\">\"&#123;&#123;\"</span>,                                                                                  </div><div class=\"line\">   <span class=\"string\">\"close\"</span>:<span class=\"string\">\"&#125;&#125;\"</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h4><ul>\n<li>1)first</li>\n<li>2)last</li>\n<li>3)capitalize</li>\n<li>4)downcase</li>\n<li>5)upcase</li>\n<li>6)sortObject.create(obj).sort()</li>\n<li>7)sort_by:propprop</li>\n<li>8)sizelength</li>\n<li>9)plus:nnNumber</li>\n<li>10)minus:nnNumber</li>\n<li>11)times:nnNumber</li>\n<li>12)divided_by:nnNumber</li>\n<li>13)join:valval</li>\n<li>14)truncate:nn</li>\n<li>15)truncate_words:nnwordword</li>\n<li>16)replace:pattern,substitutionsubstitution</li>\n<li>17)prepend:valval</li>\n<li>18)append:valval</li>\n<li>19)map:propprop</li>\n<li>20)reverse</li>\n<li>21)get:propprop</li>\n<li>22)jsonjson</li>\n</ul>\n<p><strong>&lt;%- include filename %&gt;</strong></p>\n<h4 id=\"ejs\"><a href=\"#ejs\" class=\"headerlink\" title=\"ejs\"></a>ejs</h4><p>ejs </p>\n<ul>\n<li>1.</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;%= title %&gt;</div></pre></td></tr></table></figure>\n<ul>\n<li>2.forjsfor</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;% <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;headerNavbar.length; i++) &#123;%&gt;</div><div class=\"line\">    &lt;li&gt;&lt;a href=\"/reg\"&gt;&lt;%= headerNavbar[i].name %&gt;&lt;/a&gt;&lt;/li&gt;</div><div class=\"line\">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>\n<ul>\n<li>3.ifjsif</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"> &lt;% <span class=\"keyword\">if</span>(active==<span class=\"string\">'index'</span>)&#123;%&gt;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"active\"</span></div><div class=\"line\"> &lt;% &#125;%&gt;</div></pre></td></tr></table></figure>\n","excerpt":"<h3 id=\"EJS\"><a href=\"#EJS\" class=\"headerlink\" title=\"EJS\"></a>EJS</h3><p>EJSJavaScriptJSONHTML</p>\n<h3 id=\"EJS\"><a href=\"#EJS\" class=\"headerlink\" title=\"EJS\"></a>EJS</h3><h4 id=\"1html\"><a href=\"#1html\" class=\"headerlink\" title=\"1html\"></a>1html</h4><h4 id=\"2-lt-code-gt-javascript\"><a href=\"#2-lt-code-gt-javascript\" class=\"headerlink\" title=\"2&lt;% code %&gt;javascript\"></a>2&lt;% code %&gt;javascript</h4><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;% alert(<span class=\"string\">'hello world'</span>) %&gt;</div></pre></td></tr></table></figure>\n<h4 id=\"3-lt-code-gt-codehtml\"><a href=\"#3-lt-code-gt-codehtml\" class=\"headerlink\" title=\"3&lt;%= code =%&gt;codehtml\"></a>3&lt;%= code =%&gt;codehtml</h4>","more":"<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;h1&gt;&lt;%=title %&gt;&lt;/h1&gt;                    titleh1</div><div class=\"line\">&lt;p&gt;&lt;%= 'hello world' %&gt;&lt;/p&gt;             hello worldh1</div><div class=\"line\">&lt;h1&gt;&lt;%= '&lt;b&gt;hello world&lt;/b&gt;' %&gt;&lt;/h1&gt;    hello worldh1</div><div class=\"line\">~~~ javascript</div><div class=\"line\">#### 4&lt;%- code %&gt;html</div><div class=\"line\"></div><div class=\"line\">~~~ javascript</div><div class=\"line\">&lt;h1&gt;&lt;%-title %&gt;asd&lt;/h1&gt;          asd</div><div class=\"line\">&lt;p&gt;&lt;%# 'hello world' %&gt;asd&lt;/p&gt;   asd</div></pre></td></tr></table></figure>\n<h4 id=\"5-lt-\"><a href=\"#5-lt-\" class=\"headerlink\" title=\"5&lt;%\"></a>5&lt;%NaN</h4><pre><code>ejs  &lt;%  .. %&gt;\n</code></pre><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">app.set(<span class=\"string\">\"view options\"</span>,&#123;                                                                                  </div><div class=\"line\">   <span class=\"string\">\"open\"</span>:<span class=\"string\">\"&#123;&#123;\"</span>,                                                                                  </div><div class=\"line\">   <span class=\"string\">\"close\"</span>:<span class=\"string\">\"&#125;&#125;\"</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h4 id=\"6\"><a href=\"#6\" class=\"headerlink\" title=\"6\"></a>6</h4><ul>\n<li>1)first</li>\n<li>2)last</li>\n<li>3)capitalize</li>\n<li>4)downcase</li>\n<li>5)upcase</li>\n<li>6)sortObject.create(obj).sort()</li>\n<li>7)sort_by:propprop</li>\n<li>8)sizelength</li>\n<li>9)plus:nnNumber</li>\n<li>10)minus:nnNumber</li>\n<li>11)times:nnNumber</li>\n<li>12)divided_by:nnNumber</li>\n<li>13)join:valval</li>\n<li>14)truncate:nn</li>\n<li>15)truncate_words:nnwordword</li>\n<li>16)replace:pattern,substitutionsubstitution</li>\n<li>17)prepend:valval</li>\n<li>18)append:valval</li>\n<li>19)map:propprop</li>\n<li>20)reverse</li>\n<li>21)get:propprop</li>\n<li>22)jsonjson</li>\n</ul>\n<p><strong>&lt;%- include filename %&gt;</strong></p>\n<h4 id=\"ejs\"><a href=\"#ejs\" class=\"headerlink\" title=\"ejs\"></a>ejs</h4><p>ejs </p>\n<ul>\n<li>1.</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;%= title %&gt;</div></pre></td></tr></table></figure>\n<ul>\n<li>2.forjsfor</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;% <span class=\"keyword\">for</span>(<span class=\"keyword\">var</span> i=<span class=\"number\">0</span>; i&lt;headerNavbar.length; i++) &#123;%&gt;</div><div class=\"line\">    &lt;li&gt;&lt;a href=\"/reg\"&gt;&lt;%= headerNavbar[i].name %&gt;&lt;/a&gt;&lt;/li&gt;</div><div class=\"line\">&lt;% &#125; %&gt;</div></pre></td></tr></table></figure>\n<ul>\n<li>3.ifjsif</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"> &lt;% <span class=\"keyword\">if</span>(active==<span class=\"string\">'index'</span>)&#123;%&gt;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"active\"</span></div><div class=\"line\"> &lt;% &#125;%&gt;</div></pre></td></tr></table></figure>"},{"layout":"post","title":"Android ","keywords":"Android Patch Update","banner":"http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg","_content":"\n### \ngoogleSmart App Update\n\napk\n\n\n### \napkroot\n\n<!--more-->\n\n### \napkapkpatchapkapkAPK\n\n\n\n\n- 1.apk\n- 2.old.apknew.apk\n- 3.1.old.apk\n\nAPK**/data/app/%packagename%/**\n\n\n\n~~~ JavaScript\npublic class ApkExtract {\n    public static String extract(Context context) {\n        context = context.getApplicationContext();\n        ApplicationInfo applicationInfo = context.getApplicationInfo();\n        String apkPath = applicationInfo.sourceDir;\n        Log.d(\"hongyang\", apkPath);\n        return apkPath;\n    }\n}\n~~~\n\n#### \n[bsdiff](http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz)\n\n\n\nhttp://www.daemonology.net/bsdiff/\n\n\n\nhttp://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz\n\nbsdiffAndroid \\\\external\\\\bsdiff[bzlib](http://www.bzip.org/downloads.html)APKMD5\n\nso[](https://github.com/hongyangAndroid/BsDiff_And_Patch/tree/master/so-dist)NDK[](http://blog.csdn.net/lmj623565791/article/details/52761658)\n\n- \n~~~ JavaScript\n./bsdiff old.apk new.apk old-to-new.patch\n~~~\nold-to-new.patch\n\n#### \nAndroid\n\n- old.apkapk\n~~~ JavaScript\n./bspatch old.apk new2.apk old-to-new.patch\n~~~\nnew2.apk\n\nmd5md5\n\n\n### \n- 1Shell\n\n- 2.APKAPKAPPapksha1MD5\n\n[Android](http://blog.csdn.net/huang_cai_yuan/article/details/52927630)\n","source":"_posts/2016-12-20-Android-patch-update.md","raw":"---\nlayout: post\ntitle:  Android \ncategory: accumulation\ntags: Android Patch Update\nkeywords: Android Patch Update\nbanner: http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Cottages%20with%20a%20Woman%20Working%20in%20the%20Foreground.jpg\n---\n\n### \ngoogleSmart App Update\n\napk\n\n\n### \napkroot\n\n<!--more-->\n\n### \napkapkpatchapkapkAPK\n\n\n\n\n- 1.apk\n- 2.old.apknew.apk\n- 3.1.old.apk\n\nAPK**/data/app/%packagename%/**\n\n\n\n~~~ JavaScript\npublic class ApkExtract {\n    public static String extract(Context context) {\n        context = context.getApplicationContext();\n        ApplicationInfo applicationInfo = context.getApplicationInfo();\n        String apkPath = applicationInfo.sourceDir;\n        Log.d(\"hongyang\", apkPath);\n        return apkPath;\n    }\n}\n~~~\n\n#### \n[bsdiff](http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz)\n\n\n\nhttp://www.daemonology.net/bsdiff/\n\n\n\nhttp://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz\n\nbsdiffAndroid \\\\external\\\\bsdiff[bzlib](http://www.bzip.org/downloads.html)APKMD5\n\nso[](https://github.com/hongyangAndroid/BsDiff_And_Patch/tree/master/so-dist)NDK[](http://blog.csdn.net/lmj623565791/article/details/52761658)\n\n- \n~~~ JavaScript\n./bsdiff old.apk new.apk old-to-new.patch\n~~~\nold-to-new.patch\n\n#### \nAndroid\n\n- old.apkapk\n~~~ JavaScript\n./bspatch old.apk new2.apk old-to-new.patch\n~~~\nnew2.apk\n\nmd5md5\n\n\n### \n- 1Shell\n\n- 2.APKAPKAPPapksha1MD5\n\n[Android](http://blog.csdn.net/huang_cai_yuan/article/details/52927630)\n","slug":"Android-patch-update","published":1,"date":"2016-12-19T16:00:00.000Z","updated":"2016-12-28T06:28:21.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj5v002hbxs674jtp4x9","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>googleSmart App Update</p>\n<p>apk</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>apkroot</p>\n<a id=\"more\"></a>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>apkapkpatchapkapkAPK</p>\n<p></p>\n<ul>\n<li>1.apk</li>\n<li>2.old.apknew.apk</li>\n<li>3.1.old.apk</li>\n</ul>\n<p>APK<strong>/data/app/%packagename%/</strong></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">public <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApkExtract</span> </span>&#123;</div><div class=\"line\">    public <span class=\"keyword\">static</span> <span class=\"built_in\">String</span> extract(Context context) &#123;</div><div class=\"line\">        context = context.getApplicationContext();</div><div class=\"line\">        ApplicationInfo applicationInfo = context.getApplicationInfo();</div><div class=\"line\">        <span class=\"built_in\">String</span> apkPath = applicationInfo.sourceDir;</div><div class=\"line\">        Log.d(<span class=\"string\">\"hongyang\"</span>, apkPath);</div><div class=\"line\">        <span class=\"keyword\">return</span> apkPath;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz\" target=\"_blank\" rel=\"external\">bsdiff</a></p>\n<p></p>\n<p><a href=\"http://www.daemonology.net/bsdiff/\" target=\"_blank\" rel=\"external\">http://www.daemonology.net/bsdiff/</a></p>\n<p></p>\n<p><a href=\"http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz\" target=\"_blank\" rel=\"external\">http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz</a></p>\n<p>bsdiffAndroid \\external\\bsdiff<a href=\"http://www.bzip.org/downloads.html\" target=\"_blank\" rel=\"external\">bzlib</a>APKMD5</p>\n<p>so<a href=\"https://github.com/hongyangAndroid/BsDiff_And_Patch/tree/master/so-dist\" target=\"_blank\" rel=\"external\"></a>NDK<a href=\"http://blog.csdn.net/lmj623565791/article/details/52761658\" target=\"_blank\" rel=\"external\"></a></p>\n<ul>\n<li><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">./bsdiff old.apk <span class=\"keyword\">new</span>.apk old-to-<span class=\"keyword\">new</span>.patch</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>old-to-new.patch</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Android</p>\n<ul>\n<li>old.apkapk<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">./bspatch old.apk new2.apk old-to-<span class=\"keyword\">new</span>.patch</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>new2.apk</p>\n<p>md5md5</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>1Shell</p>\n</li>\n<li><p>2.APKAPKAPPapksha1MD5</p>\n</li>\n</ul>\n<p><a href=\"http://blog.csdn.net/huang_cai_yuan/article/details/52927630\" target=\"_blank\" rel=\"external\">Android</a></p>\n","excerpt":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>googleSmart App Update</p>\n<p>apk</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>apkroot</p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>apkapkpatchapkapkAPK</p>\n<p></p>\n<ul>\n<li>1.apk</li>\n<li>2.old.apknew.apk</li>\n<li>3.1.old.apk</li>\n</ul>\n<p>APK<strong>/data/app/%packagename%/</strong></p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">public <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ApkExtract</span> </span>&#123;</div><div class=\"line\">    public <span class=\"keyword\">static</span> <span class=\"built_in\">String</span> extract(Context context) &#123;</div><div class=\"line\">        context = context.getApplicationContext();</div><div class=\"line\">        ApplicationInfo applicationInfo = context.getApplicationInfo();</div><div class=\"line\">        <span class=\"built_in\">String</span> apkPath = applicationInfo.sourceDir;</div><div class=\"line\">        Log.d(<span class=\"string\">\"hongyang\"</span>, apkPath);</div><div class=\"line\">        <span class=\"keyword\">return</span> apkPath;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz\">bsdiff</a></p>\n<p></p>\n<p><a href=\"http://www.daemonology.net/bsdiff/\">http://www.daemonology.net/bsdiff/</a></p>\n<p></p>\n<p><a href=\"http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz\">http://www.daemonology.net/bsdiff/bsdiff-4.3.tar.gz</a></p>\n<p>bsdiffAndroid \\external\\bsdiff<a href=\"http://www.bzip.org/downloads.html\">bzlib</a>APKMD5</p>\n<p>so<a href=\"https://github.com/hongyangAndroid/BsDiff_And_Patch/tree/master/so-dist\"></a>NDK<a href=\"http://blog.csdn.net/lmj623565791/article/details/52761658\"></a></p>\n<ul>\n<li><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">./bsdiff old.apk <span class=\"keyword\">new</span>.apk old-to-<span class=\"keyword\">new</span>.patch</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>old-to-new.patch</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Android</p>\n<ul>\n<li>old.apkapk<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">./bspatch old.apk new2.apk old-to-<span class=\"keyword\">new</span>.patch</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>new2.apk</p>\n<p>md5md5</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul>\n<li><p>1Shell</p>\n</li>\n<li><p>2.APKAPKAPPapksha1MD5</p>\n</li>\n</ul>\n<p><a href=\"http://blog.csdn.net/huang_cai_yuan/article/details/52927630\">Android</a></p>"},{"layout":"post","title":"nodejs","keywords":"nodejs","banner":"http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%202.jpg","thumbnail":"http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%202.jpg","_content":"\n> [Node](http://www.nodebeginner.org/index-zh-cn.html)\n\n## Node\n\n Manuel Kiessling\n goddyzhao & GrayZhang & MondayChen\n\n\nNode.jsJavaScriptHello World\n\n\n### JavaScript\n\nJavaScriptJavaScriptJavaScriptJavaScript \n\nNode.jsJavaScript\n\n<!--more-->\n\nJavaScriptNode.jsGoogleV8GoogleChromeJavaScriptJavaScript\n\nNode.js\n\nNode.js\n\nNode.js,Node.js[](https://github.com/joyent/node/wiki/Installation)\n\n#### Hello World\n\nNode.jsHello World\n\nhelloworld.jsSTDOUTHello World\n\n~~~ JavaScript\nconsole.log(\"Hello World\");\n~~~\nNode.js\n~~~ JavaScript\nnode helloworld.js\n~~~\nHello World \n\n\n\n### **Node.jsweb**\n\n### \n\n\n\n\nhttp://domain/start \nhttp://domain/upload  \nGoogle\n\nNode.js\n\n### \n\n\n\nWebHTTP\nURLrequest handler\n\nPOST\nURL\n\nPHPApache HTTPmod_php5\nHTTPWebPHP\n\nNode.jsNode.jsHTTPWebWeb\n\nNode.js\n\n--HTTP\n\n### \n\n#### HTTP\n\nNode.jsNode.js\nNode.jsHTTP\n\n\n\nmain fileNode.js\n\nHTTP\n\nindex.jsserver.js\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nhttp.createServer(function(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}).listen(8888);\n~~~\nHTTPNode.js\n\n~~~ JavaScript\nnode server.js\n~~~\nhttp://localhost:8888/ Hello World\n\nHTTP\n\n#### HTTP\n\nHTTP\n\nrequireNode.js http  http \n\nhttp createServer  listen HTTP\n\n http.createServer \n\n8888\n~~~ JavaScript\nvar http = require(\"http\");\n\nvar server = http.createServer();\nserver.listen(8888);\n~~~\n8888\n\nPHP createServer() \n\n createServer() JavaScript\n\n#### \n\n\n\n~~~ JavaScript\nfunction say(word) {\n  console.log(word);\n}\n\nfunction execute(someFunction, value) {\n  someFunction(value);\n}\n\nexecute(say, \"Hello\");\n~~~\n say execute say  say \n\n say execute  someFunction execute someFunction()  say \n\n say  execute  someFunction \n\n\n\n~~~ JavaScript\nfunction execute(someFunction, value) {\n  someFunction(value);\n}\n\n\nexecute(function(word){ console.log(word) }, \"Hello\");\n~~~\n execute  execute \n\n  \n\nJavaScriptJavaScript\n\n#### HTTP\n\nHTTP\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nhttp.createServer(function(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}).listen(8888);\n~~~\n createServer \n\n\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nfunction onRequest(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}\n\nhttp.createServer(onRequest).listen(8888);\n~~~\n\n\n#### \n\nNode.js\n\nFelix Geisendrfer[Understanding node.js](http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb)\n\nNode.jsNode.jsWeb based application\n\n http.createServer HTTP\n\n\n\nPHPApachePHP\n\nNode.js8888\n\nNode.js/JavaScript\n\n\n\n\n\n    \n\nFelix\n\nHTTP\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nfunction onRequest(request, response) {\n  console.log(\"Request received.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}\n\nhttp.createServer(onRequest).listen(8888);\n\nconsole.log(\"Server has started.\");\n~~~\n\n>  onRequest  console.log HTTP\n\nnode server.jsServer has started.http://localhost:8888/ Request received.\n\nJavaScript\n\n> Request received. http://localhost:8888/  http://localhost:8888/favicon.ico )\n\n#### \n\n onRequest() \n\n onRequest()  request  response \n\nHTTP\n\n response.writeHead() HTTP200HTTPcontent-type response.write() HTTPHello World\"\n\n response.end() \n\n request \n\n\n\nOK server.js HTTP index.js  server.js HTTP\n\nserver.jsNode.js index.js \n\n\n\n~~~ JavaScript\nvar http = require(\"http\");\n\n...\n\nhttp.createServer(...);\n~~~\nNode.jshttp\n\n http \n\n\n\n~~~ JavaScript\nvar foo = require(\"http\");\n\n...\n\nfoo.createServer(...);\n~~~\nNode.js\n\n server.js \n\n  \n\nHTTP\n\n start \n\n~~~ JavaScript\nvar http = require(\"http\");\n\nfunction start() {\n  function onRequest(request, response) {\n    console.log(\"Request received.\");\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\n index.js HTTP server.js \n\n index.js \n\n~~~ JavaScript\nvar server = require(\"./server\");\n\nserver.start();\n~~~\nserver\n\n\n\n~~~ JavaScript\nnode index.js\n~~~\n\n\nHTTPURL\n\n onRequest() \n\nHTTP****\n\n#### \n\nURLGETPOST\n\nHTTPURLGET/POSTHTTP\n\nrequestonRequest()Node.JS**url****querystring**\n\n~~~ JavaScript\n                               url.parse(string).query\n                                           |\n           url.parse(string).pathname      |\n                       |                   |\n                       |                   |\n                     ------ -------------------\nhttp://localhost:8888/start?foo=bar&hello=world\n                                ---       -----\n                                 |          |\n                                 |          |\n              querystring(string)[\"foo\"]    |\n                                            |\n                         querystring(string)[\"hello\"]\n~~~\n\nquerystringPOST\n\nonRequest()URL\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start() {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nURL--URL\n\n/start/upload\n\nrouter.js\n\n~~~ JavaScript\nfunction route(pathname) {\n  console.log(\"About to route a request for \" + pathname);\n}\n\nexports.route = route;\n~~~\n\n\n[Martin Fowlers](http://martinfowler.com/articles/injection.html)\n\nstart()\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    route(pathname);\n\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nindex.js\n~~~ JavaScript\nvar server = require(\"./server\");\nvar router = require(\"./router\");\n\nserver.start(router.route);\n~~~\n\n\nnode index.jsURLHTTP\n\n~~~ JavaScript\nbash$ node index.js\nRequest for /foo received.\nAbout to route a request for /foo\n~~~\n/favicon.ico\n\n#### \n\n\n\nindexrouterroute\n\n\n\n    \n\n\n\n\n\nSteve Yegge[](http://steve-yegge.blogspot.jp/2006/03/execution-in-kingdom-of-nouns.html)\n\n#### \n\nHTTP\n\nURL/start/upload\n\n\n\n\n\n -- requestHandlers\n\n~~~ JavaScript\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\n\n\nrequestHandlers\n\n\n\n2URLif request == x then call handler y\n\nURL**associative array** \n\nJavaScript -- JavaScript\n\nhttp://msdn.microsoft.com/en-us/magazine/cc163419.aspx \n\n> C++C#JavaScriptJavaScript/ -- JavaScript\n\nJavaScript/\n\nroute()\n\nindex.js\n\n~~~ JavaScript\nvar server = require(\"./server\");\nvar router = require(\"./router\");\nvar requestHandlers = require(\"./requestHandlers\");\n\nvar handle = {}\nhandle[\"/\"] = requestHandlers.start;\nhandle[\"/start\"] = requestHandlers.start;\nhandle[\"/upload\"] = requestHandlers.upload;\n\nserver.start(router.route, handle);\n~~~\nhandle\n\nURL\"/\"requestHandlers.start/start/start\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    route(handle, pathname);\n\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nstart()handlehandleroute()\n\nroute.jsroute()\n\n~~~ JavaScript\nfunction route(handle, pathname) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname]();\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n  }\n}\n\nexports.route = route;\n~~~\nhandle[pathname]();\n\nhttp://localhost:8888/start\n\n~~~ JavaScript\nServer has started.\nRequest for /start received.\nAbout to route a request for /start\nRequest handler 'start' was called.\n~~~\nhttp://localhost:8888/start\n\n~~~ JavaScript\nRequest for / received.\nAbout to route a request for /\nRequest handler 'start' was called.\n~~~\n\n#### \n\nHello World\n\nHello Worldserver.jsonRequest\n\nonRequest\n\n#### \n\nPHPRuby \n\nonRequestreturn()\n\n\n\nrequestHandler.js\n\n~~~ JavaScript\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n  return \"Hello Start\";\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n  return \"Hello Upload\";\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nrouter.js\n\n~~~ JavaScript\nfunction route(handle, pathname) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    return handle[pathname]();\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    return \"404 Not found\";\n  }\n}\n\nexports.route = route;\n~~~\n\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    var content = route(handle, pathname)\n    response.write(content);\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nhttp://localhost:8888/start, Hello Starthttp://localhost:8888/upload Hello Upload,http://localhost:8888/foo 404 Not found\n\n ****\n\n\n\n#### \n\n\n\n\n\nstart10Hello StartJavaScriptsleep()Hack\n\nrequestHandlers.js\n\n~~~ JavaScript\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n\n  function sleep(milliSeconds) {\n    var startTime = new Date().getTime();\n    while (new Date().getTime() < startTime + milliSeconds);\n  }\n\n  sleep(10000);\n  return \"Hello Start\";\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n  return \"Hello Upload\";\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nstart()Node.js10Hello Startupload()\n\n> 10\n\n\n\n http://localhost:8888/start \n\nhttp://localhost:8888/upload \n\n/start/upload\n\n /start URL10/upload URL10sleep()\n\nstart()****\n\nNodenode\n\n**Node.js**  Node.jsevent loop  \n\n10\n\nNode.jsprobablyExpensiveFunction()Node.jscallbackFunction()\n\nMixu[node.js](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)\n\n****\n\n\n\nstart\n\n~~~ JavaScript\nvar exec = require(\"child_process\").exec;\n\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n  var content = \"empty\";\n\n  exec(\"ls -lah\", function (error, stdout, stderr) {\n    content = stdout;\n  });\n\n  return content;\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n  return \"Hello Upload\";\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nNode.js**child_process****exec()**\n\nexec()Node.jsshellls -lah,/startURL\n\n contentemptyls -lahcontentcontent\n\nhttp://localhost:8888/start \n\nwebempty\n\nexec()shell\n\n> ls -lahfind /\n\n\n\n\n\nexec()\n\nexec()\n\n~~~ JavaScript\nfunction (error, stdout, stderr) {\n  content = stdout;\n}\n~~~\nexec()Node.js return content contentemptyexec()exec()\n\nls -lah  \n\n find /1ls -lahfind //start URLHTTP  exec()Node.jsexec()find /\n\n\n\n\n\n#### \n\n  \n\nNode.js ****\n\n ->  -> HTTP\n\n**** responseonRequest() \n\n\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    route(handle, pathname, response);\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nroute()responseroute()onRequest()responseroute()\n\nrouter.js:\n\n~~~ JavaScript\nfunction route(handle, pathname, response) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname](response);\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    response.writeHead(404, {\"Content-Type\": \"text/plain\"});\n    response.write(\"404 Not found\");\n    response.end();\n  }\n}\n\nexports.route = route;\n~~~\nresponse\n\n404\n\nrequestHandler.js\n\n~~~ JavaScript\nvar exec = require(\"child_process\").exec;\n\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  exec(\"ls -lah\", function (error, stdout, stderr) {\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(stdout);\n    response.end();\n  });\n}\n\nfunction upload(response) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello Upload\");\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nresponse\n\nstartexec()uploadHello Worldresponse\n\nnode index.js\n\n/start/uploadrequestHandlers.js\n\n~~~ JavaScript\nvar exec = require(\"child_process\").exec;\n\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  exec(\"find /\",\n    { timeout: 10000, maxBuffer: 20000*1024 },\n    function (error, stdout, stderr) {\n      response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n      response.write(stdout);\n      response.end();\n    });\n}\n\nfunction upload(response) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello Upload\");\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nhttp://localhost:8888/start 10http://localhost:8888/upload /start\n\n#### \n\n\n\n \n\nJavaScript\n\n POSTNode.js\n\nNode.jsPOST\nNode.jsmultipart POST\n\n#### POST\n\ntextareaPOST\n\n/startrequestHandlers.js\n\n~~~ JavaScript\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello Upload\");\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nWebby Awardshttp://localhost:8888/start \n\nMVCJavaScriptNode.js\n\n /uploadPOST\n\nPOST\n\nPOST  \n\nNode.jsPOST**data****end**\n\nNode.js request**listener** requestHTTPonRequest\n\n\n\n~~~ JavaScript\nrequest.addListener(\"data\", function(chunk) {\n  // called when a new chunk of data was received\n});\n\nrequest.addListener(\"end\", function() {\n  // called when all chunks of data have been received\n});\n~~~\n request  response request \n\nHTTPPOST\n\n dataenddataPOSTend\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var postData = \"\";\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    request.setEncoding(\"utf8\");\n\n    request.addListener(\"data\", function(postDataChunk) {\n      postData += postDataChunk;\n      console.log(\"Received POST data chunk '\"+\n      postDataChunk + \"'.\");\n    });\n\n    request.addListener(\"end\", function() {\n      route(handle, pathname, response, postData);\n    });\n\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\n UTF-8datapostData end****POST\n\n\n\ndata\n\n/uploadpostDatarouter.js\n\n~~~ JavaScript\nfunction route(handle, pathname, response, postData) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname](response, postData);\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    response.writeHead(404, {\"Content-Type\": \"text/plain\"});\n    response.write(\"404 Not found\");\n    response.end();\n  }\n}\n\nexports.route = route;\n~~~\nrequestHandlers.jsupload\n\n~~~ JavaScript\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent: \" + postData);\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nPOST\n\n POSTtext\n\nquerystring\n\n~~~ JavaScript\nvar querystring = require(\"querystring\");\n\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent the text: \"+\n  querystring.parse(postData).text);\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nPOST\n\n#### \n\n\n\n90IPO Node.js\n\nFelix Geisendrfer**node-formidable** POST  \n\nNode.jsNPMNode.js\n\n~~~ JavaScript\nnpm install formidable\n~~~\n\n\n~~~ JavaScript\nnpm info build Success: formidable@1.0.9\nnpm ok\n~~~\n\n\nformidablerequire\n\n~~~ JavaScript\nvar formidable = require(\"formidable\");\n~~~\nHTTP POSTNode.jsIncomingFormrequest\n\nnode-formidable\n\n~~~ JavaScript\nvar formidable = require('formidable'),\n    http = require('http'),\n    util = require('util');\n\nhttp.createServer(function(req, res) {\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\n    // parse a file upload\n    var form = new formidable.IncomingForm();\n    form.parse(req, function(err, fields, files) {\n      res.writeHead(200, {'content-type': 'text/plain'});\n      res.write('received upload:\\n\\n');\n      res.end(util.inspect({fields: fields, files: files}));\n    });\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, {'content-type': 'text/html'});\n  res.end(\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\n    'method=\"post\">'+\n    '<input type=\"text\" name=\"title\"><br>'+\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\n    '<input type=\"submit\" value=\"Upload\">'+\n    '</form>'\n  );\n}).listen(8888);\n~~~\nnodeform.parsefiles\n\n~~~ JavaScript\nreceived upload:\n\n{ fields: { title: 'Hello World' },\n  files:\n   { upload:\n      { size: 1558,\n        path: '/tmp/1c747974a27a6292743669e91f29350b',\n        name: 'us-flag.png',\n        type: 'image/png',\n        lastModifiedDate: Tue, 21 Jun 2011 07:02:41 GMT,\n        _writeStream: [Object],\n        length: [Getter],\n        filename: [Getter],\n        mime: [Getter] } } }\n~~~\n/tmp\n\n \n\n**fs**\n\n/showURL/tmp/test.png\n\nrequestHandlers.js\n\n~~~ JavaScript\nvar querystring = require(\"querystring\"),\n    fs = require(\"fs\");\n\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" '+\n    'content=\"text/html; charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent the text: \"+\n  querystring.parse(postData).text);\n  response.end();\n}\n\nfunction show(response, postData) {\n  console.log(\"Request handler 'show' was called.\");\n  fs.readFile(\"/tmp/test.png\", \"binary\", function(error, file) {\n    if(error) {\n      response.writeHead(500, {\"Content-Type\": \"text/plain\"});\n      response.write(error + \"\\n\");\n      response.end();\n    } else {\n      response.writeHead(200, {\"Content-Type\": \"image/png\"});\n      response.write(file, \"binary\");\n      response.end();\n    }\n  });\n}\n\nexports.start = start;\nexports.upload = upload;\nexports.show = show;\n~~~\nindex.js\n\n~~~ JavaScript\nvar server = require(\"./server\");\nvar router = require(\"./router\");\nvar requestHandlers = require(\"./requestHandlers\");\n\nvar handle = {}\nhandle[\"/\"] = requestHandlers.start;\nhandle[\"/start\"] = requestHandlers.start;\nhandle[\"/upload\"] = requestHandlers.upload;\nhandle[\"/show\"] = requestHandlers.show;\n\nserver.start(router.route, handle);\n~~~\nhttp://localhost:8888/show/tmp/test.png\n\n\n\n- /start\n- node-formidableupload/tmp/test.png\n- /uploadURLHTML\n\nHTMLmultipart/form-dataUpload file requestHandler.js\n\n~~~ JavaScript\nvar querystring = require(\"querystring\"),\n    fs = require(\"fs\");\n\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" '+\n    'content=\"text/html; charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\n    'method=\"post\">'+\n    '<input type=\"file\" name=\"upload\">'+\n    '<input type=\"submit\" value=\"Upload file\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent the text: \"+\n  querystring.parse(postData).text);\n  response.end();\n}\n\nfunction show(response, postData) {\n  console.log(\"Request handler 'show' was called.\");\n  fs.readFile(\"/tmp/test.png\", \"binary\", function(error, file) {\n    if(error) {\n      response.writeHead(500, {\"Content-Type\": \"text/plain\"});\n      response.write(error + \"\\n\");\n      response.end();\n    } else {\n      response.writeHead(200, {\"Content-Type\": \"image/png\"});\n      response.write(file, \"binary\");\n      response.end();\n    }\n  });\n}\n\nexports.start = start;\nexports.upload = upload;\nexports.show = show;\n~~~\n uploadrequestnode-formidableform.parse\n\nresponsepostDatarequest \n\npostData   requestform.parseNode.js\n\nserver.js  postDatarequest.setEncoding node-formidablerequest\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n    route(handle, pathname, response, request);\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\n router.js  postDatarequest\n\n~~~ JavaScript\nfunction route(handle, pathname, response, request) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname](response, request);\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    response.writeHead(404, {\"Content-Type\": \"text/html\"});\n    response.write(\"404 Not found\");\n    response.end();\n  }\n}\n\nexports.route = route;\n~~~\nrequestuploadnode-formidable/tmp/tmp/test.png PNG\n\n**fs.renameSync(path1,path2)**  \n\nrequestHandlers.js\n\n~~~ JavaScript\nvar querystring = require(\"querystring\"),\n    fs = require(\"fs\"),\n    formidable = require(\"formidable\");\n\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\n    'method=\"post\">'+\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\">'+\n    '<input type=\"submit\" value=\"Upload file\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, request) {\n  console.log(\"Request handler 'upload' was called.\");\n\n  var form = new formidable.IncomingForm();\n  console.log(\"about to parse\");\n  form.parse(request, function(error, fields, files) {\n    console.log(\"parsing done\");\n    fs.renameSync(files.upload.path, \"/tmp/test.png\");\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(\"received image:<br/>\");\n    response.write(\"<img src='/show' />\");\n    response.end();\n  });\n}\n\nfunction show(response) {\n  console.log(\"Request handler 'show' was called.\");\n  fs.readFile(\"/tmp/test.png\", \"binary\", function(error, file) {\n    if(error) {\n      response.writeHead(500, {\"Content-Type\": \"text/plain\"});\n      response.write(error + \"\\n\");\n      response.end();\n    } else {\n      response.writeHead(200, {\"Content-Type\": \"image/png\"});\n      response.write(file, \"binary\");\n      response.end();\n    }\n  });\n}\n\nexports.start = start;\nexports.upload = upload;\nexports.show = show;\n~~~\n\n\n### \n\nNode.jsweb JavaScript\n\n Node.jsGET\n\n  \n","source":"_posts/2016-12-03-nodejs-learning-getting-started.md","raw":"---\nlayout: post\ntitle:  nodejs\ncategory: read\ntags: nodejs\nkeywords: nodejs\nbanner: http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%202.jpg\nthumbnail: http://obxk8w81b.bkt.clouddn.com/Daubigny%20s%20Garden%202.jpg\n---\n\n> [Node](http://www.nodebeginner.org/index-zh-cn.html)\n\n## Node\n\n Manuel Kiessling\n goddyzhao & GrayZhang & MondayChen\n\n\nNode.jsJavaScriptHello World\n\n\n### JavaScript\n\nJavaScriptJavaScriptJavaScriptJavaScript \n\nNode.jsJavaScript\n\n<!--more-->\n\nJavaScriptNode.jsGoogleV8GoogleChromeJavaScriptJavaScript\n\nNode.js\n\nNode.js\n\nNode.js,Node.js[](https://github.com/joyent/node/wiki/Installation)\n\n#### Hello World\n\nNode.jsHello World\n\nhelloworld.jsSTDOUTHello World\n\n~~~ JavaScript\nconsole.log(\"Hello World\");\n~~~\nNode.js\n~~~ JavaScript\nnode helloworld.js\n~~~\nHello World \n\n\n\n### **Node.jsweb**\n\n### \n\n\n\n\nhttp://domain/start \nhttp://domain/upload  \nGoogle\n\nNode.js\n\n### \n\n\n\nWebHTTP\nURLrequest handler\n\nPOST\nURL\n\nPHPApache HTTPmod_php5\nHTTPWebPHP\n\nNode.jsNode.jsHTTPWebWeb\n\nNode.js\n\n--HTTP\n\n### \n\n#### HTTP\n\nNode.jsNode.js\nNode.jsHTTP\n\n\n\nmain fileNode.js\n\nHTTP\n\nindex.jsserver.js\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nhttp.createServer(function(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}).listen(8888);\n~~~\nHTTPNode.js\n\n~~~ JavaScript\nnode server.js\n~~~\nhttp://localhost:8888/ Hello World\n\nHTTP\n\n#### HTTP\n\nHTTP\n\nrequireNode.js http  http \n\nhttp createServer  listen HTTP\n\n http.createServer \n\n8888\n~~~ JavaScript\nvar http = require(\"http\");\n\nvar server = http.createServer();\nserver.listen(8888);\n~~~\n8888\n\nPHP createServer() \n\n createServer() JavaScript\n\n#### \n\n\n\n~~~ JavaScript\nfunction say(word) {\n  console.log(word);\n}\n\nfunction execute(someFunction, value) {\n  someFunction(value);\n}\n\nexecute(say, \"Hello\");\n~~~\n say execute say  say \n\n say execute  someFunction execute someFunction()  say \n\n say  execute  someFunction \n\n\n\n~~~ JavaScript\nfunction execute(someFunction, value) {\n  someFunction(value);\n}\n\n\nexecute(function(word){ console.log(word) }, \"Hello\");\n~~~\n execute  execute \n\n  \n\nJavaScriptJavaScript\n\n#### HTTP\n\nHTTP\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nhttp.createServer(function(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}).listen(8888);\n~~~\n createServer \n\n\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nfunction onRequest(request, response) {\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}\n\nhttp.createServer(onRequest).listen(8888);\n~~~\n\n\n#### \n\nNode.js\n\nFelix Geisendrfer[Understanding node.js](http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb)\n\nNode.jsNode.jsWeb based application\n\n http.createServer HTTP\n\n\n\nPHPApachePHP\n\nNode.js8888\n\nNode.js/JavaScript\n\n\n\n\n\n    \n\nFelix\n\nHTTP\n\n~~~ JavaScript\nvar http = require(\"http\");\n\nfunction onRequest(request, response) {\n  console.log(\"Request received.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello World\");\n  response.end();\n}\n\nhttp.createServer(onRequest).listen(8888);\n\nconsole.log(\"Server has started.\");\n~~~\n\n>  onRequest  console.log HTTP\n\nnode server.jsServer has started.http://localhost:8888/ Request received.\n\nJavaScript\n\n> Request received. http://localhost:8888/  http://localhost:8888/favicon.ico )\n\n#### \n\n onRequest() \n\n onRequest()  request  response \n\nHTTP\n\n response.writeHead() HTTP200HTTPcontent-type response.write() HTTPHello World\"\n\n response.end() \n\n request \n\n\n\nOK server.js HTTP index.js  server.js HTTP\n\nserver.jsNode.js index.js \n\n\n\n~~~ JavaScript\nvar http = require(\"http\");\n\n...\n\nhttp.createServer(...);\n~~~\nNode.jshttp\n\n http \n\n\n\n~~~ JavaScript\nvar foo = require(\"http\");\n\n...\n\nfoo.createServer(...);\n~~~\nNode.js\n\n server.js \n\n  \n\nHTTP\n\n start \n\n~~~ JavaScript\nvar http = require(\"http\");\n\nfunction start() {\n  function onRequest(request, response) {\n    console.log(\"Request received.\");\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\n index.js HTTP server.js \n\n index.js \n\n~~~ JavaScript\nvar server = require(\"./server\");\n\nserver.start();\n~~~\nserver\n\n\n\n~~~ JavaScript\nnode index.js\n~~~\n\n\nHTTPURL\n\n onRequest() \n\nHTTP****\n\n#### \n\nURLGETPOST\n\nHTTPURLGET/POSTHTTP\n\nrequestonRequest()Node.JS**url****querystring**\n\n~~~ JavaScript\n                               url.parse(string).query\n                                           |\n           url.parse(string).pathname      |\n                       |                   |\n                       |                   |\n                     ------ -------------------\nhttp://localhost:8888/start?foo=bar&hello=world\n                                ---       -----\n                                 |          |\n                                 |          |\n              querystring(string)[\"foo\"]    |\n                                            |\n                         querystring(string)[\"hello\"]\n~~~\n\nquerystringPOST\n\nonRequest()URL\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start() {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nURL--URL\n\n/start/upload\n\nrouter.js\n\n~~~ JavaScript\nfunction route(pathname) {\n  console.log(\"About to route a request for \" + pathname);\n}\n\nexports.route = route;\n~~~\n\n\n[Martin Fowlers](http://martinfowler.com/articles/injection.html)\n\nstart()\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    route(pathname);\n\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nindex.js\n~~~ JavaScript\nvar server = require(\"./server\");\nvar router = require(\"./router\");\n\nserver.start(router.route);\n~~~\n\n\nnode index.jsURLHTTP\n\n~~~ JavaScript\nbash$ node index.js\nRequest for /foo received.\nAbout to route a request for /foo\n~~~\n/favicon.ico\n\n#### \n\n\n\nindexrouterroute\n\n\n\n    \n\n\n\n\n\nSteve Yegge[](http://steve-yegge.blogspot.jp/2006/03/execution-in-kingdom-of-nouns.html)\n\n#### \n\nHTTP\n\nURL/start/upload\n\n\n\n\n\n -- requestHandlers\n\n~~~ JavaScript\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\n\n\nrequestHandlers\n\n\n\n2URLif request == x then call handler y\n\nURL**associative array** \n\nJavaScript -- JavaScript\n\nhttp://msdn.microsoft.com/en-us/magazine/cc163419.aspx \n\n> C++C#JavaScriptJavaScript/ -- JavaScript\n\nJavaScript/\n\nroute()\n\nindex.js\n\n~~~ JavaScript\nvar server = require(\"./server\");\nvar router = require(\"./router\");\nvar requestHandlers = require(\"./requestHandlers\");\n\nvar handle = {}\nhandle[\"/\"] = requestHandlers.start;\nhandle[\"/start\"] = requestHandlers.start;\nhandle[\"/upload\"] = requestHandlers.upload;\n\nserver.start(router.route, handle);\n~~~\nhandle\n\nURL\"/\"requestHandlers.start/start/start\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    route(handle, pathname);\n\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(\"Hello World\");\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nstart()handlehandleroute()\n\nroute.jsroute()\n\n~~~ JavaScript\nfunction route(handle, pathname) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname]();\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n  }\n}\n\nexports.route = route;\n~~~\nhandle[pathname]();\n\nhttp://localhost:8888/start\n\n~~~ JavaScript\nServer has started.\nRequest for /start received.\nAbout to route a request for /start\nRequest handler 'start' was called.\n~~~\nhttp://localhost:8888/start\n\n~~~ JavaScript\nRequest for / received.\nAbout to route a request for /\nRequest handler 'start' was called.\n~~~\n\n#### \n\nHello World\n\nHello Worldserver.jsonRequest\n\nonRequest\n\n#### \n\nPHPRuby \n\nonRequestreturn()\n\n\n\nrequestHandler.js\n\n~~~ JavaScript\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n  return \"Hello Start\";\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n  return \"Hello Upload\";\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nrouter.js\n\n~~~ JavaScript\nfunction route(handle, pathname) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    return handle[pathname]();\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    return \"404 Not found\";\n  }\n}\n\nexports.route = route;\n~~~\n\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    var content = route(handle, pathname)\n    response.write(content);\n    response.end();\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nhttp://localhost:8888/start, Hello Starthttp://localhost:8888/upload Hello Upload,http://localhost:8888/foo 404 Not found\n\n ****\n\n\n\n#### \n\n\n\n\n\nstart10Hello StartJavaScriptsleep()Hack\n\nrequestHandlers.js\n\n~~~ JavaScript\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n\n  function sleep(milliSeconds) {\n    var startTime = new Date().getTime();\n    while (new Date().getTime() < startTime + milliSeconds);\n  }\n\n  sleep(10000);\n  return \"Hello Start\";\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n  return \"Hello Upload\";\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nstart()Node.js10Hello Startupload()\n\n> 10\n\n\n\n http://localhost:8888/start \n\nhttp://localhost:8888/upload \n\n/start/upload\n\n /start URL10/upload URL10sleep()\n\nstart()****\n\nNodenode\n\n**Node.js**  Node.jsevent loop  \n\n10\n\nNode.jsprobablyExpensiveFunction()Node.jscallbackFunction()\n\nMixu[node.js](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)\n\n****\n\n\n\nstart\n\n~~~ JavaScript\nvar exec = require(\"child_process\").exec;\n\nfunction start() {\n  console.log(\"Request handler 'start' was called.\");\n  var content = \"empty\";\n\n  exec(\"ls -lah\", function (error, stdout, stderr) {\n    content = stdout;\n  });\n\n  return content;\n}\n\nfunction upload() {\n  console.log(\"Request handler 'upload' was called.\");\n  return \"Hello Upload\";\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nNode.js**child_process****exec()**\n\nexec()Node.jsshellls -lah,/startURL\n\n contentemptyls -lahcontentcontent\n\nhttp://localhost:8888/start \n\nwebempty\n\nexec()shell\n\n> ls -lahfind /\n\n\n\n\n\nexec()\n\nexec()\n\n~~~ JavaScript\nfunction (error, stdout, stderr) {\n  content = stdout;\n}\n~~~\nexec()Node.js return content contentemptyexec()exec()\n\nls -lah  \n\n find /1ls -lahfind //start URLHTTP  exec()Node.jsexec()find /\n\n\n\n\n\n#### \n\n  \n\nNode.js ****\n\n ->  -> HTTP\n\n**** responseonRequest() \n\n\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    route(handle, pathname, response);\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\nroute()responseroute()onRequest()responseroute()\n\nrouter.js:\n\n~~~ JavaScript\nfunction route(handle, pathname, response) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname](response);\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    response.writeHead(404, {\"Content-Type\": \"text/plain\"});\n    response.write(\"404 Not found\");\n    response.end();\n  }\n}\n\nexports.route = route;\n~~~\nresponse\n\n404\n\nrequestHandler.js\n\n~~~ JavaScript\nvar exec = require(\"child_process\").exec;\n\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  exec(\"ls -lah\", function (error, stdout, stderr) {\n    response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n    response.write(stdout);\n    response.end();\n  });\n}\n\nfunction upload(response) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello Upload\");\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nresponse\n\nstartexec()uploadHello Worldresponse\n\nnode index.js\n\n/start/uploadrequestHandlers.js\n\n~~~ JavaScript\nvar exec = require(\"child_process\").exec;\n\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  exec(\"find /\",\n    { timeout: 10000, maxBuffer: 20000*1024 },\n    function (error, stdout, stderr) {\n      response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n      response.write(stdout);\n      response.end();\n    });\n}\n\nfunction upload(response) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello Upload\");\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nhttp://localhost:8888/start 10http://localhost:8888/upload /start\n\n#### \n\n\n\n \n\nJavaScript\n\n POSTNode.js\n\nNode.jsPOST\nNode.jsmultipart POST\n\n#### POST\n\ntextareaPOST\n\n/startrequestHandlers.js\n\n~~~ JavaScript\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"Hello Upload\");\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nWebby Awardshttp://localhost:8888/start \n\nMVCJavaScriptNode.js\n\n /uploadPOST\n\nPOST\n\nPOST  \n\nNode.jsPOST**data****end**\n\nNode.js request**listener** requestHTTPonRequest\n\n\n\n~~~ JavaScript\nrequest.addListener(\"data\", function(chunk) {\n  // called when a new chunk of data was received\n});\n\nrequest.addListener(\"end\", function() {\n  // called when all chunks of data have been received\n});\n~~~\n request  response request \n\nHTTPPOST\n\n dataenddataPOSTend\n\nserver.js\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var postData = \"\";\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n\n    request.setEncoding(\"utf8\");\n\n    request.addListener(\"data\", function(postDataChunk) {\n      postData += postDataChunk;\n      console.log(\"Received POST data chunk '\"+\n      postDataChunk + \"'.\");\n    });\n\n    request.addListener(\"end\", function() {\n      route(handle, pathname, response, postData);\n    });\n\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\n UTF-8datapostData end****POST\n\n\n\ndata\n\n/uploadpostDatarouter.js\n\n~~~ JavaScript\nfunction route(handle, pathname, response, postData) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname](response, postData);\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    response.writeHead(404, {\"Content-Type\": \"text/plain\"});\n    response.write(\"404 Not found\");\n    response.end();\n  }\n}\n\nexports.route = route;\n~~~\nrequestHandlers.jsupload\n\n~~~ JavaScript\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent: \" + postData);\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nPOST\n\n POSTtext\n\nquerystring\n\n~~~ JavaScript\nvar querystring = require(\"querystring\");\n\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent the text: \"+\n  querystring.parse(postData).text);\n  response.end();\n}\n\nexports.start = start;\nexports.upload = upload;\n~~~\nPOST\n\n#### \n\n\n\n90IPO Node.js\n\nFelix Geisendrfer**node-formidable** POST  \n\nNode.jsNPMNode.js\n\n~~~ JavaScript\nnpm install formidable\n~~~\n\n\n~~~ JavaScript\nnpm info build Success: formidable@1.0.9\nnpm ok\n~~~\n\n\nformidablerequire\n\n~~~ JavaScript\nvar formidable = require(\"formidable\");\n~~~\nHTTP POSTNode.jsIncomingFormrequest\n\nnode-formidable\n\n~~~ JavaScript\nvar formidable = require('formidable'),\n    http = require('http'),\n    util = require('util');\n\nhttp.createServer(function(req, res) {\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\n    // parse a file upload\n    var form = new formidable.IncomingForm();\n    form.parse(req, function(err, fields, files) {\n      res.writeHead(200, {'content-type': 'text/plain'});\n      res.write('received upload:\\n\\n');\n      res.end(util.inspect({fields: fields, files: files}));\n    });\n    return;\n  }\n\n  // show a file upload form\n  res.writeHead(200, {'content-type': 'text/html'});\n  res.end(\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\n    'method=\"post\">'+\n    '<input type=\"text\" name=\"title\"><br>'+\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\n    '<input type=\"submit\" value=\"Upload\">'+\n    '</form>'\n  );\n}).listen(8888);\n~~~\nnodeform.parsefiles\n\n~~~ JavaScript\nreceived upload:\n\n{ fields: { title: 'Hello World' },\n  files:\n   { upload:\n      { size: 1558,\n        path: '/tmp/1c747974a27a6292743669e91f29350b',\n        name: 'us-flag.png',\n        type: 'image/png',\n        lastModifiedDate: Tue, 21 Jun 2011 07:02:41 GMT,\n        _writeStream: [Object],\n        length: [Getter],\n        filename: [Getter],\n        mime: [Getter] } } }\n~~~\n/tmp\n\n \n\n**fs**\n\n/showURL/tmp/test.png\n\nrequestHandlers.js\n\n~~~ JavaScript\nvar querystring = require(\"querystring\"),\n    fs = require(\"fs\");\n\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" '+\n    'content=\"text/html; charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" method=\"post\">'+\n    '<textarea name=\"text\" rows=\"20\" cols=\"60\"></textarea>'+\n    '<input type=\"submit\" value=\"Submit text\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent the text: \"+\n  querystring.parse(postData).text);\n  response.end();\n}\n\nfunction show(response, postData) {\n  console.log(\"Request handler 'show' was called.\");\n  fs.readFile(\"/tmp/test.png\", \"binary\", function(error, file) {\n    if(error) {\n      response.writeHead(500, {\"Content-Type\": \"text/plain\"});\n      response.write(error + \"\\n\");\n      response.end();\n    } else {\n      response.writeHead(200, {\"Content-Type\": \"image/png\"});\n      response.write(file, \"binary\");\n      response.end();\n    }\n  });\n}\n\nexports.start = start;\nexports.upload = upload;\nexports.show = show;\n~~~\nindex.js\n\n~~~ JavaScript\nvar server = require(\"./server\");\nvar router = require(\"./router\");\nvar requestHandlers = require(\"./requestHandlers\");\n\nvar handle = {}\nhandle[\"/\"] = requestHandlers.start;\nhandle[\"/start\"] = requestHandlers.start;\nhandle[\"/upload\"] = requestHandlers.upload;\nhandle[\"/show\"] = requestHandlers.show;\n\nserver.start(router.route, handle);\n~~~\nhttp://localhost:8888/show/tmp/test.png\n\n\n\n- /start\n- node-formidableupload/tmp/test.png\n- /uploadURLHTML\n\nHTMLmultipart/form-dataUpload file requestHandler.js\n\n~~~ JavaScript\nvar querystring = require(\"querystring\"),\n    fs = require(\"fs\");\n\nfunction start(response, postData) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" '+\n    'content=\"text/html; charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\n    'method=\"post\">'+\n    '<input type=\"file\" name=\"upload\">'+\n    '<input type=\"submit\" value=\"Upload file\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, postData) {\n  console.log(\"Request handler 'upload' was called.\");\n  response.writeHead(200, {\"Content-Type\": \"text/plain\"});\n  response.write(\"You've sent the text: \"+\n  querystring.parse(postData).text);\n  response.end();\n}\n\nfunction show(response, postData) {\n  console.log(\"Request handler 'show' was called.\");\n  fs.readFile(\"/tmp/test.png\", \"binary\", function(error, file) {\n    if(error) {\n      response.writeHead(500, {\"Content-Type\": \"text/plain\"});\n      response.write(error + \"\\n\");\n      response.end();\n    } else {\n      response.writeHead(200, {\"Content-Type\": \"image/png\"});\n      response.write(file, \"binary\");\n      response.end();\n    }\n  });\n}\n\nexports.start = start;\nexports.upload = upload;\nexports.show = show;\n~~~\n uploadrequestnode-formidableform.parse\n\nresponsepostDatarequest \n\npostData   requestform.parseNode.js\n\nserver.js  postDatarequest.setEncoding node-formidablerequest\n\n~~~ JavaScript\nvar http = require(\"http\");\nvar url = require(\"url\");\n\nfunction start(route, handle) {\n  function onRequest(request, response) {\n    var pathname = url.parse(request.url).pathname;\n    console.log(\"Request for \" + pathname + \" received.\");\n    route(handle, pathname, response, request);\n  }\n\n  http.createServer(onRequest).listen(8888);\n  console.log(\"Server has started.\");\n}\n\nexports.start = start;\n~~~\n router.js  postDatarequest\n\n~~~ JavaScript\nfunction route(handle, pathname, response, request) {\n  console.log(\"About to route a request for \" + pathname);\n  if (typeof handle[pathname] === 'function') {\n    handle[pathname](response, request);\n  } else {\n    console.log(\"No request handler found for \" + pathname);\n    response.writeHead(404, {\"Content-Type\": \"text/html\"});\n    response.write(\"404 Not found\");\n    response.end();\n  }\n}\n\nexports.route = route;\n~~~\nrequestuploadnode-formidable/tmp/tmp/test.png PNG\n\n**fs.renameSync(path1,path2)**  \n\nrequestHandlers.js\n\n~~~ JavaScript\nvar querystring = require(\"querystring\"),\n    fs = require(\"fs\"),\n    formidable = require(\"formidable\");\n\nfunction start(response) {\n  console.log(\"Request handler 'start' was called.\");\n\n  var body = '<html>'+\n    '<head>'+\n    '<meta http-equiv=\"Content-Type\" content=\"text/html; '+\n    'charset=UTF-8\" />'+\n    '</head>'+\n    '<body>'+\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\n    'method=\"post\">'+\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\">'+\n    '<input type=\"submit\" value=\"Upload file\" />'+\n    '</form>'+\n    '</body>'+\n    '</html>';\n\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(body);\n    response.end();\n}\n\nfunction upload(response, request) {\n  console.log(\"Request handler 'upload' was called.\");\n\n  var form = new formidable.IncomingForm();\n  console.log(\"about to parse\");\n  form.parse(request, function(error, fields, files) {\n    console.log(\"parsing done\");\n    fs.renameSync(files.upload.path, \"/tmp/test.png\");\n    response.writeHead(200, {\"Content-Type\": \"text/html\"});\n    response.write(\"received image:<br/>\");\n    response.write(\"<img src='/show' />\");\n    response.end();\n  });\n}\n\nfunction show(response) {\n  console.log(\"Request handler 'show' was called.\");\n  fs.readFile(\"/tmp/test.png\", \"binary\", function(error, file) {\n    if(error) {\n      response.writeHead(500, {\"Content-Type\": \"text/plain\"});\n      response.write(error + \"\\n\");\n      response.end();\n    } else {\n      response.writeHead(200, {\"Content-Type\": \"image/png\"});\n      response.write(file, \"binary\");\n      response.end();\n    }\n  });\n}\n\nexports.start = start;\nexports.upload = upload;\nexports.show = show;\n~~~\n\n\n### \n\nNode.jsweb JavaScript\n\n Node.jsGET\n\n  \n","slug":"nodejs-learning-getting-started","published":1,"date":"2016-12-02T16:00:00.000Z","updated":"2016-12-28T03:07:22.000Z","comments":1,"photos":[],"link":"","_id":"cix8kaj6k0032bxs6byemy14u","content":"<blockquote>\n<p><a href=\"http://www.nodebeginner.org/index-zh-cn.html\" target=\"_blank\" rel=\"external\">Node</a></p>\n</blockquote>\n<h2 id=\"Node\"><a href=\"#Node\" class=\"headerlink\" title=\"Node\"></a>Node</h2><p> Manuel Kiessling<br> goddyzhao &amp; GrayZhang &amp; MondayChen</p>\n<p>Node.jsJavaScriptHello World</p>\n<h3 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h3><p>JavaScriptJavaScriptJavaScriptJavaScript </p>\n<p>Node.jsJavaScript</p>\n<a id=\"more\"></a>\n<p>JavaScriptNode.jsGoogleV8GoogleChromeJavaScriptJavaScript</p>\n<p>Node.js</p>\n<p>Node.js</p>\n<p>Node.js,Node.js<a href=\"https://github.com/joyent/node/wiki/Installation\" target=\"_blank\" rel=\"external\"></a></p>\n<h4 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h4><p>Node.jsHello World</p>\n<p>helloworld.jsSTDOUTHello World</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"Hello World\"</span>);</div></pre></td></tr></table></figure>\n<p>Node.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">node helloworld.js</div></pre></td></tr></table></figure></p>\n<p>Hello World </p>\n<p></p>\n<h3 id=\"Node-jsweb\"><a href=\"#Node-jsweb\" class=\"headerlink\" title=\"Node.jsweb\"></a><strong>Node.jsweb</strong></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><br><a href=\"http://domain/start\" target=\"_blank\" rel=\"external\">http://domain/start</a> <br><a href=\"http://domain/upload\" target=\"_blank\" rel=\"external\">http://domain/upload</a>  <br>Google</p>\n<p>Node.js</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>WebHTTP<br>URLrequest handler<br><br>POST<br>URL<br><br>PHPApache HTTPmod_php5<br>HTTPWebPHP</p>\n<p>Node.jsNode.jsHTTPWebWeb</p>\n<p>Node.js</p>\n<p>HTTP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><p>Node.jsNode.js<br>Node.jsHTTP</p>\n<p></p>\n<p>main fileNode.js</p>\n<p>HTTP</p>\n<p>index.jsserver.js</p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p>HTTPNode.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">node server.js</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/\" target=\"_blank\" rel=\"external\">http://localhost:8888/</a> Hello World</p>\n<p>HTTP</p>\n<h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><p>HTTP</p>\n<p>requireNode.js http  http </p>\n<p>http createServer  listen HTTP</p>\n<p> http.createServer </p>\n<p>8888<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> server = http.createServer();</div><div class=\"line\">server.listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure></p>\n<p>8888</p>\n<p>PHP createServer() </p>\n<p> createServer() JavaScript</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">say</span>(<span class=\"params\">word</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(word);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\">someFunction, value</span>) </span>&#123;</div><div class=\"line\">  someFunction(value);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">execute(say, <span class=\"string\">\"Hello\"</span>);</div></pre></td></tr></table></figure>\n<p> say execute say  say </p>\n<p> say execute  someFunction execute someFunction()  say </p>\n<p> say  execute  someFunction </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\">someFunction, value</span>) </span>&#123;</div><div class=\"line\">  someFunction(value);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">execute(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">word</span>)</span>&#123; <span class=\"built_in\">console</span>.log(word) &#125;, <span class=\"string\">\"Hello\"</span>);</div></pre></td></tr></table></figure>\n<p> execute  execute </p>\n<p>  </p>\n<p>JavaScriptJavaScript</p>\n<h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><p>HTTP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p> createServer </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Node.js</p>\n<p>Felix Geisendrfer<a href=\"http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb\" target=\"_blank\" rel=\"external\">Understanding node.js</a></p>\n<p>Node.jsNode.jsWeb based application</p>\n<p> http.createServer HTTP</p>\n<p></p>\n<p>PHPApachePHP</p>\n<p>Node.js8888</p>\n<p>Node.js/JavaScript</p>\n<p></p>\n<p></p>\n<p>    </p>\n<p>Felix</p>\n<p>HTTP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request received.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div></pre></td></tr></table></figure>\n<blockquote>\n<p> onRequest  console.log HTTP</p>\n</blockquote>\n<p>node server.jsServer has started.<a href=\"http://localhost:8888/\" target=\"_blank\" rel=\"external\">http://localhost:8888/</a> Request received.</p>\n<p>JavaScript</p>\n<blockquote>\n<p>Request received. <a href=\"http://localhost:8888/\" target=\"_blank\" rel=\"external\">http://localhost:8888/</a>  <a href=\"http://localhost:8888/favicon.ico\" target=\"_blank\" rel=\"external\">http://localhost:8888/favicon.ico</a> )</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> onRequest() </p>\n<p> onRequest()  request  response </p>\n<p>HTTP</p>\n<p> response.writeHead() HTTP200HTTPcontent-type response.write() HTTPHello World</p>\n<p> response.end() </p>\n<p> request </p>\n<p></p>\n<p>OK server.js HTTP index.js  server.js HTTP</p>\n<p>server.jsNode.js index.js </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\">http.createServer(...);</div></pre></td></tr></table></figure>\n<p>Node.jshttp</p>\n<p> http </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> foo = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\">foo.createServer(...);</div></pre></td></tr></table></figure>\n<p>Node.js</p>\n<p> server.js </p>\n<p>  </p>\n<p>HTTP</p>\n<p> start </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request received.\"</span>);</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p> index.js HTTP server.js </p>\n<p> index.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"></div><div class=\"line\">server.start();</div></pre></td></tr></table></figure>\n<p>server</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">node index.js</div></pre></td></tr></table></figure>\n<p></p>\n<p>HTTPURL</p>\n<p> onRequest() </p>\n<p>HTTP<strong></strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>URLGETPOST</p>\n<p>HTTPURLGET/POSTHTTP</p>\n<p>requestonRequest()Node.JS<strong>url</strong><strong>querystring</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">                               url.parse(string).query</div><div class=\"line\">                                           |</div><div class=\"line\">           url.parse(string).pathname      |</div><div class=\"line\">                       |                   |</div><div class=\"line\">                       |                   |</div><div class=\"line\">                     ------ -------------------</div><div class=\"line\">http:<span class=\"comment\">//localhost:8888/start?foo=bar&amp;hello=world</span></div><div class=\"line\">                                ---       -----</div><div class=\"line\">                                 |          |</div><div class=\"line\">                                 |          |</div><div class=\"line\">              querystring(string)[<span class=\"string\">\"foo\"</span>]    |</div><div class=\"line\">                                            |</div><div class=\"line\">                         querystring(string)[<span class=\"string\">\"hello\"</span>]</div></pre></td></tr></table></figure>\n<p>querystringPOST</p>\n<p>onRequest()URL</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>URLURL</p>\n<p>/start/upload</p>\n<p>router.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">pathname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p></p>\n<p><a href=\"http://martinfowler.com/articles/injection.html\" target=\"_blank\" rel=\"external\">Martin Fowlers</a></p>\n<p>start()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    route(pathname);</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>index.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"built_in\">require</span>(<span class=\"string\">\"./router\"</span>);</div><div class=\"line\"></div><div class=\"line\">server.start(router.route);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p>node index.jsURLHTTP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">bash$ node index.js</div><div class=\"line\">Request <span class=\"keyword\">for</span> /foo received.</div><div class=\"line\">About to route a request <span class=\"keyword\">for</span> /foo</div></pre></td></tr></table></figure>\n<p>/favicon.ico</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>indexrouterroute</p>\n<p></p>\n<pre><code>\n</code></pre><p></p>\n<p></p>\n<p>Steve Yegge<a href=\"http://steve-yegge.blogspot.jp/2006/03/execution-in-kingdom-of-nouns.html\" target=\"_blank\" rel=\"external\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>HTTP</p>\n<p>URL/start/upload</p>\n<p></p>\n<p></p>\n<p>  requestHandlers</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p></p>\n<p>requestHandlers</p>\n<p></p>\n<p>2URLif request == x then call handler y</p>\n<p>URL<strong>associative array</strong> </p>\n<p>JavaScript  JavaScript</p>\n<p><a href=\"http://msdn.microsoft.com/en-us/magazine/cc163419.aspx\" target=\"_blank\" rel=\"external\">http://msdn.microsoft.com/en-us/magazine/cc163419.aspx</a> </p>\n<blockquote>\n<p>C++C#JavaScriptJavaScript/  JavaScript</p>\n</blockquote>\n<p>JavaScript/</p>\n<p>route()</p>\n<p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"built_in\">require</span>(<span class=\"string\">\"./router\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> requestHandlers = <span class=\"built_in\">require</span>(<span class=\"string\">\"./requestHandlers\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> handle = &#123;&#125;</div><div class=\"line\">handle[<span class=\"string\">\"/\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/start\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/upload\"</span>] = requestHandlers.upload;</div><div class=\"line\"></div><div class=\"line\">server.start(router.route, handle);</div></pre></td></tr></table></figure>\n<p>handle</p>\n<p>URL/requestHandlers.start/start/start</p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    route(handle, pathname);</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>start()handlehandleroute()</p>\n<p>route.jsroute()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname]();</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>handle<a href=\"\">pathname</a>;</p>\n<p><a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">Server has started.</div><div class=\"line\">Request <span class=\"keyword\">for</span> /start received.</div><div class=\"line\">About to route a request <span class=\"keyword\">for</span> /start</div><div class=\"line\">Request handler <span class=\"string\">'start'</span> was called.</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">Request <span class=\"keyword\">for</span> / received.</div><div class=\"line\">About to route a request <span class=\"keyword\">for</span> /</div><div class=\"line\">Request handler <span class=\"string\">'start'</span> was called.</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Hello World</p>\n<p>Hello Worldserver.jsonRequest</p>\n<p>onRequest</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PHPRuby </p>\n<p>onRequestreturn()</p>\n<p></p>\n<p>requestHandler.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Start\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Upload\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>router.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> handle[pathname]();</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"404 Not found\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p></p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    <span class=\"keyword\">var</span> content = route(handle, pathname)</div><div class=\"line\">    response.write(content);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a>, Hello Start<a href=\"http://localhost:8888/upload\" target=\"_blank\" rel=\"external\">http://localhost:8888/upload</a> Hello Upload,<a href=\"http://localhost:8888/foo\" target=\"_blank\" rel=\"external\">http://localhost:8888/foo</a> 404 Not found</p>\n<p> <strong></strong></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p></p>\n<p>start10Hello StartJavaScriptsleep()Hack</p>\n<p>requestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sleep</span>(<span class=\"params\">milliSeconds</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> startTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime() &lt; startTime + milliSeconds);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sleep(<span class=\"number\">10000</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Start\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Upload\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>start()Node.js10Hello Startupload()</p>\n<blockquote>\n<p>10</p>\n</blockquote>\n<p></p>\n<p> <a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a> </p>\n<p><a href=\"http://localhost:8888/upload\" target=\"_blank\" rel=\"external\">http://localhost:8888/upload</a> </p>\n<p>/start/upload</p>\n<p> /start URL10/upload URL10sleep()</p>\n<p>start()<strong></strong></p>\n<p>Nodenode</p>\n<p><strong>Node.js</strong>  Node.jsevent loop  </p>\n<p>10</p>\n<p>Node.jsprobablyExpensiveFunction()Node.jscallbackFunction()</p>\n<p>Mixu<a href=\"http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/\" target=\"_blank\" rel=\"external\">node.js</a></p>\n<p><strong></strong></p>\n<p></p>\n<p>start</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> exec = <span class=\"built_in\">require</span>(<span class=\"string\">\"child_process\"</span>).exec;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> content = <span class=\"string\">\"empty\"</span>;</div><div class=\"line\"></div><div class=\"line\">  exec(<span class=\"string\">\"ls -lah\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">    content = stdout;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> content;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Upload\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>Node.js<strong>child_process</strong><strong>exec()</strong></p>\n<p>exec()Node.jsshellls -lah,/startURL</p>\n<p> contentemptyls -lahcontentcontent</p>\n<p><a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a> </p>\n<p>webempty</p>\n<p>exec()shell</p>\n<blockquote>\n<p>ls -lahfind /</p>\n</blockquote>\n<p></p>\n<p></p>\n<p>exec()</p>\n<p>exec()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">  content = stdout;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>exec()Node.js return content contentemptyexec()exec()</p>\n<p>ls -lah  </p>\n<p> find /1ls -lahfind //start URLHTTP  exec()Node.jsexec()find /</p>\n<p></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<p>Node.js <strong></strong></p>\n<p> -&gt;  -&gt; HTTP</p>\n<p><strong></strong> responseonRequest() </p>\n<p></p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    route(handle, pathname, response);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>route()responseroute()onRequest()responseroute()</p>\n<p>router.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname, response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname](response);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    response.writeHead(<span class=\"number\">404</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"404 Not found\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>response</p>\n<p>404</p>\n<p>requestHandler.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> exec = <span class=\"built_in\">require</span>(<span class=\"string\">\"child_process\"</span>).exec;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  exec(<span class=\"string\">\"ls -lah\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(stdout);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello Upload\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>response</p>\n<p>startexec()uploadHello Worldresponse</p>\n<p>node index.js</p>\n<p>/start/uploadrequestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> exec = <span class=\"built_in\">require</span>(<span class=\"string\">\"child_process\"</span>).exec;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  exec(<span class=\"string\">\"find /\"</span>,</div><div class=\"line\">    &#123; <span class=\"attr\">timeout</span>: <span class=\"number\">10000</span>, <span class=\"attr\">maxBuffer</span>: <span class=\"number\">20000</span>*<span class=\"number\">1024</span> &#125;,</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(stdout);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello Upload\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a> 10<a href=\"http://localhost:8888/upload\" target=\"_blank\" rel=\"external\">http://localhost:8888/upload</a> /start</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p> </p>\n<p>JavaScript</p>\n<p> POSTNode.js</p>\n<p>Node.jsPOST<br>Node.jsmultipart POST</p>\n<h4 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"POST\"></a>POST</h4><p>textareaPOST</p>\n<p>/startrequestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello Upload\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>Webby Awards<a href=\"http://localhost:8888/start\" target=\"_blank\" rel=\"external\">http://localhost:8888/start</a> </p>\n<p>MVCJavaScriptNode.js</p>\n<p> /uploadPOST</p>\n<p>POST</p>\n<p>POST  </p>\n<p>Node.jsPOST<strong>data</strong><strong>end</strong></p>\n<p>Node.js request<strong>listener</strong> requestHTTPonRequest</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">request.addListener(<span class=\"string\">\"data\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">chunk</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// called when a new chunk of data was received</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">request.addListener(<span class=\"string\">\"end\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// called when all chunks of data have been received</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p> request  response request </p>\n<p>HTTPPOST</p>\n<p> dataenddataPOSTend</p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> postData = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    request.setEncoding(<span class=\"string\">\"utf8\"</span>);</div><div class=\"line\"></div><div class=\"line\">    request.addListener(<span class=\"string\">\"data\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">postDataChunk</span>) </span>&#123;</div><div class=\"line\">      postData += postDataChunk;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Received POST data chunk '\"</span>+</div><div class=\"line\">      postDataChunk + <span class=\"string\">\"'.\"</span>);</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    request.addListener(<span class=\"string\">\"end\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      route(handle, pathname, response, postData);</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p> UTF-8datapostData end<strong></strong>POST</p>\n<p></p>\n<p>data</p>\n<p>/uploadpostDatarouter.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname, response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname](response, postData);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    response.writeHead(<span class=\"number\">404</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"404 Not found\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>requestHandlers.jsupload</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent: \"</span> + postData);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>POST</p>\n<p> POSTtext</p>\n<p>querystring</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent the text: \"</span>+</div><div class=\"line\">  querystring.parse(postData).text);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>POST</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>90IPO Node.js</p>\n<p>Felix Geisendrfer<strong>node-formidable</strong> POST  </p>\n<p>Node.jsNPMNode.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install formidable</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm info build Success: formidable@<span class=\"number\">1.0</span><span class=\"number\">.9</span></div><div class=\"line\">npm ok</div></pre></td></tr></table></figure>\n<p></p>\n<p>formidablerequire</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">\"formidable\"</span>);</div></pre></td></tr></table></figure>\n<p>HTTP POSTNode.jsIncomingFormrequest</p>\n<p>node-formidable</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">'formidable'</span>),</div><div class=\"line\">    http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>),</div><div class=\"line\">    util = <span class=\"built_in\">require</span>(<span class=\"string\">'util'</span>);</div><div class=\"line\"></div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (req.url == <span class=\"string\">'/upload'</span> &amp;&amp; req.method.toLowerCase() == <span class=\"string\">'post'</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">// parse a file upload</span></div><div class=\"line\">    <span class=\"keyword\">var</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</div><div class=\"line\">    form.parse(req, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, fields, files</span>) </span>&#123;</div><div class=\"line\">      res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">'content-type'</span>: <span class=\"string\">'text/plain'</span>&#125;);</div><div class=\"line\">      res.write(<span class=\"string\">'received upload:\\n\\n'</span>);</div><div class=\"line\">      res.end(util.inspect(&#123;<span class=\"attr\">fields</span>: fields, <span class=\"attr\">files</span>: files&#125;));</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// show a file upload form</span></div><div class=\"line\">  res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">'content-type'</span>: <span class=\"string\">'text/html'</span>&#125;);</div><div class=\"line\">  res.end(</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" enctype=\"multipart/form-data\" '</span>+</div><div class=\"line\">    <span class=\"string\">'method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"text\" name=\"title\"&gt;&lt;br&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"file\" name=\"upload\" multiple=\"multiple\"&gt;&lt;br&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Upload\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span></div><div class=\"line\">  );</div><div class=\"line\">&#125;).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p>nodeform.parsefiles</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">received upload:</div><div class=\"line\"></div><div class=\"line\">&#123; <span class=\"attr\">fields</span>: &#123; <span class=\"attr\">title</span>: <span class=\"string\">'Hello World'</span> &#125;,</div><div class=\"line\">  <span class=\"attr\">files</span>:</div><div class=\"line\">   &#123; <span class=\"attr\">upload</span>:</div><div class=\"line\">      &#123; <span class=\"attr\">size</span>: <span class=\"number\">1558</span>,</div><div class=\"line\">        <span class=\"attr\">path</span>: <span class=\"string\">'/tmp/1c747974a27a6292743669e91f29350b'</span>,</div><div class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">'us-flag.png'</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'image/png'</span>,</div><div class=\"line\">        <span class=\"attr\">lastModifiedDate</span>: Tue, <span class=\"number\">21</span> Jun <span class=\"number\">2011</span> <span class=\"number\">07</span>:<span class=\"number\">02</span>:<span class=\"number\">41</span> GMT,</div><div class=\"line\">        <span class=\"attr\">_writeStream</span>: [<span class=\"built_in\">Object</span>],</div><div class=\"line\">        <span class=\"attr\">length</span>: [Getter],</div><div class=\"line\">        <span class=\"attr\">filename</span>: [Getter],</div><div class=\"line\">        <span class=\"attr\">mime</span>: [Getter] &#125; &#125; &#125;</div></pre></td></tr></table></figure>\n<p>/tmp</p>\n<p> </p>\n<p><strong>fs</strong></p>\n<p>/showURL/tmp/test.png</p>\n<p>requestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" '</span>+</div><div class=\"line\">    <span class=\"string\">'content=\"text/html; charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent the text: \"</span>+</div><div class=\"line\">  querystring.parse(postData).text);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'show' was called.\"</span>);</div><div class=\"line\">  fs.readFile(<span class=\"string\">\"/tmp/test.png\"</span>, <span class=\"string\">\"binary\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, file</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error) &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">500</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(error + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"image/png\"</span>&#125;);</div><div class=\"line\">      response.write(file, <span class=\"string\">\"binary\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div><div class=\"line\">exports.show = show;</div></pre></td></tr></table></figure>\n<p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"built_in\">require</span>(<span class=\"string\">\"./router\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> requestHandlers = <span class=\"built_in\">require</span>(<span class=\"string\">\"./requestHandlers\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> handle = &#123;&#125;</div><div class=\"line\">handle[<span class=\"string\">\"/\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/start\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/upload\"</span>] = requestHandlers.upload;</div><div class=\"line\">handle[<span class=\"string\">\"/show\"</span>] = requestHandlers.show;</div><div class=\"line\"></div><div class=\"line\">server.start(router.route, handle);</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/show/tmp/test.png\" target=\"_blank\" rel=\"external\">http://localhost:8888/show/tmp/test.png</a></p>\n<p></p>\n<ul>\n<li>/start</li>\n<li>node-formidableupload/tmp/test.png</li>\n<li>/uploadURLHTML</li>\n</ul>\n<p>HTMLmultipart/form-dataUpload file requestHandler.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" '</span>+</div><div class=\"line\">    <span class=\"string\">'content=\"text/html; charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" enctype=\"multipart/form-data\" '</span>+</div><div class=\"line\">    <span class=\"string\">'method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"file\" name=\"upload\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Upload file\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent the text: \"</span>+</div><div class=\"line\">  querystring.parse(postData).text);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'show' was called.\"</span>);</div><div class=\"line\">  fs.readFile(<span class=\"string\">\"/tmp/test.png\"</span>, <span class=\"string\">\"binary\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, file</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error) &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">500</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(error + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"image/png\"</span>&#125;);</div><div class=\"line\">      response.write(file, <span class=\"string\">\"binary\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div><div class=\"line\">exports.show = show;</div></pre></td></tr></table></figure>\n<p> uploadrequestnode-formidableform.parse</p>\n<p>responsepostDatarequest </p>\n<p>postData   requestform.parseNode.js</p>\n<p>server.js  postDatarequest.setEncoding node-formidablerequest</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\">    route(handle, pathname, response, request);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p> router.js  postDatarequest</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname, response, request</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname](response, request);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    response.writeHead(<span class=\"number\">404</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"404 Not found\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>requestuploadnode-formidable/tmp/tmp/test.png PNG</p>\n<p><strong>fs.renameSync(path1,path2)</strong>  </p>\n<p>requestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>),</div><div class=\"line\">    formidable = <span class=\"built_in\">require</span>(<span class=\"string\">\"formidable\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" enctype=\"multipart/form-data\" '</span>+</div><div class=\"line\">    <span class=\"string\">'method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"file\" name=\"upload\" multiple=\"multiple\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Upload file\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, request</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"about to parse\"</span>);</div><div class=\"line\">  form.parse(request, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, fields, files</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"parsing done\"</span>);</div><div class=\"line\">    fs.renameSync(files.upload.path, <span class=\"string\">\"/tmp/test.png\"</span>);</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"received image:&lt;br/&gt;\"</span>);</div><div class=\"line\">    response.write(<span class=\"string\">\"&lt;img src='/show' /&gt;\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'show' was called.\"</span>);</div><div class=\"line\">  fs.readFile(<span class=\"string\">\"/tmp/test.png\"</span>, <span class=\"string\">\"binary\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, file</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error) &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">500</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(error + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"image/png\"</span>&#125;);</div><div class=\"line\">      response.write(file, <span class=\"string\">\"binary\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div><div class=\"line\">exports.show = show;</div></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Node.jsweb JavaScript</p>\n<p> Node.jsGET</p>\n<p>  </p>\n","excerpt":"<blockquote>\n<p><a href=\"http://www.nodebeginner.org/index-zh-cn.html\">Node</a></p>\n</blockquote>\n<h2 id=\"Node\"><a href=\"#Node\" class=\"headerlink\" title=\"Node\"></a>Node</h2><p> Manuel Kiessling<br> goddyzhao &amp; GrayZhang &amp; MondayChen</p>\n<p>Node.jsJavaScriptHello World</p>\n<h3 id=\"JavaScript\"><a href=\"#JavaScript\" class=\"headerlink\" title=\"JavaScript\"></a>JavaScript</h3><p>JavaScriptJavaScriptJavaScriptJavaScript </p>\n<p>Node.jsJavaScript</p>","more":"<p>JavaScriptNode.jsGoogleV8GoogleChromeJavaScriptJavaScript</p>\n<p>Node.js</p>\n<p>Node.js</p>\n<p>Node.js,Node.js<a href=\"https://github.com/joyent/node/wiki/Installation\"></a></p>\n<h4 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World\"></a>Hello World</h4><p>Node.jsHello World</p>\n<p>helloworld.jsSTDOUTHello World</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"Hello World\"</span>);</div></pre></td></tr></table></figure>\n<p>Node.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">node helloworld.js</div></pre></td></tr></table></figure></p>\n<p>Hello World </p>\n<p></p>\n<h3 id=\"Node-jsweb\"><a href=\"#Node-jsweb\" class=\"headerlink\" title=\"Node.jsweb\"></a><strong>Node.jsweb</strong></h3><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p><br><a href=\"http://domain/start\">http://domain/start</a> <br><a href=\"http://domain/upload\">http://domain/upload</a>  <br>Google</p>\n<p>Node.js</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p></p>\n<p>WebHTTP<br>URLrequest handler<br><br>POST<br>URL<br><br>PHPApache HTTPmod_php5<br>HTTPWebPHP</p>\n<p>Node.jsNode.jsHTTPWebWeb</p>\n<p>Node.js</p>\n<p>HTTP</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><p>Node.jsNode.js<br>Node.jsHTTP</p>\n<p></p>\n<p>main fileNode.js</p>\n<p>HTTP</p>\n<p>index.jsserver.js</p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p>HTTPNode.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">node server.js</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/\">http://localhost:8888/</a> Hello World</p>\n<p>HTTP</p>\n<h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><p>HTTP</p>\n<p>requireNode.js http  http </p>\n<p>http createServer  listen HTTP</p>\n<p> http.createServer </p>\n<p>8888<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> server = http.createServer();</div><div class=\"line\">server.listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure></p>\n<p>8888</p>\n<p>PHP createServer() </p>\n<p> createServer() JavaScript</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">say</span>(<span class=\"params\">word</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(word);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\">someFunction, value</span>) </span>&#123;</div><div class=\"line\">  someFunction(value);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">execute(say, <span class=\"string\">\"Hello\"</span>);</div></pre></td></tr></table></figure>\n<p> say execute say  say </p>\n<p> say execute  someFunction execute someFunction()  say </p>\n<p> say  execute  someFunction </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">execute</span>(<span class=\"params\">someFunction, value</span>) </span>&#123;</div><div class=\"line\">  someFunction(value);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">execute(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">word</span>)</span>&#123; <span class=\"built_in\">console</span>.log(word) &#125;, <span class=\"string\">\"Hello\"</span>);</div></pre></td></tr></table></figure>\n<p> execute  execute </p>\n<p>  </p>\n<p>JavaScriptJavaScript</p>\n<h4 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h4><p>HTTP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p> createServer </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Node.js</p>\n<p>Felix Geisendrfer<a href=\"http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb\">Understanding node.js</a></p>\n<p>Node.jsNode.jsWeb based application</p>\n<p> http.createServer HTTP</p>\n<p></p>\n<p>PHPApachePHP</p>\n<p>Node.js8888</p>\n<p>Node.js/JavaScript</p>\n<p></p>\n<p></p>\n<p>    </p>\n<p>Felix</p>\n<p>HTTP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request received.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div></pre></td></tr></table></figure>\n<blockquote>\n<p> onRequest  console.log HTTP</p>\n</blockquote>\n<p>node server.jsServer has started.<a href=\"http://localhost:8888/\">http://localhost:8888/</a> Request received.</p>\n<p>JavaScript</p>\n<blockquote>\n<p>Request received. <a href=\"http://localhost:8888/\">http://localhost:8888/</a>  <a href=\"http://localhost:8888/favicon.ico\">http://localhost:8888/favicon.ico</a> )</p>\n</blockquote>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> onRequest() </p>\n<p> onRequest()  request  response </p>\n<p>HTTP</p>\n<p> response.writeHead() HTTP200HTTPcontent-type response.write() HTTPHello World</p>\n<p> response.end() </p>\n<p> request </p>\n<p></p>\n<p>OK server.js HTTP index.js  server.js HTTP</p>\n<p>server.jsNode.js index.js </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\">http.createServer(...);</div></pre></td></tr></table></figure>\n<p>Node.jshttp</p>\n<p> http </p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> foo = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\">foo.createServer(...);</div></pre></td></tr></table></figure>\n<p>Node.js</p>\n<p> server.js </p>\n<p>  </p>\n<p>HTTP</p>\n<p> start </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request received.\"</span>);</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p> index.js HTTP server.js </p>\n<p> index.js </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"></div><div class=\"line\">server.start();</div></pre></td></tr></table></figure>\n<p>server</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">node index.js</div></pre></td></tr></table></figure>\n<p></p>\n<p>HTTPURL</p>\n<p> onRequest() </p>\n<p>HTTP<strong></strong></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>URLGETPOST</p>\n<p>HTTPURLGET/POSTHTTP</p>\n<p>requestonRequest()Node.JS<strong>url</strong><strong>querystring</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">                               url.parse(string).query</div><div class=\"line\">                                           |</div><div class=\"line\">           url.parse(string).pathname      |</div><div class=\"line\">                       |                   |</div><div class=\"line\">                       |                   |</div><div class=\"line\">                     ------ -------------------</div><div class=\"line\">http:<span class=\"comment\">//localhost:8888/start?foo=bar&amp;hello=world</span></div><div class=\"line\">                                ---       -----</div><div class=\"line\">                                 |          |</div><div class=\"line\">                                 |          |</div><div class=\"line\">              querystring(string)[<span class=\"string\">\"foo\"</span>]    |</div><div class=\"line\">                                            |</div><div class=\"line\">                         querystring(string)[<span class=\"string\">\"hello\"</span>]</div></pre></td></tr></table></figure>\n<p>querystringPOST</p>\n<p>onRequest()URL</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>URLURL</p>\n<p>/start/upload</p>\n<p>router.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">pathname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p></p>\n<p><a href=\"http://martinfowler.com/articles/injection.html\">Martin Fowlers</a></p>\n<p>start()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    route(pathname);</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>index.js<br><figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"built_in\">require</span>(<span class=\"string\">\"./router\"</span>);</div><div class=\"line\"></div><div class=\"line\">server.start(router.route);</div></pre></td></tr></table></figure></p>\n<p></p>\n<p>node index.jsURLHTTP</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">bash$ node index.js</div><div class=\"line\">Request <span class=\"keyword\">for</span> /foo received.</div><div class=\"line\">About to route a request <span class=\"keyword\">for</span> /foo</div></pre></td></tr></table></figure>\n<p>/favicon.ico</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>indexrouterroute</p>\n<p></p>\n<pre><code>\n</code></pre><p></p>\n<p></p>\n<p>Steve Yegge<a href=\"http://steve-yegge.blogspot.jp/2006/03/execution-in-kingdom-of-nouns.html\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>HTTP</p>\n<p>URL/start/upload</p>\n<p></p>\n<p></p>\n<p>  requestHandlers</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p></p>\n<p>requestHandlers</p>\n<p></p>\n<p>2URLif request == x then call handler y</p>\n<p>URL<strong>associative array</strong> </p>\n<p>JavaScript  JavaScript</p>\n<p><a href=\"http://msdn.microsoft.com/en-us/magazine/cc163419.aspx\">http://msdn.microsoft.com/en-us/magazine/cc163419.aspx</a> </p>\n<blockquote>\n<p>C++C#JavaScriptJavaScript/  JavaScript</p>\n</blockquote>\n<p>JavaScript/</p>\n<p>route()</p>\n<p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"built_in\">require</span>(<span class=\"string\">\"./router\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> requestHandlers = <span class=\"built_in\">require</span>(<span class=\"string\">\"./requestHandlers\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> handle = &#123;&#125;</div><div class=\"line\">handle[<span class=\"string\">\"/\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/start\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/upload\"</span>] = requestHandlers.upload;</div><div class=\"line\"></div><div class=\"line\">server.start(router.route, handle);</div></pre></td></tr></table></figure>\n<p>handle</p>\n<p>URL/requestHandlers.start/start/start</p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    route(handle, pathname);</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"Hello World\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>start()handlehandleroute()</p>\n<p>route.jsroute()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname]();</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>handle<a href=\"\">pathname</a>;</p>\n<p><a href=\"http://localhost:8888/start\">http://localhost:8888/start</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">Server has started.</div><div class=\"line\">Request <span class=\"keyword\">for</span> /start received.</div><div class=\"line\">About to route a request <span class=\"keyword\">for</span> /start</div><div class=\"line\">Request handler <span class=\"string\">'start'</span> was called.</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/start\">http://localhost:8888/start</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">Request <span class=\"keyword\">for</span> / received.</div><div class=\"line\">About to route a request <span class=\"keyword\">for</span> /</div><div class=\"line\">Request handler <span class=\"string\">'start'</span> was called.</div></pre></td></tr></table></figure>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Hello World</p>\n<p>Hello Worldserver.jsonRequest</p>\n<p>onRequest</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>PHPRuby </p>\n<p>onRequestreturn()</p>\n<p></p>\n<p>requestHandler.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Start\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Upload\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>router.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> handle[pathname]();</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"404 Not found\"</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p></p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    <span class=\"keyword\">var</span> content = route(handle, pathname)</div><div class=\"line\">    response.write(content);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/start\">http://localhost:8888/start</a>, Hello Start<a href=\"http://localhost:8888/upload\">http://localhost:8888/upload</a> Hello Upload,<a href=\"http://localhost:8888/foo\">http://localhost:8888/foo</a> 404 Not found</p>\n<p> <strong></strong></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p></p>\n<p>start10Hello StartJavaScriptsleep()Hack</p>\n<p>requestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sleep</span>(<span class=\"params\">milliSeconds</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> startTime = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</div><div class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime() &lt; startTime + milliSeconds);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sleep(<span class=\"number\">10000</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Start\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Upload\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>start()Node.js10Hello Startupload()</p>\n<blockquote>\n<p>10</p>\n</blockquote>\n<p></p>\n<p> <a href=\"http://localhost:8888/start\">http://localhost:8888/start</a> </p>\n<p><a href=\"http://localhost:8888/upload\">http://localhost:8888/upload</a> </p>\n<p>/start/upload</p>\n<p> /start URL10/upload URL10sleep()</p>\n<p>start()<strong></strong></p>\n<p>Nodenode</p>\n<p><strong>Node.js</strong>  Node.jsevent loop  </p>\n<p>10</p>\n<p>Node.jsprobablyExpensiveFunction()Node.jscallbackFunction()</p>\n<p>Mixu<a href=\"http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/\">node.js</a></p>\n<p><strong></strong></p>\n<p></p>\n<p>start</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> exec = <span class=\"built_in\">require</span>(<span class=\"string\">\"child_process\"</span>).exec;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">var</span> content = <span class=\"string\">\"empty\"</span>;</div><div class=\"line\"></div><div class=\"line\">  exec(<span class=\"string\">\"ls -lah\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">    content = stdout;</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> content;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">\"Hello Upload\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>Node.js<strong>child_process</strong><strong>exec()</strong></p>\n<p>exec()Node.jsshellls -lah,/startURL</p>\n<p> contentemptyls -lahcontentcontent</p>\n<p><a href=\"http://localhost:8888/start\">http://localhost:8888/start</a> </p>\n<p>webempty</p>\n<p>exec()shell</p>\n<blockquote>\n<p>ls -lahfind /</p>\n</blockquote>\n<p></p>\n<p></p>\n<p>exec()</p>\n<p>exec()</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">  content = stdout;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>exec()Node.js return content contentemptyexec()exec()</p>\n<p>ls -lah  </p>\n<p> find /1ls -lahfind //start URLHTTP  exec()Node.jsexec()find /</p>\n<p></p>\n<p></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  </p>\n<p>Node.js <strong></strong></p>\n<p> -&gt;  -&gt; HTTP</p>\n<p><strong></strong> responseonRequest() </p>\n<p></p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    route(handle, pathname, response);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p>route()responseroute()onRequest()responseroute()</p>\n<p>router.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname, response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname](response);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    response.writeHead(<span class=\"number\">404</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"404 Not found\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>response</p>\n<p>404</p>\n<p>requestHandler.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> exec = <span class=\"built_in\">require</span>(<span class=\"string\">\"child_process\"</span>).exec;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  exec(<span class=\"string\">\"ls -lah\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(stdout);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello Upload\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>response</p>\n<p>startexec()uploadHello Worldresponse</p>\n<p>node index.js</p>\n<p>/start/uploadrequestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> exec = <span class=\"built_in\">require</span>(<span class=\"string\">\"child_process\"</span>).exec;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  exec(<span class=\"string\">\"find /\"</span>,</div><div class=\"line\">    &#123; <span class=\"attr\">timeout</span>: <span class=\"number\">10000</span>, <span class=\"attr\">maxBuffer</span>: <span class=\"number\">20000</span>*<span class=\"number\">1024</span> &#125;,</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error, stdout, stderr</span>) </span>&#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(stdout);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello Upload\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/start\">http://localhost:8888/start</a> 10<a href=\"http://localhost:8888/upload\">http://localhost:8888/upload</a> /start</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p> </p>\n<p>JavaScript</p>\n<p> POSTNode.js</p>\n<p>Node.jsPOST<br>Node.jsmultipart POST</p>\n<h4 id=\"POST\"><a href=\"#POST\" class=\"headerlink\" title=\"POST\"></a>POST</h4><p>textareaPOST</p>\n<p>/startrequestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"Hello Upload\"</span>);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>Webby Awards<a href=\"http://localhost:8888/start\">http://localhost:8888/start</a> </p>\n<p>MVCJavaScriptNode.js</p>\n<p> /uploadPOST</p>\n<p>POST</p>\n<p>POST  </p>\n<p>Node.jsPOST<strong>data</strong><strong>end</strong></p>\n<p>Node.js request<strong>listener</strong> requestHTTPonRequest</p>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">request.addListener(<span class=\"string\">\"data\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">chunk</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// called when a new chunk of data was received</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">request.addListener(<span class=\"string\">\"end\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// called when all chunks of data have been received</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p> request  response request </p>\n<p>HTTPPOST</p>\n<p> dataenddataPOSTend</p>\n<p>server.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> postData = <span class=\"string\">\"\"</span>;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\"></div><div class=\"line\">    request.setEncoding(<span class=\"string\">\"utf8\"</span>);</div><div class=\"line\"></div><div class=\"line\">    request.addListener(<span class=\"string\">\"data\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">postDataChunk</span>) </span>&#123;</div><div class=\"line\">      postData += postDataChunk;</div><div class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Received POST data chunk '\"</span>+</div><div class=\"line\">      postDataChunk + <span class=\"string\">\"'.\"</span>);</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">    request.addListener(<span class=\"string\">\"end\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      route(handle, pathname, response, postData);</div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p> UTF-8datapostData end<strong></strong>POST</p>\n<p></p>\n<p>data</p>\n<p>/uploadpostDatarouter.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname, response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname](response, postData);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    response.writeHead(<span class=\"number\">404</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"404 Not found\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>requestHandlers.jsupload</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent: \"</span> + postData);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>POST</p>\n<p> POSTtext</p>\n<p>querystring</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent the text: \"</span>+</div><div class=\"line\">  querystring.parse(postData).text);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div></pre></td></tr></table></figure>\n<p>POST</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>\n<p>90IPO Node.js</p>\n<p>Felix Geisendrfer<strong>node-formidable</strong> POST  </p>\n<p>Node.jsNPMNode.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm install formidable</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">npm info build Success: formidable@<span class=\"number\">1.0</span><span class=\"number\">.9</span></div><div class=\"line\">npm ok</div></pre></td></tr></table></figure>\n<p></p>\n<p>formidablerequire</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">\"formidable\"</span>);</div></pre></td></tr></table></figure>\n<p>HTTP POSTNode.jsIncomingFormrequest</p>\n<p>node-formidable</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">'formidable'</span>),</div><div class=\"line\">    http = <span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>),</div><div class=\"line\">    util = <span class=\"built_in\">require</span>(<span class=\"string\">'util'</span>);</div><div class=\"line\"></div><div class=\"line\">http.createServer(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (req.url == <span class=\"string\">'/upload'</span> &amp;&amp; req.method.toLowerCase() == <span class=\"string\">'post'</span>) &#123;</div><div class=\"line\">    <span class=\"comment\">// parse a file upload</span></div><div class=\"line\">    <span class=\"keyword\">var</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</div><div class=\"line\">    form.parse(req, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, fields, files</span>) </span>&#123;</div><div class=\"line\">      res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">'content-type'</span>: <span class=\"string\">'text/plain'</span>&#125;);</div><div class=\"line\">      res.write(<span class=\"string\">'received upload:\\n\\n'</span>);</div><div class=\"line\">      res.end(util.inspect(&#123;<span class=\"attr\">fields</span>: fields, <span class=\"attr\">files</span>: files&#125;));</div><div class=\"line\">    &#125;);</div><div class=\"line\">    <span class=\"keyword\">return</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// show a file upload form</span></div><div class=\"line\">  res.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">'content-type'</span>: <span class=\"string\">'text/html'</span>&#125;);</div><div class=\"line\">  res.end(</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" enctype=\"multipart/form-data\" '</span>+</div><div class=\"line\">    <span class=\"string\">'method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"text\" name=\"title\"&gt;&lt;br&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"file\" name=\"upload\" multiple=\"multiple\"&gt;&lt;br&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Upload\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span></div><div class=\"line\">  );</div><div class=\"line\">&#125;).listen(<span class=\"number\">8888</span>);</div></pre></td></tr></table></figure>\n<p>nodeform.parsefiles</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">received upload:</div><div class=\"line\"></div><div class=\"line\">&#123; <span class=\"attr\">fields</span>: &#123; <span class=\"attr\">title</span>: <span class=\"string\">'Hello World'</span> &#125;,</div><div class=\"line\">  <span class=\"attr\">files</span>:</div><div class=\"line\">   &#123; <span class=\"attr\">upload</span>:</div><div class=\"line\">      &#123; <span class=\"attr\">size</span>: <span class=\"number\">1558</span>,</div><div class=\"line\">        <span class=\"attr\">path</span>: <span class=\"string\">'/tmp/1c747974a27a6292743669e91f29350b'</span>,</div><div class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">'us-flag.png'</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'image/png'</span>,</div><div class=\"line\">        <span class=\"attr\">lastModifiedDate</span>: Tue, <span class=\"number\">21</span> Jun <span class=\"number\">2011</span> <span class=\"number\">07</span>:<span class=\"number\">02</span>:<span class=\"number\">41</span> GMT,</div><div class=\"line\">        <span class=\"attr\">_writeStream</span>: [<span class=\"built_in\">Object</span>],</div><div class=\"line\">        <span class=\"attr\">length</span>: [Getter],</div><div class=\"line\">        <span class=\"attr\">filename</span>: [Getter],</div><div class=\"line\">        <span class=\"attr\">mime</span>: [Getter] &#125; &#125; &#125;</div></pre></td></tr></table></figure>\n<p>/tmp</p>\n<p> </p>\n<p><strong>fs</strong></p>\n<p>/showURL/tmp/test.png</p>\n<p>requestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" '</span>+</div><div class=\"line\">    <span class=\"string\">'content=\"text/html; charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;textarea name=\"text\" rows=\"20\" cols=\"60\"&gt;&lt;/textarea&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Submit text\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent the text: \"</span>+</div><div class=\"line\">  querystring.parse(postData).text);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'show' was called.\"</span>);</div><div class=\"line\">  fs.readFile(<span class=\"string\">\"/tmp/test.png\"</span>, <span class=\"string\">\"binary\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, file</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error) &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">500</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(error + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"image/png\"</span>&#125;);</div><div class=\"line\">      response.write(file, <span class=\"string\">\"binary\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div><div class=\"line\">exports.show = show;</div></pre></td></tr></table></figure>\n<p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> server = <span class=\"built_in\">require</span>(<span class=\"string\">\"./server\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> router = <span class=\"built_in\">require</span>(<span class=\"string\">\"./router\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> requestHandlers = <span class=\"built_in\">require</span>(<span class=\"string\">\"./requestHandlers\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> handle = &#123;&#125;</div><div class=\"line\">handle[<span class=\"string\">\"/\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/start\"</span>] = requestHandlers.start;</div><div class=\"line\">handle[<span class=\"string\">\"/upload\"</span>] = requestHandlers.upload;</div><div class=\"line\">handle[<span class=\"string\">\"/show\"</span>] = requestHandlers.show;</div><div class=\"line\"></div><div class=\"line\">server.start(router.route, handle);</div></pre></td></tr></table></figure>\n<p><a href=\"http://localhost:8888/show/tmp/test.png\">http://localhost:8888/show/tmp/test.png</a></p>\n<p></p>\n<ul>\n<li>/start</li>\n<li>node-formidableupload/tmp/test.png</li>\n<li>/uploadURLHTML</li>\n</ul>\n<p>HTMLmultipart/form-dataUpload file requestHandler.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" '</span>+</div><div class=\"line\">    <span class=\"string\">'content=\"text/html; charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" enctype=\"multipart/form-data\" '</span>+</div><div class=\"line\">    <span class=\"string\">'method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"file\" name=\"upload\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Upload file\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\">  response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">  response.write(<span class=\"string\">\"You've sent the text: \"</span>+</div><div class=\"line\">  querystring.parse(postData).text);</div><div class=\"line\">  response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\">response, postData</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'show' was called.\"</span>);</div><div class=\"line\">  fs.readFile(<span class=\"string\">\"/tmp/test.png\"</span>, <span class=\"string\">\"binary\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, file</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error) &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">500</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(error + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"image/png\"</span>&#125;);</div><div class=\"line\">      response.write(file, <span class=\"string\">\"binary\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div><div class=\"line\">exports.show = show;</div></pre></td></tr></table></figure>\n<p> uploadrequestnode-formidableform.parse</p>\n<p>responsepostDatarequest </p>\n<p>postData   requestform.parseNode.js</p>\n<p>server.js  postDatarequest.setEncoding node-formidablerequest</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">\"http\"</span>);</div><div class=\"line\"><span class=\"keyword\">var</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">\"url\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">route, handle</span>) </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">onRequest</span>(<span class=\"params\">request, response</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> pathname = url.parse(request.url).pathname;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request for \"</span> + pathname + <span class=\"string\">\" received.\"</span>);</div><div class=\"line\">    route(handle, pathname, response, request);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  http.createServer(onRequest).listen(<span class=\"number\">8888</span>);</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Server has started.\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div></pre></td></tr></table></figure>\n<p> router.js  postDatarequest</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">route</span>(<span class=\"params\">handle, pathname, response, request</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"About to route a request for \"</span> + pathname);</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> handle[pathname] === <span class=\"string\">'function'</span>) &#123;</div><div class=\"line\">    handle[pathname](response, request);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"No request handler found for \"</span> + pathname);</div><div class=\"line\">    response.writeHead(<span class=\"number\">404</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"404 Not found\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.route = route;</div></pre></td></tr></table></figure>\n<p>requestuploadnode-formidable/tmp/tmp/test.png PNG</p>\n<p><strong>fs.renameSync(path1,path2)</strong>  </p>\n<p>requestHandlers.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> querystring = <span class=\"built_in\">require</span>(<span class=\"string\">\"querystring\"</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>),</div><div class=\"line\">    formidable = <span class=\"built_in\">require</span>(<span class=\"string\">\"formidable\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">start</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'start' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> body = <span class=\"string\">'&lt;html&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;meta http-equiv=\"Content-Type\" content=\"text/html; '</span>+</div><div class=\"line\">    <span class=\"string\">'charset=UTF-8\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/head&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;form action=\"/upload\" enctype=\"multipart/form-data\" '</span>+</div><div class=\"line\">    <span class=\"string\">'method=\"post\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"file\" name=\"upload\" multiple=\"multiple\"&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;input type=\"submit\" value=\"Upload file\" /&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/form&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/body&gt;'</span>+</div><div class=\"line\">    <span class=\"string\">'&lt;/html&gt;'</span>;</div><div class=\"line\"></div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(body);</div><div class=\"line\">    response.end();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">response, request</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'upload' was called.\"</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"about to parse\"</span>);</div><div class=\"line\">  form.parse(request, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, fields, files</span>) </span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"parsing done\"</span>);</div><div class=\"line\">    fs.renameSync(files.upload.path, <span class=\"string\">\"/tmp/test.png\"</span>);</div><div class=\"line\">    response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/html\"</span>&#125;);</div><div class=\"line\">    response.write(<span class=\"string\">\"received image:&lt;br/&gt;\"</span>);</div><div class=\"line\">    response.write(<span class=\"string\">\"&lt;img src='/show' /&gt;\"</span>);</div><div class=\"line\">    response.end();</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">show</span>(<span class=\"params\">response</span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">\"Request handler 'show' was called.\"</span>);</div><div class=\"line\">  fs.readFile(<span class=\"string\">\"/tmp/test.png\"</span>, <span class=\"string\">\"binary\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error, file</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span>(error) &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">500</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain\"</span>&#125;);</div><div class=\"line\">      response.write(error + <span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">      response.writeHead(<span class=\"number\">200</span>, &#123;<span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"image/png\"</span>&#125;);</div><div class=\"line\">      response.write(file, <span class=\"string\">\"binary\"</span>);</div><div class=\"line\">      response.end();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">exports.start = start;</div><div class=\"line\">exports.upload = upload;</div><div class=\"line\">exports.show = show;</div></pre></td></tr></table></figure>\n<p></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Node.jsweb JavaScript</p>\n<p> Node.jsGET</p>\n<p>  </p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cix8kaj3h0002bxs6dxgppuzo","category_id":"cix8kaj3w0006bxs6bzk63kra","_id":"cix8kaj4d000fbxs6rv7iogcn"},{"post_id":"cix8kaj3l0004bxs6wizadlw9","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj4p000nbxs6w39vmen1"},{"post_id":"cix8kaj4h000kbxs6tiyvg0sh","category_id":"cix8kaj3w0006bxs6bzk63kra","_id":"cix8kaj4u000sbxs60ez6fj4x"},{"post_id":"cix8kaj410008bxs6j8x0dglc","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj4w000xbxs62bn88n5l"},{"post_id":"cix8kaj4s000rbxs6n717ql5g","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj4y0010bxs632su8hji"},{"post_id":"cix8kaj420009bxs6au58dxam","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj500015bxs6l06gvm9f"},{"post_id":"cix8kaj4u000ubxs6w1vak2f1","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj510018bxs69m4o2tay"},{"post_id":"cix8kaj4x000zbxs6vij8wit7","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj55001dbxs699lo4l91"},{"post_id":"cix8kaj46000abxs60x3e3xyj","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj59001gbxs6tvre9yym"},{"post_id":"cix8kaj4z0012bxs68t759qya","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5d001lbxs620nbtcon"},{"post_id":"cix8kaj500017bxs6rrenl4zl","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj5e001obxs68i7vrkzz"},{"post_id":"cix8kaj4a000ebxs6gh4ldmv9","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5g001rbxs6mt1rdpl3"},{"post_id":"cix8kaj52001abxs625fljjiq","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj5i001vbxs6seef4fgw"},{"post_id":"cix8kaj56001fbxs6k185lj0f","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5m001ybxs6jtlw6dus"},{"post_id":"cix8kaj4d000gbxs667ak3zb7","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5p0022bxs6flt7epd5"},{"post_id":"cix8kaj59001ibxs622pi4num","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5r0025bxs6zum4g8k5"},{"post_id":"cix8kaj5d001nbxs6s1m2yhg0","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5s0029bxs6mpbbm88a"},{"post_id":"cix8kaj4k000mbxs6ltqfvndk","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5t002cbxs6d5ppifbg"},{"post_id":"cix8kaj5f001qbxs670lmwfes","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj5v002gbxs60wwg1ewv"},{"post_id":"cix8kaj5h001ubxs6eflf9zga","category_id":"cix8kaj48000bbxs6hw928tpv","_id":"cix8kaj5x002jbxs6dpyiyabn"},{"post_id":"cix8kaj5i001xbxs6o2vmlkf1","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5x002lbxs6kxw42o23"},{"post_id":"cix8kaj5m0021bxs6vcvynsxr","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5x002nbxs6ehk5j4pr"},{"post_id":"cix8kaj5p0024bxs6bq1p2hhc","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5y002pbxs67qbmd7rb"},{"post_id":"cix8kaj5r0027bxs66mwab3r9","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5y002rbxs6a5kr26gt"},{"post_id":"cix8kaj5s002bbxs67cl1fg4u","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5y002sbxs6a4nriy5t"},{"post_id":"cix8kaj5t002ebxs6e6v8eh9i","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5y002vbxs68givw29q"},{"post_id":"cix8kaj5v002hbxs674jtp4x9","category_id":"cix8kaj4r000obxs63x5xzzwk","_id":"cix8kaj5y002wbxs6tvofbesk"},{"post_id":"cix8kaj6k0032bxs6byemy14u","category_id":"cix8kaj3w0006bxs6bzk63kra","_id":"cix8kaj6o0034bxs6fy05zevu"}],"PostTag":[{"post_id":"cix8kaj3h0002bxs6dxgppuzo","tag_id":"cix8kaj400007bxs6fk0ka63v","_id":"cix8kaj49000dbxs6hbckheku"},{"post_id":"cix8kaj4a000ebxs6gh4ldmv9","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj4g000jbxs6wjwydzki"},{"post_id":"cix8kaj3l0004bxs6wizadlw9","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj4k000lbxs69tufnd12"},{"post_id":"cix8kaj4d000gbxs667ak3zb7","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj4s000qbxs6z48d2wpy"},{"post_id":"cix8kaj4h000kbxs6tiyvg0sh","tag_id":"cix8kaj400007bxs6fk0ka63v","_id":"cix8kaj4u000tbxs63805qsbc"},{"post_id":"cix8kaj410008bxs6j8x0dglc","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj4w000ybxs6zofonyus"},{"post_id":"cix8kaj420009bxs6au58dxam","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj4y0011bxs6vzhhozkx"},{"post_id":"cix8kaj4u000ubxs6w1vak2f1","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj500016bxs6im3ufqkx"},{"post_id":"cix8kaj46000abxs60x3e3xyj","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj510019bxs6gci1idi0"},{"post_id":"cix8kaj4z0012bxs68t759qya","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj55001ebxs6foy8qt7o"},{"post_id":"cix8kaj4k000mbxs6ltqfvndk","tag_id":"cix8kaj500013bxs6r9rdi56c","_id":"cix8kaj59001hbxs6bxb94dxw"},{"post_id":"cix8kaj56001fbxs6k185lj0f","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj5d001mbxs6kr88al9a"},{"post_id":"cix8kaj4s000rbxs6n717ql5g","tag_id":"cix8kaj500013bxs6r9rdi56c","_id":"cix8kaj5e001pbxs6fl5abyvw"},{"post_id":"cix8kaj59001ibxs622pi4num","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj5g001sbxs6y067k0me"},{"post_id":"cix8kaj4x000zbxs6vij8wit7","tag_id":"cix8kaj5c001kbxs68d9kgs78","_id":"cix8kaj5i001wbxs6iqv6sgd4"},{"post_id":"cix8kaj5f001qbxs670lmwfes","tag_id":"cix8kaj500013bxs6r9rdi56c","_id":"cix8kaj5m001zbxs6actrr0vp"},{"post_id":"cix8kaj5h001ubxs6eflf9zga","tag_id":"cix8kaj5c001kbxs68d9kgs78","_id":"cix8kaj5p0023bxs68z3c03uk"},{"post_id":"cix8kaj500017bxs6rrenl4zl","tag_id":"cix8kaj5c001kbxs68d9kgs78","_id":"cix8kaj5r0026bxs69enm3wfg"},{"post_id":"cix8kaj5i001xbxs6o2vmlkf1","tag_id":"cix8kaj49000cbxs6k4ci0min","_id":"cix8kaj5s002abxs6xevxnz38"},{"post_id":"cix8kaj52001abxs625fljjiq","tag_id":"cix8kaj5m0020bxs6zb1e83hv","_id":"cix8kaj5t002dbxs67uiyr5v4"},{"post_id":"cix8kaj5d001nbxs6s1m2yhg0","tag_id":"cix8kaj5s0028bxs61r5eba6h","_id":"cix8kaj5w002ibxs6omfpqdiz"},{"post_id":"cix8kaj5m0021bxs6vcvynsxr","tag_id":"cix8kaj5v002fbxs6rs28henp","_id":"cix8kaj5x002mbxs6lgl4x4lz"},{"post_id":"cix8kaj5p0024bxs6bq1p2hhc","tag_id":"cix8kaj5v002fbxs6rs28henp","_id":"cix8kaj5y002qbxs694ibvn7s"},{"post_id":"cix8kaj5r0027bxs66mwab3r9","tag_id":"cix8kaj5x002obxs6zwzosoyc","_id":"cix8kaj5y002ubxs68o2zvtgx"},{"post_id":"cix8kaj5s002bbxs67cl1fg4u","tag_id":"cix8kaj5x002obxs6zwzosoyc","_id":"cix8kaj5y002ybxs6bpimili4"},{"post_id":"cix8kaj5t002ebxs6e6v8eh9i","tag_id":"cix8kaj5y002xbxs6doc70set","_id":"cix8kaj5z0030bxs64ekosxev"},{"post_id":"cix8kaj5v002hbxs674jtp4x9","tag_id":"cix8kaj5y002zbxs6rm3t2bm3","_id":"cix8kaj5z0031bxs6nszur2xr"},{"post_id":"cix8kaj6k0032bxs6byemy14u","tag_id":"cix8kaj6m0033bxs606w6kut8","_id":"cix8kaj6p0035bxs6ty8fxpxu"}],"Tag":[{"name":"read","_id":"cix8kaj400007bxs6fk0ka63v"},{"name":"accumulation","_id":"cix8kaj49000cbxs6k4ci0min"},{"name":"Android JNI","_id":"cix8kaj500013bxs6r9rdi56c"},{"name":"technology","_id":"cix8kaj5c001kbxs68d9kgs78"},{"name":"RxJava","_id":"cix8kaj5m0020bxs6zb1e83hv"},{"name":"Android design pattern","_id":"cix8kaj5s0028bxs61r5eba6h"},{"name":"gradle","_id":"cix8kaj5v002fbxs6rs28henp"},{"name":"Hexo","_id":"cix8kaj5x002obxs6zwzosoyc"},{"name":"EJS","_id":"cix8kaj5y002xbxs6doc70set"},{"name":"Android Patch Update","_id":"cix8kaj5y002zbxs6rm3t2bm3"},{"name":"nodejs","_id":"cix8kaj6m0033bxs606w6kut8"}]}}